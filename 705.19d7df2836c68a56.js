(self.webpackChunkmaas_portal_clr=self.webpackChunkmaas_portal_clr||[]).push([[705],{6482:(Qe,F,O)=>{"use strict";O.d(F,{u:()=>A});var n=O(6994),c=function(k){return k[k.User=1]="User",k[k.OrgAdmin=2]="OrgAdmin",k[k.SiteAdmin=4]="SiteAdmin",k[k.UserAdmin=8]="UserAdmin",k[k.VesselAdmin=16]="VesselAdmin",k[k.ServiceAdmin=32]="ServiceAdmin",k[k.DeviceAdmin=64]="DeviceAdmin",k[k.MMSAdmin=128]="MMSAdmin",k[k.ApproveOrg=256]="ApproveOrg",k[k.EntityAdmin=512]="EntityAdmin",k}(c||{}),u=O(8974),D=O(3205),w=O(897),E=O(217),b=O(5950),o=O(2514),_=O(9238),C=O(8745);const v={[E.X.SuperAdmin]:[w.B.SuperAdmin,w.B.OrgAdmin,w.B.UserAdmin,w.B.User],[E.X.OrgAdmin]:[w.B.OrgAdmin,w.B.UserAdmin,w.B.User],[E.X.UserAdmin]:[w.B.UserAdmin,w.B.User],[E.X.User]:[w.B.User]};let A=(()=>{class k{constructor(P,X,Y){this.keycloakService=P,this.myUserService=X,this.router=Y,this.userSubject=new u.t(null),this.user$=this.userSubject.asObservable(),this.isAuthenticatedSubject=new u.t(!1),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable(),this.initialize()}initialize(){var P=this;return(0,n.A)(function*(){const X=yield P.keycloakService.isLoggedIn();P.setAuthenticated(X),X&&P.fetchUserInfo()})()}login(){var P=this;return(0,n.A)(function*(){const X=window.location;yield P.keycloakService.login({redirectUri:X.protocol+"//"+X.host+"/pages"});const Y=yield P.keycloakService.isLoggedIn();P.setAuthenticated(Y),Y&&P.fetchUserInfo()})()}setAuthenticated(P){this.isAuthenticatedSubject.next(P)}logout(){var P=this;return(0,n.A)(function*(){const X=window.location;yield P.keycloakService.logout(X.protocol+"//"+X.host+"/login"),P.setAuthenticated(!1)})()}fetchUserInfo(){var P=this;return(0,n.A)(function*(){if(P.userSubject.value)return P.userSubject.value;{let X;try{if(X=yield(0,D._)(P.myUserService.getMyUser()),X)return P.userSubject.next(X),X}catch(Y){return void console.error("Failed to fetch user info:",Y)}return X?(P.userSubject.next(X),X):void 0}})()}isAuthenticated(){var P=this;return(0,n.A)(function*(){const X=yield P.keycloakService.isLoggedIn();return P.setAuthenticated(X),Promise.resolve(X)})()}getToken(){var P=this;return(0,n.A)(function*(){return P.keycloakService.getToken()})()}getOrgMrn(){var P=this;return(0,n.A)(function*(){return P.keycloakService.getKeycloakInstance().tokenParsed?P.keycloakService.getKeycloakInstance().tokenParsed.org:""})()}getUserName(){var P=this;return(0,n.A)(function*(){return P.keycloakService.getKeycloakInstance().tokenParsed?P.keycloakService.getKeycloakInstance().tokenParsed.name:""})()}getUserMrn(){var P=this;return(0,n.A)(function*(){return P.keycloakService.getKeycloakInstance().tokenParsed?P.keycloakService.getKeycloakInstance().tokenParsed.mrn:""})()}getUserRoles(){var P=this;return(0,n.A)(function*(){return P.keycloakService.getKeycloakInstance().tokenParsed?P.keycloakService.getKeycloakInstance().tokenParsed.roles:[]})()}getUserPermission(){var P=this;return(0,n.A)(function*(){return P.keycloakService.getKeycloakInstance().tokenParsed?new Promise(function(){var X=(0,n.A)(function*(Y,de){yield P.keycloakService.getKeycloakInstance().tokenParsed.roles});return function(Y,de){return X.apply(this,arguments)}}()):c.User})()}hasPermission(P){return!!this.keycloakService.isLoggedIn()&&(v[this.userSubject.value?.role].includes(P)??!1)}static#e=this.\u0275fac=function(X){return new(X||k)(b.KVO(o.F1),b.KVO(_.tv),b.KVO(C.Ix))};static#t=this.\u0275prov=b.jDH({token:k,factory:k.\u0275fac,providedIn:"root"})}return k})()},1748:(Qe,F,O)=>{"use strict";O.d(F,{Y:()=>y});const n=[{value:"AF",code3:"AFG",title:"Afghanistan",valueText:"Afghanistan"},{value:"AL",code3:"ALB",title:"Albania",valueText:"Albania"},{value:"DZ",code3:"DZA",title:"Algeria",valueText:"Algeria"},{value:"AS",code3:"ASM",title:"American Samoa",valueText:"American Samoa"},{value:"AD",code3:"AND",title:"Andorra",valueText:"Andorra"},{value:"AO",code3:"AGO",title:"Angola",valueText:"Angola"},{value:"AI",code3:"AIA",title:"Anguilla",valueText:"Anguilla"},{value:"AQ",code3:"ATA",title:"Antarctica",valueText:"Antarctica"},{value:"AG",code3:"ATG",title:"Antigua and Barbuda",valueText:"Antigua and Barbuda"},{value:"AR",code3:"ARG",title:"Argentina",valueText:"Argentina"},{value:"AM",code3:"ARM",title:"Armenia",valueText:"Armenia"},{value:"AW",code3:"ABW",title:"Aruba",valueText:"Aruba"},{value:"AU",code3:"AUS",title:"Australia",valueText:"Australia"},{value:"AT",code3:"AUT",title:"Austria",valueText:"Austria"},{value:"AZ",code3:"AZE",title:"Azerbaijan",valueText:"Azerbaijan"},{value:"BS",code3:"BHS",title:"Bahamas (the)",valueText:"Bahamas (the)"},{value:"BH",code3:"BHR",title:"Bahrain",valueText:"Bahrain"},{value:"BD",code3:"BGD",title:"Bangladesh",valueText:"Bangladesh"},{value:"BB",code3:"BRB",title:"Barbados",valueText:"Barbados"},{value:"BY",code3:"BLR",title:"Belarus",valueText:"Belarus"},{value:"BE",code3:"BEL",title:"Belgium",valueText:"Belgium"},{value:"BZ",code3:"BLZ",title:"Belize",valueText:"Belize"},{value:"BJ",code3:"BEN",title:"Benin",valueText:"Benin"},{value:"BM",code3:"BMU",title:"Bermuda",valueText:"Bermuda"},{value:"BT",code3:"BTN",title:"Bhutan",valueText:"Bhutan"},{value:"BO",code3:"BOL",title:"Bolivia (Plurinational State of)",valueText:"Bolivia (Plurinational State of)"},{value:"BQ",code3:"BES",title:"Bonaire, Sint Eustatius and Saba",valueText:"Bonaire, Sint Eustatius and Saba"},{value:"BA",code3:"BIH",title:"Bosnia and Herzegovina",valueText:"Bosnia and Herzegovina"},{value:"BW",code3:"BWA",title:"Botswana",valueText:"Botswana"},{value:"BV",code3:"BVT",title:"Bouvet Island",valueText:"Bouvet Island"},{value:"BR",code3:"BRA",title:"Brazil",valueText:"Brazil"},{value:"IO",code3:"IOT",title:"British Indian Ocean Territory (the)",valueText:"British Indian Ocean Territory (the)"},{value:"BN",code3:"BRN",title:"Brunei Darussalam",valueText:"Brunei Darussalam"},{value:"BG",code3:"BGR",title:"Bulgaria",valueText:"Bulgaria"},{value:"BF",code3:"BFA",title:"Burkina Faso",valueText:"Burkina Faso"},{value:"BI",code3:"BDI",title:"Burundi",valueText:"Burundi"},{value:"CV",code3:"CPV",title:"Cabo Verde",valueText:"Cabo Verde"},{value:"KH",code3:"KHM",title:"Cambodia",valueText:"Cambodia"},{value:"CM",code3:"CMR",title:"Cameroon",valueText:"Cameroon"},{value:"CA",code3:"CAN",title:"Canada",valueText:"Canada"},{value:"KY",code3:"CYM",title:"Cayman Islands (the)",valueText:"Cayman Islands (the)"},{value:"CF",code3:"CAF",title:"Central African Republic (the)",valueText:"Central African Republic (the)"},{value:"TD",code3:"TCD",title:"Chad",valueText:"Chad"},{value:"CL",code3:"CHL",title:"Chile",valueText:"Chile"},{value:"CN",code3:"CHN",title:"China",valueText:"China"},{value:"CX",code3:"CXR",title:"Christmas Island",valueText:"Christmas Island"},{value:"CC",code3:"CCK",title:"Cocos (Keeling) Islands (the)",valueText:"Cocos (Keeling) Islands (the)"},{value:"CO",code3:"COL",title:"Colombia",valueText:"Colombia"},{value:"KM",code3:"COM",title:"Comoros (the)",valueText:"Comoros (the)"},{value:"CD",code3:"COD",title:"Congo (the Democratic Republic of the)",valueText:"Congo (the Democratic Republic of the)"},{value:"CG",code3:"COG",title:"Congo (the)",valueText:"Congo (the)"},{value:"CK",code3:"COK",title:"Cook Islands (the)",valueText:"Cook Islands (the)"},{value:"CR",code3:"CRI",title:"Costa Rica",valueText:"Costa Rica"},{value:"HR",code3:"HRV",title:"Croatia",valueText:"Croatia"},{value:"CU",code3:"CUB",title:"Cuba",valueText:"Cuba"},{value:"CW",code3:"CUW",title:"Cura\xe7ao",valueText:"Cura\xe7ao"},{value:"CY",code3:"CYP",title:"Cyprus",valueText:"Cyprus"},{value:"CZ",code3:"CZE",title:"Czechia",valueText:"Czechia"},{value:"CI",code3:"CIV",title:"C\xf4te d'Ivoire",valueText:"C\xf4te d'Ivoire"},{value:"DK",code3:"DNK",title:"Denmark",valueText:"Denmark"},{value:"DJ",code3:"DJI",title:"Djibouti",valueText:"Djibouti"},{value:"DM",code3:"DMA",title:"Dominica",valueText:"Dominica"},{value:"DO",code3:"DOM",title:"Dominican Republic (the)",valueText:"Dominican Republic (the)"},{value:"EC",code3:"ECU",title:"Ecuador",valueText:"Ecuador"},{value:"EG",code3:"EGY",title:"Egypt",valueText:"Egypt"},{value:"SV",code3:"SLV",title:"El Salvador",valueText:"El Salvador"},{value:"GQ",code3:"GNQ",title:"Equatorial Guinea",valueText:"Equatorial Guinea"},{value:"ER",code3:"ERI",title:"Eritrea",valueText:"Eritrea"},{value:"EE",code3:"EST",title:"Estonia",valueText:"Estonia"},{value:"SZ",code3:"SWZ",title:"Eswatini",valueText:"Eswatini"},{value:"ET",code3:"ETH",title:"Ethiopia",valueText:"Ethiopia"},{value:"FK",code3:"FLK",title:"Falkland Islands (the) [Malvinas]",valueText:"Falkland Islands (the) [Malvinas]"},{value:"FO",code3:"FRO",title:"Faroe Islands (the)",valueText:"Faroe Islands (the)"},{value:"FJ",code3:"FJI",title:"Fiji",valueText:"Fiji"},{value:"FI",code3:"FIN",title:"Finland",valueText:"Finland"},{value:"FR",code3:"FRA",title:"France",valueText:"France"},{value:"GF",code3:"GUF",title:"French Guiana",valueText:"French Guiana"},{value:"PF",code3:"PYF",title:"French Polynesia",valueText:"French Polynesia"},{value:"TF",code3:"ATF",title:"French Southern Territories (the)",valueText:"French Southern Territories (the)"},{value:"GA",code3:"GAB",title:"Gabon",valueText:"Gabon"},{value:"GM",code3:"GMB",title:"Gambia (the)",valueText:"Gambia (the)"},{value:"GE",code3:"GEO",title:"Georgia",valueText:"Georgia"},{value:"DE",code3:"DEU",title:"Germany",valueText:"Germany"},{value:"GH",code3:"GHA",title:"Ghana",valueText:"Ghana"},{value:"GI",code3:"GIB",title:"Gibraltar",valueText:"Gibraltar"},{value:"GR",code3:"GRC",title:"Greece",valueText:"Greece"},{value:"GL",code3:"GRL",title:"Greenland",valueText:"Greenland"},{value:"GD",code3:"GRD",title:"Grenada",valueText:"Grenada"},{value:"GP",code3:"GLP",title:"Guadeloupe",valueText:"Guadeloupe"},{value:"GU",code3:"GUM",title:"Guam",valueText:"Guam"},{value:"GT",code3:"GTM",title:"Guatemala",valueText:"Guatemala"},{value:"GG",code3:"GGY",title:"Guernsey",valueText:"Guernsey"},{value:"GN",code3:"GIN",title:"Guinea",valueText:"Guinea"},{value:"GW",code3:"GNB",title:"Guinea-Bissau",valueText:"Guinea-Bissau"},{value:"GY",code3:"GUY",title:"Guyana",valueText:"Guyana"},{value:"HT",code3:"HTI",title:"Haiti",valueText:"Haiti"},{value:"HM",code3:"HMD",title:"Heard Island and McDonald Islands",valueText:"Heard Island and McDonald Islands"},{value:"VA",code3:"VAT",title:"Holy See (the)",valueText:"Holy See (the)"},{value:"HN",code3:"HND",title:"Honduras",valueText:"Honduras"},{value:"HK",code3:"HKG",title:"Hong Kong",valueText:"Hong Kong"},{value:"HU",code3:"HUN",title:"Hungary",valueText:"Hungary"},{value:"IS",code3:"ISL",title:"Iceland",valueText:"Iceland"},{value:"IN",code3:"IND",title:"India",valueText:"India"},{value:"ID",code3:"IDN",title:"Indonesia",valueText:"Indonesia"},{value:"IR",code3:"IRN",title:"Iran (Islamic Republic of)",valueText:"Iran (Islamic Republic of)"},{value:"IQ",code3:"IRQ",title:"Iraq",valueText:"Iraq"},{value:"IE",code3:"IRL",title:"Ireland",valueText:"Ireland"},{value:"IM",code3:"IMN",title:"Isle of Man",valueText:"Isle of Man"},{value:"IL",code3:"ISR",title:"Israel",valueText:"Israel"},{value:"IT",code3:"ITA",title:"Italy",valueText:"Italy"},{value:"JM",code3:"JAM",title:"Jamaica",valueText:"Jamaica"},{value:"JP",code3:"JPN",title:"Japan",valueText:"Japan"},{value:"JE",code3:"JEY",title:"Jersey",valueText:"Jersey"},{value:"JO",code3:"JOR",title:"Jordan",valueText:"Jordan"},{value:"KZ",code3:"KAZ",title:"Kazakhstan",valueText:"Kazakhstan"},{value:"KE",code3:"KEN",title:"Kenya",valueText:"Kenya"},{value:"KI",code3:"KIR",title:"Kiribati",valueText:"Kiribati"},{value:"KP",code3:"PRK",title:"Korea (the Democratic People's Republic of)",valueText:"Korea (the Democratic People's Republic of)"},{value:"KR",code3:"KOR",title:"Korea (the Republic of)",valueText:"Korea (the Republic of)"},{value:"KW",code3:"KWT",title:"Kuwait",valueText:"Kuwait"},{value:"KG",code3:"KGZ",title:"Kyrgyzstan",valueText:"Kyrgyzstan"},{value:"LA",code3:"LAO",title:"Lao People's Democratic Republic (the)",valueText:"Lao People's Democratic Republic (the)"},{value:"LV",code3:"LVA",title:"Latvia",valueText:"Latvia"},{value:"LB",code3:"LBN",title:"Lebanon",valueText:"Lebanon"},{value:"LS",code3:"LSO",title:"Lesotho",valueText:"Lesotho"},{value:"LR",code3:"LBR",title:"Liberia",valueText:"Liberia"},{value:"LY",code3:"LBY",title:"Libya",valueText:"Libya"},{value:"LI",code3:"LIE",title:"Liechtenstein",valueText:"Liechtenstein"},{value:"LT",code3:"LTU",title:"Lithuania",valueText:"Lithuania"},{value:"LU",code3:"LUX",title:"Luxembourg",valueText:"Luxembourg"},{value:"MO",code3:"MAC",title:"Macao",valueText:"Macao"},{value:"MG",code3:"MDG",title:"Madagascar",valueText:"Madagascar"},{value:"MW",code3:"MWI",title:"Malawi",valueText:"Malawi"},{value:"MY",code3:"MYS",title:"Malaysia",valueText:"Malaysia"},{value:"MV",code3:"MDV",title:"Maldives",valueText:"Maldives"},{value:"ML",code3:"MLI",title:"Mali",valueText:"Mali"},{value:"MT",code3:"MLT",title:"Malta",valueText:"Malta"},{value:"MH",code3:"MHL",title:"Marshall Islands (the)",valueText:"Marshall Islands (the)"},{value:"MQ",code3:"MTQ",title:"Martinique",valueText:"Martinique"},{value:"MR",code3:"MRT",title:"Mauritania",valueText:"Mauritania"},{value:"MU",code3:"MUS",title:"Mauritius",valueText:"Mauritius"},{value:"YT",code3:"MYT",title:"Mayotte",valueText:"Mayotte"},{value:"MX",code3:"MEX",title:"Mexico",valueText:"Mexico"},{value:"FM",code3:"FSM",title:"Micronesia (Federated States of)",valueText:"Micronesia (Federated States of)"},{value:"MD",code3:"MDA",title:"Moldova (the Republic of)",valueText:"Moldova (the Republic of)"},{value:"MC",code3:"MCO",title:"Monaco",valueText:"Monaco"},{value:"MN",code3:"MNG",title:"Mongolia",valueText:"Mongolia"},{value:"ME",code3:"MNE",title:"Montenegro",valueText:"Montenegro"},{value:"MS",code3:"MSR",title:"Montserrat",valueText:"Montserrat"},{value:"MA",code3:"MAR",title:"Morocco",valueText:"Morocco"},{value:"MZ",code3:"MOZ",title:"Mozambique",valueText:"Mozambique"},{value:"MM",code3:"MMR",title:"Myanmar",valueText:"Myanmar"},{value:"NA",code3:"NAM",title:"Namibia",valueText:"Namibia"},{value:"NR",code3:"NRU",title:"Nauru",valueText:"Nauru"},{value:"NP",code3:"NPL",title:"Nepal",valueText:"Nepal"},{value:"NL",code3:"NLD",title:"Netherlands (the)",valueText:"Netherlands (the)"},{value:"NC",code3:"NCL",title:"New Caledonia",valueText:"New Caledonia"},{value:"NZ",code3:"NZL",title:"New Zealand",valueText:"New Zealand"},{value:"NI",code3:"NIC",title:"Nicaragua",valueText:"Nicaragua"},{value:"NE",code3:"NER",title:"Niger (the)",valueText:"Niger (the)"},{value:"NG",code3:"NGA",title:"Nigeria",valueText:"Nigeria"},{value:"NU",code3:"NIU",title:"Niue",valueText:"Niue"},{value:"NF",code3:"NFK",title:"Norfolk Island",valueText:"Norfolk Island"},{value:"MP",code3:"MNP",title:"Northern Mariana Islands (the)",valueText:"Northern Mariana Islands (the)"},{value:"NO",code3:"NOR",title:"Norway",valueText:"Norway"},{value:"OM",code3:"OMN",title:"Oman",valueText:"Oman"},{value:"PK",code3:"PAK",title:"Pakistan",valueText:"Pakistan"},{value:"PW",code3:"PLW",title:"Palau",valueText:"Palau"},{value:"PS",code3:"PSE",title:"Palestine, State of",valueText:"Palestine, State of"},{value:"PA",code3:"PAN",title:"Panama",valueText:"Panama"},{value:"PG",code3:"PNG",title:"Papua New Guinea",valueText:"Papua New Guinea"},{value:"PY",code3:"PRY",title:"Paraguay",valueText:"Paraguay"},{value:"PE",code3:"PER",title:"Peru",valueText:"Peru"},{value:"PH",code3:"PHL",title:"Philippines (the)",valueText:"Philippines (the)"},{value:"PN",code3:"PCN",title:"Pitcairn",valueText:"Pitcairn"},{value:"PL",code3:"POL",title:"Poland",valueText:"Poland"},{value:"PT",code3:"PRT",title:"Portugal",valueText:"Portugal"},{value:"PR",code3:"PRI",title:"Puerto Rico",valueText:"Puerto Rico"},{value:"QA",code3:"QAT",title:"Qatar",valueText:"Qatar"},{value:"MK",code3:"MKD",title:"Republic of North Macedonia",valueText:"Republic of North Macedonia"},{value:"RO",code3:"ROU",title:"Romania",valueText:"Romania"},{value:"RU",code3:"RUS",title:"Russian Federation (the)",valueText:"Russian Federation (the)"},{value:"RW",code3:"RWA",title:"Rwanda",valueText:"Rwanda"},{value:"RE",code3:"REU",title:"R\xe9union",valueText:"R\xe9union"},{value:"BL",code3:"BLM",title:"Saint Barth\xe9lemy",valueText:"Saint Barth\xe9lemy"},{value:"SH",code3:"SHN",title:"Saint Helena, Ascension and Tristan da Cunha",valueText:"Saint Helena, Ascension and Tristan da Cunha"},{value:"KN",code3:"KNA",title:"Saint Kitts and Nevis",valueText:"Saint Kitts and Nevis"},{value:"LC",code3:"LCA",title:"Saint Lucia",valueText:"Saint Lucia"},{value:"MF",code3:"MAF",title:"Saint Martin (French part)",valueText:"Saint Martin (French part)"},{value:"PM",code3:"SPM",title:"Saint Pierre and Miquelon",valueText:"Saint Pierre and Miquelon"},{value:"VC",code3:"VCT",title:"Saint Vincent and the Grenadines",valueText:"Saint Vincent and the Grenadines"},{value:"WS",code3:"WSM",title:"Samoa",valueText:"Samoa"},{value:"SM",code3:"SMR",title:"San Marino",valueText:"San Marino"},{value:"ST",code3:"STP",title:"Sao Tome and Principe",valueText:"Sao Tome and Principe"},{value:"SA",code3:"SAU",title:"Saudi Arabia",valueText:"Saudi Arabia"},{value:"SN",code3:"SEN",title:"Senegal",valueText:"Senegal"},{value:"RS",code3:"SRB",title:"Serbia",valueText:"Serbia"},{value:"SC",code3:"SYC",title:"Seychelles",valueText:"Seychelles"},{value:"SL",code3:"SLE",title:"Sierra Leone",valueText:"Sierra Leone"},{value:"SG",code3:"SGP",title:"Singapore",valueText:"Singapore"},{value:"SX",code3:"SXM",title:"Sint Maarten (Dutch part)",valueText:"Sint Maarten (Dutch part)"},{value:"SK",code3:"SVK",title:"Slovakia",valueText:"Slovakia"},{value:"SI",code3:"SVN",title:"Slovenia",valueText:"Slovenia"},{value:"SB",code3:"SLB",title:"Solomon Islands",valueText:"Solomon Islands"},{value:"SO",code3:"SOM",title:"Somalia",valueText:"Somalia"},{value:"ZA",code3:"ZAF",title:"South Africa",valueText:"South Africa"},{value:"GS",code3:"SGS",title:"South Georgia and the South Sandwich Islands",valueText:"South Georgia and the South Sandwich Islands"},{value:"SS",code3:"SSD",title:"South Sudan",valueText:"South Sudan"},{value:"ES",code3:"ESP",title:"Spain",valueText:"Spain"},{value:"LK",code3:"LKA",title:"Sri Lanka",valueText:"Sri Lanka"},{value:"SD",code3:"SDN",title:"Sudan (the)",valueText:"Sudan (the)"},{value:"SR",code3:"SUR",title:"Surititle",valueText:"Surititle"},{value:"SJ",code3:"SJM",title:"Svalbard and Jan Mayen",valueText:"Svalbard and Jan Mayen"},{value:"SE",code3:"SWE",title:"Sweden",valueText:"Sweden"},{value:"CH",code3:"CHE",title:"Switzerland",valueText:"Switzerland"},{value:"SY",code3:"SYR",title:"Syrian Arab Republic",valueText:"Syrian Arab Republic"},{value:"TW",code3:"TWN",title:"Taiwan",valueText:"Taiwan"},{value:"TJ",code3:"TJK",title:"Tajikistan",valueText:"Tajikistan"},{value:"TZ",code3:"TZA",title:"Tanzania, United Republic of",valueText:"Tanzania, United Republic of"},{value:"TH",code3:"THA",title:"Thailand",valueText:"Thailand"},{value:"TL",code3:"TLS",title:"Timor-Leste",valueText:"Timor-Leste"},{value:"TG",code3:"TGO",title:"Togo",valueText:"Togo"},{value:"TK",code3:"TKL",title:"Tokelau",valueText:"Tokelau"},{value:"TO",code3:"TON",title:"Tonga",valueText:"Tonga"},{value:"TT",code3:"TTO",title:"Trinidad and Tobago",valueText:"Trinidad and Tobago"},{value:"TN",code3:"TUN",title:"Tunisia",valueText:"Tunisia"},{value:"TR",code3:"TUR",title:"Turkey",valueText:"Turkey"},{value:"TM",code3:"TKM",title:"Turkmenistan",valueText:"Turkmenistan"},{value:"TC",code3:"TCA",title:"Turks and Caicos Islands (the)",valueText:"Turks and Caicos Islands (the)"},{value:"TV",code3:"TUV",title:"Tuvalu",valueText:"Tuvalu"},{value:"UG",code3:"UGA",title:"Uganda",valueText:"Uganda"},{value:"UA",code3:"UKR",title:"Ukraine",valueText:"Ukraine"},{value:"AE",code3:"ARE",title:"United Arab Emirates (the)",valueText:"United Arab Emirates (the)"},{value:"GB",code3:"GBR",title:"United Kingdom of Great Britain and Northern Ireland (the)",valueText:"United Kingdom of Great Britain and Northern Ireland (the)"},{value:"UM",code3:"UMI",title:"United States Minor Outlying Islands (the)",valueText:"United States Minor Outlying Islands (the)"},{value:"US",code3:"USA",title:"United States of America (the)",valueText:"United States of America (the)"},{value:"UY",code3:"URY",title:"Uruguay",valueText:"Uruguay"},{value:"UZ",code3:"UZB",title:"Uzbekistan",valueText:"Uzbekistan"},{value:"VU",code3:"VUT",title:"Vanuatu",valueText:"Vanuatu"},{value:"VE",code3:"VEN",title:"Venezuela (Bolivarian Republic of)",valueText:"Venezuela (Bolivarian Republic of)"},{value:"VN",code3:"VNM",title:"Viet Nam",valueText:"Viet Nam"},{value:"VG",code3:"VGB",title:"Virgin Islands (British)",valueText:"Virgin Islands (British)"},{value:"VI",code3:"VIR",title:"Virgin Islands (U.S.)",valueText:"Virgin Islands (U.S.)"},{value:"WF",code3:"WLF",title:"Wallis and Futuna",valueText:"Wallis and Futuna"},{value:"EH",code3:"ESH",title:"Western Sahara",valueText:"Western Sahara"},{value:"YE",code3:"YEM",title:"Yemen",valueText:"Yemen"},{value:"ZM",code3:"ZMB",title:"Zambia",valueText:"Zambia"},{value:"ZW",code3:"ZWE",title:"Zimbabwe",valueText:"Zimbabwe"},{value:"AX",code3:"ALA",title:"\xc5land Islands",valueText:"\xc5land Islands"}];var c=O(1066);const y={organization:{id:{title:"ID",type:"string",description:"Unique identifier for the organization",visibleFrom:["detail"],immutable:!0},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifier",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,shortIdType:"organization",error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>'"},name:{title:"Name",type:"string",description:"Name of the organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},email:{title:"Email",type:"string",description:"Contact email of the organization",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},phone:{title:"Phone",type:"string",description:"Contact phone number of the organization",visibleFrom:["detail","edit"]},country:{title:"Country",type:"string",description:"Country that the organization belongs to",visibleFrom:["detail","list","edit","edit-new"],options:n,required:!0},address:{title:"Address",type:"string",description:"Physical address of the organization",visibleFrom:["detail","edit","edit-new"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["edit-new"],required:!0,error:"Please enter a valid URL"},createdAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]},status:{title:"Status",type:"string",description:"Approval status of the organization",visibleFrom:["detail","list","edit"],options:[{title:"Pending",value:"pending"},{title:"Approved",value:"approved"},{title:"Disapproved",value:"disapproved"},{title:"Suspended",value:"suspended"}],required:!0},currentBalance:{title:"Current Balance",type:"number",description:"Current account balance of the organization",visibleFrom:["detail","edit"],defaultValue:0}},service:{id:{title:"ID",type:"number",description:"Unique identifier for the service",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization owning the service",visibleFrom:["detail","edit","edit-new"],options:[],required:!0},name:{title:"Name",type:"string",description:"Name of the service",visibleFrom:["detail","list","edit","edit-new"],required:!0},description:{title:"Description",type:"string",description:"Brief details about the service",visibleFrom:["detail","edit","edit-new"]},orgContributionWeight:{title:"Organization Contribution Weight",type:"number",description:"Weight percentage of the organization's contribution",visibleFrom:["detail","edit"]},unitPrice:{title:"Unit Price",type:"number",description:"Price per unit of the service",visibleFrom:["detail","edit","edit-new"]},isActive:{title:"Active Status",type:"boolean",description:"Whether the service is currently active",visibleFrom:["detail","list","edit"]},createdAt:{title:"Created At",type:"string",description:"Time of service creation",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the service",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},plan:{id:{title:"ID",type:"number",description:"Unique identifier for the plan",visibleFrom:["detail"],required:!0},name:{title:"Name",type:"string",description:"Name of the plan",visibleFrom:["detail","list","edit","edit-new"],required:!0},description:{title:"Description",type:"string",description:"Brief details about the plan",visibleFrom:["detail","edit","edit-new"],required:!1},monthlyCost:{title:"Monthly Cost",type:"number",description:"Monthly subscription cost for the plan",visibleFrom:["detail","edit","list","edit-new"],required:!0},annualCost:{title:"Annual Cost",type:"number",description:"Annual subscription cost for the plan",visibleFrom:["detail","edit","edit-new"],required:!1},currency:{title:"Currency",type:"string",description:"Currency used for the plan costs (e.g., USD, EUR)",visibleFrom:["detail","edit","edit-new"],required:!0},maxUsers:{title:"Maximum Users",type:"number",description:"Maximum number of users allowed in this plan",visibleFrom:["detail","edit","edit-new"],required:!0},maxStorageGb:{title:"Maximum Storage (GB)",type:"number",description:"Maximum storage in GB allowed for the plan",visibleFrom:["detail","edit","edit-new"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Whether the plan is currently active",visibleFrom:["detail","list","edit"],required:!1},createdAt:{title:"Created At",type:"string",description:"Time of plan creation",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the plan",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgpayment:{id:{title:"ID",type:"number",description:"Unique identifier for the payment record",visibleFrom:["detail","edit","edit-new"],required:!0},organizationId:{title:"Organization ID",type:"string",description:"UUID of the organization linked to this payment",visibleFrom:["detail","edit"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"number",description:"Optional ID of the associated subscription plan",visibleFrom:["detail","edit"],required:!1},transactionId:{title:"Transaction ID",type:"string",description:"Unique identifier for the payment transaction",visibleFrom:["detail","list","edit","edit-new"],required:!0},amount:{title:"Amount",type:"number",description:"Payment amount in the specified currency",visibleFrom:["detail","list","edit"],required:!0},status:{title:"Payment Status",type:"string",description:"Current status of the payment (e.g., completed, pending)",visibleFrom:["detail","list","edit"],options:[{title:"Completed",value:"completed"},{title:"Pending",value:"pending"},{title:"Failed",value:"failed"},{title:"Refunded",value:"refunded"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the payment record was created",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the payment record",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsubscription:{id:{title:"ID",type:"number",description:"Unique identifier for the organization subscription",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization associated with the subscription",visibleFrom:["detail","list","edit","edit-new"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"subscriptionPlanId",description:"ID of the subscription plan linked to the organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},startDate:{title:"Start Date",type:"date",description:"Date when the subscription started",visibleFrom:["detail","list","edit","edit-new"],required:!0},endDate:{title:"End Date",type:"date",description:"Date when the subscription ends",visibleFrom:["detail","list","edit","edit-new"],required:!0},status:{title:"Subscription Status",type:"string",description:"Current status of the subscription",visibleFrom:["detail","list","edit"],options:[{title:"Active",value:"active"},{title:"Canceled",value:"canceled"},{title:"Expired",value:"expired"},{title:"Pending",value:"pending"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time of subscription creation",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the subscription",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},user:{id:{title:"ID",type:"string",description:"Unique identifier for the user (UUID)",visibleFrom:["detail"],required:!1},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization the user belongs to",visibleFrom:["detail"],required:!0},mrn:{title:"MRN",type:"string",description:"Unique Maritime Resource Name of the user",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid MRN following the format 'urn:mrn:mcp:<entity_type>:<org_id>:<user_id>'"},email:{title:"Email",type:"string",description:"Contact email address of the user",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},username:{title:"Username",type:"string",description:"Unique username of the user",visibleFrom:["detail","list","edit","edit-new"],required:!0},passwordHash:{title:"Password Hash",type:"string",description:"Hashed password of the user",visibleFrom:[]},role:{title:"Role",type:"string",description:"Role assigned to the user",visibleFrom:["detail","edit","edit-new"],options:[{title:"User",value:"User"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the user was created",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update made to the user",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},svcpermission:{id:{title:"ID",type:"number",description:"Unique identifier for the service subscription",visibleFrom:["detail","edit","edit-new"],required:!0},organizationId:{title:"Organization ID",type:"string",description:"UUID of the organization subscribing to the service",visibleFrom:["detail","list","edit"],required:!0},serviceId:{title:"Service ID",type:"number",description:"ID of the service being subscribed to",visibleFrom:["detail","list","edit"],required:!0},startDate:{title:"Start Date",type:"date",description:"Date when the subscription started",visibleFrom:["detail","list","edit"],required:!0},endDate:{title:"End Date",type:"date",description:"Date when the subscription ended (if applicable)",visibleFrom:["detail","list","edit"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Indicates whether the subscription is active",visibleFrom:["detail","list","edit"],required:!0},pricingModel:{title:"Pricing Model",type:"string",description:"Model used for pricing (usage-based or flat-rate)",visibleFrom:["detail","edit"],options:[{title:"Usage-Based",value:"usage-based"},{title:"Flat-Rate",value:"flat-rate"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Timestamp when the subscription was created",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Timestamp of the last update to the subscription",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsvcusage:{id:{title:"ID",type:"number",description:"Unique identifier for the organization service usage",visibleFrom:["detail","edit","edit-new"],required:!0},organizationId:{title:"Organization ID",type:"string",description:"UUID of the organization associated with the usage",visibleFrom:["detail","list","edit"],required:!0},serviceId:{title:"Service ID",type:"number",description:"Unique identifier for the service",visibleFrom:["detail","edit"],required:!0},usageMetricId:{title:"Usage Metric ID",type:"number",description:"Identifier for the usage metric",visibleFrom:["detail","edit"],required:!0},usageAmount:{title:"Usage Amount",type:"number",description:"Amount of the service used",visibleFrom:["detail","list","edit"],required:!0},usageDate:{title:"Usage Date",type:"string",description:"Date when the usage was recorded",valuePrepareFunction:p=>(0,c.Y)(p),visibleFrom:["detail","list"],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the usage record was created",valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time when the usage record was last updated",valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},invoice:{id:{title:"ID",type:"number",description:"Unique identifier for the invoice",visibleFrom:["detail","list"],required:!0},organizationSubscriptionId:{title:"Organization Subscription ID",type:"organizationSubscriptionId",description:"ID of the associated organization subscription",visibleFrom:["detail","edit","edit-new"],required:!0},invoiceDate:{title:"Invoice Date",type:"date",description:"Date when the invoice was generated",valuePrepareFunction:p=>(0,c.Y)(p),visibleFrom:["detail","list","edit","edit-new"]},dueDate:{title:"Due Date",type:"date",description:"Date by which the invoice needs to be paid",valuePrepareFunction:p=>(0,c.Y)(p),visibleFrom:["detail","list","edit","edit-new"],required:!0},amountDue:{title:"Amount Due",type:"number",description:"Total amount due on the invoice",visibleFrom:["detail","list","edit","edit-new"],required:!0},amountPaid:{title:"Amount Paid",type:"number",description:"Amount that has been paid for the invoice",visibleFrom:["detail","list","edit"]},status:{title:"Status",type:"string",description:"Current status of the invoice",options:[{title:"Unpaid",value:"unpaid"},{title:"Paid",value:"paid"},{title:"Overdue",value:"overdue"},{title:"Canceled",value:"canceled"}],visibleFrom:["detail","list","edit"],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the invoice was created",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time when the invoice was last updated",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usercert:{id:{title:"ID",type:"number"},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,shortIdType:"user",error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>:<unique_id>'"},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,error:"Please enter a valid email address"}},orgcandidate:{id:{title:"ID",type:"number"},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list","edit","edit-new"],shortIdType:"organization",immutable:!0,required:!0,error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>'"},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},phone:{title:"Phone",type:"string",description:"Contact phone number of the organization",visibleFrom:["detail","edit"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid email address"},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid URL"},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail","edit","edit-new"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list","edit","edit-new"],options:n,required:!0},adminUserEmail:{title:"Admin User e-mail",type:"string",description:"Contact organization admin user e-mail",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},adminUserName:{title:"Admin User Name",type:"string",description:"Name of organization admin user",visibleFrom:["detail","edit","edit-new"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"number",description:"Name of organization",visibleFrom:["detail","list","edit"],required:!0},status:{title:"Status",type:"string",description:"Organization status",visibleFrom:["detail","list","edit"]},createdAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,valuePrepareFunction:p=>(0,c.Y)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},instance:{id:{title:"ID",type:"number"},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list","edit","edit-new"],required:!0},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["detail","list","edit","edit-new"],required:!0},serviceType:{title:"Service type",type:"stringArray",options:[{title:"MS 1 - VTS Information service (INS)",value:"VTSInformationService"},{title:"MS 2 - VTS Navigational assistance service (NAS)",value:"VTSNavigationalAssistanceService"},{title:"MS 3 - Traffic organization service (TOS)",value:"TrafficOrganizationService"},{title:"MS 4 - Port support service (PSS)",value:"PortSupportService"},{title:"MS 5 - Maritime safety information (MSI) service",value:"MaritimeSafetyInformationService"},{title:"MS 6 - Pilotage service",value:"PilotageService"},{title:"MS 7 - Tug service",value:"TugService"},{title:"MS 8 - Vessel shore reporting",value:"VesselShoreReporting"},{title:"MS 9 - Telemedical assistance service (TMAS)",value:"TelemedicalAssistanceService"},{title:"MS 10 - Maritime assistance service (MAS)",value:"MaritimeAssistanceService"},{title:"MS 11 - Nautical chart service",value:"NauticalChartService"},{title:"MS 12 - Nautical publications service",value:"NauticalPublicationsService"},{title:"MS 13 - Ice navigation service",value:"IceNavigationService"},{title:"MS 14 - Meteorological information service",value:"MeteorologicalInformationService"},{title:"MS 15 - Real-time hydrographic and environmental information services",value:"RealTimeHydrographicAndEnvironmentalInformationServices"},{title:"MS 16 - Search and rescue (SAR) service",value:"SearchAndRescueService"},{title:"Other",value:"other:etc"}],description:"The service type shall reflect the associated operational service type provided according to defined types",visibleFrom:["detail","list","edit","edit-new"]},dataProductType:{title:"Data product type",type:"stringArray",options:[{title:"S-57 Electronic Navigational Chart (ENC)",value:"S57"},{title:"S-101 Electronic Navigational Chart (ENC)",value:"S101"},{title:"S-102 Bathymetric Surface",value:"S102"},{title:"S-104 Water Level Information for Surface Navigation",value:"S104"},{title:"S-111 Surface Currents",value:"S111"},{title:"S-122 Marine Protected Areas (MPAs)",value:"S122"},{title:"S-123 Marine Radio Services",value:"S123"},{title:"S-124 Navigational Warnings",value:"S124"},{title:"S-125 Marine Navigational Services",value:"S125"},{title:"S-126 Marine Physical Environment",value:"S126"},{title:"S-127 Marine Traffic Management",value:"S127"},{title:"S-128 Catalogue of Nautical Products",value:"S128"},{title:"S-129 Under Keel Clearance Management (UKCM)",value:"S129"},{title:"S-131 Marine Harbour Infrastructure",value:"S131"},{title:"S-210 Inter-VTS Exchange Format",value:"S210"},{title:"S-211 Port Call Message Format",value:"S211"},{title:"S-212 VTS Digital Information Service",value:"S212"},{title:"S-401 Inland ENC",value:"S401"},{title:"S-402 Bathymetric Contour Overlay for Inland ENC",value:"S402"},{title:"S-411 Sea Ice Information",value:"S411"},{title:"S-412 Weather Overlay",value:"S412"},{title:"S-413 Marine Weather Conditions",value:"S413"},{title:"S-414 Marine Weather Observations",value:"S414"},{title:"S-421 Route Plan",value:"S421"},{title:"Route Plan",value:"RTZ"},{title:"Electronic Port Clearance",value:"EPC"},{title:"Other data types not covered in this table",value:"OTHER"}],description:"Data product type defined in IEC 63173-2 SECOM standard",visibleFrom:["detail","list","edit","edit-new"]},status:{title:"Status",type:"string",options:[{title:"Provisional",value:"PROVISIONAL"},{title:"Released",value:"RELEASED"},{title:"Deprecated",value:"DEPRECATED"},{title:"Deleted",value:"DELETED"}],visibleFrom:["detail","list","edit","edit-new"],required:!0},endpointUri:{title:"Endpoint URI",type:"string",visibleFrom:["detail","edit","edit-new"],required:!0},endpointType:{title:"Endpoint type",type:"string",visibleFrom:[]},organizationId:{title:"Organization ID",type:"string",visibleFrom:["detail","edit","edit-new"],required:!0},keywords:{title:"Keywords",type:"stringArray",placeholder:"Please enter keyword",visibleFrom:["detail","list","edit","edit-new"]},instanceId:{title:"Instance ID",type:"string",description:"MCP MRN as unique identifer",placeholder:"urn:mrn:",visibleFrom:["detail","edit","edit-new"]},implementsServiceDesign:{title:"Technical design ID",type:"string",description:"MCP MRN as unique identifer",placeholder:"urn:mrn:",visibleFrom:["detail","edit","edit-new"]},implementsServiceDesignVersion:{title:"Technical design version",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","edit","edit-new"]},comment:{title:"Comment",type:"string",visibleFrom:["detail","edit","edit-new"]},geometryContentType:{title:"Geometry content type",type:"string",visibleFrom:[]},geometry:{title:"Geometry",type:"object",visibleFrom:[]},unlocode:{title:"Unlocode",type:"stringArray",placeholder:"Please enter UN/LOCODE",visibleFrom:[]},mmsi:{title:"MMSI",type:"string",visibleFrom:[]},imo:{title:"IMO number",type:"string",visibleFrom:[]},instanceAsXml:{title:"Instance as XML",type:"file",notShowOnEdit:!0,visibleFrom:["detail","edit","edit-new"]},instanceAsDocId:{title:"Instance as DocId",type:"number"},instanceAsDoc:{title:"Instance as document",type:"file",visibleFrom:["detail","edit","edit-new"]},ledgerRequestId:{title:"Ledger Request ID",type:"number"},ledgerRequestStatus:{title:"Ledger Request status",type:"string",options:[{title:"Inactive",value:"INACTIVE"},{title:"Created",value:"CREATED"},{title:"Vetting",value:"VETTING"},{title:"Vetted",value:"VETTED"},{title:"Requesting",value:"REQUESTING"},{title:"Succeeded",value:"SUCCEEDED"},{title:"Failed",value:"FAILED"},{title:"Rejected",value:"REJECTED"}],visibleFrom:[]},docIds:{title:"Related documents",type:"fileArray",filter:!1,visibleFrom:[]},publishedAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:[]},lastUpdatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]}},newOrganization:{orgMrn:{title:"Maritime Resource Name (MRN) for organization",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","edit","edit-new"],required:!0,shortIdType:"organization"},orgName:{title:"Organization name",type:"string",description:"Name of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgEmail:{title:"Organization contact e-mail",type:"string",description:"Contact e-mail",placeholder:"non-personal email, e.g., info@example.org",visibleFrom:["detail","edit","edit-new"],required:!0},orgUrl:{title:"URL of organization",type:"string",description:"URL of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgAddress:{title:"Address of organization",type:"string",description:"Address of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgCountry:{title:"Country of organization",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","edit","edit-new"],options:n,required:!0}},ledgerInstance:{name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["list"]},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"]},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["list"]},keywords:{title:"Keywords",type:"string",visibleFrom:["list"]},coverageArea:{title:"Coverage ",type:"string"},status:{title:"Status",type:"string",options:[{title:"Provisional",value:"PROVISIONAL"},{title:"Released",value:"RELEASED"},{title:"Deprecated",value:"DEPRECATED"},{title:"Deleted",value:"DELETED"}],visibleFrom:["list"]},implementsDesignMRN:{title:"Technical design ID",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"],shortIdType:"design",immutable:!0},implementsDesignVersion:{title:"Technical design version",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"]},msrName:{title:"MSR Name of register",type:"string",visibleFrom:["list"]},msrUrl:{title:"MSR URL of register",type:"string",visibleFrom:["list"]}}}},9677:(Qe,F,O)=>{"use strict";O.d(F,{C:()=>n});const n=c=>(Object.keys(c).forEach(y=>{"organization"===y&&(c.organizationId=c[y].id),"subscriptionPlan"===y&&(c.subscriptionPlanId=c[y].id),"organizationSubscription"===y&&(c.organizationSubscriptionId=c[y].id)}),c)},2170:(Qe,F,O)=>{"use strict";O.d(F,{c:()=>n,e:()=>c});const n=["en-GB","ko-KR"],c=[{code:"en-GB",name:"English"},{code:"ko-KR",name:"\ud55c\uad6d\uc5b4"}]},5166:(Qe,F,O)=>{"use strict";O.d(F,{N3:()=>c,SP:()=>n});var n=function(w){return w.None="none",w.Subscription="subscription",w.Organization="organization",w.Service="service",w.User="user",w.OrgSub="orgsub",w.Invoice="invoice",w.Plan="plan",w.Payment="payment",w.OrgPayment="orgpayment",w.OrgSubscription="orgsubscription",w.Usage="usage",w.Role="role",w.SvcPermission="svcpermission",w.DashboardElement="dashboardelement",w.OrgCandidate="orgcandidate",w.OrgSvcUsage="orgsvcusage",w.Certificate="certificate",w.UserSvcUsage="usersvcusage",w.UserCert="usercert",w.Device="device",w.MMS="mms",w.Vessel="vessel",w.Instance="instance",w}(n||{});const c=["start","end","revokedAt","createdAt","updatedAt"]},3830:(Qe,F,O)=>{"use strict";O.d(F,{B:()=>c});var n=O(5166);const c=(y,p)=>{const I=y.split(":");return p===n.SP.Organization?I.slice(0,3).join(":")+":org:"+I.slice(4,5).join(":")+":":I.slice(0,3).join(":")+":"+p+":"+I.slice(4,6).join(":")+":"}},217:(Qe,F,O)=>{"use strict";O.d(F,{X:()=>n});var n=function(c){return c.SuperAdmin="SuperAdmin",c.OrgAdmin="OrgAdmin",c.UserAdmin="UserAdmin",c.User="User",c}(n||{})},8839:(Qe,F,O)=>{"use strict";O.d(F,{i:()=>y});var n=O(8974),c=O(5950);let y=(()=>{class p{constructor(){this.organizationsSubject=new n.t([]),this.organizations$=this.organizationsSubject.asObservable()}setOrganizations(u){this.organizationsSubject.next(u)}getOrganizations(){return this.organizationsSubject.value}static#e=this.\u0275fac=function(D){return new(D||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},5949:(Qe,F,O)=>{"use strict";O.d(F,{e:()=>y});var n=O(8974),c=O(5950);let y=(()=>{class p{constructor(){this.organizationSubscriptionSubject=new n.t([]),this.organizationSubscriptions$=this.organizationSubscriptionSubject.asObservable()}setOrganizationSubscriptions(u){this.organizationSubscriptionSubject.next(u)}getOrganizationSubscriptions(){return this.organizationSubscriptionSubject.value}static#e=this.\u0275fac=function(D){return new(D||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},3682:(Qe,F,O)=>{"use strict";O.d(F,{j:()=>y});var n=O(8974),c=O(5950);let y=(()=>{class p{constructor(){this.subscriptionPlansSubject=new n.t([]),this.subscriptionPlans$=this.subscriptionPlansSubject.asObservable()}setSubscriptionPlans(u){this.subscriptionPlansSubject.next(u)}getSubscriptionPlans(){return this.subscriptionPlansSubject.value}static#e=this.\u0275fac=function(D){return new(D||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},58:(Qe,F,O)=>{"use strict";O.d(F,{G:()=>p});var n=O(2047),c=O(9380),y=O(5950);let p=(()=>{class I{static#e=this.\u0275fac=function(w){return new(w||I)};static#t=this.\u0275mod=y.$C({type:I});static#s=this.\u0275inj=y.G2t({imports:[n.MD,n.MD,c.h]})}return I})()},1066:(Qe,F,O)=>{"use strict";O.d(F,{Y:()=>c,t:()=>n});const n=y=>new Date(y).toLocaleString(),c=y=>new Date(1e3*y).toLocaleString()},3987:(Qe,F,O)=>{"use strict";O.d(F,{Xo:()=>I,lk:()=>p,rR:()=>y,xs:()=>c});var n=O(2170);const c=u=>{u.addLangs(n.c)},y=u=>{const D=localStorage.getItem("locale"),w=D&&n.c.includes(D)?localStorage.getItem("locale"):"en-GB";if(null!==w)return u.setDefaultLang(w),u.use(w),w;throw new Error("Locale not found")},p=(u,D)=>{u.use(D),u.setDefaultLang(D),localStorage.setItem("locale",D)},I=u=>n.e.find(D=>D.code===u)?.name||"English"},9850:(Qe,F,O)=>{"use strict";O.d(F,{h:()=>E});var n=O(2047),c=O(58),y=O(6908),p=O(888),I=O(2802),u=O(2537),D=O(3426),w=O(5950);let E=(()=>{class b{static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275mod=w.$C({type:b});static#s=this.\u0275inj=w.G2t({imports:[n.MD,c.G,y.PuD,p.j,I.Y,u.B,D.d]})}return b})()},888:(Qe,F,O)=>{"use strict";O.d(F,{j:()=>ue});var n=O(5950),c=O(7882),y=O(6908),p=O(1748);const I=T=>Object.fromEntries(Object.entries(T).filter(([H,N])=>void 0!==N&&N.toString().length>0));var w=O(5166),b=O(58),o=O(217);var A=O(874),k=O(6482),R=O(5189),P=O(9380),X=O(8839),Y=O(3682),de=O(5949),ne=O(2047);function be(T,H){if(1&T&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(),n.JRh(N.value.error)}}function Ve(T,H){1&T&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function U(T,H){if(1&T){const N=n.RV6();n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"input",9),n.bIt("ngModelChange",function(G){n.eBV(N);const Ee=n.XpG(2);return n.Njj(Ee.onMrnChange(G))})("keydown",function(G){n.eBV(N);const Ee=n.XpG(2);return n.Njj(Ee.onMrnKeyDown(G))}),n.k0s(),n.j41(4,"clr-control-helper"),n.EFF(5),n.k0s(),n.DNE(6,be,2,1,"clr-control-error")(7,Ve,2,0,"clr-control-error"),n.k0s()}if(2&T){const N=n.XpG().$implicit,Q=n.XpG();n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",N.value.type)("formControlName",N.key)("required",!0===N.value.required)("placeholder",Q.mrnPrefix),n.R7$(2),n.JRh(N.value.description),n.R7$(),n.vxM(N.value.error?6:7)}}function J(T,H){if(1&T&&(n.j41(0,"span",11),n.EFF(1),n.k0s()),2&T){const N=H.$implicit;n.R7$(),n.JRh(N)}}function m(T,H){if(1&T&&n.Z7z(0,J,2,1,"span",11,n.fX1),2&T){const N=n.XpG(2).$implicit,Q=n.XpG();n.Dyx(Q.item[N.key])}}function $(T,H){1&T&&(n.j41(0,"button",10),n.EFF(1,"No value assigned"),n.k0s())}function ce(T,H){if(1&T&&(n.j41(0,"option",14),n.EFF(1),n.k0s()),2&T){const N=H.$implicit;n.Y8G("value",N.value),n.R7$(),n.JRh(N.title)}}function V(T,H){if(1&T&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&T){const N=n.XpG(3).$implicit;n.R7$(),n.JRh(N.value.error)}}function xe(T,H){1&T&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function Se(T,H){if(1&T&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",12),n.DNE(4,ce,2,2,"option",13),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,V,2,1,"clr-control-error")(8,xe,2,0,"clr-control-error"),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",N.key)("required",!0===N.value.required),n.R7$(),n.Y8G("ngForOf",N.value.options),n.R7$(2),n.JRh(N.value.description),n.R7$(),n.vxM(N.value.error?7:8)}}function Oe(T,H){if(1&T&&(n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",15),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",N.value.type)("formControlName",N.key)("required",!0===N.value.required)}}function te(T,H){if(1&T&&n.DNE(0,m,2,0)(1,$,2,0,"button",10)(2,Se,9,8,"clr-select-container")(3,Oe,4,6,"clr-input-container"),2&T){const N=n.XpG().$implicit,Q=n.XpG();n.vxM(Q.item[N.key].length>0?0:1),n.R7$(2),n.vxM(N.value.options?2:3)}}function Z(T,H){if(1&T&&(n.j41(0,"option",14),n.EFF(1),n.k0s()),2&T){const N=H.$implicit;n.Y8G("value",N.value),n.R7$(),n.JRh(N.title)}}function Ue(T,H){if(1&T&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(),n.JRh(N.value.error)}}function Ne(T,H){1&T&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function ke(T,H){if(1&T&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",12),n.DNE(4,Z,2,2,"option",13),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,Ue,2,1,"clr-control-error")(8,Ne,2,0,"clr-control-error"),n.k0s()),2&T){const N=n.XpG().$implicit;n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",N.key)("required",!0===N.value.required),n.R7$(),n.Y8G("ngForOf",N.value.options),n.R7$(2),n.JRh(N.value.description),n.R7$(),n.vxM(N.value.error?7:8)}}function rt(T,H){if(1&T&&(n.j41(0,"option",14),n.EFF(1),n.k0s()),2&T){const N=H.$implicit;n.Y8G("value",N),n.R7$(),n.JRh(N)}}function _t(T,H){if(1&T&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(),n.JRh(N.value.error)}}function $e(T,H){1&T&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function Xe(T,H){if(1&T&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",12),n.DNE(4,rt,2,2,"option",13),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,_t,2,1,"clr-control-error")(8,$e,2,0,"clr-control-error"),n.k0s()),2&T){const N=n.XpG().$implicit,Q=n.XpG();n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",N.key)("required",!0===N.value.required),n.R7$(),n.Y8G("ngForOf",Q.roles),n.R7$(2),n.JRh(N.value.description),n.R7$(),n.vxM(N.value.error?7:8)}}function wt(T,H){if(1&T&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(),n.JRh(N.value.error)}}function at(T,H){1&T&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function Tt(T,H){if(1&T&&(n.j41(0,"clr-checkbox-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"clr-checkbox-wrapper"),n.nrm(4,"input",16),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,wt,2,1,"clr-control-error")(8,at,2,0,"clr-control-error"),n.k0s()()),2&T){const N=n.XpG().$implicit;n.R7$(2),n.JRh(N.value.title),n.R7$(2),n.xc7("width",400,"px"),n.Y8G("formControlName",N.key)("required",!0===N.value.required),n.R7$(2),n.JRh(N.value.description),n.R7$(),n.vxM(N.value.error?7:8)}}function Nt(T,H){if(1&T&&(n.j41(0,"clr-date-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",17),n.k0s()),2&T){const N=n.XpG().$implicit;n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",366,"px"),n.Y8G("formControlName",N.key)}}function f(T,H){if(1&T&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&T){const N=n.XpG(2).$implicit;n.R7$(),n.JRh(N.value.error)}}function ae(T,H){1&T&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function ie(T,H){if(1&T&&(n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",15),n.j41(4,"clr-control-helper"),n.EFF(5),n.k0s(),n.DNE(6,f,2,1,"clr-control-error")(7,ae,2,0,"clr-control-error"),n.k0s()),2&T){const N=n.XpG().$implicit;n.R7$(2),n.JRh(N.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",N.value.type)("formControlName",N.key)("required",!0===N.value.required),n.R7$(2),n.JRh(N.value.description),n.R7$(),n.vxM(N.value.error?6:7)}}function M(T,H){if(1&T&&(n.j41(0,"div"),n.DNE(1,U,8,9,"clr-input-container")(2,te,4,2)(3,ke,9,8,"clr-select-container")(4,Xe,9,8,"clr-select-container")(5,Tt,9,7,"clr-checkbox-container")(6,Nt,4,4,"clr-date-container")(7,ie,8,8,"clr-input-container"),n.k0s()),2&T){const N=H.$implicit;n.R7$(),n.vxM("mrn"===N.key?1:"stringArray"===N.value.type?2:N.value.options?3:"permissions"===N.key?4:"boolean"===N.value.type?5:"date"===N.value.type?6:7)}}function x(T,H){if(1&T){const N=n.RV6();n.j41(0,"button",21),n.bIt("click",function(){n.eBV(N);const G=n.XpG(2);return n.Njj(G.cancel())}),n.EFF(1,"Cancel"),n.k0s()}}function q(T,H){if(1&T){const N=n.RV6();n.j41(0,"div",8)(1,"button",18),n.bIt("click",function(){n.eBV(N);const G=n.XpG();return n.Njj(G.submit())}),n.EFF(2,"Submit"),n.k0s(),n.j41(3,"button",19),n.bIt("click",function(){n.eBV(N);const G=n.XpG();return n.Njj(G.resetForm())}),n.EFF(4,"Reset"),n.k0s(),n.DNE(5,x,2,0,"button",20),n.k0s()}if(2&T){const N=n.XpG();n.R7$(5),n.vxM(N.isForNew?-1:5)}}let ue=(()=>{class T{constructor(N,Q,G,Ee,et,Je,xt){this.formBuilder=N,this.authService=Q,this.notifierService=G,this.translate=Ee,this.orgOptionsService=et,this.planOptionsService=Je,this.orgsubOptionsService=xt,this.itemType=w.SP.None,this.isForNew=!1,this.item={},this.mrnPrefix="urn:mrn:",this.title="",this.onCancel=new n.bkB,this.onSubmit=new n.bkB,this.viewContext="edit",this.itemForm=new c.gE({}),this.columnForMenu={},this.isEditing=!1,this.roles=[],this.id="",this.onSubmitIsGiven=!0,this.organizations=[],this.plans=[],this.orgsubs=[],this.myInfo=null,this.submit=()=>{if(this.isValid()){const ut=I(this.itemForm.value),Ce=((T,H)=>(Object.entries(H).map(([N,Q])=>{((T,H)=>!!T[H]&&"date"===T[H].type)(T,N)?H[N]=new Date(Q).toISOString().split("T")[0]:((T,H)=>!!T[H]&&"number"===T[H].type)(T,N)&&(H[N]=parseInt(Q))}),H))(this.columnForMenu,ut);if(this.isForNew)this.onSubmit.emit(Ce);else{const kt=((T,H)=>({...this.item,...H}))(0,Ce);this.onSubmit.emit(kt)}}},this.isValid=()=>this.itemForm.valid?this.itemForm.value.mrn!==this.mrnPrefix||(this.notifierService.notify("error",this.translate.instant("error.form.invalidmrn")),!1):(this.itemForm.markAllAsTouched(),this.clrForm?.markAsTouched(),this.notifierService.notify("error",this.translate.instant("error.form.invalid")),!1),this.getFormValue=()=>{if(this.isValid())return I(this.itemForm.value)},this.resetForm=()=>{this.setForm(),this.isForNew?this.itemType!==w.SP.Role&&(this.item={mrn:this.mrnPrefix},this.itemForm.patchValue(this.item)):this.itemForm.patchValue(this.item)},this.cancel=()=>{this.onCancel.emit()},this.setForm=()=>{if(this.itemType===w.SP.None)return;let ut={};Object.entries(p.Y[this.itemType.toString()]).map(([Ce,kt])=>{if(kt.visibleFrom&&(!kt.visibleFrom||kt.visibleFrom.includes(this.viewContext))){if("mrn"===Ce){const Ze=new RegExp("urn:mrn:mcp:(entity|mir|mms|msr|device|org|user|vessel|service|mms):([a-z0-9]([a-z0-9]|-){0,20}[a-z0-9]):((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$");ut[Ce]=["",[c.k0.required,c.k0.pattern(Ze)]]}else ut[Ce]="email"===Ce?["",[c.k0.required,c.k0.email]]:"url"===Ce?["",[c.k0.required,c.k0.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]]:["",kt.required?c.k0.required:void 0];"organizationId"===kt.type&&(kt.options=this.organizations),"subscriptionPlanId"===kt.type&&(kt.options=this.plans),"organizationSubscriptionId"===kt.type&&(kt.options=this.orgsubs),"role"===Ce&&this.myInfo&&(kt.options={[o.X.SuperAdmin]:[{title:"Super Admin",value:"SuperAdmin"},{title:"Org Admin",value:"OrgAdmin"},{title:"User Admin",value:"UserAdmin"},{title:"User",value:"User"}],[o.X.OrgAdmin]:[[{title:"Org Admin",value:"OrgAdmin"},{title:"User Admin",value:"UserAdmin"},{title:"User",value:"User"}]],[o.X.UserAdmin]:[[{title:"User Admin",value:"UserAdmin"},{title:"User",value:"User"}]],[o.X.User]:[[{title:"User",value:"User"}]]}[this.myInfo.role]),this.columnForMenu[Ce]=kt}}),this.itemForm=this.formBuilder.group(ut)},this.needShortId=ut=>void 0!==this.getShortIdType(ut),this.getShortIdType=ut=>this.columnForMenu[ut]?this.columnForMenu[ut].shortIdType:void 0,this.sortColumnForMenu=(ut,Ce)=>ut.order>Ce.order?-1:1,this.capitalize=ut=>ut[0].toUpperCase()+ut.slice(1)}ngOnInit(){this.itemType!==w.SP.OrgCandidate&&this.authService.user$.subscribe(N=>{this.myInfo=N}),(0,A.z)([this.orgOptionsService.organizations$,this.planOptionsService.subscriptionPlans$,this.orgsubOptionsService.organizationSubscriptions$]).subscribe(([N,Q,G])=>{0===this.organizations.length&&0===this.plans.length&&N.length>0&&Q.length>0&&(this.organizations=N,this.plans=Q,this.orgsubs=G,this.resetForm())})}ngOnChanges(N){this.isForNew&&(this.viewContext="edit-new"),this.itemType!==w.SP.None&&(this.setForm(),this.item&&this.itemForm.patchValue(this.item)),0===this.title.length&&this.itemType!==w.SP.None&&(this.title=this.isForNew?"New "+this.capitalize(this.itemType):"Edit "+this.capitalize(this.itemType)),this.onSubmitIsGiven=0!==this.onSubmit.observers.length}onMrnKeyDown(N){const Q=N.target.value;Q.includes(this.mrnPrefix)?this.item.mrn=Q:N.target.value=this.mrnPrefix}onMrnChange(N){this.item.mrn=N.startsWith(this.mrnPrefix)?N:this.mrnPrefix}static#e=this.\u0275fac=function(Q){return new(Q||T)(n.rXU(c.ok),n.rXU(k.u),n.rXU(R.iJ),n.rXU(P.c$),n.rXU(X.i),n.rXU(Y.j),n.rXU(de.e))};static#t=this.\u0275cmp=n.VBU({type:T,selectors:[["app-item-form"]],viewQuery:function(Q,G){if(1&Q&&n.GBs(y.mDd,7),2&Q){let Ee;n.mGM(Ee=n.lsd())&&(G.clrForm=Ee.first)}},inputs:{itemType:"itemType",isForNew:"isForNew",item:"item",mrnPrefix:"mrnPrefix",title:"title"},outputs:{onCancel:"onCancel",onSubmit:"onSubmit"},standalone:!0,features:[n.OA$,n.aNF],decls:11,vars:7,consts:[[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[1,"card"],[1,"card-header"],[1,"card-block"],[1,"card-text"],["clrForm","",1,"ng-untouched",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"card-footer"],["clrInput","",3,"ngModelChange","keydown","type","formControlName","required","placeholder"],["disabled","",1,"btn","btn-sm","btn-outline"],[1,"label","label-light-blue"],["clrSelect","",3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["clrInput","",3,"type","formControlName","required"],["clrCheckbox","","type","checkbox",3,"formControlName","required"],["clrDate","","type","date","autocomplete","off",3,"formControlName"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"]],template:function(Q,G){1&Q&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.EFF(4),n.k0s(),n.j41(5,"div",4)(6,"div",5)(7,"form",6),n.DNE(8,M,8,1,"div",7),n.nI1(9,"keyvalue"),n.k0s()()(),n.DNE(10,q,6,1,"div",8),n.k0s()()()),2&Q&&(n.R7$(4),n.SpI(" ",G.title," "),n.R7$(3),n.Y8G("formGroup",G.itemForm),n.R7$(),n.Y8G("ngForOf",n.i5U(9,4,G.columnForMenu,G.sortColumnForMenu)),n.R7$(2),n.vxM(G.onSubmitIsGiven?10:-1))},dependencies:[b.G,ne.Sq,ne.lG,y.t5G,y.aZZ,y.Hpg,y.bnk,y.mDd,y.Jej,y.EjB,y.eAx,y.lnv,y._Qf,y.WF1,y.icl,y.Xu5,y.Yf6,y.hTQ,c.YN,c.qT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.cb,c.YS,c.xq,y.Nsh,y.CxT,c.X1,c.j4,c.JD]})}return T})()},2802:(Qe,F,O)=>{"use strict";O.d(F,{Y:()=>nv});var n=O(5950),c=O(5166),y=O(1748),p=O(7882),I=O(2047),u=O(58),D=O(6908),w=O(6994),E=O(153);function o(s,r,e){var t;return s instanceof Object&&null!==(t=s[r])&&void 0!==t?t:e}function _(s,r=0,e=s.byteLength-r,t=!1){let i="";for(const a of new Uint8Array(s,r,e)){const l=a.toString(16).toUpperCase();1===l.length&&(i+="0"),i+=l,t&&(i+=" ")}return i.trim()}function v(s,r){let e=0;if(1===s.length)return s[0];for(let t=s.length-1;t>=0;t--)e+=s[s.length-1-t]*Math.pow(2,r*t);return e}function A(s,r,e=-1){const t=e;let i=s,a=0,l=Math.pow(2,r);for(let h=1;h<8;h++){if(s<l){let d;if(t<0)d=new ArrayBuffer(h),a=h;else{if(t<h)return new ArrayBuffer(0);d=new ArrayBuffer(t),a=t}const g=new Uint8Array(d);for(let B=h-1;B>=0;B--){const L=Math.pow(2,B*r);g[a-B-1]=Math.floor(i/L),i-=g[a-B-1]*L}return d}l*=Math.pow(2,r)}return new ArrayBuffer(0)}function k(...s){let r=0,e=0;for(const a of s)r+=a.byteLength;const t=new ArrayBuffer(r),i=new Uint8Array(t);for(const a of s)i.set(new Uint8Array(a),e),e+=a.byteLength;return t}function R(...s){let r=0,e=0;for(const a of s)r+=a.length;const t=new ArrayBuffer(r),i=new Uint8Array(t);for(const a of s)i.set(a,e),e+=a.length;return i}function P(){const s=new Uint8Array(this.valueHex);this.valueHex.byteLength>=2&&(255===s[0]&&128&s[1]||0===s[0]&&!(128&s[1]))&&this.warnings.push("Needlessly long format");const r=new ArrayBuffer(this.valueHex.byteLength),e=new Uint8Array(r);for(let h=0;h<this.valueHex.byteLength;h++)e[h]=0;e[0]=128&s[0];const t=v(e,8),i=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(i);for(let h=0;h<this.valueHex.byteLength;h++)a[h]=s[h];return a[0]&=127,v(a,8)-t}function Y(s,r){if(s.byteLength!==r.byteLength)return!1;const e=new Uint8Array(s),t=new Uint8Array(r);for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function de(s,r){const e=s.toString(10);if(r<e.length)return"";const t=r-e.length,i=new Array(t);for(let l=0;l<t;l++)i[l]="0";return i.join("").concat(e)}const ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Ve(s,r=!1,e=!1,t=!1){let i=0,a=0,l=0,h="";const d=r?be:ne;if(t){let g=0;for(let B=0;B<s.length;B++)if(0!==s.charCodeAt(B)){g=B;break}s=s.slice(g)}for(;i<s.length;){const g=s.charCodeAt(i++);i>=s.length&&(a=1);const B=s.charCodeAt(i++);i>=s.length&&(l=1);const L=s.charCodeAt(i++),z=g>>2,K=(3&g)<<4|B>>4;let oe=(15&B)<<2|L>>6,_e=63&L;1===a?oe=_e=64:1===l&&(_e=64),h+=e?64===oe?`${d.charAt(z)}${d.charAt(K)}`:64===_e?`${d.charAt(z)}${d.charAt(K)}${d.charAt(oe)}`:`${d.charAt(z)}${d.charAt(K)}${d.charAt(oe)}${d.charAt(_e)}`:`${d.charAt(z)}${d.charAt(K)}${d.charAt(oe)}${d.charAt(_e)}`}return h}function U(s,r=!1,e=!1){const t=r?be:ne;function i(d){for(let g=0;g<64;g++)if(t.charAt(g)===d)return g;return 64}function a(d){return 64===d?0:d}let l=0,h="";for(;l<s.length;){const d=i(s.charAt(l++)),g=l>=s.length?0:i(s.charAt(l++)),B=l>=s.length?0:i(s.charAt(l++)),L=l>=s.length?0:i(s.charAt(l++)),z=a(d)<<2|a(g)>>4,K=(15&a(g))<<4|a(B)>>2,oe=(3&a(B))<<6|a(L);h+=String.fromCharCode(z),64!==B&&(h+=String.fromCharCode(K)),64!==L&&(h+=String.fromCharCode(oe))}if(e){let g=-1;for(let B=h.length-1;B>=0;B--)if(0!==h.charCodeAt(B)){g=B;break}h=-1!==g?h.slice(0,g+1):""}return h}function J(s){let r="";const e=new Uint8Array(s);for(const t of e)r+=String.fromCharCode(t);return r}function m(s){const r=s.length,e=new ArrayBuffer(r),t=new Uint8Array(e);for(let i=0;i<r;i++)t[i]=s.charCodeAt(i);return e}const $=Math.log(2);function ce(s){const r=Math.log(s)/$,e=Math.floor(r),t=Math.round(r);return e===t?e:t}function V(s,r){for(const e of r)delete s[e]}function xe(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Se(s){let r=0,e=0;for(let i=0;i<s.length;i++)r+=s[i].byteLength;const t=new Uint8Array(r);for(let i=0;i<s.length;i++){const a=s[i];t.set(new Uint8Array(a),e),e+=a.byteLength}return t.buffer}function Oe(s,r,e,t){return r instanceof Uint8Array?r.byteLength?e<0?(s.error="Wrong parameter: inputOffset less than zero",!1):t<0?(s.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-e-t<0&&(s.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(s.error="Wrong parameter: inputBuffer has zero length",!1):(s.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class te{constructor(){this.items=[]}write(r){this.items.push(r)}final(){return Se(this.items)}}const Z=[new Uint8Array([1])],Ue="0123456789",Ne="name",ke="valueHexView",f="",ae=new ArrayBuffer(0),ie=new Uint8Array(0),M="EndOfContent",x="OCTET STRING",q="BIT STRING";function ue(s){var r;return(r=class extends s{constructor(...t){var i;super(...t);const a=t[0]||{};this.isHexOnly=null!==(i=a.isHexOnly)&&void 0!==i&&i,this.valueHexView=a.valueHex?E._H.toUint8Array(a.valueHex):ie}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,i,a){const l=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!Oe(this,l,i,a))return-1;const h=i+a;return this.valueHexView=l.subarray(i,h),this.valueHexView.length?(this.blockLength=a,h):(this.warnings.push("Zero buffer length"),i)}toBER(t=!1){return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",ae)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:E.U$.ToHex(this.valueHexView)}}}).NAME="hexBlock",r}let T=(()=>{class s{constructor({blockLength:e=0,error:t=f,warnings:i=[],valueBeforeDecode:a=ie}={}){this.blockLength=e,this.error=t,this.warnings=i,this.valueBeforeDecodeView=E._H.toUint8Array(a)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:E.U$.ToHex(this.valueBeforeDecodeView)}}}return s.NAME="baseBlock",s})(),H=(()=>{class s extends T{fromBER(e,t,i){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}return s.NAME="valueBlock",s})(),N=(()=>{class s extends(ue(T)){constructor({idBlock:e={}}={}){var t,i,a,l;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?E._H.toUint8Array(e.valueHex):ie,this.tagClass=null!==(i=e.tagClass)&&void 0!==i?i:-1,this.tagNumber=null!==(a=e.tagNumber)&&void 0!==a?a:-1,this.isConstructed=null!==(l=e.isConstructed)&&void 0!==l&&l):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",ae}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const a=new Uint8Array(1);if(!e){let l=this.tagNumber;l&=31,t|=l,a[0]=t}return a.buffer}if(!this.isHexOnly){const a=A(this.tagNumber,7),l=new Uint8Array(a),h=a.byteLength,d=new Uint8Array(h+1);if(d[0]=31|t,!e){for(let g=0;g<h-1;g++)d[g+1]=128|l[g];d[h]=l[h-1]}return d.buffer}const i=new Uint8Array(this.valueHexView.byteLength+1);if(i[0]=31|t,!e){const a=this.valueHexView;for(let l=0;l<a.length-1;l++)i[l+1]=128|a[l];i[this.valueHexView.byteLength]=a[a.length-1]}return i.buffer}fromBER(e,t,i){const a=E._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);if(0===l.length)return this.error="Zero buffer length",-1;switch(192&l[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=!(32&~l[0]),this.isHexOnly=!1;const d=31&l[0];if(31!==d)this.tagNumber=d,this.blockLength=1;else{let g=1,B=this.valueHexView=new Uint8Array(255),L=255;for(;128&l[g];){if(B[g-1]=127&l[g],g++,g>=l.length)return this.error="End of input reached before message was fully decoded",-1;if(g===L){L+=255;const K=new Uint8Array(L);for(let oe=0;oe<B.length;oe++)K[oe]=B[oe];B=this.valueHexView=new Uint8Array(L)}}this.blockLength=g+1,B[g-1]=127&l[g];const z=new Uint8Array(g);for(let K=0;K<g;K++)z[K]=B[K];B=this.valueHexView=new Uint8Array(g),B.set(z),this.blockLength<=9?this.tagNumber=v(B,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}return s.NAME="identificationBlock",s})(),Q=(()=>{class s extends T{constructor({lenBlock:e={}}={}){var t,i,a;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(i=e.longFormUsed)&&void 0!==i&&i,this.length=null!==(a=e.length)&&void 0!==a?a:0}fromBER(e,t,i){const a=E._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);if(0===l.length)return this.error="Zero buffer length",-1;if(255===l[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===l[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&l[0]),!1===this.longFormUsed)return this.length=l[0],this.blockLength=1,t+this.blockLength;const h=127&l[0];if(h>8)return this.error="Too big integer",-1;if(h+1>l.length)return this.error="End of input reached before message was fully decoded",-1;const d=t+1,g=a.subarray(d,d+h);return 0===g[h-1]&&this.warnings.push("Needlessly long encoded length"),this.length=v(g,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=h+1,t+this.blockLength}toBER(e=!1){let t,i;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(i=new Uint8Array(t),i[0]=128),t;if(this.longFormUsed){const a=A(this.length,8);if(a.byteLength>127)return this.error="Too big length",ae;if(t=new ArrayBuffer(a.byteLength+1),e)return t;const l=new Uint8Array(a);i=new Uint8Array(t),i[0]=128|a.byteLength;for(let h=0;h<a.byteLength;h++)i[h+1]=l[h];return t}return t=new ArrayBuffer(1),!1===e&&(i=new Uint8Array(t),i[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}return s.NAME="lengthBlock",s})();const G={};let Ee=(()=>{class s extends T{constructor({name:e=f,optional:t=!1,primitiveSchema:i,...a}={},l){super(a),this.name=e,this.optional=t,i&&(this.primitiveSchema=i),this.idBlock=new N(a),this.lenBlock=new Q(a),this.valueBlock=l?new l(a):new H(a)}fromBER(e,t,i){const a=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),a)}toBER(e,t){const i=t||new te;t||et(this);const a=this.idBlock.toBER(e);if(i.write(a),this.lenBlock.isIndefiniteForm)i.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,i),i.write(new ArrayBuffer(2));else{const l=this.valueBlock.toBER(e);this.lenBlock.length=l.byteLength;const h=this.lenBlock.toBER(e);i.write(h),i.write(l)}return t?ae:i.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():E.U$.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${E.U$.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){return this===e||e instanceof this.constructor&&Y(this.toBER(),e.toBER())}}return s.NAME="BaseBlock",s})();function et(s){if(s instanceof G.Constructed)for(const r of s.valueBlock.value)et(r)&&(s.lenBlock.isIndefiniteForm=!0);return!!s.lenBlock.isIndefiniteForm}let Je=(()=>{class s extends Ee{constructor({value:e=f,...t}={},i){super(t,i),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,i){const a=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),a)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}return s.NAME="BaseStringBlock",s})(),xt=(()=>{class s extends(ue(H)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}return s.NAME="PrimitiveValueBlock",s})();class Ce extends Ee{constructor(r={}){super(r,xt),this.idBlock.isConstructed=!1}}function Ze(s,r=0,e=s.length){const t=r;let i=new Ee({},H);const a=new T;if(!Oe(a,s,r,e))return i.error=a.error,{offset:-1,result:i};if(!s.subarray(r,r+e).length)return i.error="Zero buffer length",{offset:-1,result:i};let h=i.idBlock.fromBER(s,r,e);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===h)return i.error=i.idBlock.error,{offset:-1,result:i};if(h=i.lenBlock.fromBER(s,r=h,e-=i.idBlock.blockLength),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===h)return i.error=i.lenBlock.error,{offset:-1,result:i};if(r=h,e-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let d=Ee;if(1===i.idBlock.tagClass){if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};d=G.EndOfContent;break;case 1:d=G.Boolean;break;case 2:d=G.Integer;break;case 3:d=G.BitString;break;case 4:d=G.OctetString;break;case 5:d=G.Null;break;case 6:d=G.ObjectIdentifier;break;case 10:d=G.Enumerated;break;case 12:d=G.Utf8String;break;case 13:d=G.RelativeObjectIdentifier;break;case 14:d=G.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:d=G.Sequence;break;case 17:d=G.Set;break;case 18:d=G.NumericString;break;case 19:d=G.PrintableString;break;case 20:d=G.TeletexString;break;case 21:d=G.VideotexString;break;case 22:d=G.IA5String;break;case 23:d=G.UTCTime;break;case 24:d=G.GeneralizedTime;break;case 25:d=G.GraphicString;break;case 26:d=G.VisibleString;break;case 27:d=G.GeneralString;break;case 28:d=G.UniversalString;break;case 29:d=G.CharacterString;break;case 30:d=G.BmpString;break;case 31:d=G.DATE;break;case 32:d=G.TimeOfDay;break;case 33:d=G.DateTime;break;case 34:d=G.Duration;break;default:{const g=i.idBlock.isConstructed?new G.Constructed:new G.Primitive;g.idBlock=i.idBlock,g.lenBlock=i.lenBlock,g.warnings=i.warnings,i=g}}}else d=i.idBlock.isConstructed?G.Constructed:G.Primitive;return i=function kt(s,r){if(s instanceof r)return s;const e=new r;return e.idBlock=s.idBlock,e.lenBlock=s.lenBlock,e.warnings=s.warnings,e.valueBeforeDecodeView=s.valueBeforeDecodeView,e}(i,d),h=i.fromBER(s,r,i.lenBlock.isIndefiniteForm?e:i.lenBlock.length),i.valueBeforeDecodeView=s.subarray(t,t+i.blockLength),{offset:h,result:i}}function ht(s){if(!s.byteLength){const r=new Ee({},H);return r.error="Input buffer has zero length",{offset:-1,result:r}}return Ze(E._H.toUint8Array(s).slice(),0,s.byteLength)}function na(s,r){return s?1:r}G.Primitive=Ce,Ce.NAME="PRIMITIVE";let It=(()=>{class s extends H{constructor({value:e=[],isIndefiniteForm:t=!1,...i}={}){super(i),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,i){const a=E._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;if(this.valueBeforeDecodeView=a.subarray(t,t+i),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let l=t;for(;na(this.isIndefiniteForm,i)>0;){const h=Ze(a,l,i);if(-1===h.offset)return this.error=h.result.error,this.warnings.concat(h.result.warnings),-1;if(l=h.offset,this.blockLength+=h.result.blockLength,i-=h.result.blockLength,this.value.push(h.result),this.isIndefiniteForm&&h.result.constructor.NAME===M)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===M?this.value.pop():this.warnings.push("No EndOfContent block encoded")),l}toBER(e,t){const i=t||new te;for(let a=0;a<this.value.length;a++)this.value[a].toBER(e,i);return t?ae:i.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}return s.NAME="ConstructedValueBlock",s})();class W extends Ee{constructor(r={}){super(r,It),this.idBlock.isConstructed=!0}fromBER(r,e,t){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(r,e,this.lenBlock.isIndefiniteForm?t:this.lenBlock.length);return-1===i?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const r=[];for(const t of this.valueBlock.value)r.push(t.toString("ascii").split("\n").map(i=>`  ${i}`).join("\n"));const e=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return r.length?`${e} :\n${r.join("\n")}`:`${e} :`}}G.Constructed=W,W.NAME="CONSTRUCTED";let Xc=(()=>{class s extends H{fromBER(e,t,i){return t}toBER(e){return ae}}return s.override="EndOfContentValueBlock",s})();class aa extends Ee{constructor(r={}){super(r,Xc),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}G.EndOfContent=aa,aa.NAME=M;class ot extends Ee{constructor(r={}){super(r,H),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(r,e,t){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=t,e+t>r.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):e+t}toBER(r,e){const t=new ArrayBuffer(2);if(!r){const i=new Uint8Array(t);i[0]=5,i[1]=0}return e&&e.write(t),t}onAsciiEncoding(){return`${this.constructor.NAME}`}}G.Null=ot,ot.NAME="NULL";let Yf=(()=>{class s extends(ue(H)){constructor({value:e,...t}={}){super(t),this.valueHexView=t.valueHex?E._H.toUint8Array(t.valueHex):new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,i){const a=E._H.toUint8Array(e);return Oe(this,a,t,i)?(this.valueHexView=a.subarray(t,t+i),i>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,P.call(this),this.blockLength=i,t+i):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}return s.NAME="BooleanValueBlock",s})();class Ss extends Ee{constructor(r={}){super(r,Yf),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(r){this.valueBlock.value=r}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}G.Boolean=Ss,Ss.NAME="BOOLEAN";let Zf=(()=>{class s extends(ue(It)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,i){let a=0;if(this.isConstructed){if(this.isHexOnly=!1,a=It.prototype.fromBER.call(this,e,t,i),-1===a)return a;for(let l=0;l<this.value.length;l++){const h=this.value[l].constructor.NAME;if(h===M){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(h!==x)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=super.fromBER(e,t,i),this.blockLength=i;return a}toBER(e,t){return this.isConstructed?It.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}return s.NAME="OctetStringValueBlock",s})();class ge extends Ee{constructor({idBlock:r={},lenBlock:e={},...t}={}){var i,a;null!==(i=t.isConstructed)&&void 0!==i||(t.isConstructed=!(null===(a=t.value)||void 0===a||!a.length)),super({idBlock:{isConstructed:t.isConstructed,...r},lenBlock:{...e,isIndefiniteForm:!!t.isIndefiniteForm},...t},Zf),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(r,e,t){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===t)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),e;if(!this.valueBlock.isConstructed){const a=(r instanceof ArrayBuffer?new Uint8Array(r):r).subarray(e,e+t);try{if(a.byteLength){const l=Ze(a,0,a.byteLength);-1!==l.offset&&l.offset===t&&(this.valueBlock.value=[l.result])}}catch{}}return super.fromBER(r,e,t)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?W.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${E.U$.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const r=[];for(const e of this.valueBlock.value)e instanceof ge&&r.push(e.valueBlock.valueHexView);return E._H.concat(r)}}G.OctetString=ge,ge.NAME=x;let Qf=(()=>{class s extends(ue(It)){constructor({unusedBits:e=0,isConstructed:t=!1,...i}={}){super(i),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,i){if(!i)return t;let a=-1;if(this.isConstructed){if(a=It.prototype.fromBER.call(this,e,t,i),-1===a)return a;for(const d of this.value){const g=d.constructor.NAME;if(g===M){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(g!==q)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const B=d.valueBlock;if(this.unusedBits>0&&B.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=B.unusedBits}return a}const l=E._H.toUint8Array(e);if(!Oe(this,l,t,i))return-1;const h=l.subarray(t,t+i);if(this.unusedBits=h[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const d=h.subarray(1);try{if(d.byteLength){const g=Ze(d,0,d.byteLength);-1!==g.offset&&g.offset===i-1&&(this.value=[g.result])}}catch{}}return this.valueHexView=h.subarray(1),this.blockLength=h.length,t+i}toBER(e,t){if(this.isConstructed)return It.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return ae;const i=new Uint8Array(this.valueHexView.length+1);return i[0]=this.unusedBits,i.set(this.valueHexView,1),i.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}return s.NAME="BitStringValueBlock",s})();var zh;class Ye extends Ee{constructor({idBlock:r={},lenBlock:e={},...t}={}){var i,a;null!==(i=t.isConstructed)&&void 0!==i||(t.isConstructed=!(null===(a=t.value)||void 0===a||!a.length)),super({idBlock:{isConstructed:t.isConstructed,...r},lenBlock:{...e,isIndefiniteForm:!!t.isIndefiniteForm},...t},Qf),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(r,e,t){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(r,e,t)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return W.prototype.onAsciiEncoding.call(this);{const r=[],e=this.valueBlock.valueHexView;for(const i of e)r.push(i.toString(2).padStart(8,"0"));const t=r.join("");return`${this.constructor.NAME} : ${t.substring(0,t.length-this.valueBlock.unusedBits)}`}}}function em(s,r){const e=new Uint8Array([0]),t=new Uint8Array(s),i=new Uint8Array(r);let a=t.slice(0);const l=a.length-1,h=i.slice(0),d=h.length-1;let g=0,L=0;for(let z=d<l?l:d;z>=0;z--,L++)g=1==L<h.length?a[l-L]+h[d-L]+e[0]:a[l-L]+e[0],e[0]=g/10,1==L>=a.length?a=R(new Uint8Array([g%10]),a):a[l-L]=g%10;return e[0]>0&&(a=R(e,a)),a}function qh(s){if(s>=Z.length)for(let r=Z.length;r<=s;r++){const e=new Uint8Array([0]);let t=Z[r-1].slice(0);for(let i=t.length-1;i>=0;i--){const a=new Uint8Array([(t[i]<<1)+e[0]]);e[0]=a[0]/10,t[i]=a[0]%10}e[0]>0&&(t=R(e,t)),Z.push(t)}return Z[s]}function tm(s,r){let e=0;const t=new Uint8Array(s),i=new Uint8Array(r),a=t.slice(0),l=a.length-1,h=i.slice(0),d=h.length-1;let g,B=0;for(let L=d;L>=0;L--,B++)g=a[l-B]-h[d-B]-e,1==g<0?(e=1,a[l-B]=g+10):(e=0,a[l-B]=g);if(e>0)for(let L=l-d+1;L>=0;L--,B++){if(g=a[l-B]-e,!(g<0)){e=0,a[l-B]=g;break}e=1,a[l-B]=g+10}return a.slice()}G.BitString=Ye,Ye.NAME=q;class Yc extends(ue(H)){constructor({value:r,...e}={}){super(e),this._valueDec=0,e.valueHex&&this.setValueHex(),void 0!==r&&(this.valueDec=r)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=P.call(this)))}set valueDec(r){this._valueDec=r,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function X(s){const r=s<0?-1*s:s;let e=128;for(let t=1;t<8;t++){if(r<=e){if(s<0){const h=A(e-r,8,t);return new Uint8Array(h)[0]|=128,h}let i=A(r,8,t),a=new Uint8Array(i);if(128&a[0]){const l=i.slice(0),h=new Uint8Array(l);i=new ArrayBuffer(i.byteLength+1),a=new Uint8Array(i);for(let d=0;d<l.byteLength;d++)a[d+1]=h[d];a[0]=0}return i}e*=Math.pow(2,8)}return new ArrayBuffer(0)}(r))}get valueDec(){return this._valueDec}fromDER(r,e,t,i=0){const a=this.fromBER(r,e,t);if(-1===a)return a;const l=this.valueHexView;return 0===l[0]&&128&l[1]?this.valueHexView=l.subarray(1):0!==i&&l.length<i&&(i-l.length>1&&(i=l.length+1),this.valueHexView=l.subarray(i-l.length)),a}toDER(r=!1){const e=this.valueHexView;switch(!0){case!!(128&e[0]):{const t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(e,1),this.valueHexView=t}break;case 0===e[0]&&!(128&e[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(r)}fromBER(r,e,t){const i=super.fromBER(r,e,t);return-1===i||this.setValueHex(),i}toBER(r){return r?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const r=8*this.valueHexView.length-1;let i,e=new Uint8Array(8*this.valueHexView.length/3),t=0;const a=this.valueHexView;let l="",h=!1;for(let d=a.byteLength-1;d>=0;d--){i=a[d];for(let g=0;g<8;g++)1&~i||(t===r?(e=tm(qh(t),e),l="-"):e=em(e,qh(t))),t++,i>>=1}for(let d=0;d<e.length;d++)e[d]&&(h=!0),h&&(l+=Ue.charAt(e[d]));return!1===h&&(l+=Ue.charAt(0)),l}}zh=Yc,Yc.NAME="IntegerValueBlock",Object.defineProperty(zh.prototype,"valueHex",{set:function(s){this.valueHexView=new Uint8Array(s),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class ee extends Ee{constructor(r={}){super(r,Yc),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return xe(),BigInt(this.valueBlock.toString())}static fromBigInt(r){xe();const e=BigInt(r),t=new te,i=e.toString(16).replace(/^-/,""),a=new Uint8Array(E.U$.FromHex(i));if(e<0){const h=new Uint8Array(a.length+(128&a[0]?1:0));h[0]|=128;const g=BigInt(`0x${E.U$.ToHex(h)}`)+e,B=E._H.toUint8Array(E.U$.FromHex(g.toString(16)));B[0]|=128,t.write(B)}else 128&a[0]&&t.write(new Uint8Array([0])),t.write(a);return new ee({valueHex:t.final()})}convertToDER(){const r=new ee({valueHex:this.valueBlock.valueHexView});return r.valueBlock.toDER(),r}convertFromDER(){return new ee({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}G.Integer=ee,ee.NAME="INTEGER";class oa extends ee{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}G.Enumerated=oa,oa.NAME="ENUMERATED";let Yh=(()=>{class s extends(ue(H)){constructor({valueDec:e=-1,isFirstSid:t=!1,...i}={}){super(i),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,i){if(!i)return t;const a=E._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);this.valueHexView=new Uint8Array(i);for(let d=0;d<i&&(this.valueHexView[d]=127&l[d],this.blockLength++,128&l[d]);d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,128&l[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=v(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){xe();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const i=new Uint8Array(t.length/7);for(let a=0;a<i.length;a++)i[a]=parseInt(t.slice(7*a,7*a+7),2)+(a+1<i.length?128:0);this.fromBER(i.buffer,0,i.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const a=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=128|a[h];return l[this.blockLength-1]=a[this.blockLength-1],l.buffer}const t=A(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",ae;const i=new Uint8Array(t.byteLength);if(!e){const a=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)i[h]=128|a[h];i[l]=a[l]}return i}toString(){let e="";if(this.isHexOnly)e=E.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}return s.NAME="sidBlock",s})(),sm=(()=>{class s extends H{constructor({value:e=f,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,i){let a=t;for(;i>0;){const l=new Yh;if(a=l.fromBER(e,a,i),-1===a)return this.blockLength=0,this.error=l.error,a;0===this.value.length&&(l.isFirstSid=!0),this.blockLength+=l.blockLength,i-=l.blockLength,this.value.push(l)}return a}toBER(e){const t=[];for(let i=0;i<this.value.length;i++){const a=this.value[i].toBER(e);if(0===a.byteLength)return this.error=this.value[i].error,ae;t.push(a)}return Se(t)}fromString(e){this.value=[];let t=0,i=0,a="",l=!1;do{if(i=e.indexOf(".",t),a=-1===i?e.substring(t):e.substring(t,i),t=i+1,l){const h=this.value[0];let d=0;switch(h.valueDec){case 0:break;case 1:d=40;break;case 2:d=80;break;default:return void(this.value=[])}const g=parseInt(a,10);if(isNaN(g))return;h.valueDec=g+d,l=!1}else{const h=new Yh;if(a>Number.MAX_SAFE_INTEGER){xe();const d=BigInt(a);h.valueBigInt=d}else if(h.valueDec=parseInt(a,10),isNaN(h.valueDec))return;this.value.length||(h.isFirstSid=!0,l=!0),this.value.push(h)}}while(-1!==i)}toString(){let e="",t=!1;for(let i=0;i<this.value.length;i++){t=this.value[i].isHexOnly;let a=this.value[i].toString();0!==i&&(e=`${e}.`),t?(a=`{${a}}`,this.value[i].isFirstSid?e=`2.{${a} - 80}`:e+=a):e+=a}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}return s.NAME="ObjectIdentifierValueBlock",s})();class Be extends Ee{constructor(r={}){super(r,sm),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}G.ObjectIdentifier=Be,Be.NAME="OBJECT IDENTIFIER";let Qh=(()=>{class s extends(ue(T)){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,i){if(0===i)return t;const a=E._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);this.valueHexView=new Uint8Array(i);for(let d=0;d<i&&(this.valueHexView[d]=127&l[d],this.blockLength++,128&l[d]);d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,128&l[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=v(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const a=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=128|a[h];return l[this.blockLength-1]=a[this.blockLength-1],l.buffer}const t=A(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",ae;const i=new Uint8Array(t.byteLength);if(!e){const a=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)i[h]=128|a[h];i[l]=a[l]}return i.buffer}toString(){let e="";return e=this.isHexOnly?E.U$.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}return s.NAME="relativeSidBlock",s})(),im=(()=>{class s extends H{constructor({value:e=f,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,i){let a=t;for(;i>0;){const l=new Qh;if(a=l.fromBER(e,a,i),-1===a)return this.blockLength=0,this.error=l.error,a;this.blockLength+=l.blockLength,i-=l.blockLength,this.value.push(l)}return a}toBER(e,t){const i=[];for(let a=0;a<this.value.length;a++){const l=this.value[a].toBER(e);if(0===l.byteLength)return this.error=this.value[a].error,ae;i.push(l)}return Se(i)}fromString(e){this.value=[];let t=0,i=0,a="";do{i=e.indexOf(".",t),a=-1===i?e.substring(t):e.substring(t,i),t=i+1;const l=new Qh;if(l.valueDec=parseInt(a,10),isNaN(l.valueDec))return!0;this.value.push(l)}while(-1!==i);return!0}toString(){let e="",t=!1;for(let i=0;i<this.value.length;i++){t=this.value[i].isHexOnly;let a=this.value[i].toString();0!==i&&(e=`${e}.`),t&&(a=`{${a}}`),e+=a}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}return s.NAME="RelativeObjectIdentifierValueBlock",s})();class td extends Ee{constructor(r={}){super(r,im),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}G.RelativeObjectIdentifier=td,td.NAME="RelativeObjectIdentifier";class j extends W{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}G.Sequence=j,j.NAME="SEQUENCE";class Et extends W{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}G.Set=Et,Et.NAME="SET";let nm=(()=>{class s extends(ue(H)){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=f}toJSON(){return{...super.toJSON(),value:this.value}}}return s.NAME="StringValueBlock",s})(),rm=(()=>{class s extends nm{}return s.NAME="SimpleStringValueBlock",s})(),$t=(()=>{class s extends Je{constructor({...e}={}){super(e,rm)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,E._H.toUint8Array(e))}fromString(e){const t=e.length,i=this.valueBlock.valueHexView=new Uint8Array(t);for(let a=0;a<t;a++)i[a]=e.charCodeAt(a);this.valueBlock.value=e}}return s.NAME="SIMPLE STRING",s})(),am=(()=>{class s extends $t{fromBuffer(e){this.valueBlock.valueHexView=E._H.toUint8Array(e);try{this.valueBlock.value=E.U$.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=E.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(E.U$.FromUtf8String(e)),this.valueBlock.value=e}}return s.NAME="Utf8StringValueBlock",s})();class es extends am{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}G.Utf8String=es,es.NAME="UTF8String";let om=(()=>{class s extends $t{fromBuffer(e){this.valueBlock.value=E.U$.ToUtf16String(e),this.valueBlock.valueHexView=E._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(E.U$.FromUtf16String(e))}}return s.NAME="BmpStringValueBlock",s})();class qt extends om{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}G.BmpString=qt,qt.NAME="BMPString";let lm=(()=>{class s extends $t{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),i=new Uint8Array(t);for(let a=0;a<i.length;a+=4)i[a]=i[a+3],i[a+1]=i[a+2],i[a+2]=0,i[a+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,i=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let a=0;a<t;a++){const l=A(e.charCodeAt(a),8),h=new Uint8Array(l);if(h.length>4)continue;const d=4-h.length;for(let g=h.length-1;g>=0;g--)i[4*a+g+d]=h[g]}this.valueBlock.value=e}}return s.NAME="UniversalStringValueBlock",s})();class la extends lm{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}G.UniversalString=la,la.NAME="UniversalString";class Rn extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}G.NumericString=Rn,Rn.NAME="NumericString";class Kt extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}G.PrintableString=Kt,Kt.NAME="PrintableString";class ca extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}G.TeletexString=ca,ca.NAME="TeletexString";class Zc extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}G.VideotexString=Zc,Zc.NAME="VideotexString";class xl extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}G.IA5String=xl,xl.NAME="IA5String";class Qc extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}G.GraphicString=Qc,Qc.NAME="GraphicString";class Bl extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}G.VisibleString=Bl,Bl.NAME="VisibleString";class eu extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}G.GeneralString=eu,eu.NAME="GeneralString";class tu extends $t{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}G.CharacterString=tu,tu.NAME="CharacterString";class Vn extends Bl{constructor({value:r,valueDate:e,...t}={}){if(super(t),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,r){this.fromString(r),this.valueBlock.valueHexView=new Uint8Array(r.length);for(let i=0;i<r.length;i++)this.valueBlock.valueHexView[i]=r.charCodeAt(i)}e&&(this.fromDate(e),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(r){this.fromString(String.fromCharCode.apply(null,E._H.toUint8Array(r)))}toBuffer(){const r=this.toString(),e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return e}fromDate(r){this.year=r.getUTCFullYear(),this.month=r.getUTCMonth()+1,this.day=r.getUTCDate(),this.hour=r.getUTCHours(),this.minute=r.getUTCMinutes(),this.second=r.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(r){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(r);if(null===t)return void(this.error="Wrong input string for conversion");const i=parseInt(t[1],10);this.year=i>=50?1900+i:2e3+i,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(r="iso"){if("iso"===r){const e=new Array(7);return e[0]=de(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=de(this.month,2),e[2]=de(this.day,2),e[3]=de(this.hour,2),e[4]=de(this.minute,2),e[5]=de(this.second,2),e[6]="Z",e.join("")}return super.toString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}G.UTCTime=Vn,Vn.NAME="UTCTime";class ft extends Vn{constructor(r={}){var e;super(r),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(r){super.fromDate(r),this.millisecond=r.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(r){let l,e=!1,t="",i="",a=0,h=0,d=0;if("Z"===r[r.length-1])t=r.substring(0,r.length-1),e=!0;else{const L=new Number(r[r.length-1]);if(isNaN(L.valueOf()))throw new Error("Wrong input string for conversion");t=r}if(e){if(-1!==t.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==t.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let L=1,z=t.indexOf("+"),K="";if(-1===z&&(z=t.indexOf("-"),L=-1),-1!==z){if(K=t.substring(z+1),t=t.substring(0,z),2!==K.length&&4!==K.length)throw new Error("Wrong input string for conversion");let oe=parseInt(K.substring(0,2),10);if(isNaN(oe.valueOf()))throw new Error("Wrong input string for conversion");if(h=L*oe,4===K.length){if(oe=parseInt(K.substring(2,4),10),isNaN(oe.valueOf()))throw new Error("Wrong input string for conversion");d=L*oe}}}let g=t.indexOf(".");if(-1===g&&(g=t.indexOf(",")),-1!==g){const L=new Number(`0${t.substring(g)}`);if(isNaN(L.valueOf()))throw new Error("Wrong input string for conversion");a=L.valueOf(),i=t.substring(0,g)}else i=t;switch(!0){case 8===i.length:if(l=/(\d{4})(\d{2})(\d{2})/gi,-1!==g)throw new Error("Wrong input string for conversion");break;case 10===i.length:if(l=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==g){let L=60*a;this.minute=Math.floor(L),L=60*(L-this.minute),this.second=Math.floor(L),L=1e3*(L-this.second),this.millisecond=Math.floor(L)}break;case 12===i.length:if(l=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==g){let L=60*a;this.second=Math.floor(L),L=1e3*(L-this.second),this.millisecond=Math.floor(L)}break;case 14===i.length:l=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==g&&(this.millisecond=Math.floor(1e3*a));break;default:throw new Error("Wrong input string for conversion")}const B=l.exec(i);if(null===B)throw new Error("Wrong input string for conversion");for(let L=1;L<B.length;L++)switch(L){case 1:this.year=parseInt(B[L],10);break;case 2:this.month=parseInt(B[L],10);break;case 3:this.day=parseInt(B[L],10);break;case 4:this.hour=parseInt(B[L],10)+h;break;case 5:this.minute=parseInt(B[L],10)+d;break;case 6:this.second=parseInt(B[L],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===e){const L=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=L.getUTCFullYear(),this.month=L.getUTCMonth(),this.day=L.getUTCDay(),this.hour=L.getUTCHours(),this.minute=L.getUTCMinutes(),this.second=L.getUTCSeconds(),this.millisecond=L.getUTCMilliseconds()}}toString(r="iso"){if("iso"===r){const e=[];return e.push(de(this.year,4)),e.push(de(this.month,2)),e.push(de(this.day,2)),e.push(de(this.hour,2)),e.push(de(this.minute,2)),e.push(de(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(de(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(r)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}G.GeneralizedTime=ft,ft.NAME="GeneralizedTime";class yd extends es{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}G.DATE=yd,yd.NAME="DATE";class bd extends es{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}G.TimeOfDay=bd,bd.NAME="TimeOfDay";class _d extends es{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}G.DateTime=_d,_d.NAME="DateTime";class Ed extends es{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}G.Duration=Ed,Ed.NAME="Duration";class Nd extends es{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}G.TIME=Nd,Nd.NAME="TIME";class Me{constructor({name:r=f,optional:e=!1}={}){this.name=r,this.optional=e}}class mt extends Me{constructor({value:r=[],...e}={}){super(e),this.value=r}}class He extends Me{constructor({value:r=new Me,local:e=!1,...t}={}){super(t),this.value=r,this.local=e}}class Rl{constructor({data:r=ie}={}){this.dataView=E._H.toUint8Array(r)}get data(){return this.dataView.slice().buffer}set data(r){this.dataView=E._H.toUint8Array(r)}fromBER(r,e,t){const i=e+t;return this.dataView=E._H.toUint8Array(r).subarray(e,i),i}toBER(r){return this.dataView.slice().buffer}}function me(s,r,e){if(e instanceof mt){for(let a=0;a<e.value.length;a++)if(me(s,r,e.value[a]).verified)return{verified:!0,result:s};{const a={verified:!1,result:{error:"Wrong values for Choice type"}};return e.hasOwnProperty(Ne)&&(a.name=e.name),a}}if(e instanceof Me)return e.hasOwnProperty(Ne)&&(s[e.name]=r),{verified:!0,result:s};if(!(s instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("idBlock"in e))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("fromBER"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("toBER"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const t=e.idBlock.toBER(!1);if(0===t.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===e.idBlock.fromBER(t,0,t.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===e.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.tagClass!==r.idBlock.tagClass)return{verified:!1,result:s};if(!1===e.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.tagNumber!==r.idBlock.tagNumber)return{verified:!1,result:s};if(!1===e.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.isConstructed!==r.idBlock.isConstructed)return{verified:!1,result:s};if(!("isHexOnly"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.isHexOnly!==r.idBlock.isHexOnly)return{verified:!1,result:s};if(e.idBlock.isHexOnly){if(!(ke in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const a=e.idBlock.valueHexView,l=r.idBlock.valueHexView;if(a.length!==l.length)return{verified:!1,result:s};for(let h=0;h<a.length;h++)if(a[h]!==l[1])return{verified:!1,result:s}}if(e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(s[e.name]=r)),e instanceof G.Constructed){let a=0,l={verified:!1,result:{error:"Unknown error"}},h=e.valueBlock.value.length;if(h>0&&e.valueBlock.value[0]instanceof He&&(h=r.valueBlock.value.length),0===h)return{verified:!0,result:s};if(0===r.valueBlock.value.length&&0!==e.valueBlock.value.length){let d=!0;for(let g=0;g<e.valueBlock.value.length;g++)d=d&&(e.valueBlock.value[g].optional||!1);return d?{verified:!0,result:s}:(e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),s.error="Inconsistent object length",{verified:!1,result:s})}for(let d=0;d<h;d++)if(d-a>=r.valueBlock.value.length){if(!1===e.valueBlock.value[d].optional){const g={verified:!1,result:s};return s.error="Inconsistent length between ASN.1 data and schema",e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],g.name=e.name)),g}}else if(e.valueBlock.value[0]instanceof He){if(l=me(s,r.valueBlock.value[d],e.valueBlock.value[0].value),!1===l.verified){if(!e.valueBlock.value[0].optional)return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),l;a++}if(Ne in e.valueBlock.value[0]&&e.valueBlock.value[0].name.length>0){let g={};g="local"in e.valueBlock.value[0]&&e.valueBlock.value[0].local?r:s,typeof g[e.valueBlock.value[0].name]>"u"&&(g[e.valueBlock.value[0].name]=[]),g[e.valueBlock.value[0].name].push(r.valueBlock.value[d])}}else if(l=me(s,r.valueBlock.value[d-a],e.valueBlock.value[d]),!1===l.verified){if(!e.valueBlock.value[d].optional)return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),l;a++}if(!1===l.verified){const d={verified:!1,result:s};return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],d.name=e.name)),d}return{verified:!0,result:s}}if(e.primitiveSchema&&ke in r.valueBlock){const a=Ze(r.valueBlock.valueHexView);if(-1===a.offset){const l={verified:!1,result:a.result};return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],l.name=e.name)),l}return me(s,a.result,e.primitiveSchema)}return{verified:!0,result:s}}class yt{constructor(r={}){if("view"in r)this.fromUint8Array(r.view);else if("buffer"in r)this.fromArrayBuffer(r.buffer);else if("string"in r)this.fromString(r.string);else if("hexstring"in r)this.fromHexString(r.hexstring);else if("length"in r&&r.length>0){if(this.length=r.length,r.stub)for(let e=0;e<this._view.length;e++)this._view[e]=r.stub}else this.length=0}set buffer(r){this._buffer=r,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(r){this._buffer=new ArrayBuffer(r.length),this._view=new Uint8Array(this._buffer),this._view.set(r)}get view(){return this._view}get length(){return this.view.byteLength}set length(r){this._buffer=new ArrayBuffer(r),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(r){this._buffer=r,this._view=new Uint8Array(this._buffer)}fromUint8Array(r){this.fromArrayBuffer(new Uint8Array(r).buffer)}fromString(r){const e=r.length;this.length=e;for(let t=0;t<e;t++)this.view[t]=r.charCodeAt(t)}toString(r=0,e=this.view.length-r){let t="";(r>=this.view.length||r<0)&&(r=0),(e>=this.view.length||e<0)&&(e=this.view.length-r);for(let i=r;i<r+e;i++)t+=String.fromCharCode(this.view[i]);return t}fromHexString(r){const e=r.length;this.buffer=new ArrayBuffer(e>>1),this.view=new Uint8Array(this.buffer);const t=new Map;t.set("0",0),t.set("1",1),t.set("2",2),t.set("3",3),t.set("4",4),t.set("5",5),t.set("6",6),t.set("7",7),t.set("8",8),t.set("9",9),t.set("A",10),t.set("a",10),t.set("B",11),t.set("b",11),t.set("C",12),t.set("c",12),t.set("D",13),t.set("d",13),t.set("E",14),t.set("e",14),t.set("F",15),t.set("f",15);let i=0,a=0;for(let l=0;l<e;l++)l%2?(a|=t.get(r.charAt(l)),this.view[i]=a,i++):a=t.get(r.charAt(l))<<4}toHexString(r=0,e=this.view.length-r){let t="";(r>=this.view.length||r<0)&&(r=0),(e>=this.view.length||e<0)&&(e=this.view.length-r);for(let i=r;i<r+e;i++){const a=this.view[i].toString(16).toUpperCase();t=t+(1==a.length?"0":"")+a}return t}copy(r=0,e=this.length-r){if(!r&&!this.length)return new yt;if(r<0||r>this.length-1)throw new Error(`Wrong start position: ${r}`);return new yt({buffer:this._buffer.slice(r,r+e)})}slice(r=0,e=this.length){if(!r&&!this.length)return new yt;if(r<0||r>this.length-1)throw new Error(`Wrong start position: ${r}`);return new yt({buffer:this._buffer.slice(r,e)})}realloc(r){const e=new ArrayBuffer(r);new Uint8Array(e).set(r>this._view.length?this._view:new Uint8Array(this._buffer,0,r)),this._buffer=e,this._view=new Uint8Array(this._buffer)}append(r){const e=this.length,t=r.length,i=r._view.subarray();this.realloc(e+t),this._view.set(i,e)}insert(r,e=0,t=this.length-e){return!(e>this.length-1||(t>this.length-e&&(t=this.length-e),t>r.length&&(t=r.length),this._view.set(t==r.length?r._view:r._view.subarray(0,t),e),0))}isEqual(r){if(this.length!=r.length)return!1;for(let e=0;e<r.length;e++)if(this.view[e]!=r.view[e])return!1;return!0}isEqualView(r){if(r.length!=this.view.length)return!1;for(let e=0;e<r.length;e++)if(this.view[e]!=r[e])return!1;return!0}findPattern(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i),d=r.length;if(d>l)return-1;const g=[];for(let B=0;B<d;B++)g.push(r.view[B]);for(let B=0;B<=l-d;B++){let L=!0;const z=h?a-d-B:a+B;for(let K=0;K<d;K++)if(this.view[K+z]!=g[K]){L=!1;break}if(L)return h?a-d-B:a+d+B}return-1}findFirstIn(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i),d={id:-1,position:h?0:a+l,length:0};for(let g=0;g<r.length;g++){const B=this.findPattern(r[g],a,l,h);if(-1!=B){let L=!1;const z=r[g].length;h?B-z>=d.position-d.length&&(L=!0):B-z<=d.position-d.length&&(L=!0),L&&(d.position=B,d.id=g,d.length=z)}}return d}findAllIn(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={id:-1,position:i};for(;;){const d=h.position;if(h=this.findFirstIn(r,h.position,a),-1==h.id)break;a-=h.position-d,l.push({id:h.id,position:h.position})}return l}findAllPatternIn(r,e,t){const{start:i,length:a}=this.prepareFindParameters(e,t),l=[],h=r.length;if(h>a)return-1;const d=Array.from(r.view);for(let g=0;g<=a-h;g++){let B=!0;const L=i+g;for(let z=0;z<h;z++)if(this.view[z+L]!=d[z]){B=!1;break}B&&(l.push(i+h+g),g+=h-1)}return l}findFirstNotIn(r,e,t,i){let{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);const d={left:{id:-1,position:a},right:{id:-1,position:0},value:new yt};let g=l;for(;g>0;){if(d.right=this.findFirstIn(r,h?a-l+g:a+l-g,g,h),-1==d.right.id){l=g,h?a-=l:a=d.left.position,d.value=new yt({buffer:this._buffer.slice(a,a+l)});break}if(d.right.position!=(h?d.left.position-r[d.right.id].length:d.left.position+r[d.right.id].length)){h?(a=d.right.position+r[d.right.id].length,l=d.left.position-d.right.position-r[d.right.id].length):(a=d.left.position,l=d.right.position-d.left.position-r[d.right.id].length),d.value=new yt({buffer:this._buffer.slice(a,a+l)});break}d.left=d.right,g-=r[d.right.id].length}if(h){const B=d.right;d.right=d.left,d.left=B}return d}findAllNotIn(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={left:{id:-1,position:i},right:{id:-1,position:i},value:new yt};do{const d=h.right.position;h=this.findFirstNotIn(r,h.right.position,a),a-=h.right.position-d,l.push({left:{id:h.left.id,position:h.left.position},right:{id:h.right.id,position:h.right.position},value:h.value})}while(-1!=h.right.id);return l}findFirstSequence(r,e,t,i){let{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);const d=this.skipNotPatterns(r,a,l,h);if(-1==d)return{position:-1,value:new yt};const g=this.skipPatterns(r,d,l-(h?a-d:d-a),h);return h?(a=g,l=d-g):(a=d,l=g-d),{position:g,value:new yt({buffer:this._buffer.slice(a,a+l)})}}findAllSequences(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={position:i,value:new yt};do{const d=h.position;h=this.findFirstSequence(r,h.position,a),-1!=h.position&&(a-=h.position-d,l.push({position:h.position,value:h.value}))}while(-1!=h.position);return l}findPairedPatterns(r,e,t,i){const a=[];if(r.isEqual(e))return a;const{start:l,length:h}=this.prepareFindParameters(t,i);let d=0;const g=this.findAllPatternIn(r,l,h);if(!Array.isArray(g)||0==g.length)return a;const B=this.findAllPatternIn(e,l,h);if(!Array.isArray(B)||0==B.length)return a;for(;d<g.length&&0!=B.length;)if(g[0]!=B[0]){if(g[d]>B[0])break;for(;g[d]<B[0]&&(d++,!(d>=g.length)););a.push({left:g[d-1],right:B[0]}),g.splice(d-1,1),B.splice(0,1),d=0}else a.push({left:g[0],right:B[0]}),g.splice(0,1),B.splice(0,1);return a.sort((L,z)=>L.left-z.left),a}findPairedArrays(r,e,t,i){const{start:a,length:l}=this.prepareFindParameters(t,i),h=[];let d=0;const g=this.findAllIn(r,a,l);if(0==g.length)return h;const B=this.findAllIn(e,a,l);if(0==B.length)return h;for(;d<g.length&&0!=B.length;)if(g[0].position!=B[0].position){if(g[d].position>B[0].position)break;for(;g[d].position<B[0].position&&(d++,!(d>=g.length)););h.push({left:g[d-1],right:B[0]}),g.splice(d-1,1),B.splice(0,1),d=0}else h.push({left:g[0],right:B[0]}),g.splice(0,1),B.splice(0,1);return h.sort((L,z)=>L.left.position-z.left.position),h}replacePattern(r,e,t,i,a=null){let h,l=[];const d={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:g,length:B}=this.prepareFindParameters(t,i);if(null==a){if(l=this.findAllIn([r],g,B),0==l.length)return d}else l=a;d.searchPatternPositions.push(...Array.from(l,oe=>oe.position));const L=r.length-e.length,z=new ArrayBuffer(this.view.length-l.length*L),K=new Uint8Array(z);for(K.set(new Uint8Array(this.buffer,0,g)),h=0;h<l.length;h++){const oe=0==h?g:l[h-1].position;K.set(new Uint8Array(this.buffer,oe,l[h].position-r.length-oe),oe-h*L),K.set(e.view,l[h].position-r.length-h*L),d.replacePatternPositions.push(l[h].position-r.length-h*L)}return h--,K.set(new Uint8Array(this.buffer,l[h].position,this.length-l[h].position),l[h].position-r.length+e.length-h*L),this.buffer=z,this.view=new Uint8Array(this.buffer),d.status=1,d}skipPatterns(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);let d=a;for(let g=0;g<r.length;g++){const B=r[g].length,L=h?d-B:d;let z=!0;for(let K=0;K<B;K++)if(this.view[K+L]!=r[g].view[K]){z=!1;break}if(z)if(g=-1,h){if(d-=B,d<=0)return d}else if(d+=B,d>=a+l)return d}return d}skipNotPatterns(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);let d=-1;for(let g=0;g<l;g++){for(let B=0;B<r.length;B++){const L=r[B].length,z=h?a-g-L:a+g;let K=!0;for(let oe=0;oe<L;oe++)if(this.view[oe+z]!=r[B].view[oe]){K=!1;break}if(K){d=h?a-g:a+g;break}}if(-1!=d)break}return d}prepareFindParameters(r=null,e=null,t=!1){return null===r&&(r=t?this.length:0),r>this.length&&(r=this.length),t?(null===e&&(e=r),e>r&&(e=r)):(null===e&&(e=this.length-r),e>this.length-r&&(e=this.length-r)),{start:r,length:e,backward:t}}}let ua=(()=>{class s{constructor(e={}){this._stream=new yt,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new yt({view:e.view}):"buffer"in e?new yt({buffer:e.buffer}):"string"in e?new yt({string:e.string}):"hexstring"in e?new yt({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new yt,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(null==t||t>this.length)&&(t=this.length);const i=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==i)return i;if(this.backward){if(i<this.start-e.length-t)return-1}else if(i>this.start+e.length+t)return-1;return this.start=i,i}findFirstIn(e,t=null){(null==t||t>this.length)&&(t=this.length);const i=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==i.id)return i;if(this.backward){if(i.position<this.start-e[i.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(i.position>this.start+e[i.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=i.position,i}findAllIn(e){return this.stream.findAllIn(e,this.backward?this.start-this.length:this.start,this.length)}findFirstNotIn(e,t=null){(null==t||t>this._length)&&(t=this._length);const i=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==i.left.id&&-1==i.right.id)return i;if(this.backward){if(-1!=i.right.id&&i.right.position<this._start-e[i.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new yt}}else if(-1!=i.left.id&&i.left.position>this._start+e[i.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new yt};return this.start=this.backward?-1==i.left.id?0:i.left.position:-1==i.right.id?this._start+this._length:i.right.position,i}findAllNotIn(e){return this._stream.findAllNotIn(e,this.backward?this._start-this._length:this._start,this._length)}findFirstSequence(e,t=null,i=null){(null==t||t>this._length)&&(t=this._length),(null==i||i>t)&&(i=t);const a=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==a.value.length)return a;if(this.backward){if(a.position<this._start-a.value.length-i)return{position:-1,value:new yt}}else if(a.position>this._start+a.value.length+i)return{position:-1,value:new yt};return this.start=a.position,a}findAllSequences(e){return this.stream.findAllSequences(e,this.backward?this.start-this.length:this.start,this.length)}findPairedPatterns(e,t,i=null){(null==i||i>this.length)&&(i=this.length);const l=this.stream.findPairedPatterns(e,t,this.backward?this.start-this.length:this.start,this.length);if(l.length)if(this.backward){if(l[0].right<this.start-t.length-i)return[]}else if(l[0].left>this.start+e.length+i)return[];return l}findPairedArrays(e,t,i=null){(null==i||i>this.length)&&(i=this.length);const l=this.stream.findPairedArrays(e,t,this.backward?this.start-this.length:this.start,this.length);if(l.length)if(this.backward){if(l[0].right.position<this.start-t[l[0].right.id].length-i)return[]}else if(l[0].left.position>this.start+e[l[0].left.id].length+i)return[];return l}replacePattern(e,t){return this.stream.replacePattern(e,t,this.backward?this.start-this.length:this.start,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),i=new Uint8Array(t.buffer);this.stream.view[this._start]=i[1],this._stream.view[this._start+1]=i[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[2],this._stream.view[this._start+1]=i[1],this._stream.view[this._start+2]=i[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[3],this._stream.view[this._start+1]=i[2],this._stream.view[this._start+2]=i[1],this._stream.view[this._start+3]=i[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[1],this._stream.view[this._start+1]=i[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[3],this._stream.view[this._start+1]=i[2],this._stream.view[this._start+2]=i[1],this._stream.view[this._start+3]=i[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);let i;if(this._length<e&&(e=this._length),this.backward){const a=this._stream.view.subarray(this._length-e,this._length);i=new Uint8Array(e);for(let l=0;l<e;l++)i[e-1-l]=a[l]}else i=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),i}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),i=32768;return t&i?-(i-(t^i)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),i=2147483648;return t&i?-(i-(t^i)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+s.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}return s.APPEND_BLOCK=1e3,s})();function iu(s,...r){if(!function hm(s){return s instanceof Uint8Array||null!=s&&"object"==typeof s&&"Uint8Array"===s.constructor.name}(s))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(s.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${s.length}`)}function nu(s,r=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(r&&s.finished)throw new Error("Hash#digest() has already been called")}const ru=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),ts=(s,r)=>s<<32-r|s>>>r,au=(s,r)=>s<<r|s>>>32-r>>>0;function Vl(s){return"string"==typeof s&&(s=function gm(s){if("string"!=typeof s)throw new Error("utf8ToBytes expected string, got "+typeof s);return new Uint8Array((new TextEncoder).encode(s))}(s)),iu(s),s}new Uint8Array(new Uint32Array([287454020]).buffer);class vm{clone(){return this._cloneInto()}}function Ol(s){const r=t=>s().update(Vl(t)).digest(),e=s();return r.outputLen=e.outputLen,r.blockLen=e.blockLen,r.create=()=>s(),r}const xd=(s,r,e)=>s&r^~s&e,Bd=(s,r,e)=>s&r^s&e^r&e;class lu extends vm{constructor(r,e,t,i){super(),this.blockLen=r,this.outputLen=e,this.padOffset=t,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=ru(this.buffer)}update(r){nu(this);const{view:e,buffer:t,blockLen:i}=this,a=(r=Vl(r)).length;for(let l=0;l<a;){const h=Math.min(i-this.pos,a-l);if(h!==i)t.set(r.subarray(l,l+h),this.pos),this.pos+=h,l+=h,this.pos===i&&(this.process(e,0),this.pos=0);else{const d=ru(r);for(;i<=a-l;l+=i)this.process(d,l)}}return this.length+=r.length,this.roundClean(),this}digestInto(r){nu(this),function Id(s,r){iu(s);const e=r.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}(r,this),this.finished=!0;const{buffer:e,view:t,blockLen:i,isLE:a}=this;let{pos:l}=this;e[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(t,0),l=0);for(let L=l;L<i;L++)e[L]=0;(function ym(s,r,e,t){if("function"==typeof s.setBigUint64)return s.setBigUint64(r,e,t);const i=BigInt(32),a=BigInt(4294967295),l=Number(e>>i&a),h=Number(e&a),g=t?0:4;s.setUint32(r+(t?4:0),l,t),s.setUint32(r+g,h,t)})(t,i-8,BigInt(8*this.length),a),this.process(t,0);const h=ru(r),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=d/4,B=this.get();if(g>B.length)throw new Error("_sha2: outputLen bigger than state");for(let L=0;L<g;L++)h.setUint32(4*L,B[L],a)}digest(){const{buffer:r,outputLen:e}=this;this.digestInto(r);const t=r.slice(0,e);return this.destroy(),t}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:e,buffer:t,length:i,finished:a,destroyed:l,pos:h}=this;return r.length=i,r.pos=h,r.finished=a,r.destroyed=l,i%e&&r.buffer.set(t),r}}const ha=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),As=new Uint32Array(80);class Sm extends lu{constructor(){super(64,20,8,!1),this.A=0|ha[0],this.B=0|ha[1],this.C=0|ha[2],this.D=0|ha[3],this.E=0|ha[4]}get(){const{A:r,B:e,C:t,D:i,E:a}=this;return[r,e,t,i,a]}set(r,e,t,i,a){this.A=0|r,this.B=0|e,this.C=0|t,this.D=0|i,this.E=0|a}process(r,e){for(let d=0;d<16;d++,e+=4)As[d]=r.getUint32(e,!1);for(let d=16;d<80;d++)As[d]=au(As[d-3]^As[d-8]^As[d-14]^As[d-16],1);let{A:t,B:i,C:a,D:l,E:h}=this;for(let d=0;d<80;d++){let g,B;d<20?(g=xd(i,a,l),B=1518500249):d<40?(g=i^a^l,B=1859775393):d<60?(g=Bd(i,a,l),B=2400959708):(g=i^a^l,B=3395469782);const L=au(t,5)+g+h+B+As[d]|0;h=l,l=a,a=au(i,30),i=t,t=L}t=t+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,h=h+this.E|0,this.set(t,i,a,l,h)}roundClean(){As.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}const bm=Ol(()=>new Sm),Am=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ks=new Uint32Array(64);class Rd extends lu{constructor(){super(64,32,8,!1),this.A=0|_s[0],this.B=0|_s[1],this.C=0|_s[2],this.D=0|_s[3],this.E=0|_s[4],this.F=0|_s[5],this.G=0|_s[6],this.H=0|_s[7]}get(){const{A:r,B:e,C:t,D:i,E:a,F:l,G:h,H:d}=this;return[r,e,t,i,a,l,h,d]}set(r,e,t,i,a,l,h,d){this.A=0|r,this.B=0|e,this.C=0|t,this.D=0|i,this.E=0|a,this.F=0|l,this.G=0|h,this.H=0|d}process(r,e){for(let L=0;L<16;L++,e+=4)ks[L]=r.getUint32(e,!1);for(let L=16;L<64;L++){const z=ks[L-15],K=ks[L-2],oe=ts(z,7)^ts(z,18)^z>>>3,_e=ts(K,17)^ts(K,19)^K>>>10;ks[L]=_e+ks[L-7]+oe+ks[L-16]|0}let{A:t,B:i,C:a,D:l,E:h,F:d,G:g,H:B}=this;for(let L=0;L<64;L++){const K=B+(ts(h,6)^ts(h,11)^ts(h,25))+xd(h,d,g)+Am[L]+ks[L]|0,_e=(ts(t,2)^ts(t,13)^ts(t,22))+Bd(t,i,a)|0;B=g,g=d,d=h,h=l+K|0,l=a,a=i,i=t,t=K+_e|0}t=t+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,h=h+this.E|0,d=d+this.F|0,g=g+this.G|0,B=B+this.H|0,this.set(t,i,a,l,h,d,g,B)}roundClean(){ks.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const _m=Ol(()=>new Rd),Pl=BigInt(2**32-1),cu=BigInt(32);function Vd(s,r=!1){return r?{h:Number(s&Pl),l:Number(s>>cu&Pl)}:{h:0|Number(s>>cu&Pl),l:0|Number(s&Pl)}}const Ke_split=function km(s,r=!1){let e=new Uint32Array(s.length),t=new Uint32Array(s.length);for(let i=0;i<s.length;i++){const{h:a,l}=Vd(s[i],r);[e[i],t[i]]=[a,l]}return[e,t]},Ke_shrSH=(s,r,e)=>s>>>e,Ke_shrSL=(s,r,e)=>s<<32-e|r>>>e,Ke_rotrSH=(s,r,e)=>s>>>e|r<<32-e,Ke_rotrSL=(s,r,e)=>s<<32-e|r>>>e,Ke_rotrBH=(s,r,e)=>s<<64-e|r>>>e-32,Ke_rotrBL=(s,r,e)=>s>>>e-32|r<<64-e,Ke_add=function Mm(s,r,e,t){const i=(r>>>0)+(t>>>0);return{h:s+e+(i/2**32|0)|0,l:0|i}},Ke_add3L=(s,r,e)=>(s>>>0)+(r>>>0)+(e>>>0),Ke_add3H=(s,r,e,t)=>r+e+t+(s/2**32|0)|0,Ke_add4L=(s,r,e,t)=>(s>>>0)+(r>>>0)+(e>>>0)+(t>>>0),Ke_add4H=(s,r,e,t,i)=>r+e+t+i+(s/2**32|0)|0,Ke_add5H=(s,r,e,t,i,a)=>r+e+t+i+a+(s/2**32|0)|0,Ke_add5L=(s,r,e,t,i)=>(s>>>0)+(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),[Lm,Fm]=Ke_split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),Es=new Uint32Array(80),Cs=new Uint32Array(80);class Dl extends lu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:e,Bh:t,Bl:i,Ch:a,Cl:l,Dh:h,Dl:d,Eh:g,El:B,Fh:L,Fl:z,Gh:K,Gl:oe,Hh:_e,Hl:we}=this;return[r,e,t,i,a,l,h,d,g,B,L,z,K,oe,_e,we]}set(r,e,t,i,a,l,h,d,g,B,L,z,K,oe,_e,we){this.Ah=0|r,this.Al=0|e,this.Bh=0|t,this.Bl=0|i,this.Ch=0|a,this.Cl=0|l,this.Dh=0|h,this.Dl=0|d,this.Eh=0|g,this.El=0|B,this.Fh=0|L,this.Fl=0|z,this.Gh=0|K,this.Gl=0|oe,this.Hh=0|_e,this.Hl=0|we}process(r,e){for(let le=0;le<16;le++,e+=4)Es[le]=r.getUint32(e),Cs[le]=r.getUint32(e+=4);for(let le=16;le<80;le++){const fe=0|Es[le-15],ve=0|Cs[le-15],Ae=Ke_rotrSH(fe,ve,1)^Ke_rotrSH(fe,ve,8)^Ke_shrSH(fe,ve,7),Ie=Ke_rotrSL(fe,ve,1)^Ke_rotrSL(fe,ve,8)^Ke_shrSL(fe,ve,7),Te=0|Es[le-2],De=0|Cs[le-2],ze=Ke_rotrSH(Te,De,19)^Ke_rotrBH(Te,De,61)^Ke_shrSH(Te,De,6),At=Ke_rotrSL(Te,De,19)^Ke_rotrBL(Te,De,61)^Ke_shrSL(Te,De,6),qe=Ke_add4L(Ie,At,Cs[le-7],Cs[le-16]),ct=Ke_add4H(qe,Ae,ze,Es[le-7],Es[le-16]);Es[le]=0|ct,Cs[le]=0|qe}let{Ah:t,Al:i,Bh:a,Bl:l,Ch:h,Cl:d,Dh:g,Dl:B,Eh:L,El:z,Fh:K,Fl:oe,Gh:_e,Gl:we,Hh:re,Hl:ye}=this;for(let le=0;le<80;le++){const fe=Ke_rotrSH(L,z,14)^Ke_rotrSH(L,z,18)^Ke_rotrBH(L,z,41),ve=Ke_rotrSL(L,z,14)^Ke_rotrSL(L,z,18)^Ke_rotrBL(L,z,41),Ae=L&K^~L&_e,Te=Ke_add5L(ye,ve,z&oe^~z&we,Fm[le],Cs[le]),De=Ke_add5H(Te,re,fe,Ae,Lm[le],Es[le]),ze=0|Te,At=Ke_rotrSH(t,i,28)^Ke_rotrBH(t,i,34)^Ke_rotrBH(t,i,39),qe=Ke_rotrSL(t,i,28)^Ke_rotrBL(t,i,34)^Ke_rotrBL(t,i,39),ct=t&a^t&h^a&h,jt=i&l^i&d^l&d;re=0|_e,ye=0|we,_e=0|K,we=0|oe,K=0|L,oe=0|z,({h:L,l:z}=Ke_add(0|g,0|B,0|De,0|ze)),g=0|h,B=0|d,h=0|a,d=0|l,a=0|t,l=0|i;const Dt=Ke_add3L(ze,qe,jt);t=Ke_add3H(Dt,De,At,ct),i=0|Dt}({h:t,l:i}=Ke_add(0|this.Ah,0|this.Al,0|t,0|i)),({h:a,l}=Ke_add(0|this.Bh,0|this.Bl,0|a,0|l)),({h,l:d}=Ke_add(0|this.Ch,0|this.Cl,0|h,0|d)),({h:g,l:B}=Ke_add(0|this.Dh,0|this.Dl,0|g,0|B)),({h:L,l:z}=Ke_add(0|this.Eh,0|this.El,0|L,0|z)),({h:K,l:oe}=Ke_add(0|this.Fh,0|this.Fl,0|K,0|oe)),({h:_e,l:we}=Ke_add(0|this.Gh,0|this.Gl,0|_e,0|we)),({h:re,l:ye}=Ke_add(0|this.Hh,0|this.Hl,0|re,0|ye)),this.set(t,i,a,l,h,d,g,B,L,z,K,oe,_e,we,re,ye)}roundClean(){Es.fill(0),Cs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Hm extends Dl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const jm=Ol(()=>new Dl),$m=Ol(()=>new Hm),Ct=new ArrayBuffer(0),S="";let lt=(()=>{class s extends TypeError{constructor(){super(...arguments),this.name=s.NAME}static isType(e,t){if("string"==typeof t){if("Array"===t&&Array.isArray(e))return!0;if("ArrayBuffer"===t&&e instanceof ArrayBuffer)return!0;if("ArrayBufferView"===t&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...i){for(const l of i)if(this.isType(e,l))return;const a=i.map(l=>l instanceof Function&&"name"in l?l.name:`${l}`);throw new s(`Parameter '${t}' is not of type ${a.length>1?`(${a.join(" or ")})`:a[0]}`)}}return s.NAME="ArgumentError",s})(),tt=(()=>{class s extends TypeError{static assert(...e){let i,a,t=null;"string"==typeof e[0]?(t=e[0],i=e[1],a=e.slice(2)):(i=e[0],a=e.slice(1)),lt.assert(i,"parameters","object");for(const l of a)if(null==i[l])throw new s(l,t)}static assertEmpty(e,t,i){if(null==e)throw new s(t,i)}constructor(e,t=null,i){super(),this.name=s.NAME,this.field=e,t&&(this.target=t),this.message=i||`Absent mandatory parameter '${e}' ${t?` in '${t}'`:S}`}}return s.NAME="ParameterError",s})();class he extends Error{static assertSchema(r,e){if(!r.verified)throw new Error(`Object's schema was not verified against input data for ${e}`)}static assert(r,e){if(-1===r.offset)throw new he(`Error during parsing of ASN.1 data. Data is not correct for '${e}'.`)}constructor(r){super(r),this.name="AsnError"}}let pe=(()=>{class s{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=ht(e);he.assert(t,this.name);try{return new this({schema:t.result})}catch{throw new he(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return E.U$.ToString(t.toBER(),e)}}return s.CLASS_NAME="PkiObject",s})();function Ns(s){let r=!1,e=S;const t=s.trim();for(let i=0;i<t.length;i++)32===t.charCodeAt(i)?!1===r&&(r=!0):(r&&(e+=" ",r=!1),e+=t[i]);return e.toLowerCase()}const da="type",uu="value";let hu=(()=>{class s extends pe{constructor(e={}){super(),this.type=o(e,da,s.defaultValues(da)),this.value=o(e,uu,s.defaultValues(uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case da:return S;case uu:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.type||S}),new Me({name:t.value||S})]})}fromSchema(e){V(e,[da,"typeValue"]);const t=me(e,e,s.schema({names:{type:da,value:"typeValue"}}));he.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new j({value:[new Be({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return e.value=0!==Object.keys(this.value).length?this.value.toJSON():this.value,e}isEqual(e){const t=[es.blockName(),qt.blockName(),la.blockName(),Rn.blockName(),Kt.blockName(),ca.blockName(),Zc.blockName(),xl.blockName(),Qc.blockName(),Bl.blockName(),eu.blockName(),tu.blockName()];if(e instanceof ArrayBuffer)return E._H.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===s.blockName()){if(this.type!==e.type)return!1;const i=[!1,!1],a=this.value.constructor.blockName();for(const h of t)a===h&&(i[0]=!0),e.value.constructor.blockName()===h&&(i[1]=!0);if(i[0]!==i[1])return!1;if(i[0]&&i[1]){const h=Ns(this.value.valueBlock.value),d=Ns(e.value.valueBlock.value);if(0!==h.localeCompare(d))return!1}else if(!E._H.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}return s.CLASS_NAME="AttributeTypeAndValue",s})();const vi="typesAndValues",Ul="valueBeforeDecode";let pt=(()=>{class s extends pe{constructor(e={}){super(),this.typesAndValues=o(e,vi,s.defaultValues(vi)),this.valueBeforeDecode=o(e,Ul,s.defaultValues(Ul)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vi:return[];case Ul:return Ct;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vi:return 0===t.length;case Ul:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.repeatedSequence||S,value:new Et({value:[new He({name:t.repeatedSet||S,value:hu.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){V(e,["RDN",vi]);const t=me(e,e,s.schema({names:{blockName:"RDN",repeatedSet:vi}}));he.assertSchema(t,this.className),vi in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,i=>new hu({schema:i}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(0===this.valueBeforeDecode.byteLength)return new j({value:[new Et({value:Array.from(this.typesAndValues,t=>t.toSchema())})]});const e=ht(this.valueBeforeDecode);if(he.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof j))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof s){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,i]of this.typesAndValues.entries())if(!1===i.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&Y(this.valueBeforeDecode,e)}}return s.CLASS_NAME="RelativeDistinguishedNames",s})();const fa="type",ma="value";function Km(s={},r=!1){const e=o(s,"names",{});return new j({optional:r,value:[new W({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:e.country_name||S,value:[new mt({value:[new Rn,new Kt]})]}),new W({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:e.administration_domain_name||S,value:[new mt({value:[new Rn,new Kt]})]}),new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:e.network_address||S,isHexOnly:!0}),new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:e.terminal_identifier||S,isHexOnly:!0}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:e.private_domain_name||S,value:[new mt({value:[new Rn,new Kt]})]}),new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:e.organization_name||S,isHexOnly:!0}),new Ce({optional:!0,name:e.numeric_user_identifier||S,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new W({optional:!0,name:e.personal_name||S,idBlock:{tagClass:3,tagNumber:5},value:[new Ce({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new W({optional:!0,name:e.organizational_unit_names||S,idBlock:{tagClass:3,tagNumber:6},value:[new He({value:new Kt})]})]})}function Gm(s=!1){return new j({optional:s,value:[new Kt,new Kt]})}function Jm(s=!1){return new Et({optional:s,value:[new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Me]})]})}let bt=(()=>{class s extends pe{constructor(e={}){super(),this.type=o(e,fa,s.defaultValues(fa)),this.value=o(e,ma,s.defaultValues(ma)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fa:return 9;case ma:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fa:return t===s.defaultValues(e);case ma:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new mt({value:[new W({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||S,value:[new Be,new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me]})]}),new Ce({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:1}}),new Ce({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:2}}),new W({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||S,value:[Km(t.builtInStandardAttributes||{},!1),Gm(!0),Jm(!0)]}),new W({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||S,value:[pt.schema(t.directoryName||{})]}),new W({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||S,value:[new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new mt({value:[new ca,new Kt,new la,new es,new qt]})]}),new W({idBlock:{tagClass:3,tagNumber:1},value:[new mt({value:[new ca,new Kt,new la,new es,new qt]})]})]}),new Ce({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:6}}),new Ce({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:7}}),new Ce({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){V(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=me(e,e,s.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(he.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=t.result.blockName;break;case 1:case 2:case 6:{const i=t.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=22;const l=ht(i.toBER(!1));he.assert(l,"GeneralName value"),this.value=l.result.valueBlock.value}break;case 4:this.value=new pt({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new ge({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const i=t.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;const l=ht(i.toBER(!1));he.assert(l,"GeneralName registeredID"),this.value=l.result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new W({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new xl({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new W({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new Be({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return s.schema()}}toJSON(){const e={type:this.type,value:S};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}return s.CLASS_NAME="GeneralName",s})();const pa="accessMethod",ga="accessLocation",zm=[pa,ga];let Pd=(()=>{class s extends pe{constructor(e={}){super(),this.accessMethod=o(e,pa,s.defaultValues(pa)),this.accessLocation=o(e,ga,s.defaultValues(ga)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pa:return S;case ga:return new bt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.accessMethod||S}),bt.schema(t.accessLocation||{})]})}fromSchema(e){V(e,zm);const t=me(e,e,s.schema({names:{accessMethod:pa,accessLocation:{names:{blockName:ga}}}}));he.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new bt({schema:t.result.accessLocation})}toSchema(){return new j({value:[new Be({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}return s.CLASS_NAME="AccessDescription",s})();const Is="seconds",Ts="millis",xs="micros";let On=(()=>{class s extends pe{constructor(e={}){super(),Is in e&&(this.seconds=o(e,Is,s.defaultValues(Is))),Ts in e&&(this.millis=o(e,Ts,s.defaultValues(Ts))),xs in e&&(this.micros=o(e,xs,s.defaultValues(xs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Is:case Ts:case xs:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Is:case Ts:case xs:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,optional:!0,value:[new ee({optional:!0,name:t.seconds||S}),new Ce({name:t.millis||S,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Ce({name:t.micros||S,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){V(e,[Is,Ts,xs]);const t=me(e,e,s.schema({names:{seconds:Is,millis:Ts,micros:xs}}));if(he.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const i=new ee({valueHex:t.result.millis.valueBlock.valueHex});this.millis=i.valueBlock.valueDec}if("micros"in t.result){const i=new ee({valueHex:t.result.micros.valueBlock.valueHex});this.micros=i.valueBlock.valueDec}}toSchema(){const e=[];if(void 0!==this.seconds&&e.push(new ee({value:this.seconds})),void 0!==this.millis){const t=new ee({value:this.millis});e.push(new Ce({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(void 0!==this.micros){const t=new ee({value:this.micros});e.push(new Ce({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new j({value:e})}toJSON(){const e={};return void 0!==this.seconds&&(e.seconds=this.seconds),void 0!==this.millis&&(e.millis=this.millis),void 0!==this.micros&&(e.micros=this.micros),e}}return s.CLASS_NAME="Accuracy",s})();const Ml="algorithmId",va="algorithmParams",Dd="algorithm",du="params",qm=[Dd,du];let se=(()=>{class s extends pe{constructor(e={}){super(),this.algorithmId=o(e,Ml,s.defaultValues(Ml)),va in e&&(this.algorithmParams=o(e,va,s.defaultValues(va))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ml:return S;case va:return new Me;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ml:return t===S;case va:return t instanceof Me;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,optional:t.optional||!1,value:[new Be({name:t.algorithmIdentifier||S}),new Me({name:t.algorithmParams||S,optional:!0})]})}fromSchema(e){V(e,qm);const t=me(e,e,s.schema({names:{algorithmIdentifier:Dd,algorithmParams:du}}));he.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),du in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new Be({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof Me)&&e.push(this.algorithmParams),new j({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof Me)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof s&&this.algorithmId===e.algorithmId&&(this.algorithmParams?!!e.algorithmParams&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!e.algorithmParams)}}return s.CLASS_NAME="AlgorithmIdentifier",s})();const Pn="altNames",Wm=[Pn];let Ud=(()=>{class s extends pe{constructor(e={}){super(),this.altNames=o(e,Pn,s.defaultValues(Pn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Pn?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.altNames||S,value:bt.schema()})]})}fromSchema(e){V(e,Wm);const t=me(e,e,s.schema({names:{altNames:Pn}}));he.assertSchema(t,this.className),Pn in t.result&&(this.altNames=Array.from(t.result.altNames,i=>new bt({schema:i})))}toSchema(){return new j({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}return s.CLASS_NAME="AltName",s})();const Dn="type",Un="values",Xm=[Dn,Un];let st=(()=>{class s extends pe{constructor(e={}){super(),this.type=o(e,Dn,s.defaultValues(Dn)),this.values=o(e,Un,s.defaultValues(Un)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dn:return S;case Un:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dn:return t===S;case Un:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.type||S}),new Et({name:t.setName||S,value:[new He({name:t.values||S,value:new Me})]})]})}fromSchema(e){V(e,Xm);const t=me(e,e,s.schema({names:{type:Dn,values:Un}}));he.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new j({value:[new Be({value:this.type}),new Et({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}return s.CLASS_NAME="Attribute",s})();const wa="notBeforeTime",ya="notAfterTime",Ym=[wa,ya];let Mn=(()=>{class s extends pe{constructor(e={}){super(),this.notBeforeTime=o(e,wa,s.defaultValues(wa)),this.notAfterTime=o(e,ya,s.defaultValues(ya)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wa:case ya:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ft({name:t.notBeforeTime||S}),new ft({name:t.notAfterTime||S})]})}fromSchema(e){V(e,Ym);const t=me(e,e,s.schema({names:{notBeforeTime:wa,notAfterTime:ya}}));he.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new j({value:[new ft({valueDate:this.notBeforeTime}),new ft({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}return s.CLASS_NAME="AttCertValidityPeriod",s})();const Sa="names",Md="generalNames";let Bt=(()=>{class s extends pe{constructor(e={}){super(),this.names=o(e,Sa,s.defaultValues(Sa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return"names"===e?[]:super.defaultValues(e)}static schema(e={},t=!1){const i=o(e,Sa,{});return new j({optional:t,name:i.blockName||S,value:[new He({name:i.generalNames||S,value:bt.schema()})]})}fromSchema(e){V(e,[Sa,Md]);const t=me(e,e,s.schema({names:{blockName:Sa,generalNames:Md}}));he.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,i=>new bt({schema:i}))}toSchema(){return new j({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}return s.CLASS_NAME="GeneralNames",s})();const Ld="2.5.29.17",Fd="2.5.29.18",fu="2.5.29.19",Hd="2.5.29.28",jd="2.5.29.29",$d="2.5.29.30",Kd="2.5.29.31",mu="2.5.29.46",Gd="2.5.29.32",Gt="2.5.29.32.0",Jd="2.5.29.33",pu="2.5.29.35",zd="2.5.29.36",gu="1.3.6.1.5.5.7.1.1",vu="1.2.840.113549.1.7.1",Wd="1.2.840.113549.1.7.3",Xd="1.2.840.113549.1.7.6",Yd="1.2.840.113549.1.9.22.1",Zd="1.2.840.113549.1.9.22.3",Qd="1.2.840.113549.1.9.23.1",wi="keyIdentifier",yi="authorityCertIssuer",Si="authorityCertSerialNumber",v1=[wi,yi,Si];let ef=(()=>{class s extends pe{constructor(e={}){super(),wi in e&&(this.keyIdentifier=o(e,wi,s.defaultValues(wi))),yi in e&&(this.authorityCertIssuer=o(e,yi,s.defaultValues(yi))),Si in e&&(this.authorityCertSerialNumber=o(e,Si,s.defaultValues(Si))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wi:return new ge;case yi:return[];case Si:return new ee;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Ce({name:t.keyIdentifier||S,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.authorityCertIssuer||S,value:bt.schema()})]}),new Ce({name:t.authorityCertSerialNumber||S,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){V(e,v1);const t=me(e,e,s.schema({names:{keyIdentifier:wi,authorityCertIssuer:yi,authorityCertSerialNumber:Si}}));he.assertSchema(t,this.className),wi in t.result&&(this.keyIdentifier=new ge({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),yi in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,i=>new bt({schema:i}))),Si in t.result&&(this.authorityCertSerialNumber=new ee({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new W({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,t=>t.toSchema())})),this.authorityCertSerialNumber&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new j({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,t=>t.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}return s.CLASS_NAME="AuthorityKeyIdentifier",s})();const bi="pathLenConstraint",Ai="cA";let tf=(()=>{class s extends pe{constructor(e={}){super(),this.cA=o(e,Ai,!1),bi in e&&(this.pathLenConstraint=o(e,bi,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e!==Ai&&super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Ss({optional:!0,name:t.cA||S}),new ee({optional:!0,name:t.pathLenConstraint||S})]})}fromSchema(e){V(e,[Ai,bi]);const t=me(e,e,s.schema({names:{cA:Ai,pathLenConstraint:bi}}));he.assertSchema(t,this.className),Ai in t.result&&(this.cA=t.result.cA.valueBlock.value),bi in t.result&&(this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.isHexOnly?t.result.pathLenConstraint:t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==s.defaultValues(Ai)&&e.push(new Ss({value:this.cA})),bi in this&&e.push(this.pathLenConstraint instanceof ee?this.pathLenConstraint:new ee({value:this.pathLenConstraint})),new j({value:e})}toJSON(){const e={};return this.cA!==s.defaultValues(Ai)&&(e.cA=this.cA),bi in this&&(e.pathLenConstraint=this.pathLenConstraint instanceof ee?this.pathLenConstraint.toJSON():this.pathLenConstraint),e}}return s.CLASS_NAME="BasicConstraints",s})();const wu="certificateIndex",yu="keyIndex";let w1=(()=>{class s extends pe{constructor(e={}){super(),this.certificateIndex=o(e,wu,s.defaultValues(wu)),this.keyIndex=o(e,yu,s.defaultValues(yu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wu:case yu:return 0;default:return super.defaultValues(e)}}static schema(){return new ee}fromSchema(e){if(e.constructor.blockName()!==ee.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const i=new Uint8Array(t);switch(!0){case t.byteLength<4:{const z=new ArrayBuffer(4);new Uint8Array(z).set(i,4-t.byteLength),t=z.slice(0)}break;case t.byteLength>4:{const z=new ArrayBuffer(4);new Uint8Array(z).set(i.slice(0,4)),t=z.slice(0)}}const a=t.slice(0,2),l=new Uint8Array(a);let h=l[0];l[0]=l[1],l[1]=h;const d=new Uint16Array(a);this.keyIndex=d[0];const g=t.slice(2),B=new Uint8Array(g);h=B[0],B[0]=B[1],B[1]=h;const L=new Uint16Array(g);this.certificateIndex=L[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const i=new Uint8Array(e);let a=i[0];i[0]=i[1],i[1]=a;const l=new ArrayBuffer(2);new Uint16Array(l)[0]=this.keyIndex;const d=new Uint8Array(l);return a=d[0],d[0]=d[1],d[1]=a,new ee({valueHex:k(l,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}return s.CLASS_NAME="CAVersion",s})();const ba="policyQualifierId",Aa="qualifier",y1=[ba,Aa];let sf=(()=>{class s extends pe{constructor(e={}){super(),this.policyQualifierId=o(e,ba,s.defaultValues(ba)),this.qualifier=o(e,Aa,s.defaultValues(Aa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ba:return S;case Aa:return new Me;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.policyQualifierId||S}),new Me({name:t.qualifier||S})]})}fromSchema(e){V(e,y1);const t=me(e,e,s.schema({names:{policyQualifierId:ba,qualifier:Aa}}));he.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new j({value:[new Be({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}return s.CLASS_NAME="PolicyQualifierInfo",s})();const _a="policyIdentifier",_i="policyQualifiers",S1=[_a,_i];let nf=(()=>{class s extends pe{constructor(e={}){super(),this.policyIdentifier=o(e,_a,s.defaultValues(_a)),_i in e&&(this.policyQualifiers=o(e,_i,s.defaultValues(_i))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _a:return S;case _i:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.policyIdentifier||S}),new j({optional:!0,value:[new He({name:t.policyQualifiers||S,value:sf.schema()})]})]})}fromSchema(e){V(e,S1);const t=me(e,e,s.schema({names:{policyIdentifier:_a,policyQualifiers:_i}}));he.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),_i in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,i=>new sf({schema:i})))}toSchema(){const e=[];return e.push(new Be({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new j({value:Array.from(this.policyQualifiers,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,t=>t.toJSON())),e}}return s.CLASS_NAME="PolicyInformation",s})();const ka="certificatePolicies",b1=[ka];let rf=(()=>{class s extends pe{constructor(e={}){super(),this.certificatePolicies=o(e,ka,s.defaultValues(ka)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ka?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.certificatePolicies||S,value:nf.schema()})]})}fromSchema(e){V(e,b1);const t=me(e,e,s.schema({names:{certificatePolicies:ka}}));he.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,i=>new nf({schema:i}))}toSchema(){return new j({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}return s.CLASS_NAME="CertificatePolicies",s})();const Ea="templateID",rs="templateMajorVersion",as="templateMinorVersion",A1=[Ea,rs,as];class Ln extends pe{constructor(r={}){super(),this.templateID=o(r,Ea,Ln.defaultValues(Ea)),rs in r&&(this.templateMajorVersion=o(r,rs,Ln.defaultValues(rs))),as in r&&(this.templateMinorVersion=o(r,as,Ln.defaultValues(as))),r.schema&&this.fromSchema(r.schema)}static defaultValues(r){switch(r){case Ea:return S;case rs:case as:return 0;default:return super.defaultValues(r)}}static schema(r={}){const e=o(r,"names",{});return new j({name:e.blockName||S,value:[new Be({name:e.templateID||S}),new ee({name:e.templateMajorVersion||S,optional:!0}),new ee({name:e.templateMinorVersion||S,optional:!0})]})}fromSchema(r){V(r,A1);const e=me(r,r,Ln.schema({names:{templateID:Ea,templateMajorVersion:rs,templateMinorVersion:as}}));he.assertSchema(e,this.className),this.templateID=e.result.templateID.valueBlock.toString(),rs in e.result&&(this.templateMajorVersion=e.result.templateMajorVersion.valueBlock.valueDec),as in e.result&&(this.templateMinorVersion=e.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const r=[];return r.push(new Be({value:this.templateID})),rs in this&&r.push(new ee({value:this.templateMajorVersion})),as in this&&r.push(new ee({value:this.templateMinorVersion})),new j({value:r})}toJSON(){const r={templateID:this.templateID};return rs in this&&(r.templateMajorVersion=this.templateMajorVersion),as in this&&(r.templateMinorVersion=this.templateMinorVersion),r}}const ki="distributionPoint",af="distributionPointNames",Ei="reasons",Ci="cRLIssuer",of="cRLIssuerNames",_1=[ki,af,Ei,Ci,of];let lf=(()=>{class s extends pe{constructor(e={}){super(),ki in e&&(this.distributionPoint=o(e,ki,s.defaultValues(ki))),Ei in e&&(this.reasons=o(e,Ei,s.defaultValues(Ei))),Ci in e&&(this.cRLIssuer=o(e,Ci,s.defaultValues(Ci))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ki:return[];case Ei:return new Ye;case Ci:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new mt({value:[new W({name:t.distributionPoint||S,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.distributionPointNames||S,value:bt.schema()})]}),new W({name:t.distributionPoint||S,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pt.schema().valueBlock.value})]})]}),new Ce({name:t.reasons||S,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new W({name:t.cRLIssuer||S,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new He({name:t.cRLIssuerNames||S,value:bt.schema()})]})]})}fromSchema(e){V(e,_1);const t=me(e,e,s.schema({names:{distributionPoint:ki,distributionPointNames:af,reasons:Ei,cRLIssuer:Ci,cRLIssuerNames:of}}));he.assertSchema(t,this.className),ki in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,i=>new bt({schema:i}))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new pt({schema:new j({value:t.result.distributionPoint.valueBlock.value})}))),Ei in t.result&&(this.reasons=new Ye({valueHex:t.result.reasons.valueBlock.valueHex})),Ci in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,i=>new bt({schema:i})))}toSchema(){const e=[];if(this.distributionPoint){let t;t=new W(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,i=>i.toSchema())}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new W({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={};return this.distributionPoint&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,t=>t.toJSON()):this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,t=>t.toJSON())),e}}return s.CLASS_NAME="DistributionPoint",s})();const Ca="distributionPoints",k1=[Ca];let cf=(()=>{class s extends pe{constructor(e={}){super(),this.distributionPoints=o(e,Ca,s.defaultValues(Ca)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ca?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.distributionPoints||S,value:lf.schema()})]})}fromSchema(e){V(e,k1);const t=me(e,e,s.schema({names:{distributionPoints:Ca}}));he.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,i=>new lf({schema:i}))}toSchema(){return new j({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}return s.CLASS_NAME="CRLDistributionPoints",s})();const Na="keyPurposes",E1=[Na];let C1=(()=>{class s extends pe{constructor(e={}){super(),this.keyPurposes=o(e,Na,s.defaultValues(Na)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Na?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.keyPurposes||S,value:new Be})]})}fromSchema(e){V(e,E1);const t=me(e,e,s.schema({names:{keyPurposes:Na}}));he.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,i=>i.valueBlock.toString())}toSchema(){return new j({value:Array.from(this.keyPurposes,e=>new Be({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}return s.CLASS_NAME="ExtKeyUsage",s})();const Ia="accessDescriptions";let uf=(()=>{class s extends pe{constructor(e={}){super(),this.accessDescriptions=o(e,Ia,s.defaultValues(Ia)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ia?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.accessDescriptions||S,value:Pd.schema()})]})}fromSchema(e){V(e,[Ia]);const t=me(e,e,s.schema({names:{accessDescriptions:Ia}}));he.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,i=>new Pd({schema:i}))}toSchema(){return new j({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}return s.CLASS_NAME="InfoAccess",s})();const Ni="distributionPoint",hf="distributionPointNames",Bs="onlyContainsUserCerts",Rs="onlyContainsCACerts",Vs="onlySomeReasons",Os="indirectCRL",Ps="onlyContainsAttributeCerts",N1=[Ni,hf,Bs,Rs,Vs,Os,Ps];let I1=(()=>{class s extends pe{constructor(e={}){super(),Ni in e&&(this.distributionPoint=o(e,Ni,s.defaultValues(Ni))),this.onlyContainsUserCerts=o(e,Bs,s.defaultValues(Bs)),this.onlyContainsCACerts=o(e,Rs,s.defaultValues(Rs)),Vs in e&&(this.onlySomeReasons=o(e,Vs,s.defaultValues(Vs))),this.indirectCRL=o(e,Os,s.defaultValues(Os)),this.onlyContainsAttributeCerts=o(e,Ps,s.defaultValues(Ps)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ni:return[];case Bs:case Rs:return!1;case Vs:return 0;case Os:case Ps:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new mt({value:[new W({name:t.distributionPoint||S,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.distributionPointNames||S,value:bt.schema()})]}),new W({name:t.distributionPoint||S,idBlock:{tagClass:3,tagNumber:1},value:pt.schema().valueBlock.value})]})]}),new Ce({name:t.onlyContainsUserCerts||S,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Ce({name:t.onlyContainsCACerts||S,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Ce({name:t.onlySomeReasons||S,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new Ce({name:t.indirectCRL||S,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new Ce({name:t.onlyContainsAttributeCerts||S,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){V(e,N1);const t=me(e,e,s.schema({names:{distributionPoint:Ni,distributionPointNames:hf,onlyContainsUserCerts:Bs,onlyContainsCACerts:Rs,onlySomeReasons:Vs,indirectCRL:Os,onlyContainsAttributeCerts:Ps}}));if(he.assertSchema(t,this.className),Ni in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,i=>new bt({schema:i}));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new pt({schema:new j({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(Bs in t.result){const i=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==i[0]}if(Rs in t.result){const i=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==i[0]}if(Vs in t.result){const i=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if(Os in t.result){const i=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==i[0]}if(Ps in t.result){const i=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==i[0]}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new W({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,i=>i.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==s.defaultValues(Bs)&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==s.defaultValues(Rs)&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),void 0!==this.onlySomeReasons){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new Ce({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==s.defaultValues(Os)&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==s.defaultValues(Ps)&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new j({value:e})}toJSON(){const e={};return this.distributionPoint&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,t=>t.toJSON()):this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==s.defaultValues(Bs)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==s.defaultValues(Rs)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Vs in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==s.defaultValues(Os)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==s.defaultValues(Ps)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}return s.CLASS_NAME="IssuingDistributionPoint",s})();const Ta="base",Fn="minimum",Ds="maximum",T1=[Ta,Fn,Ds];let Ll=(()=>{class s extends pe{constructor(e={}){super(),this.base=o(e,Ta,s.defaultValues(Ta)),this.minimum=o(e,Fn,s.defaultValues(Fn)),Ds in e&&(this.maximum=o(e,Ds,s.defaultValues(Ds))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ta:return new bt;case Fn:case Ds:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[bt.schema(t.base||{}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({name:t.minimum||S})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ee({name:t.maximum||S})]})]})}fromSchema(e){V(e,T1);const t=me(e,e,s.schema({names:{base:{names:{blockName:Ta}},minimum:Fn,maximum:Ds}}));he.assertSchema(t,this.className),this.base=new bt({schema:t.result.base}),Fn in t.result&&(this.minimum=t.result.minimum.valueBlock.isHexOnly?t.result.minimum:t.result.minimum.valueBlock.valueDec),Ds in t.result&&(this.maximum=t.result.maximum.valueBlock.isHexOnly?t.result.maximum:t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof ee?this.minimum:new ee({value:this.minimum}),e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Ds in this){let t=0;t=this.maximum instanceof ee?this.maximum:new ee({value:this.maximum}),e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new j({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&(e.minimum="number"==typeof this.minimum?this.minimum:this.minimum.toJSON()),void 0!==this.maximum&&(e.maximum="number"==typeof this.maximum?this.maximum:this.maximum.toJSON()),e}}return s.CLASS_NAME="GeneralSubtree",s})();const Ii="permittedSubtrees",Ti="excludedSubtrees",x1=[Ii,Ti];let B1=(()=>{class s extends pe{constructor(e={}){super(),Ii in e&&(this.permittedSubtrees=o(e,Ii,s.defaultValues(Ii))),Ti in e&&(this.excludedSubtrees=o(e,Ti,s.defaultValues(Ti))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ii:case Ti:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.permittedSubtrees||S,value:Ll.schema()})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.excludedSubtrees||S,value:Ll.schema()})]})]})}fromSchema(e){V(e,x1);const t=me(e,e,s.schema({names:{permittedSubtrees:Ii,excludedSubtrees:Ti}}));he.assertSchema(t,this.className),Ii in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,i=>new Ll({schema:i}))),Ti in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,i=>new Ll({schema:i})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,t=>t.toSchema())})),this.excludedSubtrees&&e.push(new W({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,t=>t.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,t=>t.toJSON())),e}}return s.CLASS_NAME="NameConstraints",s})();const os="requireExplicitPolicy",ls="inhibitPolicyMapping",R1=[os,ls];let V1=(()=>{class s extends pe{constructor(e={}){super(),os in e&&(this.requireExplicitPolicy=o(e,os,s.defaultValues(os))),ls in e&&(this.inhibitPolicyMapping=o(e,ls,s.defaultValues(ls))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case os:case ls:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Ce({name:t.requireExplicitPolicy||S,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Ce({name:t.inhibitPolicyMapping||S,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){V(e,R1);const t=me(e,e,s.schema({names:{requireExplicitPolicy:os,inhibitPolicyMapping:ls}}));if(he.assertSchema(t,this.className),os in t.result){const i=t.result.requireExplicitPolicy;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;const l=ht(i.toBER(!1));he.assert(l,"Integer"),this.requireExplicitPolicy=l.result.valueBlock.valueDec}if(ls in t.result){const i=t.result.inhibitPolicyMapping;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;const l=ht(i.toBER(!1));he.assert(l,"Integer"),this.inhibitPolicyMapping=l.result.valueBlock.valueDec}}toSchema(){const e=[];if(os in this){const t=new ee({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(ls in this){const t=new ee({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new j({value:e})}toJSON(){const e={};return os in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),ls in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}return s.CLASS_NAME="PolicyConstraints",s})();const xa="issuerDomainPolicy",Ba="subjectDomainPolicy",O1=[xa,Ba];let df=(()=>{class s extends pe{constructor(e={}){super(),this.issuerDomainPolicy=o(e,xa,s.defaultValues(xa)),this.subjectDomainPolicy=o(e,Ba,s.defaultValues(Ba)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xa:case Ba:return S;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.issuerDomainPolicy||S}),new Be({name:t.subjectDomainPolicy||S})]})}fromSchema(e){V(e,O1);const t=me(e,e,s.schema({names:{issuerDomainPolicy:xa,subjectDomainPolicy:Ba}}));he.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new j({value:[new Be({value:this.issuerDomainPolicy}),new Be({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}return s.CLASS_NAME="PolicyMapping",s})();const Ra="mappings",P1=[Ra];let D1=(()=>{class s extends pe{constructor(e={}){super(),this.mappings=o(e,Ra,s.defaultValues(Ra)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ra?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.mappings||S,value:df.schema()})]})}fromSchema(e){V(e,P1);const t=me(e,e,s.schema({names:{mappings:Ra}}));he.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,i=>new df({schema:i}))}toSchema(){return new j({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}return s.CLASS_NAME="PolicyMappings",s})();const Us="notBefore",Ms="notAfter",U1=[Us,Ms];let M1=(()=>{class s extends pe{constructor(e={}){super(),Us in e&&(this.notBefore=o(e,Us,s.defaultValues(Us))),Ms in e&&(this.notAfter=o(e,Ms,s.defaultValues(Ms))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Us:case Ms:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Ce({name:t.notBefore||S,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Ce({name:t.notAfter||S,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){V(e,U1);const t=me(e,e,s.schema({names:{notBefore:Us,notAfter:Ms}}));if(he.assertSchema(t,this.className),Us in t.result){const i=new ft;i.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=i.toDate()}if(Ms in t.result){const i=new ft({valueHex:t.result.notAfter.valueBlock.valueHex});i.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=i.toDate()}}toSchema(){const e=[];return Us in this&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:0},valueHex:new ft({valueDate:this.notBefore}).valueBlock.valueHexView})),Ms in this&&e.push(new Ce({idBlock:{tagClass:3,tagNumber:1},valueHex:new ft({valueDate:this.notAfter}).valueBlock.valueHexView})),new j({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}return s.CLASS_NAME="PrivateKeyUsagePeriod",s})();const Hn="id",cs="type",jn="values",L1=[Hn,cs],F1=[jn];let ff=(()=>{class s extends pe{constructor(e={}){super(),this.id=o(e,Hn,s.defaultValues(Hn)),cs in e&&(this.type=o(e,cs,s.defaultValues(cs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hn:return S;case cs:return new ot;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Hn:return t===S;case cs:return t instanceof ot;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.id||S}),new Me({name:t.type||S,optional:!0})]})}fromSchema(e){V(e,L1);const t=me(e,e,s.schema({names:{id:Hn,type:cs}}));he.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),cs in t.result&&(this.type=t.result.type)}toSchema(){const e=[new Be({value:this.id})];return cs in this&&e.push(this.type),new j({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}return s.CLASS_NAME="QCStatement",s})(),H1=(()=>{class s extends pe{constructor(e={}){super(),this.values=o(e,jn,s.defaultValues(jn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===jn?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===jn?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.values||S,value:ff.schema(t.value||{})})]})}fromSchema(e){V(e,F1);const t=me(e,e,s.schema({names:{values:jn}}));he.assertSchema(t,this.className),this.values=Array.from(t.result.values,i=>new ff({schema:i}))}toSchema(){return new j({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}return s.CLASS_NAME="QCStatements",s})();var xi;class Ls{static register(r,e,t){this.namedCurves[r.toLowerCase()]=this.namedCurves[e]={name:r,id:e,size:t}}static find(r){return this.namedCurves[r.toLowerCase()]||null}}xi=Ls,Ls.namedCurves={},xi.register("P-256","1.2.840.10045.3.1.7",32),xi.register("P-384","1.3.132.0.34",48),xi.register("P-521","1.3.132.0.35",66),xi.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),xi.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),xi.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const jl="namedCurve";let Fs=(()=>{class s extends pe{constructor(e={}){super(),this.x=o(e,"x",s.defaultValues("x")),this.y=o(e,"y",s.defaultValues("y")),this.namedCurve=o(e,jl,s.defaultValues(jl)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"x":case"y":return Ct;case jl:return S;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"x":case"y":return t instanceof ArrayBuffer&&Y(t,s.defaultValues(e));case jl:return"string"==typeof t&&t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new Rl}fromSchema(e){const t=E._H.toUint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const i=Ls.find(this.namedCurve);if(!i)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const a=i.size;if(t.byteLength!==2*a+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=i.name,this.x=t.slice(1,a+1).buffer,this.y=t.slice(1+a,2*a+1).buffer}toSchema(){return new Rl({data:k(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=Ls.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Ve(J(this.x),!0,!0,!1),y:Ve(J(this.y),!0,!0,!1)}}fromJSON(e){tt.assert("json",e,"crv","x","y");let t=0;const i=Ls.find(e.crv);i&&(this.namedCurve=i.id,t=i.size);const a=m(U(e.x,!0));if(a.byteLength<t){this.x=new ArrayBuffer(t);const h=new Uint8Array(this.x),d=new Uint8Array(a);h.set(d,1)}else this.x=a.slice(0,t);const l=m(U(e.y,!0));if(l.byteLength<t){this.y=new ArrayBuffer(t);const h=new Uint8Array(this.y),d=new Uint8Array(l);h.set(d,1)}else this.y=l.slice(0,t)}}return s.CLASS_NAME="ECPublicKey",s})();const Va="modulus",Oa="publicExponent",j1=[Va,Oa];let mf=(()=>{class s extends pe{constructor(e={}){super(),this.modulus=o(e,Va,s.defaultValues(Va)),this.publicExponent=o(e,Oa,s.defaultValues(Oa)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Va:case Oa:return new ee;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.modulus||S}),new ee({name:t.publicExponent||S})]})}fromSchema(e){V(e,j1);const t=me(e,e,s.schema({names:{modulus:Va,publicExponent:Oa}}));he.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new j({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:E.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:E.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){tt.assert("json",e,"n","e");const t=m(U(e.n,!0));this.modulus=new ee({valueHex:t.slice(0,Math.pow(2,ce(t.byteLength)))}),this.publicExponent=new ee({valueHex:m(U(e.e,!0)).slice(0,3)})}}return s.CLASS_NAME="RSAPublicKey",s})();const Pa="algorithm",Da="subjectPublicKey",$1=[Pa,Da];let ss=(()=>{class s extends pe{get parsedKey(){if(void 0===this._parsedKey){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===Be.blockName())try{this._parsedKey=new Fs({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=ht(this.subjectPublicKey.valueBlock.valueHexView);if(-1!==e.offset)try{this._parsedKey=new mf({schema:e.result})}catch{}}}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}constructor(e={}){super(),this.algorithm=o(e,Pa,s.defaultValues(Pa)),this.subjectPublicKey=o(e,Da,s.defaultValues(Da));const t=o(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pa:return new se;case Da:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.algorithm||{}),new Ye({name:t.subjectPublicKey||S})]})}fromSchema(e){V(e,$1);const t=me(e,e,s.schema({names:{algorithm:{names:{blockName:Pa}},subjectPublicKey:Da}}));he.assertSchema(t,this.className),this.algorithm=new se({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new j({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Fs({json:e}),this.algorithm=new se({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Be({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new mf({json:e}),this.algorithm=new se({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new ot});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new Ye({valueHex:this.parsedKey.toSchema().toBER(!1)})}}importKey(e,t=je(!0)){var i=this;return(0,w.A)(function*(){try{if(!e)throw new Error("Need to provide publicKey input parameter");const l=ht(yield t.exportKey("spki",e));try{i.fromSchema(l.result)}catch{throw new Error("Error during initializing object from schema")}}catch(a){const l=a instanceof Error?a.message:`${a}`;throw new Error(`Error during exporting public key: ${l}`)}})()}}return s.CLASS_NAME="PublicKeyInfo",s})();const $n="version",Kn="privateKey",Wt="namedCurve",Hs="publicKey",K1=[$n,Kn,Wt,Hs];let pf=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,$n,s.defaultValues($n)),this.privateKey=o(e,Kn,s.defaultValues(Kn)),Wt in e&&(this.namedCurve=o(e,Wt,s.defaultValues(Wt))),Hs in e&&(this.publicKey=o(e,Hs,s.defaultValues(Hs))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $n:return 1;case Kn:return new ge;case Wt:return S;case Hs:return new Fs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $n:return t===s.defaultValues(e);case Kn:return t.isEqual(s.defaultValues(e));case Wt:return t===S;case Hs:return Fs.compareWithDefault(Wt,t.namedCurve)&&Fs.compareWithDefault("x",t.x)&&Fs.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),new ge({name:t.privateKey||S}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Be({name:t.namedCurve||S})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ye({name:t.publicKey||S})]})]})}fromSchema(e){V(e,K1);const t=me(e,e,s.schema({names:{version:$n,privateKey:Kn,namedCurve:Wt,publicKey:Hs}}));if(he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Wt in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),Hs in t.result){const i={schema:t.result.publicKey.valueBlock.valueHex};Wt in this&&(i.namedCurve=this.namedCurve),this.publicKey=new Fs(i)}}toSchema(){const e=[new ee({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[new Be({value:this.namedCurve})]})),this.publicKey&&e.push(new W({idBlock:{tagClass:3,tagNumber:1},value:[new Ye({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new j({value:e})}toJSON(){if(!this.namedCurve||s.compareWithDefault(Wt,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=Ls.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:E.U$.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const i=this.publicKey.toJSON();t.x=i.x,t.y=i.y}return t}fromJSON(e){tt.assert("json",e,"crv","d");let t=0;const i=Ls.find(e.crv);i&&(this.namedCurve=i.id,t=i.size);const a=E.U$.FromBase64Url(e.d);if(a.byteLength<t){const l=new ArrayBuffer(t),h=new Uint8Array(l),d=new Uint8Array(a);h.set(d,1),this.privateKey=new ge({valueHex:l})}else this.privateKey=new ge({valueHex:a.slice(0,t)});e.x&&e.y&&(this.publicKey=new Fs({json:e}))}}return s.CLASS_NAME="ECPrivateKey",s})();const Ua="prime",Ma="exponent",La="coefficient",G1=[Ua,Ma,La];let Su=(()=>{class s extends pe{constructor(e={}){super(),this.prime=o(e,Ua,s.defaultValues(Ua)),this.exponent=o(e,Ma,s.defaultValues(Ma)),this.coefficient=o(e,La,s.defaultValues(La)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ua:case Ma:case La:return new ee;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.prime||S}),new ee({name:t.exponent||S}),new ee({name:t.coefficient||S})]})}fromSchema(e){V(e,G1);const t=me(e,e,s.schema({names:{prime:Ua,exponent:Ma,coefficient:La}}));he.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new j({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:E.U$.ToBase64Url(this.prime.valueBlock.valueHexView),d:E.U$.ToBase64Url(this.exponent.valueBlock.valueHexView),t:E.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){tt.assert("json",e,"r","d","r"),this.prime=new ee({valueHex:E.U$.FromBase64Url(e.r)}),this.exponent=new ee({valueHex:E.U$.FromBase64Url(e.d)}),this.coefficient=new ee({valueHex:E.U$.FromBase64Url(e.t)})}}return s.CLASS_NAME="OtherPrimeInfo",s})();const Fa="version",Ha="modulus",ja="publicExponent",$a="privateExponent",Ka="prime1",Ga="prime2",Ja="exponent1",za="exponent2",qa="coefficient",Bi="otherPrimeInfos",J1=[Fa,Ha,ja,$a,Ka,Ga,Ja,za,qa,Bi];let gf=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,Fa,s.defaultValues(Fa)),this.modulus=o(e,Ha,s.defaultValues(Ha)),this.publicExponent=o(e,ja,s.defaultValues(ja)),this.privateExponent=o(e,$a,s.defaultValues($a)),this.prime1=o(e,Ka,s.defaultValues(Ka)),this.prime2=o(e,Ga,s.defaultValues(Ga)),this.exponent1=o(e,Ja,s.defaultValues(Ja)),this.exponent2=o(e,za,s.defaultValues(za)),this.coefficient=o(e,qa,s.defaultValues(qa)),Bi in e&&(this.otherPrimeInfos=o(e,Bi,s.defaultValues(Bi))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fa:return 0;case Ha:case ja:case $a:case Ka:case Ga:case Ja:case za:case qa:return new ee;case Bi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),new ee({name:t.modulus||S}),new ee({name:t.publicExponent||S}),new ee({name:t.privateExponent||S}),new ee({name:t.prime1||S}),new ee({name:t.prime2||S}),new ee({name:t.exponent1||S}),new ee({name:t.exponent2||S}),new ee({name:t.coefficient||S}),new j({optional:!0,value:[new He({name:t.otherPrimeInfosName||S,value:Su.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){V(e,J1);const t=me(e,e,s.schema({names:{version:Fa,modulus:Ha,publicExponent:ja,privateExponent:$a,prime1:Ka,prime2:Ga,exponent1:Ja,exponent2:za,coefficient:qa,otherPrimeInfo:{names:{blockName:Bi}}}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Bi in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,i=>new Su({schema:i})))}toSchema(){const e=[];return e.push(new ee({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new j({value:Array.from(this.otherPrimeInfos,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={n:E.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:E.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:E.U$.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:E.U$.ToBase64Url(this.prime1.valueBlock.valueHexView),q:E.U$.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:E.U$.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:E.U$.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:E.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,t=>t.toJSON())),e}fromJSON(e){tt.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new ee({valueHex:E.U$.FromBase64Url(e.n)}),this.publicExponent=new ee({valueHex:E.U$.FromBase64Url(e.e)}),this.privateExponent=new ee({valueHex:E.U$.FromBase64Url(e.d)}),this.prime1=new ee({valueHex:E.U$.FromBase64Url(e.p)}),this.prime2=new ee({valueHex:E.U$.FromBase64Url(e.q)}),this.exponent1=new ee({valueHex:E.U$.FromBase64Url(e.dp)}),this.exponent2=new ee({valueHex:E.U$.FromBase64Url(e.dq)}),this.coefficient=new ee({valueHex:E.U$.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,t=>new Su({json:t})))}}return s.CLASS_NAME="RSAPrivateKey",s})();const Wa="version",Xa="privateKeyAlgorithm",Ya="privateKey",Ri="attributes",$l="parsedKey",z1=[Wa,Xa,Ya,Ri];let Gn=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,Wa,s.defaultValues(Wa)),this.privateKeyAlgorithm=o(e,Xa,s.defaultValues(Xa)),this.privateKey=o(e,Ya,s.defaultValues(Ya)),Ri in e&&(this.attributes=o(e,Ri,s.defaultValues(Ri))),$l in e&&(this.parsedKey=o(e,$l,s.defaultValues($l))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wa:return 0;case Xa:return new se;case Ya:return new ge;case Ri:return[];case $l:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),se.schema(t.privateKeyAlgorithm||{}),new ge({name:t.privateKey||S}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.attributes||S,value:st.schema()})]})]})}fromSchema(e){V(e,z1);const t=me(e,e,s.schema({names:{version:Wa,privateKeyAlgorithm:{names:{blockName:Xa}},privateKey:Ya,attributes:Ri}}));switch(he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new se({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,Ri in t.result&&(this.attributes=Array.from(t.result.attributes,i=>new st({schema:i}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const i=ht(this.privateKey.valueBlock.valueHexView);-1!==i.offset&&(this.parsedKey=new gf({schema:i.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof Be){const i=ht(this.privateKey.valueBlock.valueHexView);-1!==i.offset&&(this.parsedKey=new pf({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:i.result}))}}}toSchema(){const e=[new ee({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,t=>t.toSchema())})),new j({value:e})}toJSON(){if(!this.parsedKey){const i={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(i.attributes=Array.from(this.attributes,a=>a.toJSON())),i}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new pf({json:e}),this.privateKeyAlgorithm=new se({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Be({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new gf({json:e}),this.privateKeyAlgorithm=new se({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new ot});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new ge({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}return s.CLASS_NAME="PrivateKeyInfo",s})();const Jn="contentType",zn="contentEncryptionAlgorithm",Vi="encryptedContent",q1=[Jn,zn,Vi];let Ut=(()=>{class s extends pe{constructor(e={}){if(super(),this.contentType=o(e,Jn,s.defaultValues(Jn)),this.contentEncryptionAlgorithm=o(e,zn,s.defaultValues(zn)),Vi in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed&&!e.disableSplit)){const t=new ge({idBlock:{isConstructed:!0},isConstructed:!0});let i=0;const a=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let l=a.byteLength;for(;l>0;){const h=new Uint8Array(a,i,i+1024>a.byteLength?a.byteLength-i:1024),d=new ArrayBuffer(h.length),g=new Uint8Array(d);for(let B=0;B<g.length;B++)g[B]=h[B];t.valueBlock.value.push(new ge({valueHex:d})),l-=h.length,i+=h.length}this.encryptedContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jn:return S;case zn:return new se;case Vi:return new ge;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jn:return t===S;case zn:return t.algorithmId===S&&!("algorithmParams"in t);case Vi:return t.isEqual(s.defaultValues(Vi));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.contentType||S}),se.schema(t.contentEncryptionAlgorithm||{}),new mt({value:[new W({name:t.encryptedContent||S,idBlock:{tagClass:3,tagNumber:0},value:[new He({value:new ge})]}),new Ce({name:t.encryptedContent||S,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){V(e,q1);const t=me(e,e,s.schema({names:{contentType:Jn,contentEncryptionAlgorithm:{names:{blockName:zn}},encryptedContent:Vi}}));he.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new se({schema:t.result.contentEncryptionAlgorithm}),Vi in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new Be({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const i=this.encryptedContent;i.idBlock.tagClass=3,i.idBlock.tagNumber=0,i.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(i)}return new j({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return ge.prototype.getValue.call(this.encryptedContent)}}return s.CLASS_NAME="EncryptedContentInfo",s})();const js="hashAlgorithm",$s="maskGenAlgorithm",Ks="saltLength",Gs="trailerField",W1=[js,$s,Ks,Gs];let bu=(()=>{class s extends pe{constructor(e={}){super(),this.hashAlgorithm=o(e,js,s.defaultValues(js)),this.maskGenAlgorithm=o(e,$s,s.defaultValues($s)),this.saltLength=o(e,Ks,s.defaultValues(Ks)),this.trailerField=o(e,Gs,s.defaultValues(Gs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case js:return new se({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot});case $s:return new se({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new se({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot}).toSchema()});case Ks:return 20;case Gs:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[se.schema(t.hashAlgorithm||{})]}),new W({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[se.schema(t.maskGenAlgorithm||{})]}),new W({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new ee({name:t.saltLength||S})]}),new W({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new ee({name:t.trailerField||S})]})]})}fromSchema(e){V(e,W1);const t=me(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:js}},maskGenAlgorithm:{names:{blockName:$s}},saltLength:Ks,trailerField:Gs}}));he.assertSchema(t,this.className),js in t.result&&(this.hashAlgorithm=new se({schema:t.result.hashAlgorithm})),$s in t.result&&(this.maskGenAlgorithm=new se({schema:t.result.maskGenAlgorithm})),Ks in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Gs in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(s.defaultValues(js))||e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(s.defaultValues($s))||e.push(new W({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==s.defaultValues(Ks)&&e.push(new W({idBlock:{tagClass:3,tagNumber:2},value:[new ee({value:this.saltLength})]})),this.trailerField!==s.defaultValues(Gs)&&e.push(new W({idBlock:{tagClass:3,tagNumber:3},value:[new ee({value:this.trailerField})]})),new j({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(s.defaultValues(js))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(s.defaultValues($s))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==s.defaultValues(Ks)&&(e.saltLength=this.saltLength),this.trailerField!==s.defaultValues(Gs)&&(e.trailerField=this.trailerField),e}}return s.CLASS_NAME="RSASSAPSSParams",s})();const qn="salt",Za="iterationCount",Xt="keyLength",us="prf",X1=[qn,Za,Xt,us];let Qa=(()=>{class s extends pe{constructor(e={}){super(),this.salt=o(e,qn,s.defaultValues(qn)),this.iterationCount=o(e,Za,s.defaultValues(Za)),Xt in e&&(this.keyLength=o(e,Xt,s.defaultValues(Xt))),us in e&&(this.prf=o(e,us,s.defaultValues(us))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qn:return{};case Za:return-1;case Xt:return 0;case us:return new se({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot});default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new mt({value:[new ge({name:t.saltPrimitive||S}),se.schema(t.saltConstructed||{})]}),new ee({name:t.iterationCount||S}),new ee({name:t.keyLength||S,optional:!0}),se.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){V(e,X1);const t=me(e,e,s.schema({names:{saltPrimitive:qn,saltConstructed:{names:{blockName:qn}},iterationCount:Za,keyLength:Xt,prf:{names:{blockName:us,optional:!0}}}}));he.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,Xt in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),us in t.result&&(this.prf=new se({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new ee({value:this.iterationCount})),Xt in this&&s.defaultValues(Xt)!==this.keyLength&&e.push(new ee({value:this.keyLength})),this.prf&&!1===s.defaultValues(us).isEqual(this.prf)&&e.push(this.prf.toSchema()),new j({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return Xt in this&&s.defaultValues(Xt)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&!1===s.defaultValues(us).isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}return s.CLASS_NAME="PBKDF2Params",s})();const eo="keyDerivationFunc",to="encryptionScheme",Y1=[eo,to];let wf=(()=>{class s extends pe{constructor(e={}){super(),this.keyDerivationFunc=o(e,eo,s.defaultValues(eo)),this.encryptionScheme=o(e,to,s.defaultValues(to)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eo:case to:return new se;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.keyDerivationFunc||{}),se.schema(t.encryptionScheme||{})]})}fromSchema(e){V(e,Y1);const t=me(e,e,s.schema({names:{keyDerivationFunc:{names:{blockName:eo}},encryptionScheme:{names:{blockName:to}}}}));he.assertSchema(t,this.className),this.keyDerivationFunc=new se({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new se({schema:t.result.encryptionScheme})}toSchema(){return new j({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}return s.CLASS_NAME="PBES2Params",s})();class Z1{constructor(r){this.crypto=r.crypto,this.subtle="webkitSubtle"in r.crypto?r.crypto.webkitSubtle:r.crypto.subtle,this.name=o(r,"name",S)}encrypt(...r){var e=this;return(0,w.A)(function*(){return e.subtle.encrypt(...r)})()}decrypt(...r){var e=this;return(0,w.A)(function*(){return e.subtle.decrypt(...r)})()}sign(...r){return this.subtle.sign(...r)}verify(...r){var e=this;return(0,w.A)(function*(){return e.subtle.verify(...r)})()}digest(...r){var e=this;return(0,w.A)(function*(){return e.subtle.digest(...r)})()}generateKey(...r){var e=this;return(0,w.A)(function*(){return e.subtle.generateKey(...r)})()}deriveKey(...r){var e=this;return(0,w.A)(function*(){return e.subtle.deriveKey(...r)})()}deriveBits(...r){var e=this;return(0,w.A)(function*(){return e.subtle.deriveBits(...r)})()}wrapKey(...r){var e=this;return(0,w.A)(function*(){return e.subtle.wrapKey(...r)})()}unwrapKey(...r){var e=this;return(0,w.A)(function*(){return e.subtle.unwrapKey(...r)})()}exportKey(...r){return this.subtle.exportKey(...r)}importKey(...r){return this.subtle.importKey(...r)}getRandomValues(r){return this.crypto.getRandomValues(r)}}function yf(s,r,e,t,i){return Au.apply(this,arguments)}function Au(){return(Au=(0,w.A)(function*(s,r,e,t,i){let a,l,h;switch(s.toUpperCase()){case"SHA-1":a=20,l=64,h=bm;break;case"SHA-256":a=32,l=64,h=_m;break;case"SHA-384":a=48,l=128,h=$m;break;case"SHA-512":a=64,l=128,h=jm;break;default:throw new Error("Unsupported hashing algorithm")}const d=new Uint8Array(e);let g=(new TextDecoder).decode(e);(new TextEncoder).encode(g).some((fe,ve)=>fe!==d[ve])&&(g=String.fromCharCode(...d));const L=new Uint8Array(2*g.length+2),z=new DataView(L.buffer);for(let fe=0;fe<g.length;fe++)z.setUint16(2*fe,g.charCodeAt(fe),!1);z.setUint16(2*g.length,0,!1);const K=new Uint8Array(l).fill(3),oe=new Uint8Array(t),_e=new Uint8Array(l*Math.ceil(oe.length/l)).map((fe,ve)=>oe[ve%oe.length]),we=new Uint8Array(l*Math.ceil(L.length/l)).map((fe,ve)=>L[ve%L.length]);let re=new Uint8Array(_e.length+we.length);re.set(_e),re.set(we,_e.length);const ye=Math.ceil((r>>3)/a),le=[];for(let fe=0;fe<ye;fe++){let ve=new Uint8Array(K.length+re.length);ve.set(K),ve.set(re,K.length);for(let De=0;De<i;De++)ve=h(ve);const Ae=new Uint8Array(l).map((De,ze)=>ve[ze%ve.length]),Ie=Math.ceil(oe.length/l)+Math.ceil(L.length/l),Te=[];for(let De=0;De<Ie;De++){const ze=Array.from(re.slice(De*l,(De+1)*l));let At=511;for(let qe=Ae.length-1;qe>=0;qe--)At>>=8,At+=Ae[qe]+(ze[qe]||0),ze[qe]=255&At;Te.push(...ze)}re=new Uint8Array(Te),le.push(...ve)}return new Uint8Array(le.slice(0,r>>3)).buffer})).apply(this,arguments)}function Sf(s){const r="string"==typeof s?{name:s}:s;return"hash"in r?{...r,hash:Sf(r.hash)}:r}class Kl extends Z1{importKey(r,e,t,i,a){var l=this;return(0,w.A)(function*(){var h,d,g,B,L,z;let K={};const oe=Sf(t);switch(r.toLowerCase()){case"raw":return l.subtle.importKey("raw",e,t,i,a);case"spki":{const _e=ht(E._H.toArrayBuffer(e));he.assert(_e,"keyData");const we=new ss;try{we.fromSchema(_e.result)}catch{throw new lt("Incorrect keyData")}switch(oe.name.toUpperCase()){case"RSA-PSS":if(!oe.hash)throw new tt("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(oe.hash.name.toUpperCase()){case"SHA-1":K.alg="PS1";break;case"SHA-256":K.alg="PS256";break;case"SHA-384":K.alg="PS384";break;case"SHA-512":K.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${oe.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(a=["verify"],K.kty="RSA",K.ext=i,K.key_ops=a,"1.2.840.113549.1.1.1"!==we.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${we.algorithm.algorithmId}`);if(!K.alg){if(!oe.hash)throw new tt("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(oe.hash.name.toUpperCase()){case"SHA-1":K.alg="RS1";break;case"SHA-256":K.alg="RS256";break;case"SHA-384":K.alg="RS384";break;case"SHA-512":K.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${oe.hash.name.toUpperCase()}`)}}const re=we.toJSON();Object.assign(K,re)}break;case"ECDSA":a=["verify"];case"ECDH":{if(K={kty:"EC",ext:i,key_ops:a},"1.2.840.10045.2.1"!==we.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${we.algorithm.algorithmId}`);const re=we.toJSON();Object.assign(K,re)}break;case"RSA-OAEP":{if(K.kty="RSA",K.ext=i,K.key_ops=a,"safari"===l.name.toLowerCase())K.alg="RSA-OAEP";else{if(!oe.hash)throw new tt("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(oe.hash.name.toUpperCase()){case"SHA-1":K.alg="RSA-OAEP";break;case"SHA-256":K.alg="RSA-OAEP-256";break;case"SHA-384":K.alg="RSA-OAEP-384";break;case"SHA-512":K.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${oe.hash.name.toUpperCase()}`)}}const re=we.toJSON();Object.assign(K,re)}break;case"RSAES-PKCS1-V1_5":{K.kty="RSA",K.ext=i,K.key_ops=a,K.alg="PS1";const re=we.toJSON();Object.assign(K,re)}break;default:throw new Error(`Incorrect algorithm name: ${oe.name.toUpperCase()}`)}}break;case"pkcs8":{const _e=new Gn,we=ht(E._H.toArrayBuffer(e));he.assert(we,"keyData");try{_e.fromSchema(we.result)}catch{throw new Error("Incorrect keyData")}if(!_e.parsedKey)throw new Error("Incorrect keyData");switch(oe.name.toUpperCase()){case"RSA-PSS":switch(null===(h=oe.hash)||void 0===h?void 0:h.name.toUpperCase()){case"SHA-1":K.alg="PS1";break;case"SHA-256":K.alg="PS256";break;case"SHA-384":K.alg="PS384";break;case"SHA-512":K.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(d=oe.hash)||void 0===d?void 0:d.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(a=["sign"],K.kty="RSA",K.ext=i,K.key_ops=a,"1.2.840.113549.1.1.1"!==_e.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect private key algorithm: ${_e.privateKeyAlgorithm.algorithmId}`);if(!("alg"in K))switch(null===(g=oe.hash)||void 0===g?void 0:g.name.toUpperCase()){case"SHA-1":K.alg="RS1";break;case"SHA-256":K.alg="RS256";break;case"SHA-384":K.alg="RS384";break;case"SHA-512":K.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(B=oe.hash)||void 0===B?void 0:B.name.toUpperCase()}`)}const re=_e.toJSON();Object.assign(K,re)}break;case"ECDSA":a=["sign"];case"ECDH":{if(K={kty:"EC",ext:i,key_ops:a},"1.2.840.10045.2.1"!==_e.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect algorithm: ${_e.privateKeyAlgorithm.algorithmId}`);const re=_e.toJSON();Object.assign(K,re)}break;case"RSA-OAEP":{if(K.kty="RSA",K.ext=i,K.key_ops=a,"safari"===l.name.toLowerCase())K.alg="RSA-OAEP";else switch(null===(L=oe.hash)||void 0===L?void 0:L.name.toUpperCase()){case"SHA-1":K.alg="RSA-OAEP";break;case"SHA-256":K.alg="RSA-OAEP-256";break;case"SHA-384":K.alg="RSA-OAEP-384";break;case"SHA-512":K.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(z=oe.hash)||void 0===z?void 0:z.name.toUpperCase()}`)}const re=_e.toJSON();Object.assign(K,re)}break;case"RSAES-PKCS1-V1_5":{a=["decrypt"],K.kty="RSA",K.ext=i,K.key_ops=a,K.alg="PS1";const re=_e.toJSON();Object.assign(K,re)}break;default:throw new Error(`Incorrect algorithm name: ${oe.name.toUpperCase()}`)}}break;case"jwk":K=e;break;default:throw new Error(`Incorrect format: ${r}`)}if("safari"===l.name.toLowerCase())try{return l.subtle.importKey("jwk",m(JSON.stringify(K)),t,i,a)}catch{return l.subtle.importKey("jwk",K,t,i,a)}return l.subtle.importKey("jwk",K,t,i,a)})()}exportKey(r,e){var t=this;return(0,w.A)(function*(){let i=yield t.subtle.exportKey("jwk",e);switch("safari"===t.name.toLowerCase()&&i instanceof ArrayBuffer&&(i=JSON.parse(J(i))),r.toLowerCase()){case"raw":return t.subtle.exportKey("raw",e);case"spki":{const a=new ss;try{a.fromJSON(i)}catch{throw new Error("Incorrect key data")}return a.toSchema().toBER(!1)}case"pkcs8":{const a=new Gn;try{a.fromJSON(i)}catch{throw new Error("Incorrect key data")}return a.toSchema().toBER(!1)}case"jwk":return i;default:throw new Error(`Incorrect format: ${r}`)}})()}convert(r,e,t,i,a,l){var h=this;return(0,w.A)(function*(){if(r.toLowerCase()===e.toLowerCase())return t;const d=yield h.importKey(r,t,i,a,l);return h.exportKey(e,d)})()}getAlgorithmByOID(r,e=!1,t){switch(r){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(e)throw new Error(`Unsupported algorithm identifier ${t?`for ${t} `:S}: ${r}`);return{}}getOIDByAlgorithm(r,e=!1,t){let i=S;switch(r.name.toUpperCase()){case"RSAES-PKCS1-V1_5":i="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.1.1.5";break;case"SHA-256":i="1.2.840.113549.1.1.11";break;case"SHA-384":i="1.2.840.113549.1.1.12";break;case"SHA-512":i="1.2.840.113549.1.1.13"}break;case"RSA-PSS":i="1.2.840.113549.1.1.10";break;case"RSA-OAEP":i="1.2.840.113549.1.1.7";break;case"ECDSA":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.10045.4.1";break;case"SHA-256":i="1.2.840.10045.4.3.2";break;case"SHA-384":i="1.2.840.10045.4.3.3";break;case"SHA-512":i="1.2.840.10045.4.3.4"}break;case"ECDH":switch(r.kdf.toUpperCase()){case"SHA-1":i="1.3.133.16.840.63.0.2";break;case"SHA-256":i="1.3.132.1.11.1";break;case"SHA-384":i="1.3.132.1.11.2";break;case"SHA-512":i="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.2";break;case 192:i="2.16.840.1.101.3.4.1.22";break;case 256:i="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.6";break;case 192:i="2.16.840.1.101.3.4.1.26";break;case 256:i="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.4";break;case 192:i="2.16.840.1.101.3.4.1.24";break;case 256:i="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.5";break;case 192:i="2.16.840.1.101.3.4.1.25";break;case 256:i="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.2.7";break;case"SHA-256":i="1.2.840.113549.2.9";break;case"SHA-384":i="1.2.840.113549.2.10";break;case"SHA-512":i="1.2.840.113549.2.11"}break;case"DH":i="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":i="1.3.14.3.2.26";break;case"SHA-256":i="2.16.840.1.101.3.4.2.1";break;case"SHA-384":i="2.16.840.1.101.3.4.2.2";break;case"SHA-512":i="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":i="1.2.840.113549.1.5.12";break;case"P-256":i="1.2.840.10045.3.1.7";break;case"P-384":i="1.3.132.0.34";break;case"P-521":i="1.3.132.0.35"}if(!i&&e)throw new Error(`Unsupported algorithm ${t?`for ${t} `:S}: ${r.name}`);return i}getAlgorithmParameters(r,e){let t={algorithm:{},usages:[]};switch(r.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(e.toLowerCase()){case"generatekey":t={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":t={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(e.toLowerCase()){case"sign":case"verify":t={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":t={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":t={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(e.toLowerCase()){case"encrypt":case"decrypt":t={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":t={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":t={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(e.toLowerCase()){case"generatekey":t={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":t={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":t={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(e.toLowerCase()){case"exportkey":case"importkey":case"generatekey":t={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":t={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":t={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(e.toLowerCase()){case"sign":case"verify":t={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==e.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};t={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==e.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};t={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return t}getHashAlgorithm(r){let e=S;switch(r.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":e="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":e="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":e="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":e="SHA-512";break;case"1.2.840.113549.1.1.10":try{const t=new bu({schema:r.algorithmParams});if(t.hashAlgorithm){const i=this.getAlgorithmByOID(t.hashAlgorithm.algorithmId);if(!("name"in i))return S;e=i.name}else e="SHA-1"}catch{}}return e}encryptEncryptedContentInfo(r){var e=this;return(0,w.A)(function*(){tt.assert(r,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=e.getOIDByAlgorithm(r.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),i=e.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),a=e.getOIDByAlgorithm({name:"HMAC",hash:{name:r.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),l=new ArrayBuffer(16),h=new Uint8Array(l);e.getRandomValues(h);const d=new ArrayBuffer(64),g=new Uint8Array(d);e.getRandomValues(g);const B=new Uint8Array(r.contentToEncrypt),L=new Qa({salt:new ge({valueHex:d}),iterationCount:r.iterationCount,prf:new se({algorithmId:a,algorithmParams:new ot})}),z=new Uint8Array(r.password),K=yield e.importKey("raw",z,"PBKDF2",!1,["deriveKey"]),oe=yield e.deriveKey({name:"PBKDF2",hash:{name:r.hmacHashAlgorithm},salt:g,iterations:r.iterationCount},K,r.contentEncryptionAlgorithm,!1,["encrypt"]),_e=yield e.encrypt({name:r.contentEncryptionAlgorithm.name,iv:h},oe,B),we=new wf({keyDerivationFunc:new se({algorithmId:i,algorithmParams:L.toSchema()}),encryptionScheme:new se({algorithmId:t,algorithmParams:new ge({valueHex:l})})});return new Ut({contentType:r.contentType,contentEncryptionAlgorithm:new se({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:we.toSchema()}),encryptedContent:new ge({valueHex:_e})})})()}decryptEncryptedContentInfo(r){var e=this;return(0,w.A)(function*(){if(tt.assert(r,"password","encryptedContentInfo"),"1.2.840.113549.1.5.13"!==r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)throw new Error(`Unknown "contentEncryptionAlgorithm": ${r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t,i;try{t=new wf({schema:r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}try{i=new Qa({schema:t.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const a=e.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),h=new Uint8Array(t.encryptionScheme.algorithmParams.valueBlock.valueHex),g=new Uint8Array(i.salt.valueBlock.valueHex),B=i.iterationCount;let L="SHA-1";i.prf&&(L=e.getAlgorithmByOID(i.prf.algorithmId,!0).hash.name);const z=yield e.importKey("raw",r.password,"PBKDF2",!1,["deriveKey"]),K=yield e.deriveKey({name:"PBKDF2",hash:{name:L},salt:g,iterations:B},z,a,!1,["decrypt"]),oe=r.encryptedContentInfo.getEncryptedContent();return e.decrypt({name:a.name,iv:h},K,oe)})()}stampDataWithPassword(r){var e=this;return(0,w.A)(function*(){if(!(r instanceof Object))throw new Error('Parameters must have type "Object"');let t;switch(tt.assert(r,"password","hashAlgorithm","iterationCount","salt","contentToStamp"),r.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${r.hashAlgorithm}`)}const i={name:"HMAC",length:t,hash:{name:r.hashAlgorithm}},a=yield yf(r.hashAlgorithm,t,r.password,r.salt,r.iterationCount),l=yield e.importKey("raw",new Uint8Array(a),i,!1,["sign"]);return e.sign(i,l,new Uint8Array(r.contentToStamp))})()}verifyDataStampedWithPassword(r){var e=this;return(0,w.A)(function*(){tt.assert(r,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(r.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${r.hashAlgorithm}`)}const i={name:"HMAC",length:t,hash:{name:r.hashAlgorithm}},a=yield yf(r.hashAlgorithm,t,r.password,r.salt,r.iterationCount),l=yield e.importKey("raw",new Uint8Array(a),i,!1,["verify"]);return e.verify(i,l,new Uint8Array(r.signatureToVerify),new Uint8Array(r.contentToVerify))})()}getSignatureParameters(r,e="SHA-1"){var t=this;return(0,w.A)(function*(){t.getOIDByAlgorithm({name:e},!0,"hashAlgorithm");const i=new se,a=t.getAlgorithmParameters(r.algorithm.name,"sign");if(!Object.keys(a.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const l=a.algorithm;switch(l.hash.name="hash"in r.algorithm&&r.algorithm.hash&&r.algorithm.hash.name?r.algorithm.hash.name:e,r.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":i.algorithmId=t.getOIDByAlgorithm(l,!0);break;case"RSA-PSS":{switch(l.hash.name.toUpperCase()){case"SHA-256":l.saltLength=32;break;case"SHA-384":l.saltLength=48;break;case"SHA-512":l.saltLength=64}const h={};if("SHA-1"!==l.hash.name.toUpperCase()){const g=t.getOIDByAlgorithm({name:l.hash.name},!0,"hashAlgorithm");h.hashAlgorithm=new se({algorithmId:g,algorithmParams:new ot}),h.maskGenAlgorithm=new se({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:h.hashAlgorithm.toSchema()})}20!==l.saltLength&&(h.saltLength=l.saltLength);const d=new bu(h);i.algorithmId="1.2.840.113549.1.1.10",i.algorithmParams=d.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${r.algorithm.name}`)}return{signatureAlgorithm:i,parameters:a}})()}signWithPrivateKey(r,e,t){var i=this;return(0,w.A)(function*(){const a=yield i.sign(t.algorithm,e,r);return"ECDSA"===t.algorithm.name?function ep(s){if(s.byteLength%2!=0)return Ct;const r=s.byteLength/2,e=new ArrayBuffer(r);new Uint8Array(e).set(new Uint8Array(s,0,r));const i=new ee({valueHex:e}),a=new ArrayBuffer(r);new Uint8Array(a).set(new Uint8Array(s,r,r));const h=new ee({valueHex:a});return new j({value:[i.convertToDER(),h.convertToDER()]}).toBER(!1)}(a):a})()}fillPublicKeyParameters(r,e){const t={},i=this.getHashAlgorithm(e);if(i===S)throw new Error(`Unsupported signature algorithm: ${e.algorithmId}`);let a;a="1.2.840.113549.1.1.10"===e.algorithmId?e.algorithmId:r.algorithm.algorithmId;const l=this.getAlgorithmByOID(a,!0);if(t.algorithm=this.getAlgorithmParameters(l.name,"importKey"),"hash"in t.algorithm.algorithm&&(t.algorithm.algorithm.hash.name=i),"ECDSA"===l.name){const h=r.algorithm;if(!h.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const d=h.algorithmParams;if("idBlock"in h.algorithmParams&&(1!==d.idBlock.tagClass||6!==d.idBlock.tagNumber))throw new Error("Incorrect type for ECDSA public key parameters");const g=this.getAlgorithmByOID(d.valueBlock.toString(),!0);t.algorithm.algorithm.namedCurve=g.name}return t}getPublicKey(r,e,t){var i=this;return(0,w.A)(function*(){t||(t=i.fillPublicKeyParameters(r,e));const a=r.toSchema().toBER(!1);return i.importKey("spki",a,t.algorithm.algorithm,!0,t.algorithm.usages)})()}verifyWithPublicKey(r,e,t,i,a){var l=this;return(0,w.A)(function*(){let h;if(a){const B={};let L;L="1.2.840.113549.1.1.10"===i.algorithmId?i.algorithmId:t.algorithm.algorithmId;const z=l.getAlgorithmByOID(L,!0);if(B.algorithm=l.getAlgorithmParameters(z.name,"importKey"),"hash"in B.algorithm.algorithm&&(B.algorithm.algorithm.hash.name=a),"ECDSA"===z.name){let K=!1;if("algorithmParams"in t.algorithm&&"idBlock"in t.algorithm.algorithmParams&&1===t.algorithm.algorithmParams.idBlock.tagClass&&6===t.algorithm.algorithmParams.idBlock.tagNumber&&(K=!0),!1===K)throw new Error("Incorrect type for ECDSA public key parameters");const oe=l.getAlgorithmByOID(t.algorithm.algorithmParams.valueBlock.toString(),!0);B.algorithm.algorithm.namedCurve=oe.name}h=yield l.getPublicKey(t,null,B)}else{if(!(a=l.getHashAlgorithm(i)))throw new Error(`Unsupported signature algorithm: ${i.algorithmId}`);h=yield l.getPublicKey(t,i)}const d=l.getAlgorithmParameters(h.algorithm.name,"verify");"hash"in d.algorithm&&(d.algorithm.hash.name=a);let g=e.valueBlock.valueHexView;if("ECDSA"===h.algorithm.name){const B=Ls.find(h.algorithm.namedCurve);if(!B)throw new Error("Unsupported named curve in use");const L=ht(g);he.assert(L,"Signature value"),g=function tp(s,r){if(!(s instanceof j&&2===s.valueBlock.value.length&&s.valueBlock.value[0]instanceof ee&&s.valueBlock.value[1]instanceof ee))return Ct;const e=s.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,t=s.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,i=new Uint8Array(2*r);return i.set(e,r-e.byteLength),i.set(t,2*r-t.byteLength),i.buffer}(L.result,B.size)}if("RSA-PSS"===h.algorithm.name){const B=new bu({schema:i.algorithmParams});d.algorithm.saltLength="saltLength"in B?B.saltLength:20;let L="SHA-1";"hashAlgorithm"in B&&(L=l.getAlgorithmByOID(B.hashAlgorithm.algorithmId,!0).name),d.algorithm.hash.name=L}return l.verify(d.algorithm,h,g,r)})()}}let bf={name:"none",crypto:null};function Af(s){return!(!s||"object"!=typeof s||!("crypto"in s))}function _f(s,...r){let e=null;if(r.length<2)e=r.length?r[0]:typeof self<"u"&&self.crypto?new Kl({name:"browser",crypto:self.crypto}):null;else{const t=r[0],i=r[1];Af(i)?e=i:Af(t)?e=t:"subtle"in t&&"getRandomValues"in t&&(e=new Kl({crypto:t}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if("object"!=typeof global[process.pid])throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if("object"!=typeof global[process.pid].pkijs)throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:s,crypto:e}}else bf={name:s,crypto:e}}function je(s=!1){const r=function Q1(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let s;try{s=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return s}return bf}();if(!r.crypto&&s)throw new Error("Unable to create WebCrypto object");return r.crypto}function _u(s){return je(!0).getRandomValues(s)}function sp(s,r,e,t,i){return ku.apply(this,arguments)}function ku(){return(ku=(0,w.A)(function*(s,r,e,t,i){switch(s.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new lt(`Unknown hash function: ${s}`)}if(lt.assert(r,"zBuffer","ArrayBuffer"),0===r.byteLength)throw new lt("'zBuffer' has zero length, error");if(lt.assert(t,"SharedInfo","ArrayBuffer"),e>255)throw new lt("Please set 'Counter' argument to value less or equal to 255");const a=new ArrayBuffer(4),l=new Uint8Array(a);l[0]=0,l[1]=0,l[2]=0,l[3]=e;let h=Ct;return h=k(h,r),h=k(h,a),h=k(h,t),{counter:e,result:yield i.digest({name:s},h)}})).apply(this,arguments)}function kf(s,r,e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,w.A)(function*(s,r,e,t,i=je(!0)){let a=0,l=1;switch(s.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:throw new lt(`Unknown hash function: ${s}`)}if(lt.assert(r,"Zbuffer","ArrayBuffer"),0===r.byteLength)throw new lt("'Zbuffer' has zero length, error");lt.assert(t,"SharedInfo","ArrayBuffer");const h=e/a;Math.floor(h)>0&&(l=Math.floor(h),h-l>0&&l++);const d=[];for(let z=1;z<=l;z++)d.push(yield sp(s,r,z,t,i));let g=Ct,B=1,L=!0;for(;L;){L=!1;for(const z of d)if(z.counter===B){g=k(g,z.result),L=!0;break}B++}if(g.byteLength>(e>>=3)){const z=new ArrayBuffer(e),K=new Uint8Array(z),oe=new Uint8Array(g);for(let _e=0;_e<e;_e++)K[_e]=oe[_e];return z}return g})).apply(this,arguments)}const Cu="version",Nu="logID",Iu="extensions",Tu="timestamp",xu="hashAlgorithm",Bu="signatureAlgorithm",Ru="signature",Rf="anonymous";let ip=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,Cu,s.defaultValues(Cu)),this.logID=o(e,Nu,s.defaultValues(Nu)),this.timestamp=o(e,Tu,s.defaultValues(Tu)),this.extensions=o(e,Iu,s.defaultValues(Iu)),this.hashAlgorithm=o(e,xu,s.defaultValues(xu)),this.signatureAlgorithm=o(e,Bu,s.defaultValues(Bu)),this.signature=o(e,Ru,s.defaultValues(Ru)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cu:return 0;case Nu:case Iu:return Ct;case Tu:return new Date(0);case xu:case Bu:return S;case Ru:return new Me;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof Rl))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new ua({stream:new yt({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(v(new Uint8Array(e.getBlock(8)),8));const i=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(i)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Rf;break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const a=e.getUint16(),h=ht(new Uint8Array(e.getBlock(a)).buffer.slice(0));if(he.assert(h,"SignedCertificateTimestamp"),this.signature=h.result,t!==47+i+a)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new Rl({data:e.stream.buffer})}toStream(){const e=new ua;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),i=new Uint8Array(t),a=A(this.timestamp.valueOf(),8);let l,h;switch(i.set(new Uint8Array(a),8-a.byteLength),e.appendView(i),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":l=0;break;case"md5":l=1;break;case"sha1":l=2;break;case"sha224":l=3;break;case"sha256":l=4;break;case"sha384":l=5;break;case"sha512":l=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}switch(e.appendChar(l),this.signatureAlgorithm.toLowerCase()){case Rf:h=0;break;case"rsa":h=1;break;case"dsa":h=2;break;case"ecdsa":h=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(h);const d=this.signature.toBER(!1);return e.appendUint16(d.byteLength),e.appendView(new Uint8Array(d)),e}toJSON(){return{version:this.version,logID:_(this.logID),timestamp:this.timestamp,extensions:_(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}verify(e,t,i=0,a=je(!0)){var l=this;return(0,w.A)(function*(){const h=Ve(J(l.logID));let d=null;const g=new ua;for(const _e of e)if(_e.log_id===h){d=_e.key;break}if(!d)throw new Error(`Public key not found for CT with logId: ${h}`);const B=m(U(d)),L=ss.fromBER(B);g.appendChar(0),g.appendChar(0);const z=new ArrayBuffer(8),K=new Uint8Array(z),oe=A(l.timestamp.valueOf(),8);return K.set(new Uint8Array(oe),8-oe.byteLength),g.appendView(K),g.appendUint16(i),0===i&&g.appendUint24(t.byteLength),g.appendView(new Uint8Array(t)),g.appendUint16(l.extensions.byteLength),0!==l.extensions.byteLength&&g.appendView(new Uint8Array(l.extensions)),a.verifyWithPublicKey(g.buffer.slice(0,g.length),new ge({valueHex:l.signature.toBER(!1)}),L,{algorithmId:S},"SHA-256")})()}}return s.CLASS_NAME="SignedCertificateTimestamp",s})();const Gl="timestamps";let np=(()=>{class s extends pe{constructor(e={}){super(),this.timestamps=o(e,Gl,s.defaultValues(Gl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Gl?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Gl?0===t.length:super.defaultValues(e)}static schema(e={}){var t;const i=o(e,"names",{});return null!==(t=i.optional)&&void 0!==t||(i.optional=!1),new ge({name:i.blockName||"SignedCertificateTimestampList",optional:i.optional})}fromSchema(e){if(!(e instanceof ge))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new ua({stream:new yt({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new ip({stream:t}))}toSchema(){const e=new ua;let t=0;const i=[];for(const a of this.timestamps){const l=a.toStream();i.push(l),t+=l.stream.buffer.byteLength}e.appendUint16(t);for(const a of i)e.appendView(a.stream.view);return new ge({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}return s.CLASS_NAME="SignedCertificateTimestampList",s})();const so="attributes",rp=[so];let ap=(()=>{class s extends pe{constructor(e={}){super(),this.attributes=o(e,so,s.defaultValues(so)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===so?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.attributes||S,value:st.schema()})]})}fromSchema(e){V(e,rp);const t=me(e,e,s.schema({names:{attributes:so}}));he.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,i=>new st({schema:i}))}toSchema(){return new j({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}return s.CLASS_NAME="SubjectDirectoryAttributes",s})();class St{static getItems(){return this.types||(this.types={},St.register(Ld,"SubjectAltName",Ud),St.register(Fd,"IssuerAltName",Ud),St.register(pu,"AuthorityKeyIdentifier",ef),St.register(fu,"BasicConstraints",tf),St.register("1.3.6.1.4.1.311.21.1","MicrosoftCaVersion",w1),St.register(Gd,"CertificatePolicies",rf),St.register("1.3.6.1.4.1.311.21.10","CertificatePoliciesMicrosoft",rf),St.register("1.3.6.1.4.1.311.21.7","MicrosoftCertTemplateV2",Ln),St.register(Kd,"CRLDistributionPoints",cf),St.register(mu,"FreshestCRL",cf),St.register("2.5.29.37","ExtKeyUsage",C1),St.register(jd,"CertificateIssuer",Bt),St.register(gu,"AuthorityInfoAccess",uf),St.register("1.3.6.1.5.5.7.1.11","SubjectInfoAccess",uf),St.register(Hd,"IssuingDistributionPoint",I1),St.register($d,"NameConstraints",B1),St.register(zd,"PolicyConstraints",V1),St.register(Jd,"PolicyMappings",D1),St.register("2.5.29.16","PrivateKeyUsagePeriod",M1),St.register("1.3.6.1.5.5.7.1.3","QCStatements",H1),St.register("1.3.6.1.4.1.11129.2.4.2","SignedCertificateTimestampList",np),St.register("2.5.29.9","SubjectDirectoryAttributes",ap)),this.types}static fromBER(r,e){const t=ht(e);if(-1===t.offset)return null;const i=this.find(r);if(i)try{return new i.type({schema:t.result})}catch{const l=new i.type;return l.parsingError=`Incorrectly formatted value of extension ${i.name} (${r})`,l}return t.result}static find(r){return this.getItems()[r]||null}static register(r,e,t){this.getItems()[r]={name:e,type:t}}}const io="extnID",Js="critical",no="extnValue",Jl="parsedValue",op=[io,Js,no];let Oi=(()=>{class s extends pe{get parsedValue(){if(void 0===this._parsedValue){const e=St.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}constructor(e={}){super(),this.extnID=o(e,io,s.defaultValues(io)),this.critical=o(e,Js,s.defaultValues(Js)),this.extnValue=no in e?new ge({valueHex:e.extnValue}):s.defaultValues(no),Jl in e&&(this.parsedValue=o(e,Jl,s.defaultValues(Jl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case io:return S;case Js:return!1;case no:return new ge;case Jl:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.extnID||S}),new Ss({name:t.critical||S,optional:!0}),new ge({name:t.extnValue||S})]})}fromSchema(e){V(e,op);const t=me(e,e,s.schema({names:{extnID:io,critical:Js,extnValue:no}}));he.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Js in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new Be({value:this.extnID})),this.critical!==s.defaultValues(Js)&&e.push(new Ss({value:this.critical})),e.push(this.extnValue),new j({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==s.defaultValues(Js)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}return s.CLASS_NAME="Extension",s})();const ro="extensions",lp=[ro];let Rt=(()=>{class s extends pe{constructor(e={}){super(),this.extensions=o(e,ro,s.defaultValues(ro)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ro?[]:super.defaultValues(e)}static schema(e={},t=!1){const i=o(e,"names",{});return new j({optional:t,name:i.blockName||S,value:[new He({name:i.extensions||S,value:Oi.schema(i.extension||{})})]})}fromSchema(e){V(e,lp);const t=me(e,e,s.schema({names:{extensions:ro}}));he.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,i=>new Oi({schema:i}))}toSchema(){return new j({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}return s.CLASS_NAME="Extensions",s})();const ao="issuer",oo="serialNumber",Pi="issuerUID",cp=[ao,oo,Pi];let hs=(()=>{class s extends pe{constructor(e={}){super(),this.issuer=o(e,ao,s.defaultValues(ao)),this.serialNumber=o(e,oo,s.defaultValues(oo)),Pi in e&&(this.issuerUID=o(e,Pi,s.defaultValues(Pi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ao:return new Bt;case oo:return new ee;case Pi:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[Bt.schema(t.issuer||{}),new ee({name:t.serialNumber||S}),new Ye({optional:!0,name:t.issuerUID||S})]})}fromSchema(e){V(e,cp);const t=me(e,e,s.schema({names:{issuer:{names:{blockName:ao}},serialNumber:oo,issuerUID:Pi}}));he.assertSchema(t,this.className),this.issuer=new Bt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,Pi in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new j({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}return s.CLASS_NAME="IssuerSerial",s})();const lo="version",Di="baseCertificateID",Ui="subjectName",co="issuer",uo="signature",ho="serialNumber",fo="attrCertValidityPeriod",mo="attributes",Mi="issuerUniqueID",Li="extensions",up=[lo,Di,Ui,co,uo,ho,fo,mo,Mi,Li];let Ou=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,lo,s.defaultValues(lo)),Di in e&&(this.baseCertificateID=o(e,Di,s.defaultValues(Di))),Ui in e&&(this.subjectName=o(e,Ui,s.defaultValues(Ui))),this.issuer=o(e,co,s.defaultValues(co)),this.signature=o(e,uo,s.defaultValues(uo)),this.serialNumber=o(e,ho,s.defaultValues(ho)),this.attrCertValidityPeriod=o(e,fo,s.defaultValues(fo)),this.attributes=o(e,mo,s.defaultValues(mo)),Mi in e&&(this.issuerUniqueID=o(e,Mi,s.defaultValues(Mi))),Li in e&&(this.extensions=o(e,Li,s.defaultValues(Li))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lo:return 0;case Di:return new hs;case Ui:case co:return new Bt;case uo:return new se;case ho:return new ee;case fo:return new Mn;case mo:return[];case Mi:return new Ye;case Li:return new Rt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),new mt({value:[new W({name:t.baseCertificateID||S,idBlock:{tagClass:3,tagNumber:0},value:hs.schema().valueBlock.value}),new W({name:t.subjectName||S,idBlock:{tagClass:3,tagNumber:1},value:Bt.schema().valueBlock.value})]}),Bt.schema({names:{blockName:t.issuer||S}}),se.schema(t.signature||{}),new ee({name:t.serialNumber||S}),Mn.schema(t.attrCertValidityPeriod||{}),new j({name:t.attributes||S,value:[new He({value:st.schema()})]}),new Ye({optional:!0,name:t.issuerUniqueID||S}),Rt.schema(t.extensions||{},!0)]})}fromSchema(e){V(e,up);const t=me(e,e,s.schema({names:{version:lo,baseCertificateID:Di,subjectName:Ui,issuer:co,signature:{names:{blockName:uo}},serialNumber:ho,attrCertValidityPeriod:{names:{blockName:fo}},attributes:mo,issuerUniqueID:Mi,extensions:{names:{blockName:Li}}}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Di in t.result&&(this.baseCertificateID=new hs({schema:new j({value:t.result.baseCertificateID.valueBlock.value})})),Ui in t.result&&(this.subjectName=new Bt({schema:new j({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new se({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Mn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,i=>new st({schema:i})),Mi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Li in t.result&&(this.extensions=new Rt({schema:t.result.extensions}))}toSchema(){const e=new j({value:[new ee({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new j({value:Array.from(this.attributes,t=>t.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,t=>t.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}return s.CLASS_NAME="AttributeCertificateInfoV1",s})();const po="acinfo",go="signatureAlgorithm",vo="signatureValue",hp=[po,vo,go];let Pu=(()=>{class s extends pe{constructor(e={}){super(),this.acinfo=o(e,po,s.defaultValues(po)),this.signatureAlgorithm=o(e,go,s.defaultValues(go)),this.signatureValue=o(e,vo,s.defaultValues(vo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case po:return new Ou;case go:return new se;case vo:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[Ou.schema(t.acinfo||{}),se.schema(t.signatureAlgorithm||{}),new Ye({name:t.signatureValue||S})]})}fromSchema(e){V(e,hp);const t=me(e,e,s.schema({names:{acinfo:{names:{blockName:po}},signatureAlgorithm:{names:{blockName:go}},signatureValue:vo}}));he.assertSchema(t,this.className),this.acinfo=new Ou({schema:t.result.acinfo}),this.signatureAlgorithm=new se({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new j({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}return s.CLASS_NAME="AttributeCertificateV1",s})();const wo="digestedObjectType",Fi="otherObjectTypeID",yo="digestAlgorithm",So="objectDigest",dp=[wo,Fi,yo,So];let Wn=(()=>{class s extends pe{constructor(e={}){super(),this.digestedObjectType=o(e,wo,s.defaultValues(wo)),Fi in e&&(this.otherObjectTypeID=o(e,Fi,s.defaultValues(Fi))),this.digestAlgorithm=o(e,yo,s.defaultValues(yo)),this.objectDigest=o(e,So,s.defaultValues(So)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wo:return new oa;case Fi:return new Be;case yo:return new se;case So:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new oa({name:t.digestedObjectType||S}),new Be({optional:!0,name:t.otherObjectTypeID||S}),se.schema(t.digestAlgorithm||{}),new Ye({name:t.objectDigest||S})]})}fromSchema(e){V(e,dp);const t=me(e,e,s.schema({names:{digestedObjectType:wo,otherObjectTypeID:Fi,digestAlgorithm:{names:{blockName:yo}},objectDigest:So}}));he.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,Fi in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new se({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new j({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}return s.CLASS_NAME="ObjectDigestInfo",s})();const Hi="issuerName",ji="baseCertificateID",$i="objectDigestInfo",fp=[Hi,ji,$i];let Df=(()=>{class s extends pe{constructor(e={}){super(),Hi in e&&(this.issuerName=o(e,Hi,s.defaultValues(Hi))),ji in e&&(this.baseCertificateID=o(e,ji,s.defaultValues(ji))),$i in e&&(this.objectDigestInfo=o(e,$i,s.defaultValues($i))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hi:return new Bt;case ji:return new hs;case $i:return new Wn;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[Bt.schema({names:{blockName:t.issuerName}},!0),new W({optional:!0,name:t.baseCertificateID||S,idBlock:{tagClass:3,tagNumber:0},value:hs.schema().valueBlock.value}),new W({optional:!0,name:t.objectDigestInfo||S,idBlock:{tagClass:3,tagNumber:1},value:Wn.schema().valueBlock.value})]})}fromSchema(e){V(e,fp);const t=me(e,e,s.schema({names:{issuerName:Hi,baseCertificateID:ji,objectDigestInfo:$i}}));he.assertSchema(t,this.className),Hi in t.result&&(this.issuerName=new Bt({schema:t.result.issuerName})),ji in t.result&&(this.baseCertificateID=new hs({schema:new j({value:t.result.baseCertificateID.valueBlock.value})})),$i in t.result&&(this.objectDigestInfo=new Wn({schema:new j({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new j;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}return s.CLASS_NAME="V2Form",s})();const Ki="baseCertificateID",Gi="entityName",Ji="objectDigestInfo",mp=[Ki,Gi,Ji];let Du=(()=>{class s extends pe{constructor(e={}){super(),Ki in e&&(this.baseCertificateID=o(e,Ki,s.defaultValues(Ki))),Gi in e&&(this.entityName=o(e,Gi,s.defaultValues(Gi))),Ji in e&&(this.objectDigestInfo=o(e,Ji,s.defaultValues(Ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ki:return new hs;case Gi:return new Bt;case Ji:return new Wn;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({optional:!0,name:t.baseCertificateID||S,idBlock:{tagClass:3,tagNumber:0},value:hs.schema().valueBlock.value}),new W({optional:!0,name:t.entityName||S,idBlock:{tagClass:3,tagNumber:1},value:Bt.schema().valueBlock.value}),new W({optional:!0,name:t.objectDigestInfo||S,idBlock:{tagClass:3,tagNumber:2},value:Wn.schema().valueBlock.value})]})}fromSchema(e){V(e,mp);const t=me(e,e,s.schema({names:{baseCertificateID:Ki,entityName:Gi,objectDigestInfo:Ji}}));he.assertSchema(t,this.className),Ki in t.result&&(this.baseCertificateID=new hs({schema:new j({value:t.result.baseCertificateID.valueBlock.value})})),Gi in t.result&&(this.entityName=new Bt({schema:new j({value:t.result.entityName.valueBlock.value})})),Ji in t.result&&(this.objectDigestInfo=new Wn({schema:new j({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new j;return this.baseCertificateID&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new W({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}return s.CLASS_NAME="Holder",s})();const bo="version",Ao="holder",_o="issuer",ko="signature",Eo="serialNumber",Co="attrCertValidityPeriod",No="attributes",zi="issuerUniqueID",qi="extensions",pp=[bo,Ao,_o,ko,Eo,Co,No,zi,qi];let Uu=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,bo,s.defaultValues(bo)),this.holder=o(e,Ao,s.defaultValues(Ao)),this.issuer=o(e,_o,s.defaultValues(_o)),this.signature=o(e,ko,s.defaultValues(ko)),this.serialNumber=o(e,Eo,s.defaultValues(Eo)),this.attrCertValidityPeriod=o(e,Co,s.defaultValues(Co)),this.attributes=o(e,No,s.defaultValues(No)),zi in e&&(this.issuerUniqueID=o(e,zi,s.defaultValues(zi))),qi in e&&(this.extensions=o(e,qi,s.defaultValues(qi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bo:return 1;case Ao:return new Du;case _o:return{};case ko:return new se;case Eo:return new ee;case Co:return new Mn;case No:return[];case zi:return new Ye;case qi:return new Rt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),Du.schema(t.holder||{}),new mt({value:[Bt.schema({names:{blockName:t.issuer||S}}),new W({name:t.issuer||S,idBlock:{tagClass:3,tagNumber:0},value:Df.schema().valueBlock.value})]}),se.schema(t.signature||{}),new ee({name:t.serialNumber||S}),Mn.schema(t.attrCertValidityPeriod||{}),new j({name:t.attributes||S,value:[new He({value:st.schema()})]}),new Ye({optional:!0,name:t.issuerUniqueID||S}),Rt.schema(t.extensions||{},!0)]})}fromSchema(e){V(e,pp);const t=me(e,e,s.schema({names:{version:bo,holder:{names:{blockName:Ao}},issuer:_o,signature:{names:{blockName:ko}},serialNumber:Eo,attrCertValidityPeriod:{names:{blockName:Co}},attributes:No,issuerUniqueID:zi,extensions:{names:{blockName:qi}}}}));if(3!==(he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Du({schema:t.result.holder}),t.result.issuer.idBlock.tagClass))throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new Df({schema:new j({value:t.result.issuer.valueBlock.value})}),this.signature=new se({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Mn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,i=>new st({schema:i})),zi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),qi in t.result&&(this.extensions=new Rt({schema:t.result.extensions}))}toSchema(){const e=new j({value:[new ee({value:this.version}),this.holder.toSchema(),new W({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new j({value:Array.from(this.attributes,t=>t.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,t=>t.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}return s.CLASS_NAME="AttributeCertificateInfoV2",s})();const Io="acinfo",To="signatureAlgorithm",xo="signatureValue",gp=[Io,To,xo];let Wi=(()=>{class s extends pe{constructor(e={}){super(),this.acinfo=o(e,Io,s.defaultValues(Io)),this.signatureAlgorithm=o(e,To,s.defaultValues(To)),this.signatureValue=o(e,xo,s.defaultValues(xo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Io:return new Uu;case To:return new se;case xo:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[Uu.schema(t.acinfo||{}),se.schema(t.signatureAlgorithm||{}),new Ye({name:t.signatureValue||S})]})}fromSchema(e){V(e,gp);const t=me(e,e,s.schema({names:{acinfo:{names:{blockName:Io}},signatureAlgorithm:{names:{blockName:To}},signatureValue:xo}}));he.assertSchema(t,this.className),this.acinfo=new Uu({schema:t.result.acinfo}),this.signatureAlgorithm=new se({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new j({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}return s.CLASS_NAME="AttributeCertificateV2",s})();const Xi="contentType",Xn="content",vp=[Xi,Xn];let Mt=(()=>{class s extends pe{constructor(e={}){super(),this.contentType=o(e,Xi,s.defaultValues(Xi)),this.content=o(e,Xn,s.defaultValues(Xn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xi:return S;case Xn:return new Me;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xi:return"string"==typeof t&&t===this.defaultValues(Xi);case Xn:return t instanceof Me;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return"optional"in t||(t.optional=!1),new j({name:t.blockName||"ContentInfo",optional:t.optional,value:[new Be({name:t.contentType||Xi}),new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me({name:t.content||Xn})]})]})}fromSchema(e){V(e,vp);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new j({value:[new Be({value:this.contentType}),new W({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof Me||(e.content=this.content.toJSON()),e}}return s.CLASS_NAME="ContentInfo",s.DATA=vu,s.SIGNED_DATA="1.2.840.113549.1.7.2",s.ENVELOPED_DATA=Wd,s.ENCRYPTED_DATA=Xd,s})();const Mu="type",Lu="value",Fu="utcTimeName",Hu="generalTimeName",wp=[Fu,Hu];let Vt=(()=>{class s extends pe{constructor(e={}){super(),this.type=o(e,Mu,s.defaultValues(Mu)),this.value=o(e,Lu,s.defaultValues(Lu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mu:return 0;case Lu:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const i=o(e,"names",{});return new mt({optional:t,value:[new Vn({name:i.utcTimeName||S}),new ft({name:i.generalTimeName||S})]})}fromSchema(e){V(e,wp);const t=me(e,e,s.schema({names:{utcTimeName:Fu,generalTimeName:Hu}}));he.assertSchema(t,this.className),Fu in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),Hu in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return 0===this.type?new Vn({valueDate:this.value}):1===this.type?new ft({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}return s.CLASS_NAME="Time",s})();const zs="version",zl="serialNumber",ql="signature",Wl="issuer",Xl="notBefore",Yl="notAfter",Zl="subject",Ql="subjectPublicKeyInfo",Bo="issuerUniqueID",Ro="subjectUniqueID",Vo="extensions",Oo="signatureAlgorithm",Po="signatureValue",Ft="tbsCertificate",ec=`${Ft}.${zs}`,$u=`${Ft}.${zl}`,Ku=`${Ft}.${ql}`,Gu=`${Ft}.${Wl}`,tc=`${Ft}.${Xl}`,sc=`${Ft}.${Yl}`,Ju=`${Ft}.${Zl}`,zu=`${Ft}.${Ql}`,ic=`${Ft}.${Bo}`,nc=`${Ft}.${Ro}`,Do=`${Ft}.${Vo}`,Sp=[Ft,ec,$u,Ku,Gu,tc,sc,Ju,zu,ic,nc,Do,Oo,Po];function bp(s={}){const r=o(s,"names",{});return new j({name:r.blockName||Ft,value:[new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({name:r.tbsCertificateVersion||ec})]}),new ee({name:r.tbsCertificateSerialNumber||$u}),se.schema(r.signature||{names:{blockName:Ku}}),pt.schema(r.issuer||{names:{blockName:Gu}}),new j({name:r.tbsCertificateValidity||"tbsCertificate.validity",value:[Vt.schema(r.notBefore||{names:{utcTimeName:tc,generalTimeName:tc}}),Vt.schema(r.notAfter||{names:{utcTimeName:sc,generalTimeName:sc}})]}),pt.schema(r.subject||{names:{blockName:Ju}}),ss.schema(r.subjectPublicKeyInfo||{names:{blockName:zu}}),new Ce({name:r.tbsCertificateIssuerUniqueID||ic,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Ce({name:r.tbsCertificateSubjectUniqueID||nc,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[Rt.schema(r.extensions||{names:{blockName:Do}})]})]})}let Jt=(()=>{class s extends pe{get tbs(){return E._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,zs,s.defaultValues(zs)),this.serialNumber=o(e,zl,s.defaultValues(zl)),this.signature=o(e,ql,s.defaultValues(ql)),this.issuer=o(e,Wl,s.defaultValues(Wl)),this.notBefore=o(e,Xl,s.defaultValues(Xl)),this.notAfter=o(e,Yl,s.defaultValues(Yl)),this.subject=o(e,Zl,s.defaultValues(Zl)),this.subjectPublicKeyInfo=o(e,Ql,s.defaultValues(Ql)),Bo in e&&(this.issuerUniqueID=o(e,Bo,s.defaultValues(Bo))),Ro in e&&(this.subjectUniqueID=o(e,Ro,s.defaultValues(Ro))),Vo in e&&(this.extensions=o(e,Vo,s.defaultValues(Vo))),this.signatureAlgorithm=o(e,Oo,s.defaultValues(Oo)),this.signatureValue=o(e,Po,s.defaultValues(Po)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return Ct;case zs:return 0;case zl:return new ee;case ql:return new se;case Wl:return new pt;case Xl:case Yl:return new Vt;case Zl:return new pt;case Ql:return new ss;case Bo:case Ro:return Ct;case Vo:return[];case Oo:return new se;case Po:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[bp(t.tbsCertificate),se.schema(t.signatureAlgorithm||{names:{blockName:Oo}}),new Ye({name:t.signatureValue||Po})]})}fromSchema(e){V(e,Sp);const t=me(e,e,s.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:Do}}}}}}));he.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,ec in t.result&&(this.version=t.result[ec].valueBlock.valueDec),this.serialNumber=t.result[$u],this.signature=new se({schema:t.result[Ku]}),this.issuer=new pt({schema:t.result[Gu]}),this.notBefore=new Vt({schema:t.result[tc]}),this.notAfter=new Vt({schema:t.result[sc]}),this.subject=new pt({schema:t.result[Ju]}),this.subjectPublicKeyInfo=new ss({schema:t.result[zu]}),ic in t.result&&(this.issuerUniqueID=t.result[ic].valueBlock.valueHex),nc in t.result&&(this.subjectUniqueID=t.result[nc].valueBlock.valueHex),Do in t.result&&(this.extensions=Array.from(t.result[Do],i=>new Oi({schema:i}))),this.signatureAlgorithm=new se({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return zs in this&&this.version!==s.defaultValues(zs)&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new j({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new Ce({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new j({value:Array.from(this.extensions,t=>t.toSchema())})]})),new j({value:e})}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return s.schema().value[0];const i=ht(this.tbsView);he.assert(i,"TBS Certificate"),t=i.result}else t=this.encodeTBS();return new j({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:E.U$.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return zs in this&&this.version!==s.defaultValues(zs)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=E.U$.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=E.U$.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}getPublicKey(e,t=je(!0)){var i=this;return(0,w.A)(function*(){return t.getPublicKey(i.subjectPublicKeyInfo,i.signatureAlgorithm,e)})()}getKeyHash(e="SHA-1",t=je(!0)){var i=this;return(0,w.A)(function*(){return t.digest({name:e},i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)})()}sign(e,t="SHA-1",i=je(!0)){var a=this;return(0,w.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters;a.signature=l.signatureAlgorithm,a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Ye({valueHex:d})})()}verify(e,t=je(!0)){var i=this;return(0,w.A)(function*(){let a;if(e?a=e.subjectPublicKeyInfo:i.issuer.isEqual(i.subject)&&(a=i.subjectPublicKeyInfo),!(a instanceof ss))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(i.tbsView,i.signatureValue,a,i.signatureAlgorithm)})()}}return s.CLASS_NAME="Certificate",s})();function Uf(s,r=null){if(r&&s.issuer.isEqual(r.issuer)&&s.serialNumber.isEqual(r.serialNumber))return null;let e=!1;if(s.extensions)for(const t of s.extensions)if(t.extnID===fu&&t.parsedValue instanceof tf&&t.parsedValue.cA){e=!0;break}return e?s:null}const Yn="certId",Zn="certValue",Qn="parsedValue",Ap=[Yn,Zn];let qu=(()=>{class s extends pe{constructor(e={}){super(),this.certId=o(e,Yn,s.defaultValues(Yn)),this.certValue=o(e,Zn,s.defaultValues(Zn)),Qn in e&&(this.parsedValue=o(e,Qn,s.defaultValues(Qn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yn:return S;case Zn:return new Me;case Qn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yn:return t===S;case Zn:return t instanceof Me;case Qn:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.id||"id"}),new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me({name:t.value||"value"})]})]})}fromSchema(e){V(e,Ap);const t=me(e,e,s.schema({names:{id:Yn,value:Zn}}));he.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const i=this.certValue.valueBlock.valueHexView;switch(this.certId){case Yd:try{this.parsedValue=Jt.fromBER(i)}catch{Wi.fromBER(i)}break;case Zd:this.parsedValue=Wi.fromBER(i);break;default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return Qn in this&&(this.certId="acinfo"in this.parsedValue?Zd:Yd,this.certValue=new ge({valueHex:this.parsedValue.toSchema().toBER(!1)})),new j({value:[new Be({value:this.certId}),new W({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}return s.CLASS_NAME="CertBag",s})();const Uo="userCertificate",er="revocationDate",Yi="crlEntryExtensions",_p=[Uo,er,Yi];let kp=(()=>{class s extends pe{constructor(e={}){super(),this.userCertificate=o(e,Uo,s.defaultValues(Uo)),this.revocationDate=o(e,er,s.defaultValues(er)),Yi in e&&(this.crlEntryExtensions=o(e,Yi,s.defaultValues(Yi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uo:return new ee;case er:return new Vt;case Yi:return new Rt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.userCertificate||Uo}),Vt.schema({names:{utcTimeName:t.revocationDate||er,generalTimeName:t.revocationDate||er}}),Rt.schema({names:{blockName:t.crlEntryExtensions||Yi}},!0)]})}fromSchema(e){V(e,_p);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new Vt({schema:t.result.revocationDate}),Yi in t.result&&(this.crlEntryExtensions=new Rt({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new j({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}return s.CLASS_NAME="RevokedCertificate",s})();const Mo="version",Xu="signature",Yu="issuer",Zu="thisUpdate",rc="nextUpdate",ac="revokedCertificates",oc="crlExtensions",Lo="signatureAlgorithm",Fo="signatureValue",ds="tbsCertList",lc=`${ds}.version`,Qu=`${ds}.signature`,eh=`${ds}.issuer`,cc=`${ds}.thisUpdate`,Ho=`${ds}.nextUpdate`,uc=`${ds}.revokedCertificates`,hc=`${ds}.extensions`,Ep=[ds,lc,Qu,eh,cc,Ho,uc,hc,Lo,Fo];function Cp(s={}){const r=o(s,"names",{});return new j({name:r.blockName||ds,value:[new ee({optional:!0,name:r.tbsCertListVersion||lc,value:2}),se.schema(r.signature||{names:{blockName:Qu}}),pt.schema(r.issuer||{names:{blockName:eh}}),Vt.schema(r.tbsCertListThisUpdate||{names:{utcTimeName:cc,generalTimeName:cc}}),Vt.schema(r.tbsCertListNextUpdate||{names:{utcTimeName:Ho,generalTimeName:Ho}},!0),new j({optional:!0,value:[new He({name:r.tbsCertListRevokedCertificates||uc,value:new j({value:[new ee,Vt.schema(),Rt.schema({},!0)]})})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Rt.schema(r.crlExtensions||{names:{blockName:hc}})]})]})}const Np=[pu,Fd,"2.5.29.20","2.5.29.27",Hd,mu,gu,"2.5.29.21","2.5.29.24",jd];let dc=(()=>{class s extends pe{get tbs(){return E._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Mo,s.defaultValues(Mo)),this.signature=o(e,Xu,s.defaultValues(Xu)),this.issuer=o(e,Yu,s.defaultValues(Yu)),this.thisUpdate=o(e,Zu,s.defaultValues(Zu)),rc in e&&(this.nextUpdate=o(e,rc,s.defaultValues(rc))),ac in e&&(this.revokedCertificates=o(e,ac,s.defaultValues(ac))),oc in e&&(this.crlExtensions=o(e,oc,s.defaultValues(oc))),this.signatureAlgorithm=o(e,Lo,s.defaultValues(Lo)),this.signatureValue=o(e,Fo,s.defaultValues(Fo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return Ct;case Mo:return 0;case Xu:return new se;case Yu:return new pt;case Zu:case rc:return new Vt;case ac:return[];case oc:return new Rt;case Lo:return new se;case Fo:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||"CertificateList",value:[Cp(e),se.schema(t.signatureAlgorithm||{names:{blockName:Lo}}),new Ye({name:t.signatureValue||Fo})]})}fromSchema(e){V(e,Ep);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,lc in t.result&&(this.version=t.result[lc].valueBlock.valueDec),this.signature=new se({schema:t.result[Qu]}),this.issuer=new pt({schema:t.result[eh]}),this.thisUpdate=new Vt({schema:t.result[cc]}),Ho in t.result&&(this.nextUpdate=new Vt({schema:t.result[Ho]})),uc in t.result&&(this.revokedCertificates=Array.from(t.result[uc],i=>new kp({schema:i}))),hc in t.result&&(this.crlExtensions=new Rt({schema:t.result[hc]})),this.signatureAlgorithm=new se({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==s.defaultValues(Mo)&&e.push(new ee({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new j({value:Array.from(this.revokedCertificates,t=>t.toSchema())})),this.crlExtensions&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new j({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return s.schema();const i=ht(this.tbsView);he.assert(i,"TBS Certificate Revocation List"),t=i.result}return new j({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:E.U$.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==s.defaultValues(Mo)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,t=>t.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}sign(e,t="SHA-1",i=je(!0)){var a=this;return(0,w.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),{parameters:h}=l;a.signature=l.signatureAlgorithm,a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Ye({valueHex:d})})()}verify(e={},t=je(!0)){var i=this;return(0,w.A)(function*(){let a;if(e.issuerCertificate&&(a=e.issuerCertificate.subjectPublicKeyInfo,!i.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(a=e.publicKeyInfo),!a)throw new Error("Issuer's certificate must be provided as an input parameter");if(i.crlExtensions)for(const l of i.crlExtensions.extensions)if(l.critical&&!Np.includes(l.extnID))return!1;return t.verifyWithPublicKey(i.tbsView,i.signatureValue,a,i.signatureAlgorithm)})()}}return s.CLASS_NAME="CertificateRevocationList",s})();const tr="crlId",sr="crlValue",jo="parsedValue",Ip=[tr,sr];let Tp=(()=>{class s extends pe{constructor(e={}){super(),this.crlId=o(e,tr,s.defaultValues(tr)),this.crlValue=o(e,sr,s.defaultValues(sr)),jo in e&&(this.parsedValue=o(e,jo,s.defaultValues(jo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tr:return S;case sr:return new Me;case jo:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case tr:return t===S;case sr:return t instanceof Me;case jo:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.id||"id"}),new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me({name:t.value||"value"})]})]})}fromSchema(e){V(e,Ip);const t=me(e,e,s.schema({names:{id:tr,value:sr}}));if(he.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId!==Qd)throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`);this.parsedValue=dc.fromBER(this.certValue.valueBlock.valueHex)}toSchema(){return this.parsedValue&&(this.crlId=Qd,this.crlValue=new ge({valueHex:this.parsedValue.toSchema().toBER(!1)})),new j({value:[new Be({value:this.crlId}),new W({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}return s.CLASS_NAME="CRLBag",s})();const ir="version",nr="encryptedContentInfo",qs="unprotectedAttrs",xp=[ir,nr,qs];let fc=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,ir,s.defaultValues(ir)),this.encryptedContentInfo=o(e,nr,s.defaultValues(nr)),qs in e&&(this.unprotectedAttrs=o(e,qs,s.defaultValues(qs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ir:return 0;case nr:return new Ut;case qs:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ir:return 0===t;case nr:return Ut.compareWithDefault("contentType",t.contentType)&&Ut.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Ut.compareWithDefault("encryptedContent",t.encryptedContent);case qs:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),Ut.schema(t.encryptedContentInfo||{}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.unprotectedAttrs||S,value:st.schema()})]})]})}fromSchema(e){V(e,xp);const t=me(e,e,s.schema({names:{version:ir,encryptedContentInfo:{names:{blockName:nr}},unprotectedAttrs:qs}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new Ut({schema:t.result.encryptedContentInfo}),qs in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,i=>new st({schema:i})))}toSchema(){const e=[];return e.push(new ee({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}encrypt(e,t=je(!0)){var i=this;return(0,w.A)(function*(){lt.assert(e,"parameters","object");const a={...e,contentType:"1.2.840.113549.1.7.1"};i.encryptedContentInfo=yield t.encryptEncryptedContentInfo(a)})()}decrypt(e,t=je(!0)){var i=this;return(0,w.A)(function*(){lt.assert(e,"parameters","object");const a={...e,encryptedContentInfo:i.encryptedContentInfo};return t.decryptEncryptedContentInfo(a)})()}}return s.CLASS_NAME="EncryptedData",s})();const Zi="encryptionAlgorithm",Ws="encryptedData",$o="parsedValue",Bp=[Zi,Ws];let Mf=(()=>{class s extends pe{constructor(e={}){super(),this.encryptionAlgorithm=o(e,Zi,s.defaultValues(Zi)),this.encryptedData=o(e,Ws,s.defaultValues(Ws)),$o in e&&(this.parsedValue=o(e,$o,s.defaultValues($o))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zi:return new se;case Ws:return new ge;case $o:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zi:return se.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Ws:return t.isEqual(s.defaultValues(e));case $o:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.encryptionAlgorithm||{names:{blockName:Zi}}),new mt({value:[new ge({name:t.encryptedData||Ws}),new ge({idBlock:{isConstructed:!0},name:t.encryptedData||Ws})]})]})}fromSchema(e){V(e,Bp);const t=me(e,e,s.schema({names:{encryptionAlgorithm:{names:{blockName:Zi}},encryptedData:Ws}}));he.assertSchema(t,this.className),this.encryptionAlgorithm=new se({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new j({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}parseInternalValues(e,t=je(!0)){var i=this;return(0,w.A)(function*(){const l=yield new fc({encryptedContentInfo:new Ut({contentEncryptionAlgorithm:i.encryptionAlgorithm,encryptedContent:i.encryptedData})}).decrypt(e,t);i.parsedValue=Gn.fromBER(l)})()}makeInternalValues(e,t=je(!0)){var i=this;return(0,w.A)(function*(){if(!i.parsedValue)throw new Error('Please initialize "parsedValue" first');const a=new fc,l={...e,contentToEncrypt:i.parsedValue.toSchema().toBER(!1)};if(yield a.encrypt(l,t),!a.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");i.encryptionAlgorithm=a.encryptedContentInfo.contentEncryptionAlgorithm,i.encryptedData=a.encryptedContentInfo.encryptedContent})()}}return s.CLASS_NAME="PKCS8ShroudedKeyBag",s})();const rr="secretTypeId",ar="secretValue",Rp=[rr,ar];let Vp=(()=>{class s extends pe{constructor(e={}){super(),this.secretTypeId=o(e,rr,s.defaultValues(rr)),this.secretValue=o(e,ar,s.defaultValues(ar)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rr:return S;case ar:return new Me;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rr:return t===S;case ar:return t instanceof Me;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.id||"id"}),new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me({name:t.value||"value"})]})]})}fromSchema(e){V(e,Rp);const t=me(e,e,s.schema({names:{id:rr,value:ar}}));he.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new j({value:[new Be({value:this.secretTypeId}),new W({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}return s.CLASS_NAME="SecretBag",s})();class Xs{static getItems(){return this.items||(this.items={},Xs.register("1.2.840.113549.1.12.10.1.1",Gn),Xs.register("1.2.840.113549.1.12.10.1.2",Mf),Xs.register("1.2.840.113549.1.12.10.1.3",qu),Xs.register("1.2.840.113549.1.12.10.1.4",Tp),Xs.register("1.2.840.113549.1.12.10.1.5",Vp),Xs.register("1.2.840.113549.1.12.10.1.6",tn)),this.items}static register(r,e){this.getItems()[r]=e}static find(r){return this.getItems()[r]||null}}const Qi="bagId",en="bagValue",fs="bagAttributes",Op=[Qi,en,fs];let Ko=(()=>{class s extends pe{constructor(e={}){super(),this.bagId=o(e,Qi,s.defaultValues(Qi)),this.bagValue=o(e,en,s.defaultValues(en)),fs in e&&(this.bagAttributes=o(e,fs,s.defaultValues(fs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qi:return S;case en:return new Me;case fs:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qi:return t===S;case en:return t instanceof Me;case fs:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.bagId||Qi}),new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me({name:t.bagValue||en})]}),new Et({optional:!0,value:[new He({name:t.bagAttributes||fs,value:st.schema()})]})]})}fromSchema(e){V(e,Op);const t=me(e,e,s.schema({names:{bagId:Qi,bagValue:en,bagAttributes:fs}}));he.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const i=Xs.find(this.bagId);if(!i)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new i({schema:t.result.bagValue}),fs in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,a=>new st({schema:a})))}toSchema(){const e=[new Be({value:this.bagId}),new W({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new Et({value:Array.from(this.bagAttributes,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,t=>t.toJSON())),e}}return s.CLASS_NAME="SafeBag",s})();const or="safeBags";let tn=(()=>{class s extends pe{constructor(e={}){super(),this.safeBags=o(e,or,s.defaultValues(or)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===or?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===or?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.safeBags||S,value:Ko.schema()})]})}fromSchema(e){V(e,[or]);const t=me(e,e,s.schema({names:{safeBags:or}}));he.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,i=>new Ko({schema:i}))}toSchema(){return new j({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}return s.CLASS_NAME="SafeContents",s})();const Go="otherCertFormat",Jo="otherCert",Pp=[Go,Jo];class Ys extends pe{constructor(r={}){super(),this.otherCertFormat=o(r,Go,Ys.defaultValues(Go)),this.otherCert=o(r,Jo,Ys.defaultValues(Jo)),r.schema&&this.fromSchema(r.schema)}static defaultValues(r){switch(r){case Go:return S;case Jo:return new Me;default:return super.defaultValues(r)}}static schema(r={}){const e=o(r,"names",{});return new j({name:e.blockName||S,value:[new Be({name:e.otherCertFormat||Go}),new Me({name:e.otherCert||Jo})]})}fromSchema(r){V(r,Pp);const e=me(r,r,Ys.schema());he.assertSchema(e,this.className),this.otherCertFormat=e.result.otherCertFormat.valueBlock.toString(),this.otherCert=e.result.otherCert}toSchema(){return new j({value:[new Be({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const r={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof Me||(r.otherCert=this.otherCert.toJSON()),r}}const zo="certificates",Dp=[zo];let lr=(()=>{class s extends pe{constructor(e={}){super(),this.certificates=o(e,zo,s.defaultValues(zo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===zo?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new Et({name:t.blockName||S,value:[new He({name:t.certificates||zo,value:new mt({value:[Jt.schema(),new W({idBlock:{tagClass:3,tagNumber:0},value:[new Me]}),new W({idBlock:{tagClass:3,tagNumber:1},value:[new j]}),new W({idBlock:{tagClass:3,tagNumber:2},value:Wi.schema().valueBlock.value}),new W({idBlock:{tagClass:3,tagNumber:3},value:Ys.schema().valueBlock.value})]})})]})}fromSchema(e){V(e,Dp);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],i=>{const a=i.idBlock.tagNumber;if(1===i.idBlock.tagClass)return new Jt({schema:i});const l=new j({value:i.valueBlock.value});switch(a){case 1:return 1===l.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new Wi({schema:l}):new Pu({schema:l});case 2:return new Wi({schema:l});case 3:return new Ys({schema:l})}return i})}toSchema(){return new Et({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof Jt:return e.toSchema();case e instanceof Pu:return new W({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof Wi:return new W({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Ys:return new W({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}return s.CLASS_NAME="CertificateSet",s})();const qo="otherRevInfoFormat",Wo="otherRevInfo",Up=[qo,Wo];let mc=(()=>{class s extends pe{constructor(e={}){super(),this.otherRevInfoFormat=o(e,qo,s.defaultValues(qo)),this.otherRevInfo=o(e,Wo,s.defaultValues(Wo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qo:return S;case Wo:return new Me;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.otherRevInfoFormat||qo}),new Me({name:t.otherRevInfo||Wo})]})}fromSchema(e){V(e,Up);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new j({value:[new Be({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof Me||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}return s.CLASS_NAME="OtherRevocationInfoFormat",s})();const Xo="crls",th="otherRevocationInfos",Mp=[Xo];let pc=(()=>{class s extends pe{constructor(e={}){super(),this.crls=o(e,Xo,s.defaultValues(Xo)),this.otherRevocationInfos=o(e,th,s.defaultValues(th)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xo:case th:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new Et({name:t.blockName||S,value:[new He({name:t.crls||S,value:new mt({value:[dc.schema(),new W({idBlock:{tagClass:3,tagNumber:1},value:[new Be,new Me]})]})})]})}fromSchema(e){V(e,Mp);const t=me(e,e,s.schema({names:{crls:Xo}}));if(he.assertSchema(t,this.className),t.result.crls)for(const i of t.result.crls)1===i.idBlock.tagClass?this.crls.push(new dc({schema:i})):this.otherRevocationInfos.push(new mc({schema:i}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,t=>t.toSchema())),e.push(...Array.from(this.otherRevocationInfos,t=>{const i=t.toSchema();return i.idBlock.tagClass=3,i.idBlock.tagNumber=1,i})),new Et({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}return s.CLASS_NAME="RevocationInfoChoices",s})();const Yo="certs",sn="crls",Lp=[Yo,sn];let sh=(()=>{class s extends pe{constructor(e={}){super(),this.crls=o(e,sn,s.defaultValues(sn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yo:return new lr;case sn:return new pc;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yo:return 0===t.certificates.length;case sn:return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({name:t.certs||S,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:lr.schema().valueBlock.value}),new W({name:t.crls||S,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pc.schema().valueBlock.value})]})}fromSchema(e){V(e,Lp);const t=me(e,e,s.schema({names:{certs:Yo,crls:sn}}));he.assertSchema(t,this.className),Yo in t.result&&(this.certs=new lr({schema:new Et({value:t.result.certs.valueBlock.value})})),sn in t.result&&(this.crls=new pc({schema:new Et({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new W({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new j({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}return s.CLASS_NAME="OriginatorInfo",s})();const Zo="issuer",Qo="serialNumber",Fp=[Zo,Qo];let Ot=(()=>{class s extends pe{constructor(e={}){super(),this.issuer=o(e,Zo,s.defaultValues(Zo)),this.serialNumber=o(e,Qo,s.defaultValues(Qo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zo:return new pt;case Qo:return new ee;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[pt.schema(t.issuer||{}),new ee({name:t.serialNumber||S})]})}fromSchema(e){V(e,Fp);const t=me(e,e,s.schema({names:{issuer:{names:{blockName:Zo}},serialNumber:Qo}}));he.assertSchema(t,this.className),this.issuer=new pt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new j({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}return s.CLASS_NAME="IssuerAndSerialNumber",s})();const gc="variant",el="value",Hp=["blockName"];let jp=(()=>{class s extends pe{constructor(e={}){super(),this.variant=o(e,gc,s.defaultValues(gc)),el in e&&(this.value=o(e,el,s.defaultValues(el))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gc:return-1;case el:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gc:return-1===t;case el:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new mt({value:[Ot.schema({names:{blockName:t.blockName||S}}),new Ce({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){V(e,Hp);const t=me(e,e,s.schema({names:{blockName:"blockName"}}));he.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Ot({schema:t.result.blockName})):(this.variant=2,this.value=new ge({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Ot))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof ge))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new Ce({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Me}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant)&&this.value&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="RecipientIdentifier",s})();const nn="version",cr="rid",ur="keyEncryptionAlgorithm",hr="encryptedKey",vc="recipientCertificate",$p=[nn,cr,ur,hr];let ih=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,nn,s.defaultValues(nn)),this.rid=o(e,cr,s.defaultValues(cr)),this.keyEncryptionAlgorithm=o(e,ur,s.defaultValues(ur)),this.encryptedKey=o(e,hr,s.defaultValues(hr)),this.recipientCertificate=o(e,vc,s.defaultValues(vc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nn:return-1;case cr:return{};case ur:return new se;case hr:return new ge;case vc:return new Jt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case nn:return t===s.defaultValues(nn);case cr:return 0===Object.keys(t).length;case ur:case hr:return t.isEqual(s.defaultValues(e));case vc:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),jp.schema(t.rid||{}),se.schema(t.keyEncryptionAlgorithm||{}),new ge({name:t.encryptedKey||S})]})}fromSchema(e){V(e,$p);const t=me(e,e,s.schema({names:{version:nn,rid:{names:{blockName:cr}},keyEncryptionAlgorithm:{names:{blockName:ur}},encryptedKey:hr}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.rid=3===t.result.rid.idBlock.tagClass?new ge({valueHex:t.result.rid.valueBlock.valueHex}):new Ot({schema:t.result.rid}),this.keyEncryptionAlgorithm=new se({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Ot?(this.version=0,e.push(new ee({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new ee({value:this.version})),e.push(new Ce({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new j({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="KeyTransRecipientInfo",s})();const dr="algorithm",fr="publicKey",Kp=[dr,fr];let nh=(()=>{class s extends pe{constructor(e={}){super(),this.algorithm=o(e,dr,s.defaultValues(dr)),this.publicKey=o(e,fr,s.defaultValues(fr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case dr:return new se;case fr:return new Ye;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case dr:case fr:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.algorithm||{}),new Ye({name:t.publicKey||S})]})}fromSchema(e){V(e,Kp);const t=me(e,e,s.schema({names:{algorithm:{names:{blockName:dr}},publicKey:fr}}));he.assertSchema(t,this.className),this.algorithm=new se({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new j({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}return s.CLASS_NAME="OriginatorPublicKey",s})();const wc="variant",tl="value",Gp=["blockName"];let yc=(()=>{class s extends pe{constructor(e={}){super(),this.variant=o(e,wc,s.defaultValues(wc)),tl in e&&(this.value=o(e,tl,s.defaultValues(tl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wc:return-1;case tl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wc:return-1===t;case tl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new mt({value:[Ot.schema({names:{blockName:t.blockName||S}}),new Ce({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||S}),new W({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||S,value:nh.schema().valueBlock.value})]})}fromSchema(e){V(e,Gp);const t=me(e,e,s.schema({names:{blockName:"blockName"}}));he.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Ot({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new nh({schema:new j({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new Me}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant||3===this.variant)&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="OriginatorIdentifierOrKey",s})();const mr="keyAttrId",is="keyAttr",Jp=[mr,is];let pr=(()=>{class s extends pe{constructor(e={}){super(),this.keyAttrId=o(e,mr,s.defaultValues(mr)),is in e&&(this.keyAttr=o(e,is,s.defaultValues(is))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mr:return S;case is:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case mr:return"string"==typeof t&&t===S;case is:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({optional:t.optional||!0,name:t.blockName||S,value:[new Be({name:t.keyAttrId||S}),new Me({optional:!0,name:t.keyAttr||S})]})}fromSchema(e){V(e,Jp);const t=me(e,e,s.schema({names:{keyAttrId:mr,keyAttr:is}}));he.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),is in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new Be({value:this.keyAttrId})),is in this&&e.push(this.keyAttr),new j({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return is in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}return s.CLASS_NAME="OtherKeyAttribute",s})();const rn="subjectKeyIdentifier",Zs="date",Qs="other",zp=[rn,Zs,Qs];let rh=(()=>{class s extends pe{constructor(e={}){super(),this.subjectKeyIdentifier=o(e,rn,s.defaultValues(rn)),Zs in e&&(this.date=o(e,Zs,s.defaultValues(Zs))),Qs in e&&(this.other=o(e,Qs,s.defaultValues(Qs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rn:return new ge;case Zs:return new ft;case Qs:return new pr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rn:return t.isEqual(s.defaultValues(rn));case Zs:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case Qs:return t.keyAttrId===S&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ge({name:t.subjectKeyIdentifier||S}),new ft({optional:!0,name:t.date||S}),pr.schema(t.other||{})]})}fromSchema(e){V(e,zp);const t=me(e,e,s.schema({names:{subjectKeyIdentifier:rn,date:Zs,other:{names:{blockName:Qs}}}}));he.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,Zs in t.result&&(this.date=t.result.date),Qs in t.result&&(this.other=new pr({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new j({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}return s.CLASS_NAME="RecipientKeyIdentifier",s})();const Sc="variant",bc="value",qp=["blockName"];let sl=(()=>{class s extends pe{constructor(e={}){super(),this.variant=o(e,Sc,s.defaultValues(Sc)),this.value=o(e,bc,s.defaultValues(bc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sc:return-1;case bc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Sc:return-1===t;case bc:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new mt({value:[Ot.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||S}}),new W({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:0},value:rh.schema(t.rKeyId||{names:{blockName:t.blockName||S}}).valueBlock.value})]})}fromSchema(e){V(e,qp);const t=me(e,e,s.schema({names:{blockName:"blockName"}}));he.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Ot({schema:t.result.blockName})):(this.variant=2,this.value=new rh({schema:new j({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new W({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Me}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant)&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="KeyAgreeRecipientIdentifier",s})();const gr="rid",an="encryptedKey",Wp=[gr,an];let ah=(()=>{class s extends pe{constructor(e={}){super(),this.rid=o(e,gr,s.defaultValues(gr)),this.encryptedKey=o(e,an,s.defaultValues(an)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gr:return new sl;case an:return new ge;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gr:return-1===t.variant&&!("value"in t);case an:return t.isEqual(s.defaultValues(an));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[sl.schema(t.rid||{}),new ge({name:t.encryptedKey||S})]})}fromSchema(e){V(e,Wp);const t=me(e,e,s.schema({names:{rid:{names:{blockName:gr}},encryptedKey:an}}));he.assertSchema(t,this.className),this.rid=new sl({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new j({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="RecipientEncryptedKey",s})();const Ac="encryptedKeys",Lf="RecipientEncryptedKeys",Xp=[Lf];let _c=(()=>{class s extends pe{constructor(e={}){super(),this.encryptedKeys=o(e,Ac,s.defaultValues(Ac)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ac?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Ac?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.RecipientEncryptedKeys||S,value:ah.schema()})]})}fromSchema(e){V(e,Xp);const t=me(e,e,s.schema({names:{RecipientEncryptedKeys:Lf}}));he.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,i=>new ah({schema:i}))}toSchema(){return new j({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}return s.CLASS_NAME="RecipientEncryptedKeys",s})();const vr="version",wr="originator",ms="ukm",yr="keyEncryptionAlgorithm",Sr="recipientEncryptedKeys",kc="recipientCertificate",Ec="recipientPublicKey",Yp=[vr,wr,ms,yr,Sr];let oh=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,vr,s.defaultValues(vr)),this.originator=o(e,wr,s.defaultValues(wr)),ms in e&&(this.ukm=o(e,ms,s.defaultValues(ms))),this.keyEncryptionAlgorithm=o(e,yr,s.defaultValues(yr)),this.recipientEncryptedKeys=o(e,Sr,s.defaultValues(Sr)),this.recipientCertificate=o(e,kc,s.defaultValues(kc)),this.recipientPublicKey=o(e,Ec,s.defaultValues(Ec)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vr:return 0;case wr:return new yc;case ms:return new ge;case yr:return new se;case Sr:return new _c;case kc:return new Jt;case Ec:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vr:return 0===t;case wr:return-1===t.variant&&!("value"in t);case ms:return t.isEqual(s.defaultValues(ms));case yr:return t.algorithmId===S&&!("algorithmParams"in t);case Sr:return 0===t.encryptedKeys.length;case kc:case Ec:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),new W({idBlock:{tagClass:3,tagNumber:0},value:[yc.schema(t.originator||{})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ge({name:t.ukm||S})]}),se.schema(t.keyEncryptionAlgorithm||{}),_c.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){V(e,Yp);const t=me(e,e,s.schema({names:{version:vr,originator:{names:{blockName:wr}},ukm:ms,keyEncryptionAlgorithm:{names:{blockName:yr}},recipientEncryptedKeys:{names:{blockName:Sr}}}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new yc({schema:t.result.originator}),ms in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new se({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new _c({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new ee({value:this.version})),e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new j({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}return s.CLASS_NAME="KeyAgreeRecipientInfo",s})();const on="keyIdentifier",ei="date",ti="other",Zp=[on,ei,ti];let Cc=(()=>{class s extends pe{constructor(e={}){super(),this.keyIdentifier=o(e,on,s.defaultValues(on)),ei in e&&(this.date=o(e,ei,s.defaultValues(ei))),ti in e&&(this.other=o(e,ti,s.defaultValues(ti))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case on:return new ge;case ei:return new ft;case ti:return new pr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case on:return t.isEqual(s.defaultValues(on));case ei:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case ti:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ge({name:t.keyIdentifier||S}),new ft({optional:!0,name:t.date||S}),pr.schema(t.other||{})]})}fromSchema(e){V(e,Zp);const t=me(e,e,s.schema({names:{keyIdentifier:on,date:ei,other:{names:{blockName:ti}}}}));he.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,ei in t.result&&(this.date=t.result.date),ti in t.result&&(this.other=new pr({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new j({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}return s.CLASS_NAME="KEKIdentifier",s})();const br="version",Ar="kekid",_r="keyEncryptionAlgorithm",ln="encryptedKey",Nc="preDefinedKEK",Qp=[br,Ar,_r,ln];let lh=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,br,s.defaultValues(br)),this.kekid=o(e,Ar,s.defaultValues(Ar)),this.keyEncryptionAlgorithm=o(e,_r,s.defaultValues(_r)),this.encryptedKey=o(e,ln,s.defaultValues(ln)),this.preDefinedKEK=o(e,Nc,s.defaultValues(Nc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case br:return 0;case Ar:return new Cc;case _r:return new se;case ln:return new ge;case Nc:return Ct;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===s.defaultValues(br);case Ar:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&!("date"in t)&&!("other"in t);case _r:return t.algorithmId===S&&!("algorithmParams"in t);case ln:return t.isEqual(s.defaultValues(ln));case Nc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),Cc.schema(t.kekid||{}),se.schema(t.keyEncryptionAlgorithm||{}),new ge({name:t.encryptedKey||S})]})}fromSchema(e){V(e,Qp);const t=me(e,e,s.schema({names:{version:br,kekid:{names:{blockName:Ar}},keyEncryptionAlgorithm:{names:{blockName:_r}},encryptedKey:ln}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Cc({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new se({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new j({value:[new ee({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="KEKRecipientInfo",s})();const kr="version",si="keyDerivationAlgorithm",Er="keyEncryptionAlgorithm",cn="encryptedKey",Ic="password",eg=[kr,si,Er,cn];let ch=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,kr,s.defaultValues(kr)),si in e&&(this.keyDerivationAlgorithm=o(e,si,s.defaultValues(si))),this.keyEncryptionAlgorithm=o(e,Er,s.defaultValues(Er)),this.encryptedKey=o(e,cn,s.defaultValues(cn)),this.password=o(e,Ic,s.defaultValues(Ic)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case kr:return-1;case si:case Er:return new se;case cn:return new ge;case Ic:return Ct;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case kr:return-1===t;case si:case Er:return t.algorithmId===S&&!("algorithmParams"in t);case cn:return t.isEqual(s.defaultValues(cn));case Ic:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),new W({name:t.keyDerivationAlgorithm||S,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:se.schema().valueBlock.value}),se.schema(t.keyEncryptionAlgorithm||{}),new ge({name:t.encryptedKey||S})]})}fromSchema(e){V(e,eg);const t=me(e,e,s.schema({names:{version:kr,keyDerivationAlgorithm:si,keyEncryptionAlgorithm:{names:{blockName:Er}},encryptedKey:cn}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,si in t.result&&(this.keyDerivationAlgorithm=new se({schema:new j({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new se({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new ee({value:this.version})),this.keyDerivationAlgorithm&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new j({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}return s.CLASS_NAME="PasswordRecipientInfo",s})();const Cr="oriType",un="oriValue",tg=[Cr,un];let Ff=(()=>{class s extends pe{constructor(e={}){super(),this.oriType=o(e,Cr,s.defaultValues(Cr)),this.oriValue=o(e,un,s.defaultValues(un)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cr:return S;case un:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Cr:return t===S;case un:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.oriType||S}),new Me({name:t.oriValue||S})]})}fromSchema(e){V(e,tg);const t=me(e,e,s.schema({names:{oriType:Cr,oriValue:un}}));he.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new j({value:[new Be({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return s.compareWithDefault(un,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}return s.CLASS_NAME="OtherRecipientInfo",s})();const Tc="variant",il="value",sg=["blockName"];let Nr=(()=>{class s extends pe{constructor(e={}){super(),this.variant=o(e,Tc,s.defaultValues(Tc)),il in e&&(this.value=o(e,il,s.defaultValues(il))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tc:return-1;case il:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tc:return t===s.defaultValues(e);case il:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new mt({value:[ih.schema({names:{blockName:t.blockName||S}}),new W({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:1},value:oh.schema().valueBlock.value}),new W({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:2},value:lh.schema().valueBlock.value}),new W({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:3},value:ch.schema().valueBlock.value}),new W({name:t.blockName||S,idBlock:{tagClass:3,tagNumber:4},value:Ff.schema().valueBlock.value})]})}fromSchema(e){V(e,sg);const t=me(e,e,s.schema({names:{blockName:"blockName"}}));if(he.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new ih({schema:t.result.blockName});else{const i=new j({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new oh({schema:i});break;case 2:this.variant=3,this.value=new lh({schema:i});break;case 3:this.variant=4,this.value=new ch({schema:i});break;case 4:this.variant=5,this.value=new Ff({schema:i});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){tt.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new Me}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="RecipientInfo",s})();const ii="hashAlgorithm",ni="maskGenAlgorithm",ri="pSourceAlgorithm",ig=[ii,ni,ri];let uh=(()=>{class s extends pe{constructor(e={}){super(),this.hashAlgorithm=o(e,ii,s.defaultValues(ii)),this.maskGenAlgorithm=o(e,ni,s.defaultValues(ni)),this.pSourceAlgorithm=o(e,ri,s.defaultValues(ri)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ii:return new se({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot});case ni:return new se({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new se({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot}).toSchema()});case ri:return new se({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new ge({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new W({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[se.schema(t.hashAlgorithm||{})]}),new W({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[se.schema(t.maskGenAlgorithm||{})]}),new W({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[se.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){V(e,ig);const t=me(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:ii}},maskGenAlgorithm:{names:{blockName:ni}},pSourceAlgorithm:{names:{blockName:ri}}}}));he.assertSchema(t,this.className),ii in t.result&&(this.hashAlgorithm=new se({schema:t.result.hashAlgorithm})),ni in t.result&&(this.maskGenAlgorithm=new se({schema:t.result.maskGenAlgorithm})),ri in t.result&&(this.pSourceAlgorithm=new se({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(s.defaultValues(ii))||e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(s.defaultValues(ni))||e.push(new W({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(s.defaultValues(ri))||e.push(new W({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new j({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(s.defaultValues(ii))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(s.defaultValues(ni))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(s.defaultValues(ri))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}return s.CLASS_NAME="RSAESOAEPParams",s})();const Ir="keyInfo",ai="entityUInfo",Tr="suppPubInfo",ng=[Ir,ai,Tr];let Hf=(()=>{class s extends pe{constructor(e={}){super(),this.keyInfo=o(e,Ir,s.defaultValues(Ir)),ai in e&&(this.entityUInfo=o(e,ai,s.defaultValues(ai))),this.suppPubInfo=o(e,Tr,s.defaultValues(Tr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ir:return new se;case ai:case Tr:return new ge;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ir:case ai:case Tr:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.keyInfo||{}),new W({name:t.entityUInfo||S,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new ge]}),new W({name:t.suppPubInfo||S,idBlock:{tagClass:3,tagNumber:2},value:[new ge]})]})}fromSchema(e){V(e,ng);const t=me(e,e,s.schema({names:{keyInfo:{names:{blockName:Ir}},entityUInfo:ai,suppPubInfo:Tr}}));he.assertSchema(t,this.className),this.keyInfo=new se({schema:t.result.keyInfo}),ai in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new W({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new j({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}return s.CLASS_NAME="ECCCMSSharedInfo",s})();const xr="version",oi="originatorInfo",Br="recipientInfos",Rr="encryptedContentInfo",li="unprotectedAttrs",rg=[xr,oi,Br,Rr,li],jf={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},ag={"P-256":256,"P-384":384,"P-521":528};let $f=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,xr,s.defaultValues(xr)),oi in e&&(this.originatorInfo=o(e,oi,s.defaultValues(oi))),this.recipientInfos=o(e,Br,s.defaultValues(Br)),this.encryptedContentInfo=o(e,Rr,s.defaultValues(Rr)),li in e&&(this.unprotectedAttrs=o(e,li,s.defaultValues(li))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xr:return 0;case oi:return new sh;case Br:return[];case Rr:return new Ut;case li:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xr:return t===s.defaultValues(e);case oi:return 0===t.certs.certificates.length&&0===t.crls.crls.length;case Br:case li:return 0===t.length;case Rr:return Ut.compareWithDefault("contentType",t.contentType)&&Ut.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Ut.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||S}),new W({name:t.originatorInfo||S,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:sh.schema().valueBlock.value}),new Et({value:[new He({name:t.recipientInfos||S,value:Nr.schema()})]}),Ut.schema(t.encryptedContentInfo||{}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.unprotectedAttrs||S,value:st.schema()})]})]})}fromSchema(e){V(e,rg);const t=me(e,e,s.schema({names:{version:xr,originatorInfo:oi,recipientInfos:Br,encryptedContentInfo:{names:{blockName:Rr}},unprotectedAttrs:li}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,oi in t.result&&(this.originatorInfo=new sh({schema:new j({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,i=>new Nr({schema:i})),this.encryptedContentInfo=new Ut({schema:t.result.encryptedContentInfo}),li in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,i=>new st({schema:i})))}toSchema(){const e=[];return e.push(new ee({value:this.version})),this.originatorInfo&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new Et({value:Array.from(this.recipientInfos,t=>t.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,t=>t.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}addRecipientByCertificate(e,t,i,a=je(!0)){const l=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},jf,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))i=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);i=2}switch(i){case 1:{let h,d;if(!0===l.useOAEP){h=a.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const B=a.getOIDByAlgorithm({name:l.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),L=new se({algorithmId:B,algorithmParams:new ot});d=new uh({hashAlgorithm:L,maskGenAlgorithm:new se({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:L.toSchema()})}).toSchema()}else{if(h=a.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),h===S)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");d=new ot}const g=new ih({version:0,rid:new Ot({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new se({algorithmId:h,algorithmParams:d}),recipientCertificate:e});this.recipientInfos.push(new Nr({variant:1,value:g}))}break;case 2:{const h=new sl({variant:1,value:new Ot({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(h,l,{recipientCertificate:e},a)}break;default:throw new Error(`Unknown "variant" value: ${i}`)}return!0}addRecipientByPreDefinedData(e,t={},i,a=je(!0)){if(lt.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const l=new ArrayBuffer(16),h=new Uint8Array(l);a.getRandomValues(h),t.keyIdentifier=l}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),void 0===t.iterationCount&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new ot),i){case 1:{const l=a.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),h=new lh({version:4,kekid:new Cc({keyIdentifier:new ge({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new se({algorithmId:l,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Nr({variant:3,value:h}))}break;case 2:{const l=a.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),h=new ArrayBuffer(64),d=new Uint8Array(h);a.getRandomValues(d);const g=a.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),B=new Qa({salt:new ge({valueHex:h}),iterationCount:t.iterationCount,prf:new se({algorithmId:g,algorithmParams:new ot})}),L=a.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),z=new ch({version:0,keyDerivationAlgorithm:new se({algorithmId:l,algorithmParams:B.toSchema()}),keyEncryptionAlgorithm:new se({algorithmId:L,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Nr({variant:4,value:z}))}break;default:throw new Error(`Unknown value for "variant": ${i}`)}}addRecipientByKeyIdentifier(e,t,i,a=je(!0)){const l=Object.assign({},jf,i||{}),h=new sl({variant:2,value:new rh({subjectKeyIdentifier:new ge({valueHex:t})})});this._addKeyAgreeRecipientInfo(h,l,{recipientPublicKey:e},a)}_addKeyAgreeRecipientInfo(e,t,i,a=je(!0)){const l=new ah({rid:e}),h=a.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),d=new se({algorithmId:h}),g=a.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),B=new ArrayBuffer(64),L=new Uint8Array(B);a.getRandomValues(L);const z={version:3,ukm:new ge({valueHex:B}),keyEncryptionAlgorithm:new se({algorithmId:g,algorithmParams:d.toSchema()}),recipientEncryptedKeys:new _c({encryptedKeys:[l]})},K=new oh(Object.assign(z,i));this.recipientInfos.push(new Nr({variant:2,value:K}))}encrypt(e,t,i=je(!0)){var a=this;return(0,w.A)(function*(){const l=new ArrayBuffer(16),h=new Uint8Array(l);i.getRandomValues(h);const d=new Uint8Array(t),g=i.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),B=yield i.generateKey(e,!0,["encrypt"]),L=yield i.encrypt({name:e.name,iv:h},B,d),z=yield i.exportKey("raw",B);a.version=2,a.encryptedContentInfo=new Ut({disableSplit:a.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new se({algorithmId:g,algorithmParams:new ge({valueHex:l})}),encryptedContent:new ge({valueHex:L})});const K=function(){var ye=(0,w.A)(function*(le){const fe=a.recipientInfos[le].value;let ve,Ae;if(fe.recipientPublicKey)ve=fe.recipientPublicKey.algorithm.namedCurve,Ae=fe.recipientPublicKey;else{if(!fe.recipientCertificate)throw new Error("Unsupported RecipientInfo");{const Re=fe.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(Re.constructor.blockName()!==Be.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${le}`);switch(Re.valueBlock.toString()){case"1.2.840.10045.3.1.7":ve="P-256";break;case"1.3.132.0.34":ve="P-384";break;case"1.3.132.0.35":ve="P-521";break;default:throw new Error(`Incorrect curve OID for index ${le}`)}Ae=yield fe.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:ve},usages:[]}},i)}}const Ie=ag[ve],Te=yield i.generateKey({name:"ECDH",namedCurve:ve},!0,["deriveBits"]),De=yield i.exportKey("spki",Te.publicKey),ze=yield i.deriveBits({name:"ECDH",public:Ae},Te.privateKey,Ie),At=new se({schema:fe.keyEncryptionAlgorithm.algorithmParams}),qe=i.getAlgorithmByOID(At.algorithmId,!0,"aesKWAlgorithm");let ct=qe.length;const jt=new ArrayBuffer(4),Dt=new Uint8Array(jt);for(let Re=3;Re>=0;Re--)Dt[Re]=ct,ct>>=8;const ws=new Hf({keyInfo:new se({algorithmId:At.algorithmId}),entityUInfo:fe.ukm,suppPubInfo:new ge({valueHex:jt})}).toSchema().toBER(!1),zt=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),dt=yield kf(zt.kdf,ze,qe.length,ws,i),nt=yield i.importKey("raw",dt,{name:"AES-KW"},!0,["wrapKey"]),Pe=yield i.wrapKey("raw",B,nt,{name:"AES-KW"}),Fe=new yc;return Fe.variant=3,Fe.value=nh.fromBER(De),fe.originator=Fe,fe.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new ge({valueHex:Pe}),{ecdhPrivateKey:Te.privateKey}});return function(fe){return ye.apply(this,arguments)}}(),oe=function(){var ye=(0,w.A)(function*(le){const fe=a.recipientInfos[le].value,ve=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===ve.name){const Ie=new uh({schema:fe.keyEncryptionAlgorithm.algorithmParams});if(ve.hash=i.getAlgorithmByOID(Ie.hashAlgorithm.algorithmId),!("name"in ve.hash))throw new Error(`Incorrect OID for hash algorithm: ${Ie.hashAlgorithm.algorithmId}`)}try{const Ae=yield fe.recipientCertificate.getPublicKey({algorithm:{algorithm:ve,usages:["encrypt","wrapKey"]}},i),Ie=yield i.encrypt(Ae.algorithm,Ae,z);fe.encryptedKey=new ge({valueHex:Ie})}catch{}});return function(fe){return ye.apply(this,arguments)}}(),_e=function(){var ye=(0,w.A)(function*(le){const fe=a.recipientInfos[le].value,ve=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),Ae=yield i.importKey("raw",new Uint8Array(fe.preDefinedKEK),ve,!0,["wrapKey"]),Ie=yield i.wrapKey("raw",B,Ae,ve);fe.encryptedKey=new ge({valueHex:Ie})});return function(fe){return ye.apply(this,arguments)}}(),we=function(){var ye=(0,w.A)(function*(le){const fe=a.recipientInfos[le].value;let ve;if(!fe.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!fe.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{ve=new Qa({schema:fe.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const Ae=new Uint8Array(fe.password),Ie=yield i.importKey("raw",Ae,"PBKDF2",!1,["deriveKey"]),Te=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let De="SHA-1";ve.prf&&(De=i.getAlgorithmByOID(ve.prf.algorithmId,!0,"prfAlgorithm").hash.name);const ze=new Uint8Array(ve.salt.valueBlock.valueHex),At=ve.iterationCount,qe=yield i.deriveKey({name:"PBKDF2",hash:{name:De},salt:ze,iterations:At},Ie,Te,!0,["wrapKey"]),ct=yield i.wrapKey("raw",B,qe,Te);fe.encryptedKey=new ge({valueHex:ct})});return function(fe){return ye.apply(this,arguments)}}(),re=[];for(let ye=0;ye<a.recipientInfos.length;ye++)switch(a.recipientInfos[ye].variant){case 1:re.push(yield oe(ye));break;case 2:re.push(yield K(ye));break;case 3:re.push(yield _e(ye));break;case 4:re.push(yield we(ye));break;default:throw new Error(`Unknown recipient type in array with index ${ye}`)}return re})()}decrypt(e,t,i=je(!0)){var a=this;return(0,w.A)(function*(){const l=t||{};if(e+1>a.recipientInfos.length)throw new Error('Maximum value for "index" is: '+(a.recipientInfos.length-1));const h=function(){var re=(0,w.A)(function*(ye){const le=a.recipientInfos[ye].value;let fe,ve,Ae;const Ie=le.originator;if(l.recipientCertificate){const dt=l.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(dt.constructor.blockName()!==Be.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${ye}`);fe=dt.valueBlock.toString()}else{if(!Ie.value.algorithm.algorithmParams)throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const dt=Ie.value.algorithm.algorithmParams;if(dt.constructor.blockName()!==Be.blockName())throw new Error(`Incorrect originator for index ${ye}`);fe=dt.valueBlock.toString()}}if(!l.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(fe){case"1.2.840.10045.3.1.7":ve="P-256",Ae=256;break;case"1.3.132.0.34":ve="P-384",Ae=384;break;case"1.3.132.0.35":ve="P-521",Ae=528;break;default:throw new Error(`Incorrect curve OID for index ${ye}`)}let Te,De=i;E._H.isBufferSource(l.recipientPrivateKey)?Te=yield i.importKey("pkcs8",l.recipientPrivateKey,{name:"ECDH",namedCurve:ve},!0,["deriveBits"]):(Te=l.recipientPrivateKey,"crypto"in l&&l.crypto&&(De=l.crypto.subtle)),"algorithmParams"in Ie.value.algorithm||(Ie.value.algorithm.algorithmParams=new Be({value:fe}));const ze=Ie.value.toSchema().toBER(!1),At=yield i.importKey("spki",ze,{name:"ECDH",namedCurve:ve},!0,[]),qe=yield De.deriveBits({name:"ECDH",public:At},Te,Ae);function ct(dt){return jt.apply(this,arguments)}function jt(){return(jt=(0,w.A)(function*(dt){dt=dt||!1;const nt=new se({schema:le.keyEncryptionAlgorithm.algorithmParams}),Pe=i.getAlgorithmByOID(nt.algorithmId,!0,"kwAlgorithm");let Fe=Pe.length;const Re=new ArrayBuffer(4),Ge=new Uint8Array(Re);for(let We=3;We>=0;We--)Ge[We]=Fe,Fe>>=8;const it={algorithmId:nt.algorithmId};dt&&(it.algorithmParams=new ot);const Qt=new Hf({keyInfo:new se(it),entityUInfo:le.ukm,suppPubInfo:new ge({valueHex:Re})}).toSchema().toBER(!1),gt=i.getAlgorithmByOID(le.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!gt.name)throw new Error(`Incorrect OID for key encryption algorithm: ${le.keyEncryptionAlgorithm.algorithmId}`);return kf(gt.kdf,qe,Pe.length,Qt,i)})).apply(this,arguments)}const Dt=yield ct(),xn=function(){var dt=(0,w.A)(function*(nt){return i.importKey("raw",nt,{name:"AES-KW"},!0,["unwrapKey"])});return function(Pe){return dt.apply(this,arguments)}}(),ws=yield xn(Dt),zt=function(){var dt=(0,w.A)(function*(nt){const Fe=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm");return i.unwrapKey("raw",le.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,nt,{name:"AES-KW"},Fe,!0,["decrypt"])});return function(Pe){return dt.apply(this,arguments)}}();try{return yield zt(ws)}catch{const dt=yield ct(!0);return zt(yield xn(dt))}});return function(le){return re.apply(this,arguments)}}(),d=function(){var re=(0,w.A)(function*(ye){const le=a.recipientInfos[ye].value;if(!l.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const fe=i.getAlgorithmByOID(le.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===fe.name){const At=new uh({schema:le.keyEncryptionAlgorithm.algorithmParams});if(fe.hash=i.getAlgorithmByOID(At.hashAlgorithm.algorithmId),!("name"in fe.hash))throw new Error(`Incorrect OID for hash algorithm: ${At.hashAlgorithm.algorithmId}`)}let ve,Ae=i;E._H.isBufferSource(l.recipientPrivateKey)?ve=yield i.importKey("pkcs8",l.recipientPrivateKey,fe,!0,["decrypt"]):(ve=l.recipientPrivateKey,"crypto"in l&&l.crypto&&(Ae=l.crypto.subtle));const Ie=yield Ae.decrypt(ve.algorithm,ve,le.encryptedKey.valueBlock.valueHexView),Te=a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,De=i.getAlgorithmByOID(Te,!0,"contentEncryptionAlgorithm");if(!("name"in De))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${Te}`);return i.importKey("raw",Ie,De,!0,["decrypt"])});return function(le){return re.apply(this,arguments)}}(),g=function(){var re=(0,w.A)(function*(ye){const le=a.recipientInfos[ye].value;if(!l.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const fe=i.getAlgorithmByOID(le.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),ve=yield i.importKey("raw",l.preDefinedData,fe,!0,["unwrapKey"]),Ae=a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,Ie=i.getAlgorithmByOID(Ae,!0,"contentEncryptionAlgorithm");if(!Ie.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${Ae}`);return i.unwrapKey("raw",le.encryptedKey.valueBlock.valueHexView,ve,fe,Ie,!0,["decrypt"])});return function(le){return re.apply(this,arguments)}}(),B=function(){var re=(0,w.A)(function*(ye){const le=a.recipientInfos[ye].value;let fe;if(!l.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!le.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!le.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{fe=new Qa({schema:le.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const ve=yield i.importKey("raw",l.preDefinedData,"PBKDF2",!1,["deriveKey"]),Ae=i.getAlgorithmByOID(le.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),Ie=fe.prf?i.getAlgorithmByOID(fe.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",Te=new Uint8Array(fe.salt.valueBlock.valueHex),De=fe.iterationCount,ze=yield i.deriveKey({name:"PBKDF2",hash:{name:Ie},salt:Te,iterations:De},ve,Ae,!0,["unwrapKey"]),qe=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm");return i.unwrapKey("raw",le.encryptedKey.valueBlock.valueHexView,ze,Ae,qe,!0,["decrypt"])});return function(le){return re.apply(this,arguments)}}();let L;switch(a.recipientInfos[e].variant){case 1:L=yield d(e);break;case 2:L=yield h(e);break;case 3:L=yield g(e);break;case 4:L=yield B(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const K=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm"),_e=new Uint8Array(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex);if(!a.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const we=a.encryptedContentInfo.getEncryptedContent();return i.decrypt({name:K.name,iv:_e},L,we)})()}}return s.CLASS_NAME="EnvelopedData",s})();const Vr="safeContents",nl="parsedValue",Kf="contentInfos";let hh=(()=>{class s extends pe{constructor(e={}){super(),this.safeContents=o(e,Vr,s.defaultValues(Vr)),nl in e&&(this.parsedValue=o(e,nl,s.defaultValues(nl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vr:return[];case nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Vr:return 0===t.length;case nl:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new He({name:t.contentInfos||S,value:Mt.schema()})]})}fromSchema(e){V(e,[Kf]);const t=me(e,e,s.schema({names:{contentInfos:Kf}}));he.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,i=>new Mt({schema:i}))}toSchema(){return new j({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}parseInternalValues(e,t=je(!0)){var i=this;return(0,w.A)(function*(){if(tt.assert(e,Vr),lt.assert(e.safeContents,Vr,"Array"),e.safeContents.length!==i.safeContents.length)throw new lt('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');i.parsedValue={safeContents:[]};for(const[a,l]of i.safeContents.entries()){const h=e.safeContents[a],d=`parameters.safeContents[${a}]`;switch(l.contentType){case vu:{lt.assert(l.content,"this.safeContents[j].content",ge);const g=l.content.getValue();i.parsedValue.safeContents.push({privacyMode:0,value:tn.fromBER(g)})}break;case Wd:{const g=new $f({schema:l.content});tt.assert(d,h,"recipientCertificate","recipientKey");const L=h.recipientCertificate,z=h.recipientKey,K=yield g.decrypt(0,{recipientCertificate:L,recipientPrivateKey:z},t);i.parsedValue.safeContents.push({privacyMode:2,value:tn.fromBER(K)})}break;case Xd:{const g=new fc({schema:l.content});tt.assert(d,h,"password");const B=h.password,L=yield g.decrypt({password:B},t);i.parsedValue.safeContents.push({privacyMode:1,value:tn.fromBER(L)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${l.contentType}`)}}})()}makeInternalValues(e,t=je(!0)){var i=this;return(0,w.A)(function*(){if(!i.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(lt.assert(i.parsedValue,"this.parsedValue","object"),lt.assert(i.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),lt.assert(e,"parameters","object"),tt.assert(e,"safeContents"),lt.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==i.parsedValue.safeContents.length)throw new lt('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');i.safeContents=[];for(const[a,l]of i.parsedValue.safeContents.entries())switch(tt.assert("content",l,"privacyMode","value"),lt.assert(l.value,"content.value",tn),l.privacyMode){case 0:{const h=l.value.toSchema().toBER(!1);i.safeContents.push(new Mt({contentType:"1.2.840.113549.1.7.1",content:new ge({valueHex:h})}))}break;case 1:{const h=new fc,d=e.safeContents[a];d.contentToEncrypt=l.value.toSchema().toBER(!1),yield h.encrypt(d,t),i.safeContents.push(new Mt({contentType:"1.2.840.113549.1.7.6",content:h.toSchema()}))}break;case 2:{const h=new $f,d=l.value.toSchema().toBER(!1),g=e.safeContents[a];switch(tt.assert(`parameters.safeContents[${a}]`,g,"encryptingCertificate","encryptionAlgorithm"),!0){case"aes-cbc"===g.encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===g.encryptionAlgorithm.name.toLowerCase():break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${g.encryptionAlgorithm}`)}switch(!0){case 128===g.encryptionAlgorithm.length:case 192===g.encryptionAlgorithm.length:case 256===g.encryptionAlgorithm.length:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${g.encryptionAlgorithm.length}`)}const B=g.encryptionAlgorithm;h.addRecipientByCertificate(g.encryptingCertificate,{},void 0,t),yield h.encrypt(B,d,t),i.safeContents.push(new Mt({contentType:"1.2.840.113549.1.7.3",content:h.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${l.privacyMode}`)}return i})()}}return s.CLASS_NAME="AuthenticatedSafe",s})();const hn="hashAlgorithm",Or="issuerNameHash",Pr="issuerKeyHash",dn="serialNumber",og=[hn,Or,Pr,dn];let ci=(()=>{class s extends pe{static create(e,t,i=je(!0)){return(0,w.A)(function*(){const a=new s;return yield a.createForCertificate(e,t,i),a})()}constructor(e={}){super(),this.hashAlgorithm=o(e,hn,s.defaultValues(hn)),this.issuerNameHash=o(e,Or,s.defaultValues(Or)),this.issuerKeyHash=o(e,Pr,s.defaultValues(Pr)),this.serialNumber=o(e,dn,s.defaultValues(dn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hn:return new se;case Or:case Pr:return new ge;case dn:return new ee;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hn:return t.algorithmId===S&&!("algorithmParams"in t);case Or:case Pr:case dn:return t.isEqual(s.defaultValues(dn));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||S}}),new ge({name:t.issuerNameHash||S}),new ge({name:t.issuerKeyHash||S}),new ee({name:t.serialNumber||S})]})}fromSchema(e){V(e,og);const t=me(e,e,s.schema({names:{hashAlgorithm:hn,issuerNameHash:Or,issuerKeyHash:Pr,serialNumber:dn}}));he.assertSchema(t,this.className),this.hashAlgorithm=new se({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new j({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!E._H.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!E._H.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}createForCertificate(e,t,i=je(!0)){var a=this;return(0,w.A)(function*(){tt.assert(t,hn,"issuerCertificate");const l=i.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");a.hashAlgorithm=new se({algorithmId:l,algorithmParams:new ot});const h=t.issuerCertificate;a.serialNumber=e.serialNumber;const d=yield i.digest({name:t.hashAlgorithm},h.subject.toSchema().toBER(!1));a.issuerNameHash=new ge({valueHex:d});const g=h.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,B=yield i.digest({name:t.hashAlgorithm},g);a.issuerKeyHash=new ge({valueHex:B})})()}}return s.CLASS_NAME="CertID",s})();const Dr="certID",Ur="certStatus",Mr="thisUpdate",ui="nextUpdate",fn="singleExtensions",lg=[Dr,Ur,Mr,ui,fn];let Gf=(()=>{class s extends pe{constructor(e={}){super(),this.certID=o(e,Dr,s.defaultValues(Dr)),this.certStatus=o(e,Ur,s.defaultValues(Ur)),this.thisUpdate=o(e,Mr,s.defaultValues(Mr)),ui in e&&(this.nextUpdate=o(e,ui,s.defaultValues(ui))),fn in e&&(this.singleExtensions=o(e,fn,s.defaultValues(fn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dr:return new ci;case Ur:return{};case Mr:case ui:return new Date(0,0,0);case fn:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dr:return ci.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&ci.compareWithDefault("issuerNameHash",t.issuerNameHash)&&ci.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&ci.compareWithDefault("serialNumber",t.serialNumber);case Ur:return 0===Object.keys(t).length;case Mr:case ui:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[ci.schema(t.certID||{}),new mt({value:[new Ce({name:t.certStatus||S,idBlock:{tagClass:3,tagNumber:0}}),new W({name:t.certStatus||S,idBlock:{tagClass:3,tagNumber:1},value:[new ft,new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new oa]})]}),new Ce({name:t.certStatus||S,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new ft({name:t.thisUpdate||S}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ft({name:t.nextUpdate||S})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Rt.schema(t.singleExtensions||{})]})]})}fromSchema(e){V(e,lg);const t=me(e,e,s.schema({names:{certID:{names:{blockName:Dr}},certStatus:Ur,thisUpdate:Mr,nextUpdate:ui,singleExtensions:{names:{blockName:fn}}}}));he.assertSchema(t,this.className),this.certID=new ci({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),ui in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),fn in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,i=>new Oi({schema:i})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new ft({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[new ft({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new j({value:Array.from(this.singleExtensions,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,t=>t.toJSON())),e}}return s.CLASS_NAME="SingleResponse",s})();const xc="tbs",mn="version",rl="responderID",al="producedAt",ol="responses",Lr="responseExtensions",pn="ResponseData",Bc=`${pn}.${mn}`,Fr=`${pn}.${rl}`,dh=`${pn}.${al}`,fh=`${pn}.${ol}`,Rc=`${pn}.${Lr}`,cg=[pn,Bc,Fr,dh,fh,Rc];let hi=(()=>{class s extends pe{get tbs(){return E._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,xc,s.defaultValues(xc))),mn in e&&(this.version=o(e,mn,s.defaultValues(mn))),this.responderID=o(e,rl,s.defaultValues(rl)),this.producedAt=o(e,al,s.defaultValues(al)),this.responses=o(e,ol,s.defaultValues(ol)),Lr in e&&(this.responseExtensions=o(e,Lr,s.defaultValues(Lr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mn:return 0;case xc:return Ct;case rl:return{};case al:return new Date(0,0,0);case ol:case Lr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xc:return 0===t.byteLength;case rl:return 0===Object.keys(t).length;case al:return t===s.defaultValues(e);case ol:case Lr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||pn,value:[new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({name:t.version||Bc})]}),new mt({value:[new W({name:t.responderID||Fr,idBlock:{tagClass:3,tagNumber:1},value:[pt.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new W({name:t.responderID||Fr,idBlock:{tagClass:3,tagNumber:2},value:[new ge({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new ft({name:t.producedAt||dh}),new j({value:[new He({name:fh,value:Gf.schema(t.response||{})})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Rt.schema(t.extensions||{names:{blockName:Rc}})]})]})}fromSchema(e){V(e,cg);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Bc in t.result&&(this.version=t.result[Bc].valueBlock.valueDec),this.responderID=1===t.result[Fr].idBlock.tagNumber?new pt({schema:t.result[Fr].valueBlock.value[0]}):t.result[Fr].valueBlock.value[0],this.producedAt=t.result[dh].toDate(),this.responses=Array.from(t.result[fh],i=>new Gf({schema:i})),Rc in t.result&&(this.responseExtensions=Array.from(t.result[Rc].valueBlock.value,i=>new Oi({schema:i})))}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return s.schema();const i=ht(this.tbsView);he.assert(i,"TBS Response Data"),t=i.result}else{const i=[];mn in this&&i.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:this.version})]})),i.push(new W(this.responderID instanceof pt?{idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]}:{idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),i.push(new ft({valueDate:this.producedAt})),i.push(new j({value:Array.from(this.responses,a=>a.toSchema())})),this.responseExtensions&&i.push(new W({idBlock:{tagClass:3,tagNumber:1},value:[new j({value:Array.from(this.responseExtensions,a=>a.toSchema())})]})),t=new j({value:i})}return t}toJSON(){const e={};return mn in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,t=>t.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,t=>t.toJSON())),e}}return s.CLASS_NAME="ResponseData",s})();const mh="trustedCerts",ph="certs",gh="crls",vh="ocsps",wh="checkDate",yh="findOrigin",Sh="findIssuer";var Hr=function(s){return s[s.unknown=-1]="unknown",s[s.success=0]="success",s[s.noRevocation=11]="noRevocation",s[s.noPath=60]="noPath",s[s.noValidPath=97]="noValidPath",s}(Hr||{});let ll=(()=>{class s extends Error{constructor(e,t){super(t),this.name=s.NAME,this.code=e,this.message=t}}return s.NAME="ChainValidationError",s})();class Vc{constructor(r={}){this.trustedCerts=o(r,mh,this.defaultValues(mh)),this.certs=o(r,ph,this.defaultValues(ph)),this.crls=o(r,gh,this.defaultValues(gh)),this.ocsps=o(r,vh,this.defaultValues(vh)),this.checkDate=o(r,wh,this.defaultValues(wh)),this.findOrigin=o(r,yh,this.defaultValues(yh)),this.findIssuer=o(r,Sh,this.defaultValues(Sh))}static defaultFindOrigin(r,e){0===r.tbsView.byteLength&&(r.tbsView=new Uint8Array(r.encodeTBS().toBER()));for(const t of e.certs)if(0===t.tbsView.byteLength&&(t.tbsView=new Uint8Array(t.encodeTBS().toBER())),E._H.isEqual(r.tbsView,t.tbsView))return"Intermediate Certificates";for(const t of e.trustedCerts)if(0===t.tbsView.byteLength&&(t.tbsView=new Uint8Array(t.encodeTBS().toBER())),E._H.isEqual(r.tbsView,t.tbsView))return"Trusted Certificates";return"Unknown"}defaultFindIssuer(r,e,t=je(!0)){return(0,w.A)(function*(){const i=[];let a=null,l=null,h=null;if(r.subject.isEqual(r.issuer))try{if(yield r.verify(void 0,t))return[r]}catch{}if(r.extensions)for(const g of r.extensions)if(g.extnID===pu&&g.parsedValue instanceof ef){g.parsedValue.keyIdentifier?a=g.parsedValue.keyIdentifier:(g.parsedValue.authorityCertIssuer&&(l=g.parsedValue.authorityCertIssuer),g.parsedValue.authorityCertSerialNumber&&(h=g.parsedValue.authorityCertSerialNumber));break}function d(g){if(null!==a&&g.extensions){let L=!1;for(const z of g.extensions)if("2.5.29.14"===z.extnID&&z.parsedValue){L=!0,E._H.isEqual(z.parsedValue.valueBlock.valueHex,a.valueBlock.valueHexView)&&i.push(g);break}if(L)return}let B=!1;null!==h&&(B=g.serialNumber.isEqual(h)),null!==l?g.subject.isEqual(l)&&B&&i.push(g):r.issuer.isEqual(g.subject)&&i.push(g)}for(const g of e.trustedCerts)d(g);for(const g of e.certs)d(g);for(let g=i.length-1;g>=0;g--)try{!1===(yield r.verify(i[g],t))&&i.splice(g,1)}catch{i.splice(g,1)}return i})()}defaultValues(r){switch(r){case mh:case ph:case gh:case vh:return[];case wh:return new Date;case yh:return Vc.defaultFindOrigin;case Sh:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${r}`)}}sort(r=!1,e=je(!0)){var t=this;return(0,w.A)(function*(){const i=[],a=function(){var we=(0,w.A)(function*(re,ye){const le=[];function fe(Ae){let Ie=!0;for(let Te=0;Te<Ae.length;Te++){for(let De=0;De<Ae.length;De++)if(De!==Te&&Ae[Te]===Ae[De]){Ie=!1;break}if(!Ie)break}return Ie}if(function ug(s,r){for(let e=0;e<r.length;e++)if(E._H.isEqual(s.tbsView,r[e].tbsView))return!0;return!1}(re,t.trustedCerts))return[[re]];const ve=yield t.findIssuer(re,t,ye);if(0===ve.length)throw new Error("No valid certificate paths found");for(let Ae=0;Ae<ve.length;Ae++){if(E._H.isEqual(ve[Ae].tbsView,re.tbsView)){le.push([ve[Ae]]);continue}const Ie=yield a(ve[Ae],ye);for(let Te=0;Te<Ie.length;Te++){const De=Ie[Te].slice();De.splice(0,0,ve[Ae]),fe(De)?le.push(De):le.push(Ie[Te])}}return le});return function(ye,le){return we.apply(this,arguments)}}(),l=function(){var we=(0,w.A)(function*(re){const ye=[],le=[],fe=[];if(ye.push(...i.filter(ve=>re.issuer.isEqual(ve.subject))),0===ye.length)return{status:1,statusMessage:"No certificate's issuers"};if(le.push(...t.crls.filter(ve=>ve.issuer.isEqual(re.issuer))),0===le.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let ve=0;ve<le.length;ve++){const Ae=le[ve];if(!(Ae.nextUpdate&&Ae.nextUpdate.value<t.checkDate))for(let Ie=0;Ie<ye.length;Ie++)try{if(yield le[ve].verify({issuerCertificate:ye[Ie]},e)){fe.push({crl:le[ve],certificate:ye[Ie]});break}}catch{}}return fe.length?{status:0,statusMessage:S,result:fe}:{status:3,statusMessage:"No valid CRLs found"}});return function(ye){return we.apply(this,arguments)}}(),h=function(){var we=(0,w.A)(function*(re,ye){const le=e.getAlgorithmByOID(re.signatureAlgorithm.algorithmId);if(!le.name||!le.hash)return 1;for(let fe=0;fe<t.ocsps.length;fe++){const Ae=yield t.ocsps[fe].getCertificateStatus(re,ye,e);if(Ae.isForCertificate)return 0===Ae.status?0:1}return 2});return function(ye,le){return we.apply(this,arguments)}}();function d(we){return g.apply(this,arguments)}function g(){return(g=(0,w.A)(function*(we,re=!1){let ye=!1,le=!1,fe=!1,ve=!1;if(we.extensions){for(let Ae=0;Ae<we.extensions.length;Ae++){const Ie=we.extensions[Ae];if(Ie.critical&&!Ie.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${Ie.extnID}`};if("2.5.29.15"===Ie.extnID){fe=!0;const Te=new Uint8Array(Ie.parsedValue.valueBlock.valueHex);!(4&~Te[0])&&(le=!0),!(2&~Te[0])&&(ve=!0)}Ie.extnID===fu&&"cA"in Ie.parsedValue&&!0===Ie.parsedValue.cA&&(ye=!0)}if(!0===le&&!1===ye)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(!0===fe&&!0===ye&&!1===le)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===ye&&!0===fe&&re&&!1===ve)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===ye?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:S}})).apply(this,arguments)}const B=function(){var we=(0,w.A)(function*(re,ye){for(let le=0;le<re.length;le++)if(re[le].notBefore.value>ye||re[le].notAfter.value<ye)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(re.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let le=re.length-2;le>=0;le--)if(!1===re[le].issuer.isEqual(re[le].subject)&&!1===re[le].issuer.isEqual(re[le+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==t.crls.length||0!==t.ocsps.length)for(let le=0;le<re.length-1;le++){let fe=2,ve={status:0,statusMessage:S};if(0!==t.ocsps.length)switch(fe=yield h(re[le],re[le+1]),fe){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==t.crls.length){if(ve=yield l(re[le]),0===ve.status&&ve.result)for(let Ae=0;Ae<ve.result.length;Ae++){if(ve.result[Ae].crl.isCertificateRevoked(re[le]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(yield d(ve.result[Ae].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===r)throw new ll(Hr.noRevocation,`No revocation values found for one of certificates: ${ve.statusMessage}`)}else if(2===fe)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===fe&&2===ve.status&&r){const Ae=re[le+1];let Ie=!1;if(Ae.extensions)for(const Te of Ae.extensions)switch(Te.extnID){case Kd:case mu:case gu:Ie=!0}if(Ie)throw new ll(Hr.noRevocation,`No revocation values found for one of certificates: ${ve.statusMessage}`)}}for(const[le,fe]of re.entries())if(le&&!(yield d(fe)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"};return{result:!0}});return function(ye,le){return we.apply(this,arguments)}}();i.push(...t.trustedCerts),i.push(...t.certs);for(let we=0;we<i.length;we++)for(let re=0;re<i.length;re++)if(we!==re&&E._H.isEqual(i[we].tbsView,i[re].tbsView)){i.splice(re,1),we=0;break}const L=i[i.length-1];let z;const K=[L];if(z=yield a(L,e),0===z.length)throw new ll(Hr.noPath,"Unable to find certificate path");for(let we=z.length-1;we>=0;we--){let re=!1;for(let ye=0;ye<z[we].length;ye++){const le=z[we][ye];for(let fe=0;fe<t.trustedCerts.length;fe++)if(E._H.isEqual(le.tbsView,t.trustedCerts[fe].tbsView)){re=!0;break}if(re)break}re||z.splice(we,1)}if(0===z.length)throw new ll(Hr.noValidPath,"No valid certificate paths found");let oe=z[0].length,_e=0;for(let we=0;we<z.length;we++)z[we].length<oe&&(oe=z[we].length,_e=we);for(let we=0;we<z[_e].length;we++)K.push(z[_e][we]);if(z=yield B(K,t.checkDate),!1===z.result)throw z;return K})()}verify(r={},e=je(!0)){var t=this;return(0,w.A)(function*(){function i(g,B){const L=Ns(g),z=Ns(B),K=L.split("."),oe=z.split("."),_e=K.length,we=oe.length;if(0===_e||0===we||_e<we)return!1;for(let re=0;re<_e;re++)if(0===K[re].length)return!1;for(let re=0;re<we;re++)if(0===oe[re].length){if(0===re){if(1===we)return!1;continue}return!1}for(let re=0;re<we;re++)if(0!==oe[we-1-re].length&&0!==K[_e-1-re].localeCompare(oe[we-1-re]))return!1;return!0}function a(g,B){const L=Ns(g),z=Ns(B),K=L.split("@"),oe=z.split("@");if(0===K.length||0===oe.length||K.length<oe.length)return!1;if(1===oe.length){if(i(K[1],oe[0])){const we=K[1].split("."),re=oe[0].split(".");return 0===re[0].length||we.length===re.length}return!1}return 0===L.localeCompare(z)}function l(g,B){let L=Ns(g);const z=Ns(B),K=L.split("/");if(z.split("/").length>1)return!1;if(K.length>1)for(let we=0;we<K.length;we++)if(K[we].length>0&&":"!==K[we].charAt(K[we].length-1)){L=K[we].split(":")[0];break}if(i(L,z)){const we=L.split("."),re=z.split(".");return 0===re[0].length||we.length===re.length}return!1}function h(g,B){const L=g.valueBlock.valueHexView,z=B.valueBlock.valueHexView;if(4===L.length&&8===z.length){for(let K=0;K<4;K++)if((L[K]^z[K])&z[K+4])return!1;return!0}if(16===L.length&&32===z.length){for(let K=0;K<16;K++)if((L[K]^z[K])&z[K+16])return!1;return!0}return!1}function d(g,B){if(0===g.typesAndValues.length||0===B.typesAndValues.length)return!0;if(g.typesAndValues.length<B.typesAndValues.length)return!1;let L=!0,z=0;for(let K=0;K<B.typesAndValues.length;K++){let oe=!1;for(let _e=z;_e<g.typesAndValues.length;_e++)if(oe=g.typesAndValues[_e].isEqual(B.typesAndValues[K]),g.typesAndValues[_e].type===B.typesAndValues[K].type&&(L=L&&oe),!0===oe){if(0===z||z===_e){z=_e+1;break}return!1}if(!1===oe)return!1}return 0!==z&&L}try{if(0===t.certs.length)throw new Error("Empty certificate array");const g=r.passedWhenNotRevValues||!1,B=r.initialPolicySet||[Gt];let re=r.initialExplicitPolicy||!1,ye=r.initialPolicyMappingInhibit||!1,le=r.initialInhibitPolicy||!1;const fe=[!1,!1,!1];let ve=0,Ae=0,Ie=0,Te=r.initialPermittedSubtreesSet||[],De=r.initialExcludedSubtreesSet||[];const ze=r.initialRequiredNameForms||[];let At=1;t.certs=yield t.sort(g,e);const qe=[];qe.push(Gt);const ct=[],jt=new Array(t.certs.length-1);for(let Pe=0;Pe<t.certs.length-1;Pe++)jt[Pe]=!0;ct.push(jt);const Dt=new Array(t.certs.length-1),xn=new Array(t.certs.length-1);let ws=re?t.certs.length-1:-1;for(let Pe=t.certs.length-2;Pe>=0;Pe--,At++){const Fe=t.certs[Pe];if(Fe.extensions){for(let Re=0;Re<Fe.extensions.length;Re++){const Ge=Fe.extensions[Re];if(Ge.extnID===Gd){xn[Pe]=Ge.parsedValue;for(let it=0;it<qe.length;it++)if(qe[it]===Gt){delete ct[it][Pe];break}for(let it=0;it<Ge.parsedValue.certificatePolicies.length;it++){let Lt=-1;const Qt=Ge.parsedValue.certificatePolicies[it].policyIdentifier;for(let gt=0;gt<qe.length;gt++)if(Qt===qe[gt]){Lt=gt;break}if(-1===Lt){qe.push(Qt);const gt=new Array(t.certs.length-1);gt[Pe]=!0,ct.push(gt)}else ct[Lt][Pe]=!0}}if(Ge.extnID===Jd){if(ye)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};Dt[Pe]=Ge.parsedValue}Ge.extnID===zd&&!1===re&&(0===Ge.parsedValue.requireExplicitPolicy?(re=!0,ws=Pe):!1===fe[0]?(fe[0]=!0,ve=Ge.parsedValue.requireExplicitPolicy):ve=ve>Ge.parsedValue.requireExplicitPolicy?Ge.parsedValue.requireExplicitPolicy:ve,0===Ge.parsedValue.inhibitPolicyMapping?ye=!0:!1===fe[1]?(fe[1]=!0,Ae=Ge.parsedValue.inhibitPolicyMapping+1):Ae=Ae>Ge.parsedValue.inhibitPolicyMapping+1?Ge.parsedValue.inhibitPolicyMapping+1:Ae),"2.5.29.54"===Ge.extnID&&!1===le&&(0===Ge.parsedValue.valueBlock.valueDec?le=!0:!1===fe[2]?(fe[2]=!0,Ie=Ge.parsedValue.valueBlock.valueDec):Ie=Ie>Ge.parsedValue.valueBlock.valueDec?Ge.parsedValue.valueBlock.valueDec:Ie)}if(!0===le){let Re=-1;for(let Ge=0;Ge<qe.length;Ge++)if(qe[Ge]===Gt){Re=Ge;break}-1!==Re&&delete ct[0][Pe]}!1===re&&!0===fe[0]&&(ve--,0===ve&&(re=!0,ws=Pe,fe[0]=!1)),!1===ye&&!0===fe[1]&&(Ae--,0===Ae&&(ye=!0,fe[1]=!1)),!1===le&&!0===fe[2]&&(Ie--,0===Ie&&(le=!0,fe[2]=!1))}}for(let Pe=0;Pe<t.certs.length-1;Pe++)if(Pe<t.certs.length-2&&typeof Dt[Pe+1]<"u")for(let Fe=0;Fe<Dt[Pe+1].mappings.length;Fe++){if(Dt[Pe+1].mappings[Fe].issuerDomainPolicy===Gt||Dt[Pe+1].mappings[Fe].subjectDomainPolicy===Gt)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let Re=-1,Ge=-1;for(let it=0;it<qe.length;it++)qe[it]===Dt[Pe+1].mappings[Fe].issuerDomainPolicy&&(Re=it),qe[it]===Dt[Pe+1].mappings[Fe].subjectDomainPolicy&&(Ge=it);typeof ct[Re][Pe]<"u"&&delete ct[Re][Pe];for(let it=0;it<xn[Pe].certificatePolicies.length;it++)if(Dt[Pe+1].mappings[Fe].subjectDomainPolicy===xn[Pe].certificatePolicies[it].policyIdentifier&&-1!==Re&&-1!==Ge)for(let Lt=0;Lt<=Pe;Lt++)typeof ct[Ge][Lt]<"u"&&(ct[Re][Lt]=!0,delete ct[Ge][Lt])}for(let Pe=0;Pe<qe.length;Pe++)if(qe[Pe]===Gt)for(let Fe=0;Fe<ws;Fe++)delete ct[Pe][Fe];const zt=[];for(let Pe=0;Pe<ct.length;Pe++){let Fe=!0;for(let Re=0;Re<t.certs.length-1;Re++){let Ge=!1;if(Re<ws&&qe[Pe]===Gt&&qe.length>1){Fe=!1;break}if(typeof ct[Pe][Re]>"u"){if(Re>=ws)for(let it=0;it<qe.length;it++)if(qe[it]===Gt){!0===ct[it][Re]&&(Ge=!0);break}if(!Ge){Fe=!1;break}}}!0===Fe&&zt.push(qe[Pe])}let dt=[];if(1===B.length&&B[0]===Gt&&!1===re)dt=B;else if(1===zt.length&&zt[0]===Gt)dt=B;else for(let Pe=0;Pe<zt.length;Pe++)for(let Fe=0;Fe<B.length;Fe++)if(B[Fe]===zt[Pe]||B[Fe]===Gt){dt.push(zt[Pe]);break}const nt={result:dt.length>0,resultCode:0,resultMessage:dt.length>0?S:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:zt,userConstrPolicies:dt,explicitPolicyIndicator:re,policyMappings:Dt,certificatePath:t.certs};if(0===dt.length||!1===nt.result)return nt;At=1;for(let Pe=t.certs.length-2;Pe>=0;Pe--,At++){const Fe=t.certs[Pe];let Re=[],Ge=[],it=[];if(Fe.extensions)for(let We=0;We<Fe.extensions.length;We++){const Le=Fe.extensions[We];Le.extnID===$d&&("permittedSubtrees"in Le.parsedValue&&(Ge=Ge.concat(Le.parsedValue.permittedSubtrees)),"excludedSubtrees"in Le.parsedValue&&(it=it.concat(Le.parsedValue.excludedSubtrees))),Le.extnID===Ld&&(Re=Re.concat(Le.parsedValue.altNames))}let Lt=ze.length<=0;for(let We=0;We<ze.length;We++)switch(ze[We].base.type){case 4:if(ze[We].base.value.typesAndValues.length!==Fe.subject.typesAndValues.length)continue;Lt=!0;for(let Le=0;Le<Fe.subject.typesAndValues.length;Le++)if(Fe.subject.typesAndValues[Le].type!==ze[We].base.value.typesAndValues[Le].type){Lt=!1;break}if(!0===Lt)break}if(!1===Lt)throw nt.result=!1,nt.resultCode=21,nt.resultMessage="No necessary name form found",nt;const Qt=[[],[],[],[],[]];for(let We=0;We<Te.length;We++)switch(Te[We].base.type){case 1:Qt[0].push(Te[We]);break;case 2:Qt[1].push(Te[We]);break;case 4:Qt[2].push(Te[We]);break;case 6:Qt[3].push(Te[We]);break;case 7:Qt[4].push(Te[We])}for(let We=0;We<5;We++){let Le=!1,Bn=!1;const pi=Qt[We];for(let gi=0;gi<pi.length;gi++){switch(We){case 0:if(Re.length>0)for(let vt=0;vt<Re.length;vt++)1===Re[vt].type&&(Bn=!0,Le=Le||a(Re[vt].value,pi[gi].base.value));else for(let vt=0;vt<Fe.subject.typesAndValues.length;vt++)("1.2.840.113549.1.9.1"===Fe.subject.typesAndValues[vt].type||"0.9.2342.19200300.100.1.3"===Fe.subject.typesAndValues[vt].type)&&(Bn=!0,Le=Le||a(Fe.subject.typesAndValues[vt].value.valueBlock.value,pi[gi].base.value));break;case 1:if(Re.length>0)for(let vt=0;vt<Re.length;vt++)2===Re[vt].type&&(Bn=!0,Le=Le||i(Re[vt].value,pi[gi].base.value));break;case 2:Bn=!0,Le=d(Fe.subject,pi[gi].base.value);break;case 3:if(Re.length>0)for(let vt=0;vt<Re.length;vt++)6===Re[vt].type&&(Bn=!0,Le=Le||l(Re[vt].value,pi[gi].base.value));break;case 4:if(Re.length>0)for(let vt=0;vt<Re.length;vt++)7===Re[vt].type&&(Bn=!0,Le=Le||h(Re[vt].value,pi[gi].base.value))}if(Le)break}if(!1===Le&&pi.length>0&&Bn)throw nt.result=!1,nt.resultCode=41,nt.resultMessage='Failed to meet "permitted sub-trees" name constraint',nt}let gt=!1;for(let We=0;We<De.length;We++){switch(De[We].base.type){case 1:if(Re.length>=0)for(let Le=0;Le<Re.length;Le++)1===Re[Le].type&&(gt=gt||a(Re[Le].value,De[We].base.value));else for(let Le=0;Le<Fe.subject.typesAndValues.length;Le++)("1.2.840.113549.1.9.1"===Fe.subject.typesAndValues[Le].type||"0.9.2342.19200300.100.1.3"===Fe.subject.typesAndValues[Le].type)&&(gt=gt||a(Fe.subject.typesAndValues[Le].value.valueBlock.value,De[We].base.value));break;case 2:if(Re.length>0)for(let Le=0;Le<Re.length;Le++)2===Re[Le].type&&(gt=gt||i(Re[Le].value,De[We].base.value));break;case 4:gt=gt||d(Fe.subject,De[We].base.value);break;case 6:if(Re.length>0)for(let Le=0;Le<Re.length;Le++)6===Re[Le].type&&(gt=gt||l(Re[Le].value,De[We].base.value));break;case 7:if(Re.length>0)for(let Le=0;Le<Re.length;Le++)7===Re[Le].type&&(gt=gt||h(Re[Le].value,De[We].base.value))}if(gt)break}if(!0===gt)throw nt.result=!1,nt.resultCode=42,nt.resultMessage='Failed to meet "excluded sub-trees" name constraint',nt;Te=Te.concat(Ge),De=De.concat(it)}return nt}catch(g){return g instanceof Error?g instanceof ll?{result:!1,resultCode:g.code,resultMessage:g.message,error:g}:{result:!1,resultCode:Hr.unknown,resultMessage:g.message,error:g}:g&&"object"==typeof g&&"resultMessage"in g?g:{result:!1,resultCode:-1,resultMessage:`${g}`}}})()}}const Oc="tbsResponseData",cl="signatureAlgorithm",ul="signature",jr="certs",hl="BasicOCSPResponse",bh=`${hl}.${Oc}`,Ah=`${hl}.${cl}`,_h=`${hl}.${ul}`,Pc=`${hl}.${jr}`,hg=[bh,Ah,_h,Pc];let dg=(()=>{class s extends pe{constructor(e={}){super(),this.tbsResponseData=o(e,Oc,s.defaultValues(Oc)),this.signatureAlgorithm=o(e,cl,s.defaultValues(cl)),this.signature=o(e,ul,s.defaultValues(ul)),jr in e&&(this.certs=o(e,jr,s.defaultValues(jr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oc:return new hi;case cl:return new se;case ul:return new Ye;case jr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let i=hi.compareWithDefault("tbs",t.tbs)&&hi.compareWithDefault("responderID",t.responderID)&&hi.compareWithDefault("producedAt",t.producedAt)&&hi.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(i=i&&hi.compareWithDefault("responseExtensions",t.responseExtensions)),i}case cl:return t.algorithmId===S&&!("algorithmParams"in t);case ul:return t.isEqual(s.defaultValues(e));case jr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||hl,value:[hi.schema(t.tbsResponseData||{names:{blockName:bh}}),se.schema(t.signatureAlgorithm||{names:{blockName:Ah}}),new Ye({name:t.signature||_h}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new j({value:[new He({name:Pc,value:Jt.schema(t.certs||{})})]})]})]})}fromSchema(e){V(e,hg);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.tbsResponseData=new hi({schema:t.result[bh]}),this.signatureAlgorithm=new se({schema:t.result[Ah]}),this.signature=t.result[_h],Pc in t.result&&(this.certs=Array.from(t.result[Pc],i=>new Jt({schema:i})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:[new j({value:Array.from(this.certs,t=>t.toSchema())})]})),new j({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}getCertificateStatus(e,t,i=je(!0)){var a=this;return(0,w.A)(function*(){const l={isForCertificate:!1,status:2},h={},d=[];for(const g of a.tbsResponseData.responses){const B=i.getAlgorithmByOID(g.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!h[B.name]){h[B.name]=1;const L=new ci;d.push(L),yield L.createForCertificate(e,{hashAlgorithm:B.name,issuerCertificate:t},i)}}for(const g of a.tbsResponseData.responses)for(const B of d)if(g.certID.isEqual(B)){l.isForCertificate=!0;try{switch(g.certStatus.idBlock.isConstructed){case!0:1===g.certStatus.idBlock.tagNumber&&(l.status=1);break;case!1:switch(g.certStatus.idBlock.tagNumber){case 0:l.status=0;break;case 2:l.status=2}}}catch{}return l}return l})()}sign(e,t="SHA-1",i=je(!0)){var a=this;return(0,w.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters.algorithm;if(!("name"in h))throw new Error("Empty algorithm");a.signatureAlgorithm=l.signatureAlgorithm,a.tbsResponseData.tbsView=new Uint8Array(a.tbsResponseData.toSchema(!0).toBER());const d=yield i.signWithPrivateKey(a.tbsResponseData.tbsView,e,{algorithm:h});a.signature=new Ye({valueHex:d})})()}verify(e={},t=je(!0)){var i=this;return(0,w.A)(function*(){let a=null,l=-1;const h=e.trustedCerts||[];if(!i.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case i.tbsResponseData.responderID instanceof pt:for(const[L,z]of i.certs.entries())if(z.subject.isEqual(i.tbsResponseData.responderID)){l=L;break}break;case i.tbsResponseData.responderID instanceof ge:for(const[L,z]of i.certs.entries())if(Y(yield t.digest({name:"sha-1"},z.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),i.tbsResponseData.responderID.valueBlock.valueHex)){l=L;break}break;default:throw new Error("Wrong value for responderID")}if(-1===l)throw new Error("Correct certificate was not found in OCSP response");a=i.certs[l];const d=[a];for(const L of i.certs){const z=yield Uf(L,a);z&&d.push(z)}if(!(yield new Vc({certs:d,trustedCerts:h}).verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(i.tbsResponseData.tbsView,i.signature,i.certs[l].subjectPublicKeyInfo,i.signatureAlgorithm)})()}}return s.CLASS_NAME="BasicOCSPResponse",s})();const Eh="version",Ch="subject",Nh="subjectPublicKeyInfo",$r="attributes",dl="signatureAlgorithm",fl="signatureValue",Kr="CertificationRequestInfo",Ih=`${Kr}.version`,Th=`${Kr}.subject`,xh=`${Kr}.subjectPublicKeyInfo`,Dc=`${Kr}.attributes`,fg=[Kr,Ih,Th,xh,Dc,dl,fl];function mg(s={}){const r=o(s,"names",{});return new j({name:r.CertificationRequestInfo||Kr,value:[new ee({name:r.CertificationRequestInfoVersion||Ih}),pt.schema(r.subject||{names:{blockName:Th}}),ss.schema({names:{blockName:xh}}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({optional:!0,name:r.CertificationRequestInfoAttributes||Dc,value:st.schema(r.attributes||{})})]})]})}let pg=(()=>{class s extends pe{get tbs(){return E._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Eh,s.defaultValues(Eh)),this.subject=o(e,Ch,s.defaultValues(Ch)),this.subjectPublicKeyInfo=o(e,Nh,s.defaultValues(Nh)),$r in e&&(this.attributes=o(e,$r,s.defaultValues($r))),this.signatureAlgorithm=o(e,dl,s.defaultValues(dl)),this.signatureValue=o(e,fl,s.defaultValues(fl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return Ct;case Eh:return 0;case Ch:return new pt;case Nh:return new ss;case $r:return[];case dl:return new se;case fl:return new Ye;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({value:[mg(t.certificationRequestInfo||{}),new j({name:t.signatureAlgorithm||dl,value:[new Be,new Me({optional:!0})]}),new Ye({name:t.signatureValue||fl})]})}fromSchema(e){V(e,fg);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[Ih].valueBlock.valueDec,this.subject=new pt({schema:t.result[Th]}),this.subjectPublicKeyInfo=new ss({schema:t.result[xh]}),Dc in t.result&&(this.attributes=Array.from(t.result[Dc],i=>new st({schema:i}))),this.signatureAlgorithm=new se({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new ee({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return $r in this&&e.push(new W({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],t=>t.toSchema())})),new j({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbsView.byteLength)return s.schema();const i=ht(this.tbsView);he.assert(i,"PKCS#10 Certificate Request"),t=i.result}else t=this.encodeTBS();return new j({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:E.U$.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return $r in this&&(e.attributes=Array.from(this.attributes||[],t=>t.toJSON())),e}sign(e,t="SHA-1",i=je(!0)){var a=this;return(0,w.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters;a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Ye({valueHex:d})})()}verify(e=je(!0)){var t=this;return(0,w.A)(function*(){return e.verifyWithPublicKey(t.tbsView,t.signatureValue,t.subjectPublicKeyInfo,t.signatureAlgorithm)})()}getPublicKey(e,t=je(!0)){var i=this;return(0,w.A)(function*(){return t.getPublicKey(i.subjectPublicKeyInfo,i.signatureAlgorithm,e)})()}}return s.CLASS_NAME="CertificationRequest",s})();const gn="digestAlgorithm",vn="digest",gg=[gn,vn];let Gr=(()=>{class s extends pe{constructor(e={}){super(),this.digestAlgorithm=o(e,gn,s.defaultValues(gn)),this.digest=o(e,vn,s.defaultValues(vn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gn:return new se;case vn:return new ge;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gn:return se.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case vn:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.digestAlgorithm||{names:{blockName:gn}}),new ge({name:t.digest||vn})]})}fromSchema(e){V(e,gg);const t=me(e,e,s.schema({names:{digestAlgorithm:{names:{blockName:gn}},digest:vn}}));he.assertSchema(t,this.className),this.digestAlgorithm=new se({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new j({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}return s.CLASS_NAME="DigestInfo",s})();const Jr="eContentType",Yt="eContent",vg=[Jr,Yt];let zr=(()=>{class s extends pe{constructor(e={}){if(super(),this.eContentType=o(e,Jr,s.defaultValues(Jr)),Yt in e&&(this.eContent=o(e,Yt,s.defaultValues(Yt)),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const t=new ge({idBlock:{isConstructed:!0},isConstructed:!0});let i=0;const a=this.eContent.valueBlock.valueHexView.slice().buffer;let l=a.byteLength;for(;l>0;){const h=new Uint8Array(a,i,i+65536>a.byteLength?a.byteLength-i:65536),d=new ArrayBuffer(h.length),g=new Uint8Array(d);for(let B=0;B<g.length;B++)g[B]=h[B];t.valueBlock.value.push(new ge({valueHex:d})),l-=h.length,i+=h.length}this.eContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jr:return S;case Yt:return new ge;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jr:return t===S;case Yt:return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(s.defaultValues(Yt));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new Be({name:t.eContentType||S}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Me({name:t.eContent||S})]})]})}fromSchema(e){V(e,vg);const t=me(e,e,s.schema({names:{eContentType:Jr,eContent:Yt}}));he.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Yt in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new Be({value:this.eContentType})),this.eContent&&!1===s.compareWithDefault(Yt,this.eContent)&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new j({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&!1===s.compareWithDefault(Yt,this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}return s.CLASS_NAME="EncapsulatedContentInfo",s})();const wn="mac",yn="macSalt",ps="iterations",wg=[wn,yn,ps];let Sn=(()=>{class s extends pe{constructor(e={}){super(),this.mac=o(e,wn,s.defaultValues(wn)),this.macSalt=o(e,yn,s.defaultValues(yn)),ps in e&&(this.iterations=o(e,ps,s.defaultValues(ps))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wn:return new Gr;case yn:return new ge;case ps:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wn:return Gr.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&Gr.compareWithDefault("digest",t.digest);case yn:return t.isEqual(s.defaultValues(e));case ps:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,optional:t.optional||!0,value:[Gr.schema(t.mac||{names:{blockName:wn}}),new ge({name:t.macSalt||yn}),new ee({optional:!0,name:t.iterations||ps})]})}fromSchema(e){V(e,wg);const t=me(e,e,s.schema({names:{mac:{names:{blockName:wn}},macSalt:yn,iterations:ps}}));he.assertSchema(t,this.className),this.mac=new Gr({schema:t.result.mac}),this.macSalt=t.result.macSalt,ps in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return void 0!==this.iterations&&e.push(new ee({value:this.iterations})),new j({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return void 0!==this.iterations&&(e.iterations=this.iterations),e}}return s.CLASS_NAME="MacData",s})();const bn="hashAlgorithm",An="hashedMessage",yg=[bn,An];let ml=(()=>{class s extends pe{static create(e,t,i=je(!0)){return(0,w.A)(function*(){const a=i.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),l=yield i.digest(e,t);return new s({hashAlgorithm:new se({algorithmId:a,algorithmParams:new ot}),hashedMessage:new ge({valueHex:l})})})()}constructor(e={}){super(),this.hashAlgorithm=o(e,bn,s.defaultValues(bn)),this.hashedMessage=o(e,An,s.defaultValues(An)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bn:return new se;case An:return new ge;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case bn:return t.algorithmId===S&&!("algorithmParams"in t);case An:return 0===t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[se.schema(t.hashAlgorithm||{}),new ge({name:t.hashedMessage||S})]})}fromSchema(e){V(e,yg);const t=me(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:bn}},hashedMessage:An}}));he.assertSchema(t,this.className),this.hashAlgorithm=new se({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new j({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}return s.CLASS_NAME="MessageImprint",s})();const _n="type",gs="attributes",Uc="encodedValue",Ng=[gs];let Ht=(()=>{class s extends pe{constructor(e={}){super(),this.type=o(e,_n,s.defaultValues(_n)),this.attributes=o(e,gs,s.defaultValues(gs)),this.encodedValue=o(e,Uc,s.defaultValues(Uc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _n:return-1;case gs:return[];case Uc:return Ct;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case _n:return t===s.defaultValues(_n);case gs:return 0===t.length;case Uc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new W({name:t.blockName||S,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new He({name:t.attributes||S,value:st.schema()})]})}fromSchema(e){V(e,Ng);const t=me(e,e,s.schema({names:{tagNumber:this.type,attributes:gs}}));if(he.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=E._H.toArrayBuffer(t.result.valueBeforeDecodeView),new Uint8Array(this.encodedValue)[0]=49,gs in t.result)this.attributes=Array.from(t.result.attributes,a=>new st({schema:a}));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(s.compareWithDefault(_n,this.type)||s.compareWithDefault(gs,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new W({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(s.compareWithDefault(_n,this.type)||s.compareWithDefault(gs,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}return s.CLASS_NAME="SignedAndUnsignedAttributes",s})();const qr="version",kn="sid",Wr="digestAlgorithm",di="signedAttrs",Xr="signatureAlgorithm",gl="signature",fi="unsignedAttrs",mi="SignerInfo",Bh=`${mi}.${qr}`,vl=`${mi}.${kn}`,Rh=`${mi}.${Wr}`,Mc=`${mi}.${di}`,Vh=`${mi}.${Xr}`,Oh=`${mi}.${gl}`,Lc=`${mi}.${fi}`,Ig=[Bh,vl,Rh,Mc,Vh,Oh,Lc];let Ph=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,qr,s.defaultValues(qr)),this.sid=o(e,kn,s.defaultValues(kn)),this.digestAlgorithm=o(e,Wr,s.defaultValues(Wr)),di in e&&(this.signedAttrs=o(e,di,s.defaultValues(di))),this.signatureAlgorithm=o(e,Xr,s.defaultValues(Xr)),this.signature=o(e,gl,s.defaultValues(gl)),fi in e&&(this.unsignedAttrs=o(e,fi,s.defaultValues(fi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qr:return 0;case kn:return new Me;case Wr:return new se;case di:return new Ht({type:0});case Xr:return new se;case gl:return new ge;case fi:return new Ht({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case qr:return s.defaultValues(qr)===t;case kn:return t instanceof Me;case Wr:return t instanceof se&&t.isEqual(s.defaultValues(Wr));case di:return Ht.compareWithDefault("type",t.type)&&Ht.compareWithDefault("attributes",t.attributes)&&Ht.compareWithDefault("encodedValue",t.encodedValue);case Xr:return t instanceof se&&t.isEqual(s.defaultValues(Xr));case gl:case fi:return Ht.compareWithDefault("type",t.type)&&Ht.compareWithDefault("attributes",t.attributes)&&Ht.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:mi,value:[new ee({name:t.version||Bh}),new mt({value:[Ot.schema(t.sidSchema||{names:{blockName:vl}}),new mt({value:[new W({optional:!0,name:t.sid||vl,idBlock:{tagClass:3,tagNumber:0},value:[new ge]}),new Ce({optional:!0,name:t.sid||vl,idBlock:{tagClass:3,tagNumber:0}})]})]}),se.schema(t.digestAlgorithm||{names:{blockName:Rh}}),Ht.schema(t.signedAttrs||{names:{blockName:Mc,tagNumber:0}}),se.schema(t.signatureAlgorithm||{names:{blockName:Vh}}),new ge({name:t.signature||Oh}),Ht.schema(t.unsignedAttrs||{names:{blockName:Lc,tagNumber:1}})]})}fromSchema(e){V(e,Ig);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.version=t.result[Bh].valueBlock.valueDec;const i=t.result[vl];this.sid=1===i.idBlock.tagClass?new Ot({schema:i}):i,this.digestAlgorithm=new se({schema:t.result[Rh]}),Mc in t.result&&(this.signedAttrs=new Ht({type:0,schema:t.result[Mc]})),this.signatureAlgorithm=new se({schema:t.result[Vh]}),this.signature=t.result[Oh],Lc in t.result&&(this.unsignedAttrs=new Ht({type:1,schema:t.result[Lc]}))}toSchema(){if(s.compareWithDefault(kn,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new ee({value:this.version})),e.push(this.sid instanceof Ot?this.sid.toSchema():this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&!1===s.compareWithDefault(di,this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&!1===s.compareWithDefault(fi,this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new j({value:e})}toJSON(){if(s.compareWithDefault(kn,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof Me||(e.sid=this.sid.toJSON()),this.signedAttrs&&!1===s.compareWithDefault(di,this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&!1===s.compareWithDefault(fi,this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}return s.CLASS_NAME="SignerInfo",s})();const wl="version",yl="policy",Sl="messageImprint",bl="serialNumber",Al="genTime",En="ordering",Cn="nonce",Yr="accuracy",Zr="tsa",Qr="extensions",Zt="TSTInfo",Dh=`${Zt}.${wl}`,Uh=`${Zt}.${yl}`,Mh=`${Zt}.${Sl}`,Lh=`${Zt}.${bl}`,Fh=`${Zt}.${Al}`,Fc=`${Zt}.${Yr}`,Hc=`${Zt}.${En}`,jc=`${Zt}.${Cn}`,$c=`${Zt}.${Zr}`,Kc=`${Zt}.${Qr}`,Tg=[Dh,Uh,Mh,Lh,Fh,Fc,Hc,jc,$c,Kc];let xg=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,wl,s.defaultValues(wl)),this.policy=o(e,yl,s.defaultValues(yl)),this.messageImprint=o(e,Sl,s.defaultValues(Sl)),this.serialNumber=o(e,bl,s.defaultValues(bl)),this.genTime=o(e,Al,s.defaultValues(Al)),Yr in e&&(this.accuracy=o(e,Yr,s.defaultValues(Yr))),En in e&&(this.ordering=o(e,En,s.defaultValues(En))),Cn in e&&(this.nonce=o(e,Cn,s.defaultValues(Cn))),Zr in e&&(this.tsa=o(e,Zr,s.defaultValues(Zr))),Qr in e&&(this.extensions=o(e,Qr,s.defaultValues(Qr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return 0;case yl:return S;case Sl:return new ml;case bl:return new ee;case Al:return new Date(0,0,0);case Yr:return new On;case En:return!1;case Cn:return new ee;case Zr:return new bt;case Qr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wl:case yl:case Al:case En:return t===s.defaultValues(En);case Sl:return ml.compareWithDefault(bn,t.hashAlgorithm)&&ml.compareWithDefault(An,t.hashedMessage);case bl:case Cn:return t.isEqual(s.defaultValues(Cn));case Yr:return On.compareWithDefault(Is,t.seconds)&&On.compareWithDefault(Ts,t.millis)&&On.compareWithDefault(xs,t.micros);case Zr:return bt.compareWithDefault(fa,t.type)&&bt.compareWithDefault(ma,t.value);case Qr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||Zt,value:[new ee({name:t.version||Dh}),new Be({name:t.policy||Uh}),ml.schema(t.messageImprint||{names:{blockName:Mh}}),new ee({name:t.serialNumber||Lh}),new ft({name:t.genTime||Fh}),On.schema(t.accuracy||{names:{blockName:Fc}}),new Ss({name:t.ordering||Hc,optional:!0}),new ee({name:t.nonce||jc,optional:!0}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[bt.schema(t.tsa||{names:{blockName:$c}})]}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.extensions||Kc,value:Oi.schema(t.extension||{})})]})]})}fromSchema(e){V(e,Tg);const t=me(e,e,s.schema());he.assertSchema(t,this.className),this.version=t.result[Dh].valueBlock.valueDec,this.policy=t.result[Uh].valueBlock.toString(),this.messageImprint=new ml({schema:t.result[Mh]}),this.serialNumber=t.result[Lh],this.genTime=t.result[Fh].toDate(),Fc in t.result&&(this.accuracy=new On({schema:t.result[Fc]})),Hc in t.result&&(this.ordering=t.result[Hc].valueBlock.value),jc in t.result&&(this.nonce=t.result[jc]),$c in t.result&&(this.tsa=new bt({schema:t.result[$c]})),Kc in t.result&&(this.extensions=Array.from(t.result[Kc],i=>new Oi({schema:i})))}toSchema(){const e=[];return e.push(new ee({value:this.version})),e.push(new Be({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new ft({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),void 0!==this.ordering&&e.push(new Ss({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),void 0!==this.ordering&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}verify(e,t=je(!0)){var i=this;return(0,w.A)(function*(){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const a=e.data;if(e.notBefore&&i.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&i.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const l=t.getAlgorithmByOID(i.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),h=yield t.digest(l.name,new Uint8Array(a));return E._H.isEqual(h,i.messageImprint.hashedMessage.valueBlock.valueHexView)})()}}return s.CLASS_NAME="TSTInfo",s})();const ea="version",_l="digestAlgorithms",kl="encapContentInfo",ta="certificates",sa="crls",El="signerInfos",Cl="ocsps",Nn="SignedData",Hh=`${Nn}.${ea}`,Gc=`${Nn}.${_l}`,jh=`${Nn}.${kl}`,Jc=`${Nn}.${ta}`,zc=`${Nn}.${sa}`,qc=`${Nn}.${El}`,Bg=[Hh,Gc,jh,Jc,zc,qc];class Pt extends Error{constructor({message:r,code:e=0,date:t=new Date,signatureVerified:i=null,signerCertificate:a=null,signerCertificateVerified:l=null,timestampSerial:h=null,certificatePath:d=[]}){super(r),this.name="SignedDataVerifyError",this.date=t,this.code=e,this.timestampSerial=h,this.signatureVerified=i,this.signerCertificate=a,this.signerCertificateVerified=l,this.certificatePath=d}}let Jf=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,ea,s.defaultValues(ea)),this.digestAlgorithms=o(e,_l,s.defaultValues(_l)),this.encapContentInfo=o(e,kl,s.defaultValues(kl)),ta in e&&(this.certificates=o(e,ta,s.defaultValues(ta))),sa in e&&(this.crls=o(e,sa,s.defaultValues(sa))),Cl in e&&(this.ocsps=o(e,Cl,s.defaultValues(Cl))),this.signerInfos=o(e,El,s.defaultValues(El)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ea:return 0;case _l:return[];case kl:return new zr;case ta:case sa:case Cl:case El:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ea:return t===s.defaultValues(ea);case kl:return zr.compareWithDefault("eContentType",t.eContentType)&&zr.compareWithDefault("eContent",t.eContent);case _l:case ta:case sa:case Cl:case El:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return void 0===t.optional&&(t.optional=!1),new j({name:t.blockName||Nn,optional:t.optional,value:[new ee({name:t.version||Hh}),new Et({value:[new He({name:t.digestAlgorithms||Gc,value:se.schema()})]}),zr.schema(t.encapContentInfo||{names:{blockName:jh}}),new W({name:t.certificates||Jc,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:lr.schema().valueBlock.value}),new W({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pc.schema(t.crls||{names:{crls:zc}}).valueBlock.value}),new Et({value:[new He({name:t.signerInfos||qc,value:Ph.schema()})]})]})}fromSchema(e){V(e,Bg);const t=me(e,e,s.schema());if(he.assertSchema(t,this.className),this.version=t.result[Hh].valueBlock.valueDec,Gc in t.result&&(this.digestAlgorithms=Array.from(t.result[Gc],i=>new se({schema:i}))),this.encapContentInfo=new zr({schema:t.result[jh]}),Jc in t.result){const i=new lr({schema:new Et({value:t.result[Jc].valueBlock.value})});this.certificates=i.certificates.slice(0)}zc in t.result&&(this.crls=Array.from(t.result[zc],i=>1===i.idBlock.tagClass?new dc({schema:i}):(i.idBlock.tagClass=1,i.idBlock.tagNumber=16,new mc({schema:i})))),qc in t.result&&(this.signerInfos=Array.from(t.result[qc],i=>new Ph({schema:i})))}toSchema(e=!1){const t=[];if(this.version=this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Ys)||this.crls&&this.crls.length&&this.crls.some(i=>i instanceof mc)?5:this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Wi)?4:this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Pu)||this.signerInfos.some(i=>3===i.version)||this.encapContentInfo.eContentType!==s.ID_DATA?3:1,t.push(new ee({value:this.version})),t.push(new Et({value:Array.from(this.digestAlgorithms,i=>i.toSchema())})),t.push(this.encapContentInfo.toSchema()),this.certificates){const a=new lr({certificates:this.certificates}).toSchema();t.push(new W({idBlock:{tagClass:3,tagNumber:0},value:a.valueBlock.value}))}return this.crls&&t.push(new W({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,i=>{if(i instanceof mc){const a=i.toSchema();return a.idBlock.tagClass=3,a.idBlock.tagNumber=1,a}return i.toSchema(e)})})),t.push(new Et({value:Array.from(this.signerInfos,i=>i.toSchema())})),new j({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,t=>t.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,t=>t.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,t=>t.toJSON())),this.crls&&(e.crls=Array.from(this.crls,t=>t.toJSON())),e}verify({signer:e=-1,data:t=Ct,trustedCerts:i=[],checkDate:a=new Date,checkChain:l=!1,passedWhenNotRevValues:h=!1,extendedMode:d=!1,findOrigin:g=null,findIssuer:B=null}={},L=je(!0)){var z=this;return(0,w.A)(function*(){let K=null,oe=null;try{let _e=Ct,we=S,re=[];const ye=z.signerInfos[e];if(!ye)throw new Pt({date:a,code:1,message:"Unable to get signer by supplied index"});if(!z.certificates)throw new Pt({date:a,code:2,message:"No certificates attached to this signed data"});if(ye.sid instanceof Ot){for(const Ae of z.certificates)if(Ae instanceof Jt&&Ae.issuer.isEqual(ye.sid.issuer)&&Ae.serialNumber.isEqual(ye.sid.serialNumber)){K=Ae;break}}else{const Ae=ye.sid,Ie=Ae.idBlock.isConstructed?Ae.valueBlock.value[0].valueBlock.valueHex:Ae.valueBlock.valueHex;for(const Te of z.certificates)if(Te instanceof Jt&&Y(yield L.digest({name:"sha-1"},Te.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),Ie)){K=Te;break}}if(!K)throw new Pt({date:a,code:3,message:"Unable to find signer certificate"});if("1.2.840.113549.1.9.16.1.4"===z.encapContentInfo.eContentType){if(!z.encapContentInfo.eContent)throw new Pt({date:a,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:K,timestampSerial:oe,signerCertificateVerified:!0});let Ae;try{Ae=xg.fromBER(z.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new Pt({date:a,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:K,timestampSerial:oe,signerCertificateVerified:!0})}if(a=Ae.genTime,oe=Ae.serialNumber.valueBlock.valueHexView.slice(),0===t.byteLength)throw new Pt({date:a,code:4,message:"Missed detached data input array"});if(!(yield Ae.verify({data:t},L)))throw new Pt({date:a,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:K,timestampSerial:oe,signerCertificateVerified:!0})}if(l){const Ae=z.certificates.filter(ze=>ze instanceof Jt&&!!Uf(ze,K)),Ie={checkDate:a,certs:Ae,trustedCerts:i};B&&(Ie.findIssuer=B),g&&(Ie.findOrigin=g);const Te=new Vc(Ie);if(Te.certs.push(K),z.crls)for(const ze of z.crls)"thisUpdate"in ze?Te.crls.push(ze):"1.3.6.1.5.5.7.48.1.1"===ze.otherRevInfoFormat&&Te.ocsps.push(new dg({schema:ze.otherRevInfo}));z.ocsps&&Te.ocsps.push(...z.ocsps);const De=yield Te.verify({passedWhenNotRevValues:h},L).catch(ze=>{throw new Pt({date:a,code:5,message:`Validation of signer's certificate failed with error: ${ze instanceof Object?ze.resultMessage:ze}`,signerCertificate:K,signerCertificateVerified:!1})});if(De.certificatePath&&(re=De.certificatePath),!De.result)throw new Pt({date:a,code:5,message:`Validation of signer's certificate failed: ${De.resultMessage}`,signerCertificate:K,signerCertificateVerified:!1})}const le=L.getAlgorithmByOID(ye.digestAlgorithm.algorithmId);if(!("name"in le))throw new Pt({date:a,code:7,message:`Unsupported signature algorithm: ${ye.digestAlgorithm.algorithmId}`,signerCertificate:K,signerCertificateVerified:!0});we=le.name;const fe=z.encapContentInfo.eContent;if(fe)t=1===fe.idBlock.tagClass&&4===fe.idBlock.tagNumber?fe.getValue():fe.valueBlock.valueBeforeDecodeView;else if(0===t.byteLength)throw new Pt({date:a,code:8,message:"Missed detached data input array",signerCertificate:K,signerCertificateVerified:!0});if(ye.signedAttrs){let Ae=!1,Ie=!1;for(const Te of ye.signedAttrs.attributes)if("1.2.840.113549.1.9.3"===Te.type&&(Ae=!0),"1.2.840.113549.1.9.4"===Te.type&&(Ie=!0,_e=Te.values[0].valueBlock.valueHex),Ae&&Ie)break;if(!1===Ae)throw new Pt({date:a,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:K,signerCertificateVerified:!0});if(!1===Ie)throw new Pt({date:a,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:K,signerCertificateVerified:!0})}if(ye.signedAttrs){if(!Y(yield L.digest(we,new Uint8Array(t)),_e))throw new Pt({date:a,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:K,timestampSerial:oe,signerCertificateVerified:!0});t=ye.signedAttrs.encodedValue}const ve="1.2.840.113549.1.1.1"===ye.signatureAlgorithm.algorithmId?yield L.verifyWithPublicKey(t,ye.signature,K.subjectPublicKeyInfo,ye.signatureAlgorithm,we):yield L.verifyWithPublicKey(t,ye.signature,K.subjectPublicKeyInfo,ye.signatureAlgorithm);return d?{date:a,code:14,message:S,signatureVerified:ve,signerCertificate:K,timestampSerial:oe,signerCertificateVerified:!0,certificatePath:re}:ve}catch(_e){throw _e instanceof Pt?_e:new Pt({date:a,code:15,message:`Error during verification: ${_e instanceof Error?_e.message:_e}`,signatureVerified:null,signerCertificate:K,timestampSerial:oe,signerCertificateVerified:!0})}})()}sign(e,t,i="SHA-1",a=Ct,l=je(!0)){var h=this;return(0,w.A)(function*(){var d;if(!e)throw new Error("Need to provide a private key for signing");const g=h.signerInfos[t];if(!g)throw new RangeError("SignerInfo index is out of range");(null===(d=g.signedAttrs)||void 0===d||!d.attributes.length)&&"hash"in e.algorithm&&"hash"in e.algorithm&&e.algorithm.hash&&(i=e.algorithm.hash.name);const B=l.getOIDByAlgorithm({name:i},!0,"hashAlgorithm");0===h.digestAlgorithms.filter(oe=>oe.algorithmId===B).length&&h.digestAlgorithms.push(new se({algorithmId:B,algorithmParams:new ot})),g.digestAlgorithm=new se({algorithmId:B,algorithmParams:new ot});const L=yield l.getSignatureParameters(e,i),z=L.parameters;if(g.signatureAlgorithm=L.signatureAlgorithm,g.signedAttrs)0!==g.signedAttrs.encodedValue.byteLength?a=g.signedAttrs.encodedValue:(a=g.signedAttrs.toSchema().toBER(),E._H.toUint8Array(a)[0]=49);else{const oe=h.encapContentInfo.eContent;if(oe)a=1===oe.idBlock.tagClass&&4===oe.idBlock.tagNumber?oe.getValue():oe.valueBlock.valueBeforeDecodeView;else if(0===a.byteLength)throw new Error("Missed detached data input array")}const K=yield l.signWithPrivateKey(a,e,z);g.signature=new ge({valueHex:K})})()}}return s.CLASS_NAME="SignedData",s.ID_DATA=vu,s})();const In="version",Tn="authSafe",vs="macData",Nl="parsedValue",Rg=[In,Tn,vs];let Vg=(()=>{class s extends pe{constructor(e={}){super(),this.version=o(e,In,s.defaultValues(In)),this.authSafe=o(e,Tn,s.defaultValues(Tn)),vs in e&&(this.macData=o(e,vs,s.defaultValues(vs))),Nl in e&&(this.parsedValue=o(e,Nl,s.defaultValues(Nl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case In:return 3;case Tn:return new Mt;case vs:return new Sn;case Nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case In:return t===s.defaultValues(e);case Tn:return Mt.compareWithDefault("contentType",t.contentType)&&Mt.compareWithDefault("content",t.content);case vs:return Sn.compareWithDefault("mac",t.mac)&&Sn.compareWithDefault("macSalt",t.macSalt)&&Sn.compareWithDefault("iterations",t.iterations);case Nl:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||S,value:[new ee({name:t.version||In}),Mt.schema(t.authSafe||{names:{blockName:Tn}}),Sn.schema(t.macData||{names:{blockName:vs,optional:!0}})]})}fromSchema(e){V(e,Rg);const t=me(e,e,s.schema({names:{version:In,authSafe:{names:{blockName:Tn}},macData:{names:{blockName:vs}}}}));he.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new Mt({schema:t.result.authSafe}),vs in t.result&&(this.macData=new Sn({schema:t.result.macData}))}toSchema(){const e=[new ee({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new j({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}makeInternalValues(e={},t=je(!0)){var i=this;return(0,w.A)(function*(){if(lt.assert(e,"parameters","object"),!i.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(tt.assertEmpty(i.parsedValue.integrityMode,"integrityMode","parsedValue"),tt.assertEmpty(i.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),i.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new tt("iterations");tt.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),tt.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),tt.assertEmpty(e.password,"password");const a=new ArrayBuffer(64),l=new Uint8Array(a);t.getRandomValues(l);const h=i.parsedValue.authenticatedSafe.toSchema().toBER(!1);i.authSafe=new Mt({contentType:Mt.DATA,content:new ge({valueHex:h})});const d=yield t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:a,iterationCount:e.iterations,contentToStamp:h});i.macData=new Sn({mac:new Gr({digestAlgorithm:new se({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new ge({valueHex:d})}),macSalt:new ge({valueHex:a}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new tt("signingCertificate");tt.assertEmpty(e.privateKey,"privateKey"),tt.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const a=i.parsedValue.authenticatedSafe.toSchema().toBER(!1),l=new Jf({version:1,encapContentInfo:new zr({eContentType:"1.2.840.113549.1.7.1",eContent:new ge({valueHex:a})}),certificates:[e.signingCertificate]}),h=yield t.digest({name:e.hashAlgorithm},new Uint8Array(a)),d=[];d.push(new st({type:"1.2.840.113549.1.9.3",values:[new Be({value:"1.2.840.113549.1.7.1"})]})),d.push(new st({type:"1.2.840.113549.1.9.5",values:[new Vn({valueDate:new Date})]})),d.push(new st({type:"1.2.840.113549.1.9.4",values:[new ge({valueHex:h})]})),l.signerInfos.push(new Ph({version:1,sid:new Ot({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new Ht({type:0,attributes:d})})),yield l.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),i.authSafe=new Mt({contentType:"1.2.840.113549.1.7.2",content:l.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${i.parsedValue.integrityMode}`)}})()}parseInternalValues(e,t=je(!0)){var i=this;return(0,w.A)(function*(){switch(lt.assert(e,"parameters","object"),void 0===e.checkIntegrity&&(e.checkIntegrity=!0),i.parsedValue={},i.authSafe.contentType){case Mt.DATA:{tt.assertEmpty(e.password,"password"),i.parsedValue.integrityMode=0,lt.assert(i.authSafe.content,"authSafe.content",ge);const a=i.authSafe.content.getValue();if(i.parsedValue.authenticatedSafe=hh.fromBER(a),e.checkIntegrity){if(!i.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const l=t.getAlgorithmByOID(i.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!(yield t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:l.name,salt:E._H.toArrayBuffer(i.macData.macSalt.valueBlock.valueHexView),iterationCount:i.macData.iterations||1,contentToVerify:a,signatureToVerify:E._H.toArrayBuffer(i.macData.mac.digest.valueBlock.valueHexView)})))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Mt.SIGNED_DATA:{i.parsedValue.integrityMode=1;const a=new Jf({schema:i.authSafe.content}),l=a.encapContentInfo.eContent;tt.assert(l,"eContent","cmsSigned.encapContentInfo"),lt.assert(l,"eContent",ge);const h=l.getValue();if(i.parsedValue.authenticatedSafe=hh.fromBER(h),!(yield a.verify({signer:0,checkChain:!1},t)))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${i.authSafe.contentType}`)}})()}}return s.CLASS_NAME="PFX",s})();!function Yg(){if(typeof self<"u"){if("crypto"in self){let s="webcrypto";"webkitSubtle"in self.crypto&&(s="safari"),_f(s,new Kl({name:s,crypto}))}}else if(typeof crypto<"u"&&"webcrypto"in crypto){const s="NodeJS ^15",r=crypto.webcrypto;_f(s,new Kl({name:s,crypto:r}))}}();const Zg=function(){var s=(0,w.A)(function*(r,e,t,i,a,l){try{const h={name:"ECDSA",namedCurve:"P-384",typedCurve:""},d=yield crypto.subtle.generateKey(h,!0,["sign","verify"]),g=new pg;g.subject.typesAndValues.push(new hu({type:"2.5.4.3",value:new Kt({value:"Test"})})),yield g.subjectPublicKeyInfo.importKey(d.publicKey),yield g.sign(d.privateKey,"SHA-384");const B=g.toSchema().toBER(!1),L=Il(B,"CERTIFICATE REQUEST"),z=yield new Promise((we,re)=>{r.issueNewCertificate(L,e,t,i).subscribe(ye=>{},ye=>{201===ye.status?we(ye.error.text):(console.error("Error when trying to issue new certificate:",ye.error.message),re(ye))})}),K=yield crypto.subtle.exportKey("pkcs8",d.privateKey),oe=yield crypto.subtle.exportKey("spki",d.publicKey),_e=new Gn({schema:ht(K).result});if(a){const re=Qg(z).map(fe=>new Jt({schema:ht(fe).result})),ye=e0(),le=yield t0(_e,re,ye);return{certificate:z,publicKey:Il(oe,"PUBLIC KEY"),privateKey:Il(K,"PRIVATE KEY"),pkcs12Keystore:le,keystorePassword:ye}}return{certificate:z,publicKey:Il(oe,"PUBLIC KEY"),privateKey:Il(K,"PRIVATE KEY")}}catch(h){return void console.error("Error while issuing new certificate:",h)}});return function(e,t,i,a,l,h){return s.apply(this,arguments)}}(),Il=(s,r)=>{let e=E.U$.ToBase64(s),t="";for(;e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return`-----BEGIN ${r}-----\n${t}-----END ${r}-----\n`},Qg=s=>{let r=s.split(/-----END CERTIFICATE-----/);return r=r.slice(0,r.length-1),r.map(t=>t.split(/-----BEGIN CERTIFICATE-----/)[1].replace(/\n/gm,"")).map(t=>E.U$.FromBase64(t))},e0=()=>{const r=new Uint32Array(26);crypto.getRandomValues(r);let e="";for(const t of r)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_^$#&!%"[t%70];return e},t0=function(){var s=(0,w.A)(function*(r,e,t){const i=new ArrayBuffer(4);_u(new Uint8Array(i));const l=new ArrayBuffer(4);_u(new Uint8Array(l));const d=new ArrayBuffer(4);_u(new Uint8Array(d));const B=new ArrayBuffer(1);new Uint8Array(B)[0]|=128;const z=new Ye({valueHex:B,unusedBits:7});r.attributes=[new st({type:"2.5.29.15",values:[z]})];let K="";e[0].subject.typesAndValues.forEach(re=>{"2.5.4.3"===re.type&&(K=re.value.valueBlock.value)});let oe="";e[1].subject.typesAndValues.forEach(re=>{"2.5.4.3"===re.type&&(oe=re.value.valueBlock.value)});const _e=new Vg({parsedValue:{integrityMode:0,authenticatedSafe:new hh({parsedValue:{safeContents:[{privacyMode:0,value:new tn({safeBags:[new Ko({bagId:"1.2.840.113549.1.12.10.1.2",bagValue:new Mf({parsedValue:r}),bagAttributes:[new st({type:"1.2.840.113549.1.9.20",values:[new qt({value:"PKCS8ShroudedKeyBag from PKIjs"})]}),new st({type:"1.2.840.113549.1.9.21",values:[new ge({valueHex:i})]}),new st({type:"1.3.6.1.4.1.311.17.1",values:[new qt({value:"MCP using https://pkijs.org/"})]})]})]})},{privacyMode:1,value:new tn({safeBags:[new Ko({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new qu({parsedValue:e[0]}),bagAttributes:[new st({type:"1.2.840.113549.1.9.20",values:[new qt({value:K})]}),new st({type:"1.2.840.113549.1.9.21",values:[new ge({valueHex:l})]}),new st({type:"1.3.6.1.4.1.311.17.1",values:[new qt({value:"MCP using https://pkijs.org/"})]})]}),new Ko({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new qu({parsedValue:e[1]}),bagAttributes:[new st({type:"1.2.840.113549.1.9.20",values:[new qt({value:oe})]}),new st({type:"1.2.840.113549.1.9.21",values:[new ge({valueHex:d})]}),new st({type:"1.3.6.1.4.1.311.17.1",values:[new qt({value:"MCP using https://pkijs.org/"})]})]})]})}]}})}}),we=m(t);return yield _e.parsedValue.authenticatedSafe.parsedValue.safeContents[0].value.safeBags[0].bagValue.makeInternalValues({password:we,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-1",iterationCount:1e5}),yield _e.parsedValue.authenticatedSafe.makeInternalValues({safeContents:[{},{password:we,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-1",iterationCount:1e5}]}),yield _e.makeInternalValues({password:we,iterations:1e5,pbkdf2HashAlgorithm:"SHA-256",hmacHashAlgorithm:"SHA-256"}),_e.toSchema().toBER(!1)});return function(e,t,i){return s.apply(this,arguments)}}();var qf=O(888),s0=O(3830),Wc=O(1066),n0=O(2537);const r0={serialNumber:{title:"Serial number",type:"string"},start:{title:"Valid from",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)},end:{title:"Valid until",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)}},a0={serialNumber:{title:"Serial number",type:"string"},revokedAt:{title:"Revoked from",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)},revokeReason:{title:"Reason",type:"string"}},o0=s=>[s];function l0(s,r){if(1&s&&n.nrm(0,"app-smart-table",0),2&s){const e=n.XpG();n.Y8G("labels",e.columnsForActive)("data",e.data)("selectedIds",n.eq3(7,o0,e.serial))("onDelete",e.revoke)("onDownload",e.download)("onAdd",e.add)("itemType",e.itemType)}}function c0(s,r){if(1&s&&n.nrm(0,"app-smart-table",1),2&s){const e=n.XpG();n.Y8G("labels",e.columnsForRevoked)("data",e.data)("itemType",e.itemType)}}function u0(s,r){if(1&s&&(n.j41(0,"h1"),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("The given context is wrong! : ",e.context,"")}}let h0=(()=>{class s{constructor(){this.context="active",this.data=[],this.onAdd=new n.bkB,this.onDownload=new n.bkB,this.onRevoke=new n.bkB,this.itemType=c.SP.Certificate,this.download=e=>{this.onDownload.emit(e)},this.add=()=>{this.onAdd.emit()},this.revoke=e=>{this.onRevoke.emit(e)},this.empty=[],this.columnsForActive=r0,this.columnsForRevoked=a0}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-cert-table"]],inputs:{context:"context",data:"data",serial:"serial"},outputs:{onAdd:"onAdd",onDownload:"onDownload",onRevoke:"onRevoke"},standalone:!0,features:[n.aNF],decls:3,vars:1,consts:[["deleteText","Revoke","placeholder","There is no issued certificate.",3,"labels","data","selectedIds","onDelete","onDownload","onAdd","itemType"],["placeholder","There is no revoked certificate.",3,"labels","data","itemType"]],template:function(t,i){1&t&&n.DNE(0,l0,1,9,"app-smart-table",0)(1,c0,1,3,"app-smart-table",1)(2,u0,2,1,"h1"),2&t&&n.vxM("active"===i.context?0:"revoked"===i.context?1:2)},dependencies:[n0.B]})}return s})();function f0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.xc7("width",400,"px"),n.R7$(),n.JRh(t.convertTimeString(t.item[e.key]))}}function m0(s,r){1&s&&(n.j41(0,"span",7),n.EFF(1,"Active"),n.k0s())}function p0(s,r){if(1&s&&(n.j41(0,"span",11),n.EFF(1),n.k0s()),2&s){const e=r.$implicit;n.R7$(),n.JRh(e)}}function g0(s,r){if(1&s&&n.Z7z(0,p0,2,1,"span",11,n.fX1),2&s){const e=n.XpG(3).$implicit,t=n.XpG();n.Dyx(t.item[e.key])}}function v0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No value assigned"),n.k0s())}function w0(s,r){if(1&s&&n.DNE(0,g0,2,0)(1,v0,2,0,"button",10),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.vxM(t.item[e.key].length>0?0:1)}}function y0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(e);const i=n.XpG(2).$implicit,a=n.XpG();return n.Njj(a.openXmlDialog(a.item[i.key]))}),n.EFF(1,"View XML"),n.k0s()}}function S0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(e);const i=n.XpG(2).$implicit,a=n.XpG();return n.Njj(a.downloadDocFile(a.item[i.key]))}),n.EFF(1,"Download file"),n.k0s()}}function b0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.organization.name," (",e.item.organization.id,")")}}function A0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.subscriptionPlan.name," (",e.item.subscriptionPlan.id,")")}}function _0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.organizationSubscription.subscriptionPlan.name," (",e.item.organizationSubscription.id,")")}}function k0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.xc7("width",400,"px"),n.R7$(),n.JRh(t.item[e.key])}}function E0(s,r){if(1&s&&n.DNE(0,f0,2,3,"span",6)(1,m0,2,0,"span",7)(2,w0,2,1)(3,y0,2,0,"button",8)(4,S0,2,0,"button",8)(5,b0,2,4,"span",6)(6,A0,2,4,"span",6)(7,_0,2,4,"span",6)(8,k0,2,3,"span",6),2&s){const e=n.XpG().$implicit,t=n.XpG();n.vxM(t.isTimestampFormat(e.key)?0:"boolean"===e.value.type?1:"serviceType"===e.key||"dataProductType"===e.key?2:"instanceAsXml"===e.key?3:"instanceAsDoc"===e.key?4:"organizationId"===e.value.type?5:"subscriptionPlanId"===e.value.type?6:"organizationSubscriptionId"===e.value.type?7:8)}}function C0(s,r){1&s&&(n.j41(0,"span",13),n.EFF(1,"Inactive"),n.k0s())}function N0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No XML data available"),n.k0s())}function I0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No document available"),n.k0s())}function T0(s,r){1&s&&n.nrm(0,"span",9),2&s&&n.xc7("width",400,"px")}function x0(s,r){if(1&s&&n.DNE(0,C0,2,0,"span",13)(1,N0,2,0,"button",10)(2,I0,2,0,"button",10)(3,T0,1,2,"span",6),2&s){const e=n.XpG().$implicit;n.vxM("boolean"===e.value.type?0:"instanceAsXml"===e.key?1:"instanceAsDoc"===e.key?2:3)}}function B0(s,r){if(1&s&&(n.j41(0,"div",2)(1,"label",3),n.EFF(2),n.k0s(),n.j41(3,"div",4)(4,"div",5),n.DNE(5,E0,9,1)(6,x0,4,1),n.k0s()()()),2&s){const e=r.$implicit,t=n.XpG();n.R7$(2),n.JRh(e.value.title),n.R7$(3),n.vxM(t.item[e.key]?5:6)}}function R0(s,r){if(1&s){const e=n.RV6();n.j41(0,"div",2)(1,"label",3),n.EFF(2,"Active certificates"),n.k0s(),n.j41(3,"div",14)(4,"app-cert-table",15),n.bIt("onAdd",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.openCertModal())})("onDownload",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickDownloadBtn(i))})("onRevoke",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickRevokeBtn(i))}),n.k0s()()(),n.j41(5,"div",2)(6,"label",3),n.EFF(7,"Revoked certificates"),n.k0s(),n.j41(8,"div",14),n.nrm(9,"app-cert-table",16),n.k0s()()}if(2&s){const e=n.XpG();n.R7$(4),n.Y8G("data",e.activeCertificates)("serial",e.serial),n.R7$(5),n.Y8G("data",e.revokedCertificates)}}let V0=(()=>{class s{constructor(){this.itemType=c.SP.None,this.item={},this.showCertTables=!1,this.activeCertificates=[],this.revokedCertificates=[],this.columnForMenu={},this.serial=void 0,this.openXmlDialogCall=new n.bkB,this.downloadDocFileCall=new n.bkB,this.clickRevokeBtnCall=new n.bkB,this.clickDownloadBtnCall=new n.bkB,this.openCertModalCall=new n.bkB,this.convertTimeString=e=>(0,Wc.Y)(e),this.sortColumnForMenu=(e,t)=>((s,r)=>s.order>r.order?-1:1)(e,t),this.openXmlDialog=e=>{this.openXmlDialogCall.emit(e)},this.downloadDocFile=e=>{this.downloadDocFileCall.emit(e)},this.openCertModal=()=>{this.openCertModalCall.emit()},this.clickRevokeBtn=e=>{this.clickRevokeBtnCall.emit(e)},this.clickDownloadBtn=e=>{this.clickDownloadBtnCall.emit(e)}}isTimestampFormat(e){return c.N3.includes(e)}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-item-table"]],inputs:{itemType:"itemType",item:"item",showCertTables:"showCertTables",activeCertificates:"activeCertificates",revokedCertificates:"revokedCertificates",columnForMenu:"columnForMenu",serial:"serial"},outputs:{openXmlDialogCall:"openXmlDialogCall",downloadDocFileCall:"downloadDocFileCall",clickRevokeBtnCall:"clickRevokeBtnCall",clickDownloadBtnCall:"clickDownloadBtnCall",openCertModalCall:"openCertModalCall"},standalone:!0,features:[n.aNF],decls:4,vars:5,consts:[[1,"clr-form","clr-form-horizontal"],["class","clr-form-horizontal clr-form-control clr-row",4,"ngFor","ngForOf"],[1,"clr-form-horizontal","clr-form-control","clr-row"],[1,"clr-control-label","clr-col-12","clr-col-md-2"],["ng-reflect-ng-class","clr-col-md-10 clr-col-12",1,"clr-control-container","clr-col-md-10","clr-col-12"],[1,"clr-input-wrapper"],["clrinput","","type","string","ng-reflect-name","mrn","ng-reflect-required","true","required","","aria-describedby","clr-form-control-1-helper",1,"clr-input","ng-untouched","ng-pristine","ng-invalid","ng-star-inserted",3,"width"],[1,"label","label-success"],[1,"btn","btn-sm"],["clrinput","","type","string","ng-reflect-name","mrn","ng-reflect-required","true","required","","aria-describedby","clr-form-control-1-helper",1,"clr-input","ng-untouched","ng-pristine","ng-invalid","ng-star-inserted"],["disabled","",1,"btn","btn-sm","btn-outline"],[1,"label","label-light-blue"],[1,"btn","btn-sm",3,"click"],[1,"label","label-danger"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],["context","active",3,"onAdd","onDownload","onRevoke","data","serial"],["context","revoked",3,"data"]],template:function(t,i){1&t&&(n.j41(0,"div",0),n.DNE(1,B0,7,2,"div",1),n.nI1(2,"keyvalue"),n.DNE(3,R0,10,3),n.k0s()),2&t&&(n.R7$(),n.Y8G("ngForOf",n.i5U(2,2,i.columnForMenu,i.sortColumnForMenu)),n.R7$(2),n.vxM(i.showCertTables?3:-1))},dependencies:[h0,I.pM,u.G,I.lG]})}return s})();var Wf=O(2269);let O0=(()=>{class s{constructor(e,t){this.usersService=e,this.organizationsService=t}ngOnInit(){}formatCerts(e){let t=[];for(const i in e){const a=e[i];for(const l in a)e[i][l]=a[l];a.revoked&&(a.revokeInfo=a.revokedAt),t.push(a)}return t}splitByRevokeStatus(e){let t=[],i=[];for(const a in e){const l=e[a];l.revoked?i.push(l):t.push(l)}return t.sort((a,l)=>a.end-l.end),i.sort((a,l)=>a.end-l.end),{activeCertificates:this.formatCerts(t),revokedCertificates:this.formatCerts(i)}}issueNewCertificate(e,t,i,a){if(null==t||!i)throw new Error("Internal state lost");switch(t){case c.SP.Organization:return this.organizationsService.newOrgCertFromCsr(e,i);case c.SP.User:return this.usersService.newUserCertFromCsr(e,a,i);default:throw new Error("Unknown item type")}}revokeCertificate(e,t,i,a,l){if(null==e||!t)throw new Error("Internal state lost");throw new Error("Unknown item type")}static#e=this.\u0275fac=function(t){return new(t||s)(n.KVO(Wf.Tz),n.KVO(Wf.PZ))};static#t=this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Xf=O(9380),P0=O(5189),$h=O(5540),D0=O(8721);let U0=(()=>{class s{constructor(e){this.translate=e}downloadPemCertificate(e,t,i){try{const a=t.split(" ").join("_"),l=new D0;l.file("Certificate_"+a+".pem",e.certificate),e.privateKey&&l.file("PrivateKey_"+a+".pem",e.privateKey),e.publicKey&&l.file("PublicKey_"+a+".pem",e.publicKey),e.pkcs12Keystore&&l.file("Keystore_"+a+".p12",e.pkcs12Keystore),e.keystorePassword&&l.file("KeystorePassword_"+a+".txt",e.keystorePassword),l.generateAsync({type:"blob"}).then(function(h){$h.saveAs(h,"Certificate_"+a+".zip")})}catch(a){i.notify("error",this.translate.instant("error.file.downloadcert")+a)}}downloadBase64File(e,t,i,a){try{let l=this.convertBase64ToByteArray(e),h=new Blob([l],{type:t});$h.saveAs(h,i)}catch(l){a.notify("error",this.translate.instant("error.file.downloaderror")+l)}}downloadFile(e,t,i,a){try{let l=new Blob([e],{type:t});$h.saveAs(l,i)}catch(l){a.notify("error",this.translate.instant("error.file.downloaderror")+l)}}convertBase64ToByteArray(e){let t=window.atob(e),i=new Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Uint8Array(i)}static#e=this.\u0275fac=function(t){return new(t||s)(n.KVO(Xf.c$))};static#t=this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var M0=O(6482);const L0=["certModal"],F0=["revokeModal"],H0=["migrateModal"],j0=["xmlModal"];function $0(s,r){1&s&&n.EFF(0," Organization details ")}function K0(s,r){if(1&s&&n.EFF(0),2&s){const e=n.XpG();n.SpI(" ",e.capitalize(e.itemType)," details ")}}function G0(s,r){1&s&&(n.j41(0,"clr-spinner"),n.EFF(1,"Loading"),n.k0s())}function J0(s,r){if(1&s&&(n.j41(0,"div",11),n.DNE(1,G0,2,0,"clr-spinner",38),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.Y8G("ngIf",e.isLoading)}}function z0(s,r){if(1&s&&n.nrm(0,"app-item-form",40,4),2&s){const e=n.XpG(2);n.Y8G("isForNew",!0)("itemType",e.userItemType)("item",e.adminUser)("mrnPrefix",e.adminUserMrnPrefix)}}function q0(s,r){if(1&s){const e=n.RV6();n.j41(0,"app-item-table",39),n.bIt("clickDownloadBtnCall",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickDownloadBtn(i))})("clickRevokeBtnCall",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickRevokeBtn(i))})("openCertModalCall",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.openCertModal())}),n.k0s(),n.DNE(1,z0,2,4,"app-item-form",40)}if(2&s){const e=n.XpG();n.Y8G("item",e.item)("itemType",e.itemType)("showCertTables",e.showCertTables)("activeCertificates",e.activeCertificates)("revokedCertificates",e.revokedCertificates)("columnForMenu",e.columnForMenu)("serial",e.serial),n.R7$(),n.vxM("orgcandidate"===e.itemType?1:-1)}}function W0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",41),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.clickMigrateBtn())}),n.EFF(1,"Migrate"),n.k0s()}}function X0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",42),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.approve())}),n.EFF(1,"Approve"),n.k0s()}}function Y0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",41),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.edit())}),n.EFF(1,"Edit"),n.k0s()}}function Z0(s,r){1&s&&(n.j41(0,"div",20)(1,"p"),n.EFF(2,"Here is your certificate bundle. You can download it by clicking the button below."),n.k0s()())}function Q0(s,r){if(1&s&&(n.j41(0,"h3",17),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("Revoke ",e.selectedActiveCerts.length," certificates")}}function ev(s,r){if(1&s&&(n.j41(0,"h3",17),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("Revoke ",e.selectedActiveCerts.length," certificate")}}function tv(s,r){if(1&s){const e=n.RV6();n.j41(0,"clr-radio-wrapper")(1,"input",43),n.bIt("click",function(){const i=n.eBV(e).$implicit,a=n.XpG();return n.Njj(a.revokeReason=i)}),n.k0s(),n.j41(2,"label"),n.EFF(3),n.k0s()()}if(2&s){const e=r.$implicit;n.R7$(3),n.JRh(e.title)}}function sv(s,r){if(1&s&&(n.j41(0,"div")(1,"span"),n.EFF(2),n.k0s()(),n.j41(3,"div")(4,"a",44),n.EFF(5,"More info"),n.k0s()()),2&s){const e=n.XpG();n.R7$(2),n.JRh(e.revokeReason.description),n.R7$(2),n.Y8G("href",e.revokeReason.reference,n.B4B)}}function iv(s,r){1&s&&(n.j41(0,"div")(1,"span"),n.EFF(2,"Select reason name"),n.k0s()())}let nv=(()=>{class s{constructor(e,t,i,a,l,h){this.certificateService=e,this.translate=t,this.notifier=i,this.fileHelper=a,this.locale=h,this.itemType=c.SP.None,this.item={},this.orgMrn="",this.mrnPrefix="urn:mrn:",this.instanceVersion=void 0,this.serial=void 0,this.isLoading=!0,this.onEdit=new n.bkB,this.onMigrate=new n.bkB,this.onDelete=new n.bkB,this.onRefresh=new n.bkB,this.onApprove=new n.bkB,this.onDownloadCert=new n.bkB,this.viewContext="detail",this.columnForMenu={},this.itemId="",this.activeCertificates=[],this.revokedCertificates=[],this.revokeModalOpened=!1,this.certModalOpened=!1,this.fromBrowser=!0,this.revokeReason=void 0,this.revokeReasons=[],this.selectedActiveCerts=[],this.revokeAt=void 0,this.reasonTitle="",this.certificateBundle=void 0,this.migrateModalOpened=!1,this.newServiceMrn="",this.userItemType=c.SP.User,this.adminUser={permissions:"ORGADMIN"},this.adminUserMrnPrefix="urn:mrn:mcp:",this.xmlModalOpened=!1,this.xmlContent="",this.showCertTables=!1,this.geometry=[],this.geometryNames=[],this.checkIfShowCertTables=()=>{this.showCertTables=this.itemType===c.SP.UserCert},this.setForm=()=>{this.itemType!==c.SP.None&&Object.entries(y.Y[this.itemType.toString()]).map(([d,g])=>{g.visibleFrom&&(g.visibleFrom&&!g.visibleFrom.includes(this.viewContext)||(this.columnForMenu[d]=g))})},this.assignCertificatesByStatus=d=>{this.activeCertificates=[],this.revokedCertificates=[],d.sort((g,B)=>g.start<B.start?1:-1),d.map(g=>{g.revoked?this.revokedCertificates.push(g):this.activeCertificates.push(g)}),this.revokedCertificates=this.updateRevokeReason(this.revokedCertificates)},this.updateRevokeReason=d=>d.map(g=>({...g,revokeReason:this.revokeReasons.filter(B=>B.value===g.revokeReason)[0].title})),this.edit=()=>{this.onEdit.emit(this.item)},this.migrate=()=>{this.onMigrate.emit(this.newServiceMrn)},this.approve=()=>{this.newAdminUserForm?.isValid()&&(this.adminUser=this.newAdminUserForm?.getFormValue(),this.onApprove.emit({...this.item,adminUser:this.adminUser}))},this.deleteItem=()=>{this.onDelete.emit(this.item)},this.openCertModal=()=>{this.itemType===c.SP.Service&&this.instanceVersion?this.notifier.notify("error",this.translate.instant("error.form.requiremigrate")):(this.certModal?.open(),this.certModalOpened=!0,this.issue())},this.openXmlDialog=(d,g=!1)=>{this.xmlModalOpened=!0,this.xmlModal?.open(),this.xmlContent=d.content},this.downloadDocFile=d=>{this.downloadFile(d.name,d.filecontentContentType,d.filecontent)},this.issue=()=>{Zg(this.certificateService,this.itemType===c.SP.UserCert?c.SP.User:this.itemType,this.itemId,this.orgMrn,this.fromBrowser,this.instanceVersion).then(d=>{this.certificateBundle=d,this.notifier.notify("success",this.translate.instant("success.resource.create"))})},this.revokeCerts=d=>{this.revokeAt=new Date(Date.parse(this.revokeAt.toLocaleString()))},this.clickDownloadBtn=d=>{0!==d.length?d.forEach(g=>{const B=(0,I.Yq)(g.end,"yyyy-MM-ddTHH-mm-ss",this.locale);this.fileHelper.downloadPemCertificate({certificate:g.certificate},this.item.mrn+"_exp_"+B,this.notifier)}):this.notifier.notify("warning",this.translate.instant("error.selection.noSelection"))},this.clickRevokeBtn=d=>{this.itemType===c.SP.Service&&this.instanceVersion?this.notifier.notify("error",this.translate.instant("error.form.requiremigrate")):0!==d.length?(this.revokeModalOpened=!0,this.selectedActiveCerts=d):this.notifier.notify("warning",this.translate.instant("error.selection.noSelection"))},this.clickMigrateBtn=()=>{this.migrateModal?.open(),this.migrateModalOpened=!0,this.newServiceMrn=this.item.mrn+":"+this.instanceVersion},this.cancel=()=>{this.certModal?.close(),this.certModalOpened=!1,this.revokeModal?.close(),this.revokeModalOpened=!1,this.migrateModal?.close(),this.migrateModalOpened=!1,this.onRefresh.emit(),this.newServiceMrn="",this.certificateBundle=void 0},this.refreshData=()=>{this.onRefresh.emit()},this.issueFromBrowser=()=>{this.fromBrowser=!0},this.issueManualKeystore=()=>{this.fromBrowser=!1},this.capitalize=d=>d[0].toUpperCase()+d.slice(1),this.revokeReasons.sort((d,g)=>d.value.localeCompare(g.value)),l.getOrgMrn().then(d=>{this.orgMrn=d})}ngOnChanges(e){!e.item||!e.item.currentValue||(this.item=e.item.currentValue&&e.item.currentValue,this.item&&this.itemType===c.SP.Role?(this.itemId=this.item.id,this.setForm()):this.item&&(this.itemId=this.item.mrn,this.setForm(),this.item.certificates&&this.assignCertificatesByStatus(this.item.certificates)),this.itemType===c.SP.OrgCandidate&&(this.adminUserMrnPrefix=(0,s0.B)(this.item.mrn,this.itemType)),this.checkIfShowCertTables())}downloadFile(e,t,i){for(var a=atob(i.replace(/\s/g,"")),l=a.length,h=new ArrayBuffer(l),d=new Uint8Array(h),g=0;g<l;g++)d[g]=a.charCodeAt(g);var B=new Blob([d],{type:t}),L=window.document.createElement("a");L.href=window.URL.createObjectURL(B),L.download=e,document.body.appendChild(L),L.click(),document.body.removeChild(L)}download(){this.certificateBundle&&(this.fileHelper.downloadPemCertificate(this.certificateBundle,this.itemId,this.notifier),this.notifier.notify("success",this.translate.instant("success.certificate.chosen")))}static#e=this.\u0275fac=function(t){return new(t||s)(n.rXU(O0),n.rXU(Xf.c$),n.rXU(P0.iJ),n.rXU(U0),n.rXU(M0.u),n.rXU(n.xe9))};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-item-view"]],viewQuery:function(t,i){if(1&t&&(n.GBs(L0,7),n.GBs(F0,7),n.GBs(H0,7),n.GBs(j0,7),n.GBs(qf.j,5)),2&t){let a;n.mGM(a=n.lsd())&&(i.certModal=a.first),n.mGM(a=n.lsd())&&(i.revokeModal=a.first),n.mGM(a=n.lsd())&&(i.migrateModal=a.first),n.mGM(a=n.lsd())&&(i.xmlModal=a.first),n.mGM(a=n.lsd())&&(i.newAdminUserForm=a.first)}},inputs:{itemType:"itemType",item:"item",orgMrn:"orgMrn",mrnPrefix:"mrnPrefix",instanceVersion:"instanceVersion",serial:"serial",isLoading:"isLoading"},outputs:{onEdit:"onEdit",onMigrate:"onMigrate",onDelete:"onDelete",onRefresh:"onRefresh",onApprove:"onApprove",onDownloadCert:"onDownloadCert"},standalone:!0,features:[n.OA$,n.aNF],decls:121,vars:15,consts:[["certModal",""],["revokeModal",""],["migrateModal",""],["xmlModal",""],["newAdminUserForm",""],[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[1,"card"],[1,"card-header"],[1,"card-block"],[1,"card-text"],[1,"spinner-view"],[1,"card-footer"],[1,"btn","btn-primary"],[1,"btn","btn-success"],[1,"btn","btn-danger",3,"click"],["clrModalSize","lg",1,"modal",3,"clrModalOpenChange","clrModalOpen"],[1,"modal-title"],["aria-label","Close","type","button",1,"close",3,"click"],[1,"modal-body"],[1,"clr-col-sm-12","clr-col-md-12"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],[1,"clr-col-4"],[1,"clr-col-8"],["type","date","autocomplete","off","clrDate","","name","demo",3,"ngModelChange","ngModel"],[1,"clr-form"],[1,"clr-form-control"],["for","basic",1,"clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","basic","placeholder","Enter value here",1,"clr-input",3,"value"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"clr-subtext"],[1,"clr-textarea-wrapper"],["clrTextarea","","cols","100","rows","40"],["href","https://www.iala-aism.org/product/g1128-specification-of-e-nav-technical-service-fillable-annex-f-service-instance-description/","target","_blank"],[4,"ngIf"],[3,"clickDownloadBtnCall","clickRevokeBtnCall","openCertModalCall","item","itemType","showCertTables","activeCertificates","revokedCertificates","columnForMenu","serial"],["title","New administrator user",3,"isForNew","itemType","item","mrnPrefix"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],["type","radio","clrRadio","","name","options","required","",3,"click"],["target","_blank",3,"href"]],template:function(t,i){if(1&t){const a=n.RV6();n.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),n.DNE(4,$0,1,0)(5,K0,1,1),n.k0s(),n.j41(6,"div",9)(7,"div",10)(8,"div",5),n.DNE(9,J0,2,1,"div",11)(10,q0,2,8),n.k0s()()(),n.j41(11,"div",12),n.DNE(12,W0,2,0,"button",13)(13,X0,2,0,"button",14)(14,Y0,2,0,"button",13),n.j41(15,"button",15),n.bIt("click",function(){return n.eBV(a),n.Njj(i.deleteItem())}),n.EFF(16,"Delete"),n.k0s()()()()(),n.j41(17,"clr-modal",16,0),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.certModalOpened,h)||(i.certModalOpened=h),n.Njj(h)}),n.j41(19,"div",17)(20,"button",18),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.j41(21,"h3",17),n.EFF(22,"Issue a new certificate"),n.k0s()(),n.j41(23,"div",19),n.DNE(24,Z0,3,0,"div",20),n.k0s(),n.j41(25,"div",21)(26,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.download())}),n.EFF(27,"Download certificate"),n.k0s(),n.j41(28,"button",23),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(29,"Close"),n.k0s()()(),n.j41(30,"clr-modal",16,1),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.revokeModalOpened,h)||(i.revokeModalOpened=h),n.Njj(h)}),n.j41(32,"div",17)(33,"button",18),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.DNE(34,Q0,2,1,"h3",17)(35,ev,2,1,"h3",17),n.k0s(),n.j41(36,"div",19)(37,"div",20)(38,"div",5)(39,"span")(40,"b"),n.EFF(41,"Warning: chosen certificates will no longer be valid when they are revoked!"),n.k0s()()(),n.j41(42,"div",5)(43,"div",24)(44,"div")(45,"h5"),n.EFF(46,"Reason name"),n.k0s()(),n.j41(47,"div"),n.Z7z(48,tv,4,1,"clr-radio-wrapper",null,n.fX1),n.k0s()(),n.j41(50,"div",25)(51,"div")(52,"h5"),n.EFF(53,"Explanation"),n.k0s()(),n.j41(54,"div"),n.DNE(55,sv,6,2)(56,iv,3,0,"div"),n.k0s()()(),n.j41(57,"div",5)(58,"div",24)(59,"div")(60,"h5"),n.EFF(61,"Revoke at"),n.k0s()()(),n.j41(62,"div",25)(63,"clr-date-container")(64,"input",26),n.mxI("ngModelChange",function(h){return n.eBV(a),n.DH7(i.revokeAt,h)||(i.revokeAt=h),n.Njj(h)}),n.k0s()()()(),n.j41(65,"div",5)(66,"div")(67,"p"),n.EFF(68,"Choose revocation reason and date to proceed."),n.k0s()()()()(),n.j41(69,"div",21)(70,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.revokeCerts(i.selectedActiveCerts))}),n.EFF(71,"Revoke"),n.k0s(),n.j41(72,"button",23),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(73,"Cancel"),n.k0s()()(),n.j41(74,"clr-modal",16,2),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.migrateModalOpened,h)||(i.migrateModalOpened=h),n.Njj(h)}),n.j41(76,"div",17)(77,"button",18),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.EFF(78," Migrate service "),n.k0s(),n.j41(79,"div",19)(80,"div",20)(81,"div",5)(82,"span"),n.EFF(83,"This migration allows you to remove the version from an existing service's MRN by assigning a new MRN that includes the version. It simplifies version management and future updates, making it easier for users to maintain and update services. The MRN below is given as an example, but you can edit it as you want."),n.k0s()(),n.j41(84,"div",5)(85,"form",27)(86,"div",28)(87,"label",29),n.EFF(88,"Recommended new MRN for your service"),n.k0s(),n.j41(89,"div",30)(90,"div",31),n.nrm(91,"input",32)(92,"cds-icon",33),n.k0s(),n.j41(93,"span",34),n.EFF(94,"New MRN can have the version of service inside."),n.k0s()()()()()()(),n.j41(95,"div",21)(96,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.migrate())}),n.EFF(97,"Migrate"),n.k0s(),n.j41(98,"button",23),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(99,"Cancel"),n.k0s()()(),n.j41(100,"clr-modal",16,3),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.xmlModalOpened,h)||(i.xmlModalOpened=h),n.Njj(h)}),n.j41(102,"div",17)(103,"button",18),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.EFF(104," XML editor "),n.k0s(),n.j41(105,"div",19)(106,"div",20)(107,"div",5)(108,"div",30)(109,"div",35)(110,"textarea",36),n.EFF(111),n.k0s(),n.nrm(112,"cds-icon",33),n.k0s(),n.j41(113,"span",34)(114,"a",37),n.EFF(115,"What is G1128?"),n.k0s()()()()()(),n.j41(116,"div",21)(117,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.migrate())}),n.EFF(118,"Migrate"),n.k0s(),n.j41(119,"button",23),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(120,"Cancel"),n.k0s()()()}2&t&&(n.R7$(4),n.vxM("orgcandidate"===i.itemType?4:5),n.R7$(5),n.vxM(i.isLoading?9:10),n.R7$(3),n.vxM("service"===i.itemType&&i.instanceVersion?12:"orgcandidate"===i.itemType?13:14),n.R7$(5),n.R50("clrModalOpen",i.certModalOpened),n.R7$(7),n.vxM(i.certificateBundle?24:-1),n.R7$(6),n.R50("clrModalOpen",i.revokeModalOpened),n.R7$(4),n.vxM(i.selectedActiveCerts.length>1?34:35),n.R7$(14),n.Dyx(i.revokeReasons),n.R7$(7),n.vxM(i.revokeReason?55:56),n.R7$(9),n.R50("ngModel",i.revokeAt),n.R7$(10),n.R50("clrModalOpen",i.migrateModalOpened),n.R7$(17),n.xc7("width",400,"px"),n.Y8G("value",i.newServiceMrn),n.R7$(9),n.R50("clrModalOpen",i.xmlModalOpened),n.R7$(11),n.JRh(i.xmlContent))},dependencies:[u.G,I.bT,D.z7t,D.bZN,D.zN1,D.BlU,D.jsN,D.aZZ,D.fkp,D.cIb,D.DRH,D.BkK,D.CxT,D.lnv,D._Qf,D.WF1,qf.j,p.YN,p.qT,p.me,p.BC,p.cb,p.vS,p.cV,D.UcF,D.eJj,V0]})}return s})()},3426:(Qe,F,O)=>{"use strict";O.d(F,{d:()=>U});var n=O(6994),c=O(5950),y=O(6908),p=O(5166),I=O(2802),u=O(1066),D=O(9677),w=O(8745),E=O(6482);function b(J,m){if(1&J){const $=c.RV6();c.j41(0,"div")(1,"button",1),c.bIt("click",function(){c.eBV($);const V=c.XpG();return c.Njj(V.back())}),c.EFF(2,"Back"),c.k0s()(),c.j41(3,"div",2)(4,"div",3)(5,"app-item-view",4),c.bIt("onEdit",function(){c.eBV($);const V=c.XpG();return c.Njj(V.edit(V.selectedItem))})("onDelete",function(){c.eBV($);const V=c.XpG();return c.Njj(V.deleteItem(V.selectedItem))})("onRefresh",function(){c.eBV($);const V=c.XpG();return c.Njj(V.refreshData())})("onMigrate",function(V){c.eBV($);const xe=c.XpG();return c.Njj(xe.migrate(V))})("onApprove",function(V){c.eBV($);const xe=c.XpG();return c.Njj(xe.approve(V))}),c.k0s()()()}if(2&J){const $=c.XpG();c.R7$(5),c.Y8G("itemType",$.itemType)("item",$.selectedItem)("isLoading",!1)}}function o(J,m){if(1&J){const $=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV($);const V=c.XpG(3);return c.Njj(V.onAdd())}),c.nrm(2,"cds-icon",11),c.EFF(3),c.k0s()()}if(2&J){const $=c.XpG(3);c.R7$(3),c.SpI(" ",$.addText," ")}}function _(J,m){if(1&J){const $=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV($);const V=c.XpG(3);return c.Njj(V.onDelete(V.selected))}),c.nrm(2,"cds-icon",12),c.EFF(3),c.k0s(),c.j41(4,"button",10),c.bIt("click",function(){c.eBV($);const V=c.XpG(3);return c.Njj(V.onDownload(V.selected))}),c.nrm(5,"cds-icon",13),c.EFF(6),c.k0s()()}if(2&J){const $=c.XpG(3);c.R7$(3),c.SpI(" ",$.deleteText,""),c.R7$(3),c.SpI(" ",$.downloadText,"")}}function C(J,m){if(1&J){const $=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV($);const V=c.XpG(3);return c.Njj(V.onDelete(V.selected))}),c.nrm(2,"cds-icon",12),c.EFF(3),c.k0s()()}if(2&J){const $=c.XpG(3);c.R7$(3),c.SpI(" ",$.deleteText,"")}}function v(J,m){if(1&J&&(c.j41(0,"clr-dg-action-bar"),c.DNE(1,o,4,1,"div",9)(2,_,7,2,"div",9)(3,C,4,1,"div",9),c.k0s()),2&J){const $=c.XpG(2);c.R7$(),c.vxM(void 0!==$.onAdd&&"orgcandidate"!==$.itemType?1:-1),c.R7$(),c.vxM(void 0!==$.onDelete&&void 0!==$.onDownload?2:void 0!==$.onDelete?3:-1)}}function A(J,m){if(1&J&&(c.j41(0,"clr-dg-column"),c.EFF(1),c.k0s()),2&J){const $=m.$implicit;c.R7$(),c.JRh($)}}function k(J,m){if(1&J){const $=c.RV6();c.j41(0,"clr-dg-cell",15),c.bIt("click",function(){c.eBV($);const V=c.XpG(2).$implicit,xe=c.XpG(2);return c.Njj(xe.userRowSelect(V))}),c.EFF(1),c.k0s()}if(2&J){const $=c.XpG().$implicit,ce=c.XpG().$implicit,V=c.XpG(2);c.R7$(),c.JRh(V.convertTimeString(ce[$]))}}function R(J,m){if(1&J){const $=c.RV6();c.j41(0,"clr-dg-cell",15),c.bIt("click",function(){c.eBV($);const V=c.XpG(2).$implicit,xe=c.XpG(2);return c.Njj(xe.userRowSelect(V))}),c.EFF(1),c.k0s()}if(2&J){const $=c.XpG().$implicit,ce=c.XpG().$implicit;c.R7$(),c.JRh(ce[$])}}function P(J,m){if(1&J&&c.DNE(0,k,2,1,"clr-dg-cell")(1,R,2,1,"clr-dg-cell"),2&J){const $=m.$implicit,ce=c.XpG(3);c.vxM(ce.isTimestampFormat($)?0:1)}}function X(J,m){if(1&J&&(c.j41(0,"clr-dg-row",14),c.Z7z(1,P,2,1,null,null,c.fX1),c.k0s()),2&J){const $=m.$implicit,ce=c.XpG(2);c.Y8G("clrDgItem",$),c.R7$(),c.Dyx(ce.labelKeys)}}function Y(J,m){if(1&J&&(c.j41(0,"clr-dg-detail")(1,"clr-dg-detail-header"),c.EFF(2),c.k0s(),c.j41(3,"clr-dg-detail-body"),c.nrm(4,"app-item-view",17),c.k0s()()),2&J){const $=m.$implicit,ce=c.XpG(3);c.R7$(2),c.JRh($.mrn),c.R7$(2),c.Y8G("itemType",ce.itemType)("item",$)}}function de(J,m){1&J&&c.DNE(0,Y,5,3,"clr-dg-detail",16)}function ne(J,m){if(1&J){const $=c.RV6();c.j41(0,"button",20),c.bIt("click",function(){const V=c.eBV($).$implicit,xe=c.XpG(3);return c.Njj(xe.loadData(V))}),c.EFF(1),c.k0s()}if(2&J){const $=m.$implicit,ce=c.XpG(3);c.Y8G("disabled",$==ce.currentPageNumber),c.R7$(),c.JRh($+1)}}function be(J,m){if(1&J&&(c.j41(0,"div",8)(1,"div",18),c.Z7z(2,ne,2,2,"button",19,c.fX1),c.k0s()()),2&J){const $=c.XpG(2);c.R7$(2),c.Dyx($.pageNumbers)}}function Ve(J,m){if(1&J){const $=c.RV6();c.j41(0,"clr-datagrid",5),c.mxI("clrDgSelectedChange",function(V){c.eBV($);const xe=c.XpG();return c.DH7(xe.selected,V)||(xe.selected=V),c.Njj(V)}),c.bIt("clrDgRefresh",function(V){c.eBV($);const xe=c.XpG();return c.Njj(xe.refresh(V))}),c.DNE(1,v,4,2,"clr-dg-action-bar"),c.Z7z(2,A,2,1,"clr-dg-column",null,c.fX1),c.j41(4,"clr-dg-placeholder",6),c.EFF(5),c.k0s(),c.DNE(6,X,3,1,"clr-dg-row",7)(7,de,1,0,"clr-dg-detail"),c.j41(8,"clr-dg-footer"),c.DNE(9,be,4,0,"div",8),c.k0s()()}if(2&J){const $=c.XpG();c.R50("clrDgSelected",$.selected),c.Y8G("clrDgLoading",$.isLoading),c.R7$(),c.vxM($.onAdd||$.onDelete||$.onDownload?1:-1),c.R7$(),c.Dyx($.labelTitles),c.R7$(3),c.JRh($.placeholder),c.R7$(),c.Y8G("clrDgItemsOf",$.data),c.R7$(),c.vxM($.detailView?7:-1),c.R7$(2),c.vxM($.totalPages>1?9:-1)}}let U=(()=>{class J{constructor($,ce){this.router=$,this.authService=ce,this.itemType=p.SP.Subscription,this.labels=void 0,this.placeholder="We couldn't find any data!",this.deleteText="Delete",this.downloadText="Download",this.addText="Add",this.totalPages=0,this.totalElements=0,this.getData=V=>new Promise((xe,Se)=>xe([])),this.onRowSelect=new c.bkB,this.onRevokeCerts=new c.bkB,this.onDownloadCerts=new c.bkB,this.onEdit=new c.bkB,this.onMigrate=new c.bkB,this.onRefresh=new c.bkB,this.onApprove=new c.bkB,this.data=void 0,this.selected=[],this.detail={},this.selectedItem={},this.expanded=!1,this.detailView=!1,this.labelKeys=[],this.labelTitles=[],this.isLoading=!1,this.pageNumbers=[],this.currentPageNumber=0,this.elementsPerPage=10,this.roles=[],this.userRowSelect=V=>{this.expanded=!0,this.selectedItem=(0,D.C)(V),this.onRowSelect.emit(V)},this.back=()=>{this.expanded=!1,this.selectedItem={}},this.edit=V=>{this.expanded=!0,this.selectedItem=V,this.onEdit.emit(V)},this.approve=V=>{this.onApprove.emit(V)},this.migrate=V=>{this.onMigrate.emit({...this.selectedItem,newServiceMrn:V})},this.deleteItem=V=>{this.onDelete?.call(this,[V])},this.convertTimeString=V=>(0,u.Y)(V),this.refreshData=()=>{this.loadData().then(()=>{if(this.selectedItem&&this.selectedItem.mrn){const V=this.data?.find(xe=>this.itemType===p.SP.Service?xe.mrn===this.selectedItem.mrn&&xe.instanceVersion===this.selectedItem.instanceVersion:this.itemType===p.SP.Role?xe.id===this.selectedItem.id:xe.mrn===this.selectedItem.mrn);V&&(this.selectedItem=V)}})},this.isLoading=!0}ngOnInit(){this.authService.getOrgMrn().then($=>{})}ngOnChanges($){$.labels&&(this.labelKeys=Object.keys(this.labels),this.labelTitles=Object.values(this.labels).map(ce=>ce.title)),$.totalPages&&(this.pageNumbers=Array(this.totalPages).fill(0).map((ce,V)=>V))}loadData($=this.currentPageNumber){var ce=this;return(0,n.A)(function*(){ce.data=(yield ce.getData(ce.itemType,$,ce.elementsPerPage))||[],$!==ce.currentPageNumber&&(ce.currentPageNumber=$),ce.isLoading=!1})()}refresh($){var ce=this;return(0,n.A)(function*(){ce.data||ce.loadData()})()}isTimestampFormat($){return p.N3.includes($)}static#e=this.\u0275fac=function(ce){return new(ce||J)(c.rXU(w.Ix),c.rXU(E.u))};static#t=this.\u0275cmp=c.VBU({type:J,selectors:[["app-smart-expandable-table"]],inputs:{itemType:"itemType",labels:"labels",placeholder:"placeholder",onDownload:"onDownload",onDelete:"onDelete",onAdd:"onAdd",deleteText:"deleteText",downloadText:"downloadText",addText:"addText",totalPages:"totalPages",totalElements:"totalElements",getData:"getData"},outputs:{onRowSelect:"onRowSelect",onRevokeCerts:"onRevokeCerts",onDownloadCerts:"onDownloadCerts",onEdit:"onEdit",onMigrate:"onMigrate",onRefresh:"onRefresh",onApprove:"onApprove"},standalone:!0,features:[c.OA$,c.aNF],decls:2,vars:1,consts:[[3,"clrDgSelected","clrDgLoading"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[3,"onEdit","onDelete","onRefresh","onMigrate","onApprove","itemType","item","isLoading"],[3,"clrDgSelectedChange","clrDgRefresh","clrDgSelected","clrDgLoading"],[1,"datagrid-empty"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[1,"clr-row","clr-justify-content-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["shape","times"],["shape","download"],[3,"clrDgItem"],[3,"click"],[4,"clrIfDetail"],[3,"itemType","item"],[1,"btn-group","btn-outline-primary","btn-sm"],[1,"btn",3,"disabled"],[1,"btn",3,"click","disabled"]],template:function(ce,V){1&ce&&c.DNE(0,b,6,3)(1,Ve,10,7,"clr-datagrid",0),2&ce&&c.vxM(V.expanded?0:1)},dependencies:[y.PuD,y.ghA,y.fQA,y.slD,y.scM,y.f1O,y.PNO,y.ig6,y.Lwm,y.AtP,y.XTg,y.E1i,y.aFj,y.NTI,y.cIg,y.qDI,y.v0q,y.Aup,y.rpC,y.mCo,y.BlU,y.oFi,I.Y]})}return J})()},2537:(Qe,F,O)=>{"use strict";O.d(F,{B:()=>Ve});var n=O(5950),c=O(6908),y=O(1232),p=O(5930);const u=["download",(0,p.s)({outline:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>',outlineAlerted:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>',outlineBadged:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>'})];var D=O(673);const E=["plus",(0,p.s)({outline:'<path d="M30,17H19V6a1,1,0,1,0-2,0V17H6a1,1,0,0,0-1,1,.91.91,0,0,0,1,.94H17V30a1,1,0,1,0,2,0V19H30a1,1,0,0,0,1-1A1,1,0,0,0,30,17Z"/>'})];var b=O(5166),o=O(1066);const _=()=>[10,20,50,100];function C(U,J){1&U&&(n.j41(0,"clr-spinner"),n.EFF(1,"Loading"),n.k0s())}function v(U,J){if(1&U){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ce=n.XpG(3);return n.Njj(ce.onAdd())}),n.nrm(2,"cds-icon",9),n.EFF(3),n.k0s()()}if(2&U){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.addText," ")}}function A(U,J){if(1&U){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ce=n.XpG(3);return n.Njj(ce.onDelete(ce.selected))}),n.nrm(2,"cds-icon",10),n.EFF(3),n.k0s(),n.j41(4,"button",8),n.bIt("click",function(){n.eBV(m);const ce=n.XpG(3);return n.Njj(ce.onDownload(ce.selected))}),n.nrm(5,"cds-icon",11),n.EFF(6),n.k0s()()}if(2&U){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.deleteText,""),n.R7$(3),n.SpI(" ",m.downloadText,"")}}function k(U,J){if(1&U){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ce=n.XpG(3);return n.Njj(ce.onDelete(ce.selected))}),n.nrm(2,"cds-icon",10),n.EFF(3),n.k0s()()}if(2&U){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.deleteText,"")}}function R(U,J){if(1&U&&(n.j41(0,"clr-dg-action-bar"),n.DNE(1,v,4,1,"div",7)(2,A,7,2,"div",7)(3,k,4,1,"div",7),n.k0s()),2&U){const m=n.XpG(2);n.R7$(),n.vxM(void 0!==m.onAdd?1:-1),n.R7$(),n.vxM(void 0!==m.onDelete&&void 0!==m.onDownload?2:void 0!==m.onDelete?3:-1)}}function P(U,J){if(1&U&&(n.j41(0,"clr-dg-column"),n.EFF(1),n.k0s()),2&U){const m=J.$implicit;n.R7$(),n.JRh(m)}}function X(U,J){if(1&U){const m=n.RV6();n.j41(0,"clr-dg-cell",13),n.bIt("click",function(){n.eBV(m);const ce=n.XpG(2).$implicit,V=n.XpG(2);return n.Njj(V.userRowSelect(ce))}),n.EFF(1),n.k0s()}if(2&U){const m=n.XpG().$implicit,$=n.XpG().$implicit,ce=n.XpG(2);n.R7$(),n.JRh(ce.convertTimeString($[m]))}}function Y(U,J){if(1&U){const m=n.RV6();n.j41(0,"clr-dg-cell",13),n.bIt("click",function(){n.eBV(m);const ce=n.XpG(2).$implicit,V=n.XpG(2);return n.Njj(V.userRowSelect(ce))}),n.EFF(1),n.k0s()}if(2&U){const m=n.XpG().$implicit,$=n.XpG().$implicit;n.R7$(),n.JRh($[m])}}function de(U,J){if(1&U&&n.DNE(0,X,2,1,"clr-dg-cell")(1,Y,2,1,"clr-dg-cell"),2&U){const m=J.$implicit,$=n.XpG(3);n.vxM($.isTimestampFormat(m)?0:1)}}function ne(U,J){if(1&U&&(n.j41(0,"clr-dg-row",12),n.Z7z(1,de,2,1,null,null,n.fX1),n.k0s()),2&U){const m=J.$implicit,$=n.XpG(2);n.Y8G("clrDgItem",m),n.R7$(),n.Dyx($.labelKeys)}}function be(U,J){if(1&U){const m=n.RV6();n.j41(0,"clr-datagrid",2),n.mxI("clrDgSelectedChange",function(ce){n.eBV(m);const V=n.XpG();return n.DH7(V.selected,ce)||(V.selected=ce),n.Njj(ce)}),n.DNE(1,R,4,2,"clr-dg-action-bar"),n.Z7z(2,P,2,1,"clr-dg-column",null,n.fX1),n.j41(4,"clr-dg-placeholder",3),n.EFF(5),n.k0s(),n.DNE(6,ne,3,1,"clr-dg-row",4),n.j41(7,"clr-dg-footer")(8,"clr-dg-pagination",5,0)(10,"clr-dg-page-size",6),n.EFF(11," items per page"),n.k0s(),n.EFF(12),n.k0s()()()}if(2&U){const m=n.sdS(9),$=n.XpG();n.R50("clrDgSelected",$.selected),n.R7$(),n.vxM($.onAdd||$.onDelete||$.onDownload?1:-1),n.R7$(),n.Dyx($.labelTitles),n.R7$(3),n.JRh($.placeholder),n.R7$(),n.Y8G("clrDgItemsOf",$.data),n.R7$(2),n.Y8G("clrDgPageSize",10),n.R7$(2),n.Y8G("clrPageSizeOptions",n.lJ4(9,_)),n.R7$(2),n.E5c(" ",m.firstItem+1," - ",m.lastItem+1," of ",m.totalItems," certificates ")}}y.h.addIcons(u,D.a,E);let Ve=(()=>{class U{constructor(){this.data=[],this.itemType=b.SP.Subscription,this.labels={},this.placeholder="We couldn't find any data!",this.deleteText="Delete",this.downloadText="Download",this.addText="Add",this.selectedIds=[],this.onRowSelect=new n.bkB,this.selected=[],this.detail={},this.isLoading=!1,this.labelKeys=[],this.labelTitles=[],this.userRowSelect=m=>{console.log(m),this.onRowSelect&&this.onRowSelect.emit(m)},this.convertTimeString=m=>(0,o.t)(m),this.isLoading=!0}ngOnChanges(m){m.data.currentValue.length>0&&(this.labelKeys=Object.keys(this.labels),this.labelTitles=Object.values(this.labels).map($=>$.title)),this.isLoading=!1,this.data.length>0&&this.selectedIds.length>0&&(this.selected=this.data.filter($=>this.selectedIds[0]===$.serialNumber))}isTimestampFormat(m){return b.N3.includes(m)}static#e=this.\u0275fac=function($){return new($||U)};static#t=this.\u0275cmp=n.VBU({type:U,selectors:[["app-smart-table"]],inputs:{data:"data",itemType:"itemType",labels:"labels",placeholder:"placeholder",onDownload:"onDownload",onDelete:"onDelete",onAdd:"onAdd",deleteText:"deleteText",downloadText:"downloadText",addText:"addText",selectedIds:"selectedIds"},outputs:{onRowSelect:"onRowSelect"},standalone:!0,features:[n.OA$,n.aNF],decls:2,vars:1,consts:[["pagination",""],[3,"clrDgSelected"],[3,"clrDgSelectedChange","clrDgSelected"],[1,"datagrid-empty"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize"],[3,"clrPageSizeOptions"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["shape","times"],["shape","download"],[3,"clrDgItem"],[3,"click"]],template:function($,ce){1&$&&n.DNE(0,C,2,0,"clr-spinner")(1,be,13,10,"clr-datagrid",1),2&$&&n.vxM(ce.isLoading?0:1)},dependencies:[c.PuD,c.ghA,c.fQA,c.slD,c.scM,c.Lwm,c.AtP,c.oip,c.o3y,c.XTg,c.E1i,c.NTI,c.cIg,c.qDI,c.v0q,c.Aup,c.rpC,c.mCo,c.BlU,c.BkK,c.oFi]})}return U})()},2478:(Qe,F,O)=>{"use strict";O.d(F,{R:()=>I});var n=O(6908),c=O(58),y=O(7882),p=O(5950);let I=(()=>{class u{static#e=this.\u0275fac=function(E){return new(E||u)};static#t=this.\u0275mod=p.$C({type:u});static#s=this.\u0275inj=p.G2t({imports:[c.G,n.PuD,y.YN]})}return u})()},723:(Qe,F,O)=>{"use strict";O.d(F,{C:()=>ue}),O(8959);var c=O(1232),y=O(5930);const I=["user",(0,y.s)({outline:'<path d="M18,17a7,7,0,1,0-7-7A7,7,0,0,0,18,17ZM18,5a5,5,0,1,1-5,5A5,5,0,0,1,18,5Z"/><path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/>',outlineAlerted:'<path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/><path d="M18,17a7,7,0,0,0,4.45-1.6h-.22A3.68,3.68,0,0,1,20,14.6a5,5,0,1,1,1.24-8.42l1-1.76A7,7,0,1,0,18,17Z"/>',outlineBadged:'<path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/><path d="M18,17a7,7,0,0,0,6.85-5.56,7.4,7.4,0,0,1-2.24-6.69A7,7,0,1,0,18,17ZM18,5a5,5,0,1,1-5,5A5,5,0,0,1,18,5Z"/>',solid:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><circle cx="18" cy="10" r="7"/>',solidAlerted:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><path d="M18,17a7,7,0,0,0,4.45-1.6h-.22A3.68,3.68,0,0,1,19,9.89l3.16-5.47A7,7,0,1,0,18,17Z"/>',solidBadged:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><path d="M18,17a7,7,0,0,0,6.85-5.56,7.4,7.4,0,0,1-2.24-6.69A7,7,0,1,0,18,17Z"/>'})];var u=O(5950),D=O(6908),w=O(6994);const b=["crown",(0,y.s)({outline:'<path d="M4,13.33A1.39,1.39,0,1,0,2.6,14.72,1.39,1.39,0,0,0,4,13.33Z"/><path d="M31.81,15.84a20.35,20.35,0,0,0-4.58,1.43,22.7,22.7,0,0,0-3.48,2.1A17.69,17.69,0,0,1,22,16.57a47.65,47.65,0,0,1-2.8-7.69,1,1,0,0,0-1-.74,1,1,0,0,0-1,.74,46.71,46.71,0,0,1-2.8,7.69,17,17,0,0,1-1.76,2.8,22.7,22.7,0,0,0-3.48-2.1,20.66,20.66,0,0,0-4.58-1.43,1,1,0,0,0-1,.39,1,1,0,0,0-.09,1.05A50.13,50.13,0,0,1,7.82,31.17a1,1,0,0,0,1,.83H27.62a1,1,0,0,0,1-.83,50.15,50.15,0,0,1,4.26-13.89,1,1,0,0,0-.09-1.05A1,1,0,0,0,31.81,15.84ZM26.79,30H9.64a55.66,55.66,0,0,0-3.4-11.71,15.75,15.75,0,0,1,2.09.78,20,20,0,0,1,3.85,2.45,1,1,0,0,0,1.39-.09,19.28,19.28,0,0,0,2.67-4,43.46,43.46,0,0,0,2-4.89,41.74,41.74,0,0,0,2,4.89,19.92,19.92,0,0,0,2.66,4,1,1,0,0,0,1.4.09,19.21,19.21,0,0,1,3.85-2.45,14.77,14.77,0,0,1,2.09-.78A55.07,55.07,0,0,0,26.79,30Z"/><ellipse cx="33.83" cy="13.33" rx="1.39" ry="1.39"/><path d="M18.22,6.39A1.39,1.39,0,1,0,16.84,5,1.39,1.39,0,0,0,18.22,6.39Z"/><path d="M18.23,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,18.23,26.34Z"/><path d="M12.58,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,12.58,26.34Z"/><path d="M23.89,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,23.89,26.34Z"/>',solid:'<path d="M2.6,11.93A1.4,1.4,0,1,0,4,13.33,1.4,1.4,0,0,0,2.6,11.93Z"/><ellipse cx="33.83" cy="13.33" rx="1.39" ry="1.39"/><path d="M18.22,6.39A1.39,1.39,0,1,0,16.84,5,1.39,1.39,0,0,0,18.22,6.39Z"/><path d="M31.63,16.1A18.61,18.61,0,0,0,28,17.34a21.57,21.57,0,0,0-4,2.49,19.2,19.2,0,0,1-2.26-3.49,48.92,48.92,0,0,1-2.52-6.58,1,1,0,0,0-1-.71h0a1,1,0,0,0-1,.71,48.42,48.42,0,0,1-2.52,6.58,18.69,18.69,0,0,1-2.26,3.48,22.81,22.81,0,0,0-4-2.48A18.83,18.83,0,0,0,4.9,16.1a1,1,0,0,0-1,.33,1,1,0,0,0-.13,1.07,55.9,55.9,0,0,1,4,13.5,1,1,0,0,0,1,.83h19a1,1,0,0,0,1-.83,55.9,55.9,0,0,1,4-13.5,1,1,0,0,0-.13-1.07A1,1,0,0,0,31.63,16.1ZM11.08,28.55a1.11,1.11,0,1,1,1.1-1.11A1.11,1.11,0,0,1,11.08,28.55Zm7.15,0a1.11,1.11,0,0,1,0-2.21,1.11,1.11,0,0,1,0,2.21Zm7.16,0a1.11,1.11,0,1,1,1.1-1.11A1.11,1.11,0,0,1,25.39,28.55Z"/>'})],_=["sun",(0,y.s)({outline:'<path d="M18,6.31a1,1,0,0,0,1-1V1.91a1,1,0,0,0-2,0v3.4A1,1,0,0,0,18,6.31Z"/><path d="M18,29.69a1,1,0,0,0-1,1v3.4a1,1,0,0,0,2,0v-3.4A1,1,0,0,0,18,29.69Z"/><path d="M8.32,9.74A1,1,0,0,0,9,10a1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42L7.33,5.92A1,1,0,0,0,5.92,7.33Z"/><path d="M27.68,26.26a1,1,0,1,0-1.42,1.42l2.41,2.4a1,1,0,0,0,.71.3,1,1,0,0,0,.7-.3,1,1,0,0,0,0-1.41Z"/><path d="M6.31,18a1,1,0,0,0-1-1H1.91a1,1,0,0,0,0,2h3.4A1,1,0,0,0,6.31,18Z"/><path d="M34.09,17h-3.4a1,1,0,1,0,0,2h3.4a1,1,0,0,0,0-2Z"/><path d="M8.32,26.26l-2.4,2.41a1,1,0,0,0,.7,1.71,1,1,0,0,0,.71-.3l2.41-2.4a1,1,0,1,0-1.42-1.42Z"/><path d="M27,10a1,1,0,0,0,.71-.29l2.4-2.41a1,1,0,0,0,0-1.41,1,1,0,0,0-1.41,0l-2.41,2.4a1,1,0,0,0,0,1.42A1,1,0,0,0,27,10Z"/><path d="M18.13,7.75a10.13,10.13,0,1,0,10,10.13A10.08,10.08,0,0,0,18.13,7.75Zm0,18.25a8.13,8.13,0,1,1,8-8.12A8.08,8.08,0,0,1,18.13,26Z"/>',solid:'<path d="M18,6.42a1,1,0,0,0,1-1V1.91a1,1,0,0,0-2,0V5.42A1,1,0,0,0,18,6.42Z"/><path d="M18,29.58a1,1,0,0,0-1,1v3.51a1,1,0,0,0,2,0V30.58A1,1,0,0,0,18,29.58Z"/><path d="M8.4,9.81A1,1,0,0,0,9.81,8.4L7.33,5.92A1,1,0,0,0,5.92,7.33Z"/><path d="M27.6,26.19a1,1,0,0,0-1.41,1.41l2.48,2.48a1,1,0,0,0,1.41-1.41Z"/><path d="M6.42,18a1,1,0,0,0-1-1H1.91a1,1,0,0,0,0,2H5.42A1,1,0,0,0,6.42,18Z"/><path d="M34.09,17H30.58a1,1,0,0,0,0,2h3.51a1,1,0,0,0,0-2Z"/><path d="M8.4,26.19,5.92,28.67a1,1,0,0,0,1.41,1.41L9.81,27.6A1,1,0,0,0,8.4,26.19Z"/><path d="M27.6,9.81l2.48-2.48a1,1,0,0,0-1.41-1.41L26.19,8.4A1,1,0,0,0,27.6,9.81Z"/><circle cx="18" cy="18" r="10"/>'})],v=["moon",(0,y.s)({outline:'<path d="M31,27.19a1,1,0,0,0-1-.56c-.28,0-.56,0-.85,0A11,11,0,0,1,24.92,5.61a1,1,0,0,0,.61-1,1,1,0,0,0-.67-.91,14.7,14.7,0,0,0-5-.87,15.12,15.12,0,0,0,0,30.24,14.78,14.78,0,0,0,11-4.81A1,1,0,0,0,31,27.19ZM19.89,31.12a13.12,13.12,0,0,1,0-26.24,11.81,11.81,0,0,1,2,.16,13,13,0,0,0,5.72,23.53A12.75,12.75,0,0,1,19.89,31.12Z"/>',solid:'<path d="M29.2,26.72A12.07,12.07,0,0,1,22.9,4.44,13.68,13.68,0,0,0,19.49,4a14,14,0,0,0,0,28,13.82,13.82,0,0,0,10.9-5.34A11.71,11.71,0,0,1,29.2,26.72Z"/>'})];var A=O(2170),P=O(3987),X=O(6482),Y=O(9380),de=O(8745);const ne=(T,H)=>H.code;function be(T,H){if(1&T){const N=u.RV6();u.j41(0,"div",11),u.bIt("click",function(){const G=u.eBV(N).$implicit,Ee=u.XpG(2);return u.Njj(Ee.changeLang(G.code))}),u.EFF(1),u.k0s()}if(2&T){const N=H.$implicit;u.R7$(),u.JRh(N.name)}}function Ve(T,H){if(1&T){const N=u.RV6();u.j41(0,"clr-dropdown-menu",12)(1,"button",13),u.bIt("click",function(){u.eBV(N);const G=u.XpG(2);return u.Njj(G.toggleTheme())}),u.EFF(2),u.k0s(),u.j41(3,"button",13),u.bIt("click",function(){u.eBV(N);const G=u.XpG(2);return u.Njj(G.goMyPage())}),u.EFF(4,"personal page"),u.k0s(),u.j41(5,"button",13),u.bIt("click",function(){u.eBV(N);const G=u.XpG(2);return u.Njj(G.logOut())}),u.EFF(6,"log out"),u.k0s()()}if(2&T){const N=u.XpG(2);u.R7$(2),u.SpI("switch to ",N.counterTheme,"")}}function U(T,H){if(1&T){const N=u.RV6();u.j41(0,"div",1)(1,"a",2),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goHome())}),u.nrm(2,"cds-icon",3),u.j41(3,"span",4),u.EFF(4,"MCP as a Service Portal"),u.k0s()()(),u.nrm(5,"div",5),u.j41(6,"div",6)(7,"clr-dropdown")(8,"button",7),u.EFF(9),u.nrm(10,"cds-icon",8),u.k0s(),u.j41(11,"clr-dropdown-menu"),u.Z7z(12,be,2,1,"div",9,ne),u.k0s()(),u.j41(14,"clr-dropdown")(15,"button",7),u.EFF(16),u.nrm(17,"cds-icon",8),u.k0s(),u.DNE(18,Ve,7,1,"clr-dropdown-menu",10),u.k0s()()}if(2&T){const N=u.XpG();u.R7$(5),u.Y8G("clr-nav-level",2),u.R7$(4),u.SpI(" ",N.currentLangName," "),u.R7$(3),u.Dyx(N.langs),u.R7$(4),u.SpI(" ",N.userName," ")}}function J(T,H){if(1&T){const N=u.RV6();u.j41(0,"div",1)(1,"a",14),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goFront())}),u.nrm(2,"clr-icon",15),u.j41(3,"span",4),u.EFF(4,"MCP as a Service"),u.k0s()()(),u.j41(5,"div",16)(6,"clr-dropdown")(7,"button",17),u.EFF(8," Service "),u.nrm(9,"clr-icon",18),u.k0s(),u.j41(10,"clr-dropdown-menu",19)(11,"a",20),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goMCP())}),u.EFF(12,"Maritime Connectivity Platform"),u.k0s(),u.j41(13,"a",20),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goS124())}),u.EFF(14,"S124 Navigational Warning service"),u.k0s(),u.j41(15,"a",20),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goChat())}),u.EFF(16,"MMS Chat service"),u.k0s(),u.j41(17,"a",20),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goARP())}),u.EFF(18,"Automatic Route Planning service"),u.k0s()()(),u.j41(19,"button",21),u.bIt("click",function(){u.eBV(N);const G=u.XpG();return u.Njj(G.goPrice())}),u.EFF(20," Price "),u.k0s()()}}c.h.addIcons(b,_,v);let m=(()=>{class T{constructor(N,Q,G){this.authService=N,this.translate=Q,this.router=G,this.role="admin",this.userName="admin",this.theme="light",this.counterTheme="dark",this.currentLang="en-GB",this.currentLangName="English",this.myMrn="",this.langs=A.e,this.loggedIn=!1,this.authService.isAuthenticated$.subscribe(Ee=>{this.loggedIn=Ee}),this.authService.getUserName().then(Ee=>{this.userName=Ee}),this.authService.getUserMrn().then(Ee=>{this.myMrn=Ee}),this.theme=localStorage.getItem("theme")||"light",this.counterTheme="dark"===this.theme?"light":"dark",document.body.setAttribute("cds-theme",this.theme),this.loadLang()}loadLang(){this.currentLang=(0,P.rR)(this.translate),this.currentLangName=(0,P.Xo)(this.currentLang)}logOut(){var N=this;return(0,w.A)(function*(){N.authService.logout()})()}changeLang(N){var Q=this;return(0,w.A)(function*(){(0,P.lk)(Q.translate,N),Q.loadLang()})()}goHome(){this.router.navigateByUrl("/pages")}goMyPage(){this.router.navigateByUrl("/pages/ir/user/"+this.myMrn)}toggleTheme(){this.theme="light"===this.theme?"dark":"light",document.body.setAttribute("cds-theme",this.theme),(()=>{localStorage.setItem("theme",this.theme)})(),this.counterTheme="dark"===this.theme?"light":"dark"}goMCP(){this.router.navigateByUrl("/mcp")}goS124(){this.router.navigateByUrl("/s124")}goARP(){this.router.navigateByUrl("/arp")}goChat(){this.router.navigateByUrl("/chat")}goFront(){this.router.navigateByUrl("/")}goPrice(){this.router.navigateByUrl("/pricing")}static#e=this.\u0275fac=function(Q){return new(Q||T)(u.rXU(X.u),u.rXU(Y.c$),u.rXU(de.Ix))};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-header"]],decls:3,vars:3,consts:[[3,"role","clr-nav-level"],[1,"branding"],[1,"nav-link",3,"click"],["shape","crown"],[1,"title"],[1,"header-nav",3,"clr-nav-level"],[1,"header-actions"],["clrDropdownTrigger","","aria-label","open user profile",1,"nav-text"],["shape","angle","direction","down"],["aria-label","option.code","clrDropdownItem",""],["clrPosition","bottom-right",4,"clrIfOpen"],["aria-label","option.code","clrDropdownItem","",3,"click"],["clrPosition","bottom-right"],[1,"btn","btn-link",3,"click"],["routerLinkActive","active",1,"nav-link",3,"click"],["shape","applications"],[1,"header-nav"],["clrDropdownTrigger","",1,"btn","btn-link","nav-link"],["shape","caret down"],["clrPosition","bottom-left"],["clrDropdownItem","","routerLinkActive","active",3,"click"],["routerLinkActive","active",1,"btn","btn-link","nav-link",3,"click"]],template:function(Q,G){1&Q&&(u.j41(0,"clr-header",0),u.DNE(1,U,19,3)(2,J,21,0),u.k0s()),2&Q&&(u.Y8G("role",G.role)("clr-nav-level",1),u.R7$(),u.vxM(G.loggedIn?1:2))},dependencies:[D.U4n,D.BlU,D.vEc,D.Z2Z,D.ndX,D.ZNj,D.TZW,D.e3J,D.jWx,D.wIE,de.wQ]})}return T})();const $=[{title:"MaaS Management",icon:"lock",children:[{title:"Organization Management",link:"/pages/maas/organization",group:"supermgmt"},{title:"Service Management",link:"/pages/maas/service",group:"supermgmt"},{title:"Subscription Plan Management",link:"/pages/maas/plan",group:"supermgmt"},{title:"Org-Sub Management",link:"/pages/maas/orgsubscription",group:"supermgmt"},{title:"Invoice Management",link:"/pages/maas/invoice",group:"supermgmt"},{title:"Organization Approval",link:"/pages/maas/orgcandidate",group:"supermgmt"}],permissions:["SuperAdmin"]},{title:"My Organization Management",icon:"layers",children:[{title:"Subscription plans",link:"/pages/org/subscription",group:"myorg"},{title:"Service Usage Report",link:"/pages/org/orgsvcusage",group:"myorg"},{title:"Invoice Management",link:"/pages/org/invoice",group:"myorg"}],permissions:["SuperAdmin","OrgAdmin"]},{title:"User Management",icon:"user",children:[{title:"User Management",link:"/pages/user/user",group:"usermgmt"},{title:"Cert Management",link:"/pages/user/usercert",group:"usermgmt"},{title:"User Service Subscription",link:"/pages/user/svcpermission",group:"usermgmt"},{title:"User Service Usage",link:"/pages/user/usersvcusage",group:"usermgmt"}],permissions:["SuperAdmin","OrgAdmin","UserAdmin"]},{title:"Service Access",icon:"network-globe",link:"https://chatsea.aivn.kr",permissions:["SuperAdmin","OrgAdmin","UserAdmin","User"]},{title:"Knowledge Base",icon:"help",children:[{title:"Documentation",link:"/pages/documentation",group:"myorg"},{title:"FAQ",link:"/pages/faq",group:"myorg"}],permissions:["SuperAdmin","OrgAdmin","UserAdmin","User"]}];var ce=O(8214),V=O(357),xe=O(6156),Se=O(7949),Oe=O(7537),te=O(2047);function Z(T,H){1&T&&u.nrm(0,"div",6)}function Ue(T,H){if(1&T&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const N=u.XpG(2).$implicit;u.Y8G("routerLink",N.link),u.R7$(),u.SpI(" ",u.bMT(2,2,N.title)," ")}}function Ne(T,H){if(1&T&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const N=u.XpG(2).$implicit;u.Y8G("routerLink",N.link),u.R7$(),u.SpI(" ",u.bMT(2,2,N.title)," ")}}function ke(T,H){if(1&T&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const N=u.XpG(2).$implicit;u.Y8G("routerLink",N.link),u.R7$(),u.SpI(" ",u.bMT(2,2,N.title)," ")}}function rt(T,H){if(1&T&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const N=u.XpG(2).$implicit;u.Y8G("routerLink",N.link),u.R7$(),u.SpI(" ",u.bMT(2,2,N.title)," ")}}function _t(T,H){if(1&T&&u.DNE(0,Ue,3,4,"a",8)(1,Ne,3,4,"a",8)(2,ke,3,4,"a",8)(3,rt,3,4,"a",8),2&T){const N=u.XpG().$implicit,Q=u.XpG(3);u.vxM(N.forSuperAdmin&&"SuperAdmin"==Q.role?0:-1),u.R7$(),u.vxM(N.forOrgAdmin&&"OrgAdmin"==Q.role?1:-1),u.R7$(),u.vxM(N.forUserAdmin&&"UserAdmin"==Q.role?2:3)}}function $e(T,H){if(1&T&&(u.j41(0,"div",7),u.EFF(1),u.k0s()),2&T){const N=u.XpG().$implicit;u.R7$(),u.JRh(N.title)}}function Xe(T,H){if(1&T&&u.DNE(0,Z,1,0,"div",6)(1,_t,4,3)(2,$e,2,1,"div",7),2&T){const N=H.$implicit;u.vxM("separator"===N.title?0:N.link?1:2)}}function wt(T,H){if(1&T&&(u.j41(0,"clr-vertical-nav-group",4),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.j41(4,"clr-vertical-nav-group-children"),u.Z7z(5,Xe,3,1,null,null,u.fX1),u.nrm(7,"div",6),u.k0s()()),2&T){const N=u.XpG().$implicit;u.R7$(),u.BMQ("shape",N.icon),u.R7$(),u.SpI(" ",u.bMT(3,2,N.title)," "),u.R7$(3),u.Dyx(N.children)}}function at(T,H){if(1&T&&(u.j41(0,"a",9),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.k0s()),2&T){const N=u.XpG(2).$implicit;u.Y8G("href",N.link,u.B4B),u.R7$(),u.BMQ("shape",N.icon),u.R7$(),u.SpI(" ",u.bMT(3,3,N.title)," ")}}function Tt(T,H){if(1&T&&(u.j41(0,"a",8),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.k0s()),2&T){const N=u.XpG(2).$implicit;u.Y8G("routerLink",N.link),u.R7$(),u.BMQ("shape",N.icon),u.R7$(),u.SpI(" ",u.bMT(3,3,N.title)," ")}}function Nt(T,H){if(1&T&&u.DNE(0,at,4,5,"a",9)(1,Tt,4,5,"a",8),2&T){const N=u.XpG().$implicit;u.vxM(N.link.includes("http")?0:1)}}function f(T,H){if(1&T&&(u.qex(0),u.DNE(1,wt,8,4,"clr-vertical-nav-group",3)(2,Nt,2,1,"ng-template",null,0,u.C5r),u.bVm()),2&T){const N=H.$implicit,Q=u.sdS(3);u.R7$(),u.Y8G("ngIf",N.children)("ngIfElse",Q)}}c.h.addIcons(V.V,xe.h,Se.Q,Oe.t);let ae=(()=>{class T{constructor(N,Q){this.authService=Q,this.navGroups=$,this.role="",this.hasServiceRegistry=ce.o.HAS_SERVICE_REGISTRY,N.setDefaultLang("en-GB"),N.use("en-GB")}ngOnInit(){this.navGroups=$.filter(N=>N.permissions.includes("User")),this.authService.user$.subscribe(N=>{N&&(this.navGroups=$.filter(Q=>Q.permissions.includes(N.role)))})}static#e=this.\u0275fac=function(Q){return new(Q||T)(u.rXU(Y.c$),u.rXU(X.u))};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-sidebar"]],decls:2,vars:2,consts:[["singleLink",""],[3,"clrVerticalNavCollapsible"],[4,"ngFor","ngForOf"],["routerLinkActive","active",4,"ngIf","ngIfElse"],["routerLinkActive","active"],["clrVerticalNavIcon",""],[1,"nav-divider"],[1,"nav-header"],["clrVerticalNavLink","","routerLinkActive","active",3,"routerLink"],["clrVerticalNavLink","","target","_blank",3,"href"]],template:function(Q,G){1&Q&&(u.j41(0,"clr-vertical-nav",1),u.DNE(1,f,4,2,"ng-container",2),u.k0s()),2&Q&&(u.Y8G("clrVerticalNavCollapsible",!1),u.R7$(),u.Y8G("ngForOf",G.navGroups))},dependencies:[te.Sq,te.bT,D.BlU,D.D2I,D.VTg,D.wqM,D.zLy,D.Wfw,de.Wk,de.wQ,Y.D9]})}return T})();const ie=["*"];function M(T,H){1&T&&u.nrm(0,"mp-sidebar",1)}let x=(()=>{class T{constructor(){this.hasSidebar=!0}static#e=this.\u0275fac=function(Q){return new(Q||T)};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-main"]],inputs:{hasSidebar:"hasSidebar"},ngContentSelectors:ie,decls:4,vars:1,consts:[[1,"content-container"],[1,"sidenav"],[1,"content-area"]],template:function(Q,G){1&Q&&(u.NAR(),u.j41(0,"div",0),u.DNE(1,M,1,0,"mp-sidebar",1),u.j41(2,"div",2),u.SdG(3),u.k0s()()),2&Q&&(u.R7$(),u.vxM(G.hasSidebar?1:-1))},dependencies:[ae]})}return T})();const q=["*"];c.h.addIcons(I);let ue=(()=>{class T{constructor(){this.hasSidebar=!0}static#e=this.\u0275fac=function(Q){return new(Q||T)};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-layout"]],inputs:{hasSidebar:"hasSidebar"},ngContentSelectors:q,decls:4,vars:1,consts:[[3,"hasSidebar"]],template:function(Q,G){1&Q&&(u.NAR(),u.j41(0,"clr-main-container"),u.nrm(1,"mp-header"),u.j41(2,"mp-main",0),u.SdG(3),u.k0s()()),2&Q&&(u.R7$(2),u.Y8G("hasSidebar",G.hasSidebar))},dependencies:[D.ohH,D.y1j,m,x]})}return T})()},897:(Qe,F,O)=>{"use strict";O.d(F,{B:()=>n});var n=function(c){return c.SuperAdmin="maas",c.OrgAdmin="org",c.UserAdmin="user",c.User="my",c}(n||{})},5540:function(Qe,F){var O,c;void 0!==(c="function"==typeof(O=function(){"use strict";function p(b,o,_){var C=new XMLHttpRequest;C.open("GET",b),C.responseType="blob",C.onload=function(){E(C.response,o,_)},C.onerror=function(){console.error("could not download file")},C.send()}function I(b){var o=new XMLHttpRequest;o.open("HEAD",b,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function u(b){try{b.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(o)}}var D="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,w=D.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),E=D.saveAs||("object"!=typeof window||window!==D?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(b,o,_){var C=D.URL||D.webkitURL,v=document.createElement("a");v.download=o=o||b.name||"download",v.rel="noopener","string"==typeof b?(v.href=b,v.origin===location.origin?u(v):I(v.href)?p(b,o,_):u(v,v.target="_blank")):(v.href=C.createObjectURL(b),setTimeout(function(){C.revokeObjectURL(v.href)},4e4),setTimeout(function(){u(v)},0))}:"msSaveOrOpenBlob"in navigator?function(b,o,_){if(o=o||b.name||"download","string"!=typeof b)navigator.msSaveOrOpenBlob(function y(b,o){return typeof o>"u"?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\ufeff",b],{type:b.type}):b}(b,_),o);else if(I(b))p(b,o,_);else{var C=document.createElement("a");C.href=b,C.target="_blank",setTimeout(function(){u(C)})}}:function(b,o,_,C){if((C=C||open("","_blank"))&&(C.document.title=C.document.body.innerText="downloading..."),"string"==typeof b)return p(b,o,_);var v="application/octet-stream"===b.type,A=/constructor/i.test(D.HTMLElement)||D.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||v&&A||w)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var Y=R.result;Y=k?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),C?C.location.href=Y:location=Y,C=null},R.readAsDataURL(b)}else{var P=D.URL||D.webkitURL,X=P.createObjectURL(b);C?C.location=X:location.href=X,C=null,setTimeout(function(){P.revokeObjectURL(X)},4e4)}});D.saveAs=E.saveAs=E,Qe.exports=E})?O.apply(F,[]):O)&&(Qe.exports=c)},8721:Qe=>{Qe.exports=function F(O,n,c){function y(u,D){if(!n[u]){if(!O[u]){if(p)return p(u,!0);var E=new Error("Cannot find module '"+u+"'");throw E.code="MODULE_NOT_FOUND",E}var b=n[u]={exports:{}};O[u][0].call(b.exports,function(o){return y(O[u][1][o]||o)},b,b.exports,F,O,n,c)}return n[u].exports}for(var p=void 0,I=0;I<c.length;I++)y(c[I]);return y}({1:[function(F,O,n){"use strict";var c=F("./utils"),y=F("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(I){for(var u,D,w,b,o,_,C=[],v=0,A=I.length,k=A,R="string"!==c.getTypeOf(I);v<I.length;)k=A-v,w=R?(u=I[v++],D=v<A?I[v++]:0,v<A?I[v++]:0):(u=I.charCodeAt(v++),D=v<A?I.charCodeAt(v++):0,v<A?I.charCodeAt(v++):0),b=(3&u)<<4|D>>4,o=1<k?(15&D)<<2|w>>6:64,_=2<k?63&w:64,C.push(p.charAt(u>>2)+p.charAt(b)+p.charAt(o)+p.charAt(_));return C.join("")},n.decode=function(I){var u,D,w,E,b,o,_=0,C=0,v="data:";if(I.substr(0,5)===v)throw new Error("Invalid base64 input, it looks like a data url.");var A,k=3*(I=I.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(I.charAt(I.length-1)===p.charAt(64)&&k--,I.charAt(I.length-2)===p.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=y.uint8array?new Uint8Array(0|k):new Array(0|k);_<I.length;)u=p.indexOf(I.charAt(_++))<<2|(E=p.indexOf(I.charAt(_++)))>>4,D=(15&E)<<4|(b=p.indexOf(I.charAt(_++)))>>2,w=(3&b)<<6|(o=p.indexOf(I.charAt(_++))),A[C++]=u,64!==b&&(A[C++]=D),64!==o&&(A[C++]=w);return A}},{"./support":30,"./utils":32}],2:[function(F,O,n){"use strict";var c=F("./external"),y=F("./stream/DataWorker"),p=F("./stream/Crc32Probe"),I=F("./stream/DataLengthProbe");function u(D,w,E,b,o){this.compressedSize=D,this.uncompressedSize=w,this.crc32=E,this.compression=b,this.compressedContent=o}u.prototype={getContentWorker:function(){var D=new y(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new I("data_length")),w=this;return D.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),D},getCompressedWorker:function(){return new y(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(D,w,E){return D.pipe(new p).pipe(new I("uncompressedSize")).pipe(w.compressWorker(E)).pipe(new I("compressedSize")).withStreamInfo("compression",w)},O.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(F,O,n){"use strict";var c=F("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},n.DEFLATE=F("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(F,O,n){"use strict";var c=F("./utils"),y=function(){for(var p,I=[],u=0;u<256;u++){p=u;for(var D=0;D<8;D++)p=1&p?3988292384^p>>>1:p>>>1;I[u]=p}return I}();O.exports=function(p,I){return void 0!==p&&p.length?"string"!==c.getTypeOf(p)?function(u,D,w){var b=y,o=0+w;u^=-1;for(var _=0;_<o;_++)u=u>>>8^b[255&(u^D[_])];return~u}(0|I,p,p.length):function(u,D,w){var b=y,o=0+w;u^=-1;for(var _=0;_<o;_++)u=u>>>8^b[255&(u^D.charCodeAt(_))];return~u}(0|I,p,p.length):0}},{"./utils":32}],5:[function(F,O,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(F,O,n){"use strict";var c;c=typeof Promise<"u"?Promise:F("lie"),O.exports={Promise:c}},{lie:37}],7:[function(F,O,n){"use strict";var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",y=F("pako"),p=F("./utils"),I=F("./stream/GenericWorker"),u=c?"uint8array":"array";function D(w,E){I.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=E,this.meta={}}n.magic="\b\0",p.inherits(D,I),D.prototype.processChunk=function(w){this.meta=w.meta,null===this._pako&&this._createPako(),this._pako.push(p.transformTo(u,w.data),!1)},D.prototype.flush=function(){I.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},D.prototype.cleanUp=function(){I.prototype.cleanUp.call(this),this._pako=null},D.prototype._createPako=function(){this._pako=new y[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(E){w.push({data:E,meta:w.meta})}},n.compressWorker=function(w){return new D("Deflate",w)},n.uncompressWorker=function(){return new D("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(F,O,n){"use strict";function c(b,o){var _,C="";for(_=0;_<o;_++)C+=String.fromCharCode(255&b),b>>>=8;return C}function y(b,o,_,C,v,A){var k,R,P=b.file,X=b.compression,Y=A!==u.utf8encode,de=p.transformTo("string",A(P.name)),ne=p.transformTo("string",u.utf8encode(P.name)),be=P.comment,Ve=p.transformTo("string",A(be)),U=p.transformTo("string",u.utf8encode(be)),J=ne.length!==P.name.length,m=U.length!==be.length,$="",ce="",V="",xe=P.dir,Se=P.date,Oe={crc32:0,compressedSize:0,uncompressedSize:0};o&&!_||(Oe.crc32=b.crc32,Oe.compressedSize=b.compressedSize,Oe.uncompressedSize=b.uncompressedSize);var te=0;o&&(te|=8),Y||!J&&!m||(te|=2048);var ke,_t,Z=0,Ue=0;xe&&(Z|=16),"UNIX"===v?(Ue=798,Z|=(_t=ke=P.unixPermissions,ke||(_t=xe?16893:33204),(65535&_t)<<16)):(Ue=20,Z|=function(ke){return 63&(ke||0)}(P.dosPermissions)),k=Se.getUTCHours(),k<<=6,k|=Se.getUTCMinutes(),k<<=5,k|=Se.getUTCSeconds()/2,R=Se.getUTCFullYear()-1980,R<<=4,R|=Se.getUTCMonth()+1,R<<=5,R|=Se.getUTCDate(),J&&(ce=c(1,1)+c(D(de),4)+ne,$+="up"+c(ce.length,2)+ce),m&&(V=c(1,1)+c(D(Ve),4)+U,$+="uc"+c(V.length,2)+V);var Ne="";return Ne+="\n\0",Ne+=c(te,2),Ne+=X.magic,Ne+=c(k,2),Ne+=c(R,2),Ne+=c(Oe.crc32,4),Ne+=c(Oe.compressedSize,4),Ne+=c(Oe.uncompressedSize,4),Ne+=c(de.length,2),Ne+=c($.length,2),{fileRecord:w.LOCAL_FILE_HEADER+Ne+de+$,dirRecord:w.CENTRAL_FILE_HEADER+c(Ue,2)+Ne+c(Ve.length,2)+"\0\0\0\0"+c(Z,4)+c(C,4)+de+$+Ve}}var p=F("../utils"),I=F("../stream/GenericWorker"),u=F("../utf8"),D=F("../crc32"),w=F("../signature");function E(b,o,_,C){I.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=o,this.zipPlatform=_,this.encodeFileName=C,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(E,I),E.prototype.push=function(b){var o=b.meta.percent||0,_=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,I.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:_?(o+100*(_-C-1))/_:100}}))},E.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var o=this.streamFiles&&!b.file.dir;if(o){var _=y(b,o,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(b){this.accumulate=!1;var C,o=this.streamFiles&&!b.file.dir,_=y(b,o,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),o)this.push({data:(C=b,w.DATA_DESCRIPTOR+c(C.crc32,4)+c(C.compressedSize,4)+c(C.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var b=this.bytesWritten,o=0;o<this.dirRecords.length;o++)this.push({data:this.dirRecords[o],meta:{percent:100}});var v,A,k,X,C=(v=this.dirRecords.length,A=this.bytesWritten-b,k=b,X=p.transformTo("string",(0,this.encodeFileName)(this.zipComment)),w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(v,2)+c(v,2)+c(A,4)+c(k,4)+c(X.length,2)+X);this.push({data:C,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(b){this._sources.push(b);var o=this;return b.on("data",function(_){o.processChunk(_)}),b.on("end",function(){o.closedSource(o.previous.streamInfo),o._sources.length?o.prepareNextSource():o.end()}),b.on("error",function(_){o.error(_)}),this},E.prototype.resume=function(){return!!I.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(b){var o=this._sources;if(!I.prototype.error.call(this,b))return!1;for(var _=0;_<o.length;_++)try{o[_].error(b)}catch{}return!0},E.prototype.lock=function(){I.prototype.lock.call(this);for(var b=this._sources,o=0;o<b.length;o++)b[o].lock()},O.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(F,O,n){"use strict";var c=F("../compressions"),y=F("./ZipFileWorker");n.generateWorker=function(p,I,u){var D=new y(I.streamFiles,u,I.platform,I.encodeFileName),w=0;try{p.forEach(function(E,b){w++;var o=function(A,k){var R=A||k,P=c[R];if(!P)throw new Error(R+" is not a valid compression method !");return P}(b.options.compression,I.compression),C=b.dir,v=b.date;b._compressWorker(o,b.options.compressionOptions||I.compressionOptions||{}).withStreamInfo("file",{name:E,dir:C,date:v,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(D)}),D.entriesCount=w}catch(E){D.error(E)}return D}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(F,O,n){"use strict";function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var y=new c;for(var p in this)"function"!=typeof this[p]&&(y[p]=this[p]);return y}}(c.prototype=F("./object")).loadAsync=F("./load"),c.support=F("./support"),c.defaults=F("./defaults"),c.version="3.10.1",c.loadAsync=function(y,p){return(new c).loadAsync(y,p)},c.external=F("./external"),O.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(F,O,n){"use strict";var c=F("./utils"),y=F("./external"),p=F("./utf8"),I=F("./zipEntries"),u=F("./stream/Crc32Probe"),D=F("./nodejsUtils");function w(E){return new y.Promise(function(b,o){var _=E.decompressed.getContentWorker().pipe(new u);_.on("error",function(C){o(C)}).on("end",function(){_.streamInfo.crc32!==E.decompressed.crc32?o(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}O.exports=function(E,b){var o=this;return b=c.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),D.isNode&&D.isStream(E)?y.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",E,!0,b.optimizedBinaryString,b.base64).then(function(_){var C=new I(b);return C.load(_),C}).then(function(_){var C=[y.Promise.resolve(_)],v=_.files;if(b.checkCRC32)for(var A=0;A<v.length;A++)C.push(w(v[A]));return y.Promise.all(C)}).then(function(_){for(var C=_.shift(),v=C.files,A=0;A<v.length;A++){var k=v[A],R=k.fileNameStr,P=c.resolve(k.fileNameStr);o.file(P,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:b.createFolders}),k.dir||(o.file(P).unsafeOriginalName=R)}return C.zipComment.length&&(o.comment=C.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(F,O,n){"use strict";var c=F("../utils"),y=F("../stream/GenericWorker");function p(I,u){y.call(this,"Nodejs stream input adapter for "+I),this._upstreamEnded=!1,this._bindStream(u)}c.inherits(p,y),p.prototype._bindStream=function(I){var u=this;(this._stream=I).pause(),I.on("data",function(D){u.push({data:D,meta:{percent:0}})}).on("error",function(D){u.isPaused?this.generatedError=D:u.error(D)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},p.prototype.pause=function(){return!!y.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},O.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(F,O,n){"use strict";var c=F("readable-stream").Readable;function y(p,I,u){c.call(this,I),this._helper=p;var D=this;p.on("data",function(w,E){D.push(w)||D._helper.pause(),u&&u(E)}).on("error",function(w){D.emit("error",w)}).on("end",function(){D.push(null)})}F("../utils").inherits(y,c),y.prototype._read=function(){this._helper.resume()},O.exports=y},{"../utils":32,"readable-stream":16}],14:[function(F,O,n){"use strict";O.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,y){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,y);if("number"==typeof c)throw new Error('The "data" argument must not be a number');return new Buffer(c,y)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var y=new Buffer(c);return y.fill(0),y},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&"function"==typeof c.on&&"function"==typeof c.pause&&"function"==typeof c.resume}}},{}],15:[function(F,O,n){"use strict";function c(P,X,Y){var de,ne=p.getTypeOf(X),be=p.extend(Y||{},D);be.date=be.date||new Date,null!==be.compression&&(be.compression=be.compression.toUpperCase()),"string"==typeof be.unixPermissions&&(be.unixPermissions=parseInt(be.unixPermissions,8)),be.unixPermissions&&16384&be.unixPermissions&&(be.dir=!0),be.dosPermissions&&16&be.dosPermissions&&(be.dir=!0),be.dir&&(P=v(P)),be.createFolders&&(de=C(P))&&A.call(this,de,!0),Y&&void 0!==Y.binary||(be.binary=!("string"===ne&&!1===be.binary&&!1===be.base64)),(X instanceof w&&0===X.uncompressedSize||be.dir||!X||0===X.length)&&(be.base64=!1,be.binary=!0,X="",be.compression="STORE",ne="string");var U;U=X instanceof w||X instanceof I?X:o.isNode&&o.isStream(X)?new _(P,X):p.prepareContent(P,X,be.binary,be.optimizedBinaryString,be.base64);var J=new E(P,U,be);this.files[P]=J}var y=F("./utf8"),p=F("./utils"),I=F("./stream/GenericWorker"),u=F("./stream/StreamHelper"),D=F("./defaults"),w=F("./compressedObject"),E=F("./zipObject"),b=F("./generate"),o=F("./nodejsUtils"),_=F("./nodejs/NodejsStreamInputAdapter"),C=function(P){"/"===P.slice(-1)&&(P=P.substring(0,P.length-1));var X=P.lastIndexOf("/");return 0<X?P.substring(0,X):""},v=function(P){return"/"!==P.slice(-1)&&(P+="/"),P},A=function(P,X){return X=void 0!==X?X:D.createFolders,P=v(P),this.files[P]||c.call(this,P,null,{dir:!0,createFolders:X}),this.files[P]};function k(P){return"[object RegExp]"===Object.prototype.toString.call(P)}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var X,Y,de;for(X in this.files)de=this.files[X],(Y=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&P(Y,de)},filter:function(P){var X=[];return this.forEach(function(Y,de){P(Y,de)&&X.push(de)}),X},file:function(P,X,Y){if(1!==arguments.length)return c.call(this,P=this.root+P,X,Y),this;if(k(P)){var de=P;return this.filter(function(be,Ve){return!Ve.dir&&de.test(be)})}var ne=this.files[this.root+P];return ne&&!ne.dir?ne:null},folder:function(P){if(!P)return this;if(k(P))return this.filter(function(ne,be){return be.dir&&P.test(ne)});var Y=A.call(this,this.root+P),de=this.clone();return de.root=Y.name,de},remove:function(P){var X=this.files[P=this.root+P];if(X||("/"!==P.slice(-1)&&(P+="/"),X=this.files[P]),X&&!X.dir)delete this.files[P];else for(var Y=this.filter(function(ne,be){return be.name.slice(0,P.length)===P}),de=0;de<Y.length;de++)delete this.files[Y[de].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var X,Y={};try{if((Y=p.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:y.utf8encode})).type=Y.type.toLowerCase(),Y.compression=Y.compression.toUpperCase(),"binarystring"===Y.type&&(Y.type="string"),!Y.type)throw new Error("No output type specified.");p.checkSupport(Y.type),"darwin"!==Y.platform&&"freebsd"!==Y.platform&&"linux"!==Y.platform&&"sunos"!==Y.platform||(Y.platform="UNIX"),"win32"===Y.platform&&(Y.platform="DOS"),X=b.generateWorker(this,Y,Y.comment||this.comment||"")}catch(ne){(X=new I("error")).error(ne)}return new u(X,Y.type||"string",Y.mimeType)},generateAsync:function(P,X){return this.generateInternalStream(P).accumulate(X)},generateNodeStream:function(P,X){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(X)}};O.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(F,O,n){"use strict";O.exports=F("stream")},{stream:void 0}],17:[function(F,O,n){"use strict";var c=F("./DataReader");function y(p){c.call(this,p);for(var I=0;I<this.data.length;I++)p[I]=255&p[I]}F("../utils").inherits(y,c),y.prototype.byteAt=function(p){return this.data[this.zero+p]},y.prototype.lastIndexOfSignature=function(p){for(var I=p.charCodeAt(0),u=p.charCodeAt(1),D=p.charCodeAt(2),w=p.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===I&&this.data[E+1]===u&&this.data[E+2]===D&&this.data[E+3]===w)return E-this.zero;return-1},y.prototype.readAndCheckSignature=function(p){var I=p.charCodeAt(0),u=p.charCodeAt(1),D=p.charCodeAt(2),w=p.charCodeAt(3),E=this.readData(4);return I===E[0]&&u===E[1]&&D===E[2]&&w===E[3]},y.prototype.readData=function(p){if(this.checkOffset(p),0===p)return[];var I=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,I},O.exports=y},{"../utils":32,"./DataReader":18}],18:[function(F,O,n){"use strict";var c=F("../utils");function y(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}y.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var I,u=0;for(this.checkOffset(p),I=this.index+p-1;I>=this.index;I--)u=(u<<8)+this.byteAt(I);return this.index+=p,u},readString:function(p){return c.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},O.exports=y},{"../utils":32}],19:[function(F,O,n){"use strict";var c=F("./Uint8ArrayReader");function y(p){c.call(this,p)}F("../utils").inherits(y,c),y.prototype.readData=function(p){this.checkOffset(p);var I=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,I},O.exports=y},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(F,O,n){"use strict";var c=F("./DataReader");function y(p){c.call(this,p)}F("../utils").inherits(y,c),y.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},y.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},y.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},y.prototype.readData=function(p){this.checkOffset(p);var I=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,I},O.exports=y},{"../utils":32,"./DataReader":18}],21:[function(F,O,n){"use strict";var c=F("./ArrayReader");function y(p){c.call(this,p)}F("../utils").inherits(y,c),y.prototype.readData=function(p){if(this.checkOffset(p),0===p)return new Uint8Array(0);var I=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,I},O.exports=y},{"../utils":32,"./ArrayReader":17}],22:[function(F,O,n){"use strict";var c=F("../utils"),y=F("../support"),p=F("./ArrayReader"),I=F("./StringReader"),u=F("./NodeBufferReader"),D=F("./Uint8ArrayReader");O.exports=function(w){var E=c.getTypeOf(w);return c.checkSupport(E),"string"!==E||y.uint8array?"nodebuffer"===E?new u(w):y.uint8array?new D(c.transformTo("uint8array",w)):new p(c.transformTo("array",w)):new I(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(F,O,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(F,O,n){"use strict";var c=F("./GenericWorker"),y=F("../utils");function p(I){c.call(this,"ConvertWorker to "+I),this.destType=I}y.inherits(p,c),p.prototype.processChunk=function(I){this.push({data:y.transformTo(this.destType,I.data),meta:I.meta})},O.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(F,O,n){"use strict";var c=F("./GenericWorker"),y=F("../crc32");function p(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}F("../utils").inherits(p,c),p.prototype.processChunk=function(I){this.streamInfo.crc32=y(I.data,this.streamInfo.crc32||0),this.push(I)},O.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(F,O,n){"use strict";var c=F("../utils"),y=F("./GenericWorker");function p(I){y.call(this,"DataLengthProbe for "+I),this.propName=I,this.withStreamInfo(I,0)}c.inherits(p,y),p.prototype.processChunk=function(I){I&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+I.data.length),y.prototype.processChunk.call(this,I)},O.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(F,O,n){"use strict";var c=F("../utils"),y=F("./GenericWorker");function p(I){y.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,I.then(function(D){u.dataIsReady=!0,u.data=D,u.max=D&&D.length||0,u.type=c.getTypeOf(D),u.isPaused||u._tickAndRepeat()},function(D){u.error(D)})}c.inherits(p,y),p.prototype.cleanUp=function(){y.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var I=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":I=this.data.substring(this.index,u);break;case"uint8array":I=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":I=this.data.slice(this.index,u)}return this.index=u,this.push({data:I,meta:{percent:this.max?this.index/this.max*100:0}})},O.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(F,O,n){"use strict";function c(y){this.name=y||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(y){this.emit("data",y)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(y){this.emit("error",y)}return!0},error:function(y){return!this.isFinished&&(this.isPaused?this.generatedError=y:(this.isFinished=!0,this.emit("error",y),this.previous&&this.previous.error(y),this.cleanUp()),!0)},on:function(y,p){return this._listeners[y].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(y,p){if(this._listeners[y])for(var I=0;I<this._listeners[y].length;I++)this._listeners[y][I].call(this,p)},pipe:function(y){return y.registerPrevious(this)},registerPrevious:function(y){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=y.streamInfo,this.mergeStreamInfo(),this.previous=y;var p=this;return y.on("data",function(I){p.processChunk(I)}),y.on("end",function(){p.end()}),y.on("error",function(I){p.error(I)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var y=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),y=!0),this.previous&&this.previous.resume(),!y},flush:function(){},processChunk:function(y){this.push(y)},withStreamInfo:function(y,p){return this.extraStreamInfo[y]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var y in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,y)&&(this.streamInfo[y]=this.extraStreamInfo[y])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var y="Worker "+this.name;return this.previous?this.previous+" -> "+y:y}},O.exports=c},{}],29:[function(F,O,n){"use strict";var c=F("../utils"),y=F("./ConvertWorker"),p=F("./GenericWorker"),I=F("../base64"),u=F("../support"),D=F("../external"),w=null;if(u.nodestream)try{w=F("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(o,_,C){var v=_;switch(_){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=_,this._mimeType=C,c.checkSupport(v),this._worker=o.pipe(new y(v)),o.lock()}catch(A){this._worker=new p("error"),this._worker.error(A)}}b.prototype={accumulate:function(o){return function E(o,_){return new D.Promise(function(C,v){var A=[],k=o._internalType,R=o._outputType,P=o._mimeType;o.on("data",function(X,Y){A.push(X),_&&_(Y)}).on("error",function(X){A=[],v(X)}).on("end",function(){try{var X=function(Y,de,ne){switch(Y){case"blob":return c.newBlob(c.transformTo("arraybuffer",de),ne);case"base64":return I.encode(de);default:return c.transformTo(Y,de)}}(R,function(Y,de){var ne,be=0,Ve=null,U=0;for(ne=0;ne<de.length;ne++)U+=de[ne].length;switch(Y){case"string":return de.join("");case"array":return Array.prototype.concat.apply([],de);case"uint8array":for(Ve=new Uint8Array(U),ne=0;ne<de.length;ne++)Ve.set(de[ne],be),be+=de[ne].length;return Ve;case"nodebuffer":return Buffer.concat(de);default:throw new Error("concat : unsupported type '"+Y+"'")}}(k,A),P);C(X)}catch(Y){v(Y)}A=[]}).resume()})}(this,o)},on:function(o,_){var C=this;return this._worker.on(o,"data"===o?function(v){_.call(C,v.data,v.meta)}:function(){c.delay(_,arguments,C)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(o){if(c.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:"nodebuffer"!==this._outputType},o)}},O.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(F,O,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var c=new ArrayBuffer(0);try{n.blob=0===new Blob([c],{type:"application/zip"}).size}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);y.append(c),n.blob=0===y.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!F("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(F,O,n){"use strict";for(var c=F("./utils"),y=F("./support"),p=F("./nodejsUtils"),I=F("./stream/GenericWorker"),u=new Array(256),D=0;D<256;D++)u[D]=252<=D?6:248<=D?5:240<=D?4:224<=D?3:192<=D?2:1;function w(){I.call(this,"utf-8 decode"),this.leftOver=null}function E(){I.call(this,"utf-8 encode")}u[254]=u[254]=1,n.utf8encode=function(b){return y.nodebuffer?p.newBufferFrom(b,"utf-8"):function(o){var _,C,v,A,k,R=o.length,P=0;for(A=0;A<R;A++)55296==(64512&(C=o.charCodeAt(A)))&&A+1<R&&56320==(64512&(v=o.charCodeAt(A+1)))&&(C=65536+(C-55296<<10)+(v-56320),A++),P+=C<128?1:C<2048?2:C<65536?3:4;for(_=y.uint8array?new Uint8Array(P):new Array(P),A=k=0;k<P;A++)55296==(64512&(C=o.charCodeAt(A)))&&A+1<R&&56320==(64512&(v=o.charCodeAt(A+1)))&&(C=65536+(C-55296<<10)+(v-56320),A++),C<128?_[k++]=C:(C<2048?_[k++]=192|C>>>6:(C<65536?_[k++]=224|C>>>12:(_[k++]=240|C>>>18,_[k++]=128|C>>>12&63),_[k++]=128|C>>>6&63),_[k++]=128|63&C);return _}(b)},n.utf8decode=function(b){return y.nodebuffer?c.transformTo("nodebuffer",b).toString("utf-8"):function(o){var _,C,v,A,k=o.length,R=new Array(2*k);for(_=C=0;_<k;)if((v=o[_++])<128)R[C++]=v;else if(4<(A=u[v]))R[C++]=65533,_+=A-1;else{for(v&=2===A?31:3===A?15:7;1<A&&_<k;)v=v<<6|63&o[_++],A--;1<A?R[C++]=65533:v<65536?R[C++]=v:(R[C++]=55296|(v-=65536)>>10&1023,R[C++]=56320|1023&v)}return R.length!==C&&(R.subarray?R=R.subarray(0,C):R.length=C),c.applyFromCharCode(R)}(b=c.transformTo(y.uint8array?"uint8array":"array",b))},c.inherits(w,I),w.prototype.processChunk=function(b){var o=c.transformTo(y.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(y.uint8array){var _=o;(o=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),o.set(_,this.leftOver.length)}else o=this.leftOver.concat(o);this.leftOver=null}var C=function(A,k){var R;for((k=k||A.length)>A.length&&(k=A.length),R=k-1;0<=R&&128==(192&A[R]);)R--;return R<0||0===R?k:R+u[A[R]]>k?R:k}(o),v=o;C!==o.length&&(y.uint8array?(v=o.subarray(0,C),this.leftOver=o.subarray(C,o.length)):(v=o.slice(0,C),this.leftOver=o.slice(C,o.length))),this.push({data:n.utf8decode(v),meta:b.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=w,c.inherits(E,I),E.prototype.processChunk=function(b){this.push({data:n.utf8encode(b.data),meta:b.meta})},n.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(F,O,n){"use strict";var c=F("./support"),y=F("./base64"),p=F("./nodejsUtils"),I=F("./external");function u(_){return _}function D(_,C){for(var v=0;v<_.length;++v)C[v]=255&_.charCodeAt(v);return C}F("setimmediate"),n.newBlob=function(_,C){n.checkSupport("blob");try{return new Blob([_],{type:C})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(_),v.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(_,C,v){var A=[],k=0,R=_.length;if(R<=v)return String.fromCharCode.apply(null,_);for(;k<R;)A.push(String.fromCharCode.apply(null,"array"===C||"nodebuffer"===C?_.slice(k,Math.min(k+v,R)):_.subarray(k,Math.min(k+v,R)))),k+=v;return A.join("")},stringifyByChar:function(_){for(var C="",v=0;v<_.length;v++)C+=String.fromCharCode(_[v]);return C},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&1===String.fromCharCode.apply(null,p.allocBuffer(1)).length}catch{return!1}}()}};function E(_){var C=65536,v=n.getTypeOf(_),A=!0;if("uint8array"===v?A=w.applyCanBeUsed.uint8array:"nodebuffer"===v&&(A=w.applyCanBeUsed.nodebuffer),A)for(;1<C;)try{return w.stringifyByChunk(_,v,C)}catch{C=Math.floor(C/2)}return w.stringifyByChar(_)}function b(_,C){for(var v=0;v<_.length;v++)C[v]=_[v];return C}n.applyFromCharCode=E;var o={};o.string={string:u,array:function(_){return D(_,new Array(_.length))},arraybuffer:function(_){return o.string.uint8array(_).buffer},uint8array:function(_){return D(_,new Uint8Array(_.length))},nodebuffer:function(_){return D(_,p.allocBuffer(_.length))}},o.array={string:E,array:u,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return p.newBufferFrom(_)}},o.arraybuffer={string:function(_){return E(new Uint8Array(_))},array:function(_){return b(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:u,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return p.newBufferFrom(new Uint8Array(_))}},o.uint8array={string:E,array:function(_){return b(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:u,nodebuffer:function(_){return p.newBufferFrom(_)}},o.nodebuffer={string:E,array:function(_){return b(_,new Array(_.length))},arraybuffer:function(_){return o.nodebuffer.uint8array(_).buffer},uint8array:function(_){return b(_,new Uint8Array(_.length))},nodebuffer:u},n.transformTo=function(_,C){if(C=C||"",!_)return C;n.checkSupport(_);var v=n.getTypeOf(C);return o[v][_](C)},n.resolve=function(_){for(var C=_.split("/"),v=[],A=0;A<C.length;A++){var k=C[A];"."===k||""===k&&0!==A&&A!==C.length-1||(".."===k?v.pop():v.push(k))}return v.join("/")},n.getTypeOf=function(_){return"string"==typeof _?"string":"[object Array]"===Object.prototype.toString.call(_)?"array":c.nodebuffer&&p.isBuffer(_)?"nodebuffer":c.uint8array&&_ instanceof Uint8Array?"uint8array":c.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(_){if(!c[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(_){var C,v,A="";for(v=0;v<(_||"").length;v++)A+="\\x"+((C=_.charCodeAt(v))<16?"0":"")+C.toString(16).toUpperCase();return A},n.delay=function(_,C,v){setImmediate(function(){_.apply(v||null,C||[])})},n.inherits=function(_,C){function v(){}v.prototype=C.prototype,_.prototype=new v},n.extend=function(){var _,C,v={};for(_=0;_<arguments.length;_++)for(C in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],C)&&void 0===v[C]&&(v[C]=arguments[_][C]);return v},n.prepareContent=function(_,C,v,A,k){return I.Promise.resolve(C).then(function(R){return c.blob&&(R instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R)))&&typeof FileReader<"u"?new I.Promise(function(P,X){var Y=new FileReader;Y.onload=function(de){P(de.target.result)},Y.onerror=function(de){X(de.target.error)},Y.readAsArrayBuffer(R)}):R}).then(function(R){var X,P=n.getTypeOf(R);return P?("arraybuffer"===P?R=n.transformTo("uint8array",R):"string"===P&&(k?R=y.decode(R):v&&!0!==A&&(R=D(X=R,c.uint8array?new Uint8Array(X.length):new Array(X.length)))),R):I.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(F,O,n){"use strict";var c=F("./reader/readerFor"),y=F("./utils"),p=F("./signature"),I=F("./zipEntry"),u=F("./support");function D(w){this.files=[],this.loadOptions=w}D.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+y.pretty(E)+", expected "+y.pretty(w)+")")}},isSignature:function(w,E){var b=this.reader.index;this.reader.setIndex(w);var o=this.reader.readString(4)===E;return this.reader.setIndex(b),o},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),b=y.transformTo(u.uint8array?"uint8array":"array",w);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,E,b,o=this.zip64EndOfCentralSize-44;0<o;)w=this.reader.readInt(2),E=this.reader.readInt(4),b=this.reader.readData(E),this.zip64ExtensibleData[w]={id:w,length:E,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,E;for(w=0;w<this.files.length;w++)this.reader.setIndex((E=this.files[w]).localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(w=new I({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var E=w;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===y.MAX_VALUE_16BITS||this.diskWithCentralDirStart===y.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===y.MAX_VALUE_16BITS||this.centralDirRecords===y.MAX_VALUE_16BITS||this.centralDirSize===y.MAX_VALUE_32BITS||this.centralDirOffset===y.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var o=E-b;if(0<o)this.isSignature(E,p.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(o<0)throw new Error("Corrupted zip: missing "+Math.abs(o)+" bytes.")},prepareReader:function(w){this.reader=c(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},O.exports=D},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(F,O,n){"use strict";var c=F("./reader/readerFor"),y=F("./utils"),p=F("./compressedObject"),I=F("./crc32"),u=F("./utf8"),D=F("./compressions"),w=F("./support");function E(b,o){this.options=b,this.loadOptions=o}E.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(b){var o,_;if(b.skip(22),this.fileNameLength=b.readInt(2),_=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(_),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(o=function(C){for(var v in D)if(Object.prototype.hasOwnProperty.call(D,v)&&D[v].magic===C)return D[v];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+y.pretty(this.compressionMethod)+" unknown (inner file : "+y.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,o,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var o=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(o),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==b&&(this.dosPermissions=63&this.externalFileAttributes),3==b&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=c(this.extraFields[1].value);this.uncompressedSize===y.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===y.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===y.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===y.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var o,_,C,v=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<v;)o=b.readInt(2),_=b.readInt(2),C=b.readData(_),this.extraFields[o]={id:o,length:_,value:C};b.setIndex(v)},handleUTF8:function(){var b=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var o=this.findExtraFieldUnicodePath();if(null!==o)this.fileNameStr=o;else{var _=y.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var C=this.findExtraFieldUnicodeComment();if(null!==C)this.fileCommentStr=C;else{var v=y.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var o=c(b.value);return 1!==o.readInt(1)||I(this.fileName)!==o.readInt(4)?null:u.utf8decode(o.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var o=c(b.value);return 1!==o.readInt(1)||I(this.fileComment)!==o.readInt(4)?null:u.utf8decode(o.readData(b.length-5))}return null}},O.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(F,O,n){"use strict";function c(o,_,C){this.name=o,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=_,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var y=F("./stream/StreamHelper"),p=F("./stream/DataWorker"),I=F("./utf8"),u=F("./compressedObject"),D=F("./stream/GenericWorker");c.prototype={internalStream:function(o){var _=null,C="string";try{if(!o)throw new Error("No output type specified.");var v="string"===(C=o.toLowerCase())||"text"===C;"binarystring"!==C&&"text"!==C||(C="string"),_=this._decompressWorker();var A=!this._dataBinary;A&&!v&&(_=_.pipe(new I.Utf8EncodeWorker)),!A&&v&&(_=_.pipe(new I.Utf8DecodeWorker))}catch(k){(_=new D("error")).error(k)}return new y(_,C,"")},async:function(o,_){return this.internalStream(o).accumulate(_)},nodeStream:function(o,_){return this.internalStream(o||"nodebuffer").toNodejsStream(_)},_compressWorker:function(o,_){if(this._data instanceof u&&this._data.compression.magic===o.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new I.Utf8EncodeWorker)),u.createWorkerFrom(C,o,_)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof D?this._data:new p(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<w.length;b++)c.prototype[w[b]]=E;O.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(F,O,n){(function(c){"use strict";var y,p,I=c.MutationObserver||c.WebKitMutationObserver;if(I){var u=0,D=new I(o),w=c.document.createTextNode("");D.observe(w,{characterData:!0}),y=function(){w.data=u=++u%2}}else if(c.setImmediate||void 0===c.MessageChannel)y="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var _=c.document.createElement("script");_.onreadystatechange=function(){o(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},c.document.documentElement.appendChild(_)}:function(){setTimeout(o,0)};else{var E=new c.MessageChannel;E.port1.onmessage=o,y=function(){E.port2.postMessage(0)}}var b=[];function o(){var _,C;p=!0;for(var v=b.length;v;){for(C=b,b=[],_=-1;++_<v;)C[_]();v=b.length}p=!1}O.exports=function(_){1!==b.push(_)||p||y()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(F,O,n){"use strict";var c=F("immediate");function y(){}var p={},I=["REJECTED"],u=["FULFILLED"],D=["PENDING"];function w(v){if("function"!=typeof v)throw new TypeError("resolver must be a function");this.state=D,this.queue=[],this.outcome=void 0,v!==y&&_(this,v)}function E(v,A,k){this.promise=v,"function"==typeof A&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),"function"==typeof k&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function b(v,A,k){c(function(){var R;try{R=A(k)}catch(P){return p.reject(v,P)}R===v?p.reject(v,new TypeError("Cannot resolve promise with itself")):p.resolve(v,R)})}function o(v){var A=v&&v.then;if(v&&("object"==typeof v||"function"==typeof v)&&"function"==typeof A)return function(){A.apply(v,arguments)}}function _(v,A){var k=!1;function R(Y){k||(k=!0,p.reject(v,Y))}function P(Y){k||(k=!0,p.resolve(v,Y))}var X=C(function(){A(P,R)});"error"===X.status&&R(X.value)}function C(v,A){var k={};try{k.value=v(A),k.status="success"}catch(R){k.status="error",k.value=R}return k}(O.exports=w).prototype.finally=function(v){if("function"!=typeof v)return this;var A=this.constructor;return this.then(function(k){return A.resolve(v()).then(function(){return k})},function(k){return A.resolve(v()).then(function(){throw k})})},w.prototype.catch=function(v){return this.then(null,v)},w.prototype.then=function(v,A){if("function"!=typeof v&&this.state===u||"function"!=typeof A&&this.state===I)return this;var k=new this.constructor(y);return this.state!==D?b(k,this.state===u?v:A,this.outcome):this.queue.push(new E(k,v,A)),k},E.prototype.callFulfilled=function(v){p.resolve(this.promise,v)},E.prototype.otherCallFulfilled=function(v){b(this.promise,this.onFulfilled,v)},E.prototype.callRejected=function(v){p.reject(this.promise,v)},E.prototype.otherCallRejected=function(v){b(this.promise,this.onRejected,v)},p.resolve=function(v,A){var k=C(o,A);if("error"===k.status)return p.reject(v,k.value);var R=k.value;if(R)_(v,R);else{v.state=u,v.outcome=A;for(var P=-1,X=v.queue.length;++P<X;)v.queue[P].callFulfilled(A)}return v},p.reject=function(v,A){v.state=I,v.outcome=A;for(var k=-1,R=v.queue.length;++k<R;)v.queue[k].callRejected(A);return v},w.resolve=function(v){return v instanceof this?v:p.resolve(new this(y),v)},w.reject=function(v){var A=new this(y);return p.reject(A,v)},w.all=function(v){var A=this;if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var k=v.length,R=!1;if(!k)return this.resolve([]);for(var P=new Array(k),X=0,Y=-1,de=new this(y);++Y<k;)ne(v[Y],Y);return de;function ne(be,Ve){A.resolve(be).then(function(U){P[Ve]=U,++X!==k||R||(R=!0,p.resolve(de,P))},function(U){R||(R=!0,p.reject(de,U))})}},w.race=function(v){if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var k=v.length,R=!1;if(!k)return this.resolve([]);for(var P=-1,X=new this(y);++P<k;)this.resolve(v[P]).then(function(de){R||(R=!0,p.resolve(X,de))},function(de){R||(R=!0,p.reject(X,de))});return X}},{immediate:36}],38:[function(F,O,n){"use strict";var c={};(0,F("./lib/utils/common").assign)(c,F("./lib/deflate"),F("./lib/inflate"),F("./lib/zlib/constants")),O.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(F,O,n){"use strict";var c=F("./zlib/deflate"),y=F("./utils/common"),p=F("./utils/strings"),I=F("./zlib/messages"),u=F("./zlib/zstream"),D=Object.prototype.toString,w=0,E=-1,b=0,o=8;function _(v){if(!(this instanceof _))return new _(v);this.options=y.assign({level:E,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},v||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var k=c.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(k!==w)throw new Error(I[k]);if(A.header&&c.deflateSetHeader(this.strm,A.header),A.dictionary){var R;if(R="string"==typeof A.dictionary?p.string2buf(A.dictionary):"[object ArrayBuffer]"===D.call(A.dictionary)?new Uint8Array(A.dictionary):A.dictionary,(k=c.deflateSetDictionary(this.strm,R))!==w)throw new Error(I[k]);this._dict_set=!0}}function C(v,A){var k=new _(A);if(k.push(v,!0),k.err)throw k.msg||I[k.err];return k.result}_.prototype.push=function(v,A){var k,R,P=this.strm,X=this.options.chunkSize;if(this.ended)return!1;R=A===~~A?A:!0===A?4:0,P.input="string"==typeof v?p.string2buf(v):"[object ArrayBuffer]"===D.call(v)?new Uint8Array(v):v,P.next_in=0,P.avail_in=P.input.length;do{if(0===P.avail_out&&(P.output=new y.Buf8(X),P.next_out=0,P.avail_out=X),1!==(k=c.deflate(P,R))&&k!==w)return this.onEnd(k),!(this.ended=!0);0!==P.avail_out&&(0!==P.avail_in||4!==R&&2!==R)||this.onData("string"===this.options.to?p.buf2binstring(y.shrinkBuf(P.output,P.next_out)):y.shrinkBuf(P.output,P.next_out))}while((0<P.avail_in||0===P.avail_out)&&1!==k);return 4===R?(k=c.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===w):2!==R||(this.onEnd(w),!(P.avail_out=0))},_.prototype.onData=function(v){this.chunks.push(v)},_.prototype.onEnd=function(v){v===w&&(this.result="string"===this.options.to?this.chunks.join(""):y.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},n.Deflate=_,n.deflate=C,n.deflateRaw=function(v,A){return(A=A||{}).raw=!0,C(v,A)},n.gzip=function(v,A){return(A=A||{}).gzip=!0,C(v,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(F,O,n){"use strict";var c=F("./zlib/inflate"),y=F("./utils/common"),p=F("./utils/strings"),I=F("./zlib/constants"),u=F("./zlib/messages"),D=F("./zlib/zstream"),w=F("./zlib/gzheader"),E=Object.prototype.toString;function b(_){if(!(this instanceof b))return new b(_);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},_||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,0===C.windowBits&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||_&&_.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D,this.strm.avail_out=0;var v=c.inflateInit2(this.strm,C.windowBits);if(v!==I.Z_OK)throw new Error(u[v]);this.header=new w,c.inflateGetHeader(this.strm,this.header)}function o(_,C){var v=new b(C);if(v.push(_,!0),v.err)throw v.msg||u[v.err];return v.result}b.prototype.push=function(_,C){var v,A,k,R,P,X,Y=this.strm,de=this.options.chunkSize,ne=this.options.dictionary,be=!1;if(this.ended)return!1;A=C===~~C?C:!0===C?I.Z_FINISH:I.Z_NO_FLUSH,Y.input="string"==typeof _?p.binstring2buf(_):"[object ArrayBuffer]"===E.call(_)?new Uint8Array(_):_,Y.next_in=0,Y.avail_in=Y.input.length;do{if(0===Y.avail_out&&(Y.output=new y.Buf8(de),Y.next_out=0,Y.avail_out=de),(v=c.inflate(Y,I.Z_NO_FLUSH))===I.Z_NEED_DICT&&ne&&(X="string"==typeof ne?p.string2buf(ne):"[object ArrayBuffer]"===E.call(ne)?new Uint8Array(ne):ne,v=c.inflateSetDictionary(this.strm,X)),v===I.Z_BUF_ERROR&&!0===be&&(v=I.Z_OK,be=!1),v!==I.Z_STREAM_END&&v!==I.Z_OK)return this.onEnd(v),!(this.ended=!0);Y.next_out&&(0!==Y.avail_out&&v!==I.Z_STREAM_END&&(0!==Y.avail_in||A!==I.Z_FINISH&&A!==I.Z_SYNC_FLUSH)||("string"===this.options.to?(k=p.utf8border(Y.output,Y.next_out),R=Y.next_out-k,P=p.buf2string(Y.output,k),Y.next_out=R,Y.avail_out=de-R,R&&y.arraySet(Y.output,Y.output,k,R,0),this.onData(P)):this.onData(y.shrinkBuf(Y.output,Y.next_out)))),0===Y.avail_in&&0===Y.avail_out&&(be=!0)}while((0<Y.avail_in||0===Y.avail_out)&&v!==I.Z_STREAM_END);return v===I.Z_STREAM_END&&(A=I.Z_FINISH),A===I.Z_FINISH?(v=c.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===I.Z_OK):A!==I.Z_SYNC_FLUSH||(this.onEnd(I.Z_OK),!(Y.avail_out=0))},b.prototype.onData=function(_){this.chunks.push(_)},b.prototype.onEnd=function(_){_===I.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):y.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},n.Inflate=b,n.inflate=o,n.inflateRaw=function(_,C){return(C=C||{}).raw=!0,o(_,C)},n.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(F,O,n){"use strict";var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(I){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var D=u.shift();if(D){if("object"!=typeof D)throw new TypeError(D+"must be non-object");for(var w in D)D.hasOwnProperty(w)&&(I[w]=D[w])}}return I},n.shrinkBuf=function(I,u){return I.length===u?I:I.subarray?I.subarray(0,u):(I.length=u,I)};var y={arraySet:function(I,u,D,w,E){if(u.subarray&&I.subarray)I.set(u.subarray(D,D+w),E);else for(var b=0;b<w;b++)I[E+b]=u[D+b]},flattenChunks:function(I){var u,D,w,E,b,o;for(u=w=0,D=I.length;u<D;u++)w+=I[u].length;for(o=new Uint8Array(w),u=E=0,D=I.length;u<D;u++)o.set(b=I[u],E),E+=b.length;return o}},p={arraySet:function(I,u,D,w,E){for(var b=0;b<w;b++)I[E+b]=u[D+b]},flattenChunks:function(I){return[].concat.apply([],I)}};n.setTyped=function(I){I?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,y)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,p))},n.setTyped(c)},{}],42:[function(F,O,n){"use strict";var c=F("./common"),y=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var I=new c.Buf8(256),u=0;u<256;u++)I[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function D(w,E){if(E<65537&&(w.subarray&&p||!w.subarray&&y))return String.fromCharCode.apply(null,c.shrinkBuf(w,E));for(var b="",o=0;o<E;o++)b+=String.fromCharCode(w[o]);return b}I[254]=I[254]=1,n.string2buf=function(w){var E,b,o,_,C,v=w.length,A=0;for(_=0;_<v;_++)55296==(64512&(b=w.charCodeAt(_)))&&_+1<v&&56320==(64512&(o=w.charCodeAt(_+1)))&&(b=65536+(b-55296<<10)+(o-56320),_++),A+=b<128?1:b<2048?2:b<65536?3:4;for(E=new c.Buf8(A),_=C=0;C<A;_++)55296==(64512&(b=w.charCodeAt(_)))&&_+1<v&&56320==(64512&(o=w.charCodeAt(_+1)))&&(b=65536+(b-55296<<10)+(o-56320),_++),b<128?E[C++]=b:(b<2048?E[C++]=192|b>>>6:(b<65536?E[C++]=224|b>>>12:(E[C++]=240|b>>>18,E[C++]=128|b>>>12&63),E[C++]=128|b>>>6&63),E[C++]=128|63&b);return E},n.buf2binstring=function(w){return D(w,w.length)},n.binstring2buf=function(w){for(var E=new c.Buf8(w.length),b=0,o=E.length;b<o;b++)E[b]=w.charCodeAt(b);return E},n.buf2string=function(w,E){var b,o,_,C,v=E||w.length,A=new Array(2*v);for(b=o=0;b<v;)if((_=w[b++])<128)A[o++]=_;else if(4<(C=I[_]))A[o++]=65533,b+=C-1;else{for(_&=2===C?31:3===C?15:7;1<C&&b<v;)_=_<<6|63&w[b++],C--;1<C?A[o++]=65533:_<65536?A[o++]=_:(A[o++]=55296|(_-=65536)>>10&1023,A[o++]=56320|1023&_)}return D(A,o)},n.utf8border=function(w,E){var b;for((E=E||w.length)>w.length&&(E=w.length),b=E-1;0<=b&&128==(192&w[b]);)b--;return b<0||0===b?E:b+I[w[b]]>E?b:E}},{"./common":41}],43:[function(F,O,n){"use strict";O.exports=function(c,y,p,I){for(var u=65535&c,D=c>>>16&65535,w=0;0!==p;){for(p-=w=2e3<p?2e3:p;D=D+(u=u+y[I++]|0)|0,--w;);u%=65521,D%=65521}return u|D<<16}},{}],44:[function(F,O,n){"use strict";O.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(F,O,n){"use strict";var c=function(){for(var y,p=[],I=0;I<256;I++){y=I;for(var u=0;u<8;u++)y=1&y?3988292384^y>>>1:y>>>1;p[I]=y}return p}();O.exports=function(y,p,I,u){var D=c,w=u+I;y^=-1;for(var E=u;E<w;E++)y=y>>>8^D[255&(y^p[E])];return~y}},{}],46:[function(F,O,n){"use strict";var c,y=F("../utils/common"),p=F("./trees"),I=F("./adler32"),u=F("./crc32"),D=F("./messages"),w=0,b=0,o=-2,v=2,A=8,R=286,P=30,X=19,Y=2*R+1,de=15,ne=3,be=258,Ve=be+ne+1,U=42,J=113;function xe(f,ae){return f.msg=D[ae],ae}function Se(f){return(f<<1)-(4<f?9:0)}function Oe(f){for(var ae=f.length;0<=--ae;)f[ae]=0}function te(f){var ae=f.state,ie=ae.pending;ie>f.avail_out&&(ie=f.avail_out),0!==ie&&(y.arraySet(f.output,ae.pending_buf,ae.pending_out,ie,f.next_out),f.next_out+=ie,ae.pending_out+=ie,f.total_out+=ie,f.avail_out-=ie,ae.pending-=ie,0===ae.pending&&(ae.pending_out=0))}function Z(f,ae){p._tr_flush_block(f,0<=f.block_start?f.block_start:-1,f.strstart-f.block_start,ae),f.block_start=f.strstart,te(f.strm)}function Ue(f,ae){f.pending_buf[f.pending++]=ae}function Ne(f,ae){f.pending_buf[f.pending++]=ae>>>8&255,f.pending_buf[f.pending++]=255&ae}function ke(f,ae){var ie,M,x=f.max_chain_length,q=f.strstart,ue=f.prev_length,T=f.nice_match,H=f.strstart>f.w_size-Ve?f.strstart-(f.w_size-Ve):0,N=f.window,Q=f.w_mask,G=f.prev,Ee=f.strstart+be,et=N[q+ue-1],Je=N[q+ue];f.prev_length>=f.good_match&&(x>>=2),T>f.lookahead&&(T=f.lookahead);do{if(N[(ie=ae)+ue]===Je&&N[ie+ue-1]===et&&N[ie]===N[q]&&N[++ie]===N[q+1]){q+=2,ie++;do{}while(N[++q]===N[++ie]&&N[++q]===N[++ie]&&N[++q]===N[++ie]&&N[++q]===N[++ie]&&N[++q]===N[++ie]&&N[++q]===N[++ie]&&N[++q]===N[++ie]&&N[++q]===N[++ie]&&q<Ee);if(M=be-(Ee-q),q=Ee-be,ue<M){if(f.match_start=ae,T<=(ue=M))break;et=N[q+ue-1],Je=N[q+ue]}}}while((ae=G[ae&Q])>H&&0!=--x);return ue<=f.lookahead?ue:f.lookahead}function rt(f){var ae,ie,M,x,q,ue,T,H,N,Q,G=f.w_size;do{if(x=f.window_size-f.lookahead-f.strstart,f.strstart>=G+(G-Ve)){for(y.arraySet(f.window,f.window,G,G,0),f.match_start-=G,f.strstart-=G,f.block_start-=G,ae=ie=f.hash_size;M=f.head[--ae],f.head[ae]=G<=M?M-G:0,--ie;);for(ae=ie=G;M=f.prev[--ae],f.prev[ae]=G<=M?M-G:0,--ie;);x+=G}if(0===f.strm.avail_in)break;if(T=f.window,H=f.strstart+f.lookahead,Q=void 0,(N=x)<(Q=(ue=f.strm).avail_in)&&(Q=N),ie=0===Q?0:(ue.avail_in-=Q,y.arraySet(T,ue.input,ue.next_in,Q,H),1===ue.state.wrap?ue.adler=I(ue.adler,T,Q,H):2===ue.state.wrap&&(ue.adler=u(ue.adler,T,Q,H)),ue.next_in+=Q,ue.total_in+=Q,Q),f.lookahead+=ie,f.lookahead+f.insert>=ne)for(f.ins_h=f.window[q=f.strstart-f.insert],f.ins_h=(f.ins_h<<f.hash_shift^f.window[q+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[q+ne-1])&f.hash_mask,f.prev[q&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=q,q++,f.insert--,!(f.lookahead+f.insert<ne)););}while(f.lookahead<Ve&&0!==f.strm.avail_in)}function _t(f,ae){for(var ie,M;;){if(f.lookahead<Ve){if(rt(f),f.lookahead<Ve&&ae===w)return 1;if(0===f.lookahead)break}if(ie=0,f.lookahead>=ne&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,ie=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),0!==ie&&f.strstart-ie<=f.w_size-Ve&&(f.match_length=ke(f,ie)),f.match_length>=ne)if(M=p._tr_tally(f,f.strstart-f.match_start,f.match_length-ne),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=ne){for(f.match_length--;f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,ie=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart,0!=--f.match_length;);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else M=p._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(M&&(Z(f,!1),0===f.strm.avail_out))return 1}return f.insert=f.strstart<ne-1?f.strstart:ne-1,4===ae?(Z(f,!0),0===f.strm.avail_out?3:4):f.last_lit&&(Z(f,!1),0===f.strm.avail_out)?1:2}function $e(f,ae){for(var ie,M,x;;){if(f.lookahead<Ve){if(rt(f),f.lookahead<Ve&&ae===w)return 1;if(0===f.lookahead)break}if(ie=0,f.lookahead>=ne&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,ie=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=ne-1,0!==ie&&f.prev_length<f.max_lazy_match&&f.strstart-ie<=f.w_size-Ve&&(f.match_length=ke(f,ie),f.match_length<=5&&(1===f.strategy||f.match_length===ne&&4096<f.strstart-f.match_start)&&(f.match_length=ne-1)),f.prev_length>=ne&&f.match_length<=f.prev_length){for(x=f.strstart+f.lookahead-ne,M=p._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-ne),f.lookahead-=f.prev_length-1,f.prev_length-=2;++f.strstart<=x&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,ie=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),0!=--f.prev_length;);if(f.match_available=0,f.match_length=ne-1,f.strstart++,M&&(Z(f,!1),0===f.strm.avail_out))return 1}else if(f.match_available){if((M=p._tr_tally(f,0,f.window[f.strstart-1]))&&Z(f,!1),f.strstart++,f.lookahead--,0===f.strm.avail_out)return 1}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(M=p._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<ne-1?f.strstart:ne-1,4===ae?(Z(f,!0),0===f.strm.avail_out?3:4):f.last_lit&&(Z(f,!1),0===f.strm.avail_out)?1:2}function Xe(f,ae,ie,M,x){this.good_length=f,this.max_lazy=ae,this.nice_length=ie,this.max_chain=M,this.func=x}function wt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(2*Y),this.dyn_dtree=new y.Buf16(2*(2*P+1)),this.bl_tree=new y.Buf16(2*(2*X+1)),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(de+1),this.heap=new y.Buf16(2*R+1),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(2*R+1),Oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(f){var ae;return f&&f.state?(f.total_in=f.total_out=0,f.data_type=v,(ae=f.state).pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?U:J,f.adler=2===ae.wrap?0:1,ae.last_flush=w,p._tr_init(ae),b):xe(f,o)}function Tt(f){var ie,ae=at(f);return ae===b&&((ie=f.state).window_size=2*ie.w_size,Oe(ie.head),ie.max_lazy_match=c[ie.level].max_lazy,ie.good_match=c[ie.level].good_length,ie.nice_match=c[ie.level].nice_length,ie.max_chain_length=c[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=ne-1,ie.match_available=0,ie.ins_h=0),ae}function Nt(f,ae,ie,M,x,q){if(!f)return o;var ue=1;if(-1===ae&&(ae=6),M<0?(ue=0,M=-M):15<M&&(ue=2,M-=16),x<1||9<x||ie!==A||M<8||15<M||ae<0||9<ae||q<0||4<q)return xe(f,o);8===M&&(M=9);var T=new wt;return(f.state=T).strm=f,T.wrap=ue,T.gzhead=null,T.w_bits=M,T.w_size=1<<T.w_bits,T.w_mask=T.w_size-1,T.hash_bits=x+7,T.hash_size=1<<T.hash_bits,T.hash_mask=T.hash_size-1,T.hash_shift=~~((T.hash_bits+ne-1)/ne),T.window=new y.Buf8(2*T.w_size),T.head=new y.Buf16(T.hash_size),T.prev=new y.Buf16(T.w_size),T.lit_bufsize=1<<x+6,T.pending_buf_size=4*T.lit_bufsize,T.pending_buf=new y.Buf8(T.pending_buf_size),T.d_buf=1*T.lit_bufsize,T.l_buf=3*T.lit_bufsize,T.level=ae,T.strategy=q,T.method=ie,Tt(f)}c=[new Xe(0,0,0,0,function(f,ae){var ie=65535;for(ie>f.pending_buf_size-5&&(ie=f.pending_buf_size-5);;){if(f.lookahead<=1){if(rt(f),0===f.lookahead&&ae===w)return 1;if(0===f.lookahead)break}f.strstart+=f.lookahead,f.lookahead=0;var M=f.block_start+ie;if((0===f.strstart||f.strstart>=M)&&(f.lookahead=f.strstart-M,f.strstart=M,Z(f,!1),0===f.strm.avail_out)||f.strstart-f.block_start>=f.w_size-Ve&&(Z(f,!1),0===f.strm.avail_out))return 1}return f.insert=0,4===ae?(Z(f,!0),0===f.strm.avail_out?3:4):(f.strstart>f.block_start&&Z(f,!1),1)}),new Xe(4,4,8,4,_t),new Xe(4,5,16,8,_t),new Xe(4,6,32,32,_t),new Xe(4,4,16,16,$e),new Xe(8,16,32,32,$e),new Xe(8,16,128,128,$e),new Xe(8,32,128,256,$e),new Xe(32,128,258,1024,$e),new Xe(32,258,258,4096,$e)],n.deflateInit=function(f,ae){return Nt(f,ae,A,15,8,0)},n.deflateInit2=Nt,n.deflateReset=Tt,n.deflateResetKeep=at,n.deflateSetHeader=function(f,ae){return f&&f.state?2!==f.state.wrap?o:(f.state.gzhead=ae,b):o},n.deflate=function(f,ae){var ie,M,x,q;if(!f||!f.state||5<ae||ae<0)return f?xe(f,o):o;if(M=f.state,!f.output||!f.input&&0!==f.avail_in||666===M.status&&4!==ae)return xe(f,0===f.avail_out?-5:o);if(M.strm=f,ie=M.last_flush,M.last_flush=ae,M.status===U)if(2===M.wrap)f.adler=0,Ue(M,31),Ue(M,139),Ue(M,8),M.gzhead?(Ue(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),Ue(M,255&M.gzhead.time),Ue(M,M.gzhead.time>>8&255),Ue(M,M.gzhead.time>>16&255),Ue(M,M.gzhead.time>>24&255),Ue(M,9===M.level?2:2<=M.strategy||M.level<2?4:0),Ue(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(Ue(M,255&M.gzhead.extra.length),Ue(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(f.adler=u(f.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(Ue(M,0),Ue(M,0),Ue(M,0),Ue(M,0),Ue(M,0),Ue(M,9===M.level?2:2<=M.strategy||M.level<2?4:0),Ue(M,3),M.status=J);else{var ue=A+(M.w_bits-8<<4)<<8;ue|=(2<=M.strategy||M.level<2?0:M.level<6?1:6===M.level?2:3)<<6,0!==M.strstart&&(ue|=32),ue+=31-ue%31,M.status=J,Ne(M,ue),0!==M.strstart&&(Ne(M,f.adler>>>16),Ne(M,65535&f.adler)),f.adler=1}if(69===M.status)if(M.gzhead.extra){for(x=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>x&&(f.adler=u(f.adler,M.pending_buf,M.pending-x,x)),te(f),x=M.pending,M.pending!==M.pending_buf_size));)Ue(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>x&&(f.adler=u(f.adler,M.pending_buf,M.pending-x,x)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(73===M.status)if(M.gzhead.name){x=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>x&&(f.adler=u(f.adler,M.pending_buf,M.pending-x,x)),te(f),x=M.pending,M.pending===M.pending_buf_size)){q=1;break}q=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,Ue(M,q)}while(0!==q);M.gzhead.hcrc&&M.pending>x&&(f.adler=u(f.adler,M.pending_buf,M.pending-x,x)),0===q&&(M.gzindex=0,M.status=91)}else M.status=91;if(91===M.status)if(M.gzhead.comment){x=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>x&&(f.adler=u(f.adler,M.pending_buf,M.pending-x,x)),te(f),x=M.pending,M.pending===M.pending_buf_size)){q=1;break}q=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,Ue(M,q)}while(0!==q);M.gzhead.hcrc&&M.pending>x&&(f.adler=u(f.adler,M.pending_buf,M.pending-x,x)),0===q&&(M.status=103)}else M.status=103;if(103===M.status&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&te(f),M.pending+2<=M.pending_buf_size&&(Ue(M,255&f.adler),Ue(M,f.adler>>8&255),f.adler=0,M.status=J)):M.status=J),0!==M.pending){if(te(f),0===f.avail_out)return M.last_flush=-1,b}else if(0===f.avail_in&&Se(ae)<=Se(ie)&&4!==ae)return xe(f,-5);if(666===M.status&&0!==f.avail_in)return xe(f,-5);if(0!==f.avail_in||0!==M.lookahead||ae!==w&&666!==M.status){var T=2===M.strategy?function(H,N){for(var Q;;){if(0===H.lookahead&&(rt(H),0===H.lookahead)){if(N===w)return 1;break}if(H.match_length=0,Q=p._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,Q&&(Z(H,!1),0===H.strm.avail_out))return 1}return H.insert=0,4===N?(Z(H,!0),0===H.strm.avail_out?3:4):H.last_lit&&(Z(H,!1),0===H.strm.avail_out)?1:2}(M,ae):3===M.strategy?function(H,N){for(var Q,G,Ee,et,Je=H.window;;){if(H.lookahead<=be){if(rt(H),H.lookahead<=be&&N===w)return 1;if(0===H.lookahead)break}if(H.match_length=0,H.lookahead>=ne&&0<H.strstart&&(G=Je[Ee=H.strstart-1])===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]){et=H.strstart+be;do{}while(G===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]&&G===Je[++Ee]&&Ee<et);H.match_length=be-(et-Ee),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=ne?(Q=p._tr_tally(H,1,H.match_length-ne),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(Q=p._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),Q&&(Z(H,!1),0===H.strm.avail_out))return 1}return H.insert=0,4===N?(Z(H,!0),0===H.strm.avail_out?3:4):H.last_lit&&(Z(H,!1),0===H.strm.avail_out)?1:2}(M,ae):c[M.level].func(M,ae);if(3!==T&&4!==T||(M.status=666),1===T||3===T)return 0===f.avail_out&&(M.last_flush=-1),b;if(2===T&&(1===ae?p._tr_align(M):5!==ae&&(p._tr_stored_block(M,0,0,!1),3===ae&&(Oe(M.head),0===M.lookahead&&(M.strstart=0,M.block_start=0,M.insert=0))),te(f),0===f.avail_out))return M.last_flush=-1,b}return 4!==ae?b:M.wrap<=0?1:(2===M.wrap?(Ue(M,255&f.adler),Ue(M,f.adler>>8&255),Ue(M,f.adler>>16&255),Ue(M,f.adler>>24&255),Ue(M,255&f.total_in),Ue(M,f.total_in>>8&255),Ue(M,f.total_in>>16&255),Ue(M,f.total_in>>24&255)):(Ne(M,f.adler>>>16),Ne(M,65535&f.adler)),te(f),0<M.wrap&&(M.wrap=-M.wrap),0!==M.pending?b:1)},n.deflateEnd=function(f){var ae;return f&&f.state?(ae=f.state.status)!==U&&69!==ae&&73!==ae&&91!==ae&&103!==ae&&ae!==J&&666!==ae?xe(f,o):(f.state=null,ae===J?xe(f,-3):b):o},n.deflateSetDictionary=function(f,ae){var ie,M,x,q,ue,T,H,N,Q=ae.length;if(!f||!f.state||2===(q=(ie=f.state).wrap)||1===q&&ie.status!==U||ie.lookahead)return o;for(1===q&&(f.adler=I(f.adler,ae,Q,0)),ie.wrap=0,Q>=ie.w_size&&(0===q&&(Oe(ie.head),ie.strstart=0,ie.block_start=0,ie.insert=0),N=new y.Buf8(ie.w_size),y.arraySet(N,ae,Q-ie.w_size,ie.w_size,0),ae=N,Q=ie.w_size),ue=f.avail_in,T=f.next_in,H=f.input,f.avail_in=Q,f.next_in=0,f.input=ae,rt(ie);ie.lookahead>=ne;){for(M=ie.strstart,x=ie.lookahead-(ne-1);ie.ins_h=(ie.ins_h<<ie.hash_shift^ie.window[M+ne-1])&ie.hash_mask,ie.prev[M&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=M,M++,--x;);ie.strstart=M,ie.lookahead=ne-1,rt(ie)}return ie.strstart+=ie.lookahead,ie.block_start=ie.strstart,ie.insert=ie.lookahead,ie.lookahead=0,ie.match_length=ie.prev_length=ne-1,ie.match_available=0,f.next_in=T,f.input=H,f.avail_in=ue,ie.wrap=q,b},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(F,O,n){"use strict";O.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(F,O,n){"use strict";O.exports=function(c,y){var p,I,u,D,w,E,b,o,_,C,v,A,k,R,P,X,Y,de,ne,be,Ve,U,J,m,$;m=c.input,u=(I=c.next_in)+(c.avail_in-5),$=c.output,w=(D=c.next_out)-(y-c.avail_out),E=D+(c.avail_out-257),b=(p=c.state).dmax,o=p.wsize,_=p.whave,C=p.wnext,v=p.window,A=p.hold,k=p.bits,R=p.lencode,P=p.distcode,X=(1<<p.lenbits)-1,Y=(1<<p.distbits)-1;e:do{k<15&&(A+=m[I++]<<k,A+=m[I++]<<(k+=8),k+=8),de=R[A&X];t:for(;;){if(A>>>=ne=de>>>24,k-=ne,0==(ne=de>>>16&255))$[D++]=65535&de;else{if(!(16&ne)){if(!(64&ne)){de=R[(65535&de)+(A&(1<<ne)-1)];continue t}if(32&ne){p.mode=12;break e}c.msg="invalid literal/length code",p.mode=30;break e}be=65535&de,(ne&=15)&&(k<ne&&(A+=m[I++]<<k,k+=8),be+=A&(1<<ne)-1,A>>>=ne,k-=ne),k<15&&(A+=m[I++]<<k,A+=m[I++]<<(k+=8),k+=8),de=P[A&Y];s:for(;;){if(A>>>=ne=de>>>24,k-=ne,!(16&(ne=de>>>16&255))){if(!(64&ne)){de=P[(65535&de)+(A&(1<<ne)-1)];continue s}c.msg="invalid distance code",p.mode=30;break e}if(Ve=65535&de,k<(ne&=15)&&(A+=m[I++]<<k,(k+=8)<ne&&(A+=m[I++]<<k,k+=8)),b<(Ve+=A&(1<<ne)-1)){c.msg="invalid distance too far back",p.mode=30;break e}if(A>>>=ne,k-=ne,(ne=D-w)<Ve){if(_<(ne=Ve-ne)&&p.sane){c.msg="invalid distance too far back",p.mode=30;break e}if(J=v,(U=0)===C){if(U+=o-ne,ne<be){for(be-=ne;$[D++]=v[U++],--ne;);U=D-Ve,J=$}}else if(C<ne){if(U+=o+C-ne,(ne-=C)<be){for(be-=ne;$[D++]=v[U++],--ne;);if(U=0,C<be){for(be-=ne=C;$[D++]=v[U++],--ne;);U=D-Ve,J=$}}}else if(U+=C-ne,ne<be){for(be-=ne;$[D++]=v[U++],--ne;);U=D-Ve,J=$}for(;2<be;)$[D++]=J[U++],$[D++]=J[U++],$[D++]=J[U++],be-=3;be&&($[D++]=J[U++],1<be&&($[D++]=J[U++]))}else{for(U=D-Ve;$[D++]=$[U++],$[D++]=$[U++],$[D++]=$[U++],2<(be-=3););be&&($[D++]=$[U++],1<be&&($[D++]=$[U++]))}break}}break}}while(I<u&&D<E);I-=be=k>>3,A&=(1<<(k-=be<<3))-1,c.next_in=I,c.next_out=D,c.avail_in=I<u?u-I+5:5-(I-u),c.avail_out=D<E?E-D+257:257-(D-E),p.hold=A,p.bits=k}},{}],49:[function(F,O,n){"use strict";var c=F("../utils/common"),y=F("./adler32"),p=F("./crc32"),I=F("./inffast"),u=F("./inftrees"),E=0,b=-2,o=1,_=852,C=592;function v(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(U){var J;return U&&U.state?(U.total_in=U.total_out=(J=U.state).total=0,U.msg="",J.wrap&&(U.adler=1&J.wrap),J.mode=o,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new c.Buf32(_),J.distcode=J.distdyn=new c.Buf32(C),J.sane=1,J.back=-1,E):b}function R(U){var J;return U&&U.state?((J=U.state).wsize=0,J.whave=0,J.wnext=0,k(U)):b}function P(U,J){var m,$;return U&&U.state?($=U.state,J<0?(m=0,J=-J):(m=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?b:(null!==$.window&&$.wbits!==J&&($.window=null),$.wrap=m,$.wbits=J,R(U))):b}function X(U,J){var m,$;return U?($=new A,(U.state=$).window=null,(m=P(U,J))!==E&&(U.state=null),m):b}var Y,de,ne=!0;function be(U){if(ne){var J;for(Y=new c.Buf32(512),de=new c.Buf32(32),J=0;J<144;)U.lens[J++]=8;for(;J<256;)U.lens[J++]=9;for(;J<280;)U.lens[J++]=7;for(;J<288;)U.lens[J++]=8;for(u(1,U.lens,0,288,Y,0,U.work,{bits:9}),J=0;J<32;)U.lens[J++]=5;u(2,U.lens,0,32,de,0,U.work,{bits:5}),ne=!1}U.lencode=Y,U.lenbits=9,U.distcode=de,U.distbits=5}function Ve(U,J,m,$){var ce,V=U.state;return null===V.window&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new c.Buf8(V.wsize)),$>=V.wsize?(c.arraySet(V.window,J,m-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):($<(ce=V.wsize-V.wnext)&&(ce=$),c.arraySet(V.window,J,m-$,ce,V.wnext),($-=ce)?(c.arraySet(V.window,J,m-$,$,0),V.wnext=$,V.whave=V.wsize):(V.wnext+=ce,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=ce))),0}n.inflateReset=R,n.inflateReset2=P,n.inflateResetKeep=k,n.inflateInit=function(U){return X(U,15)},n.inflateInit2=X,n.inflate=function(U,J){var m,$,ce,V,xe,Se,Oe,te,Z,Ue,Ne,ke,rt,_t,$e,Xe,wt,at,Tt,Nt,f,ae,ie,M,x=0,q=new c.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&0!==U.avail_in)return b;12===(m=U.state).mode&&(m.mode=13),xe=U.next_out,ce=U.output,V=U.next_in,$=U.input,te=m.hold,Z=m.bits,Ue=Se=U.avail_in,Ne=Oe=U.avail_out,ae=E;e:for(;;)switch(m.mode){case o:if(0===m.wrap){m.mode=13;break}for(;Z<16;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(2&m.wrap&&35615===te){q[m.check=0]=255&te,q[1]=te>>>8&255,m.check=p(m.check,q,2,0),Z=te=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&te)<<8)+(te>>8))%31){U.msg="incorrect header check",m.mode=30;break}if(8!=(15&te)){U.msg="unknown compression method",m.mode=30;break}if(Z-=4,f=8+(15&(te>>>=4)),0===m.wbits)m.wbits=f;else if(f>m.wbits){U.msg="invalid window size",m.mode=30;break}m.dmax=1<<f,U.adler=m.check=1,m.mode=512&te?10:12,Z=te=0;break;case 2:for(;Z<16;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(m.flags=te,8!=(255&m.flags)){U.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){U.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=te>>8&1),512&m.flags&&(q[0]=255&te,q[1]=te>>>8&255,m.check=p(m.check,q,2,0)),Z=te=0,m.mode=3;case 3:for(;Z<32;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}m.head&&(m.head.time=te),512&m.flags&&(q[0]=255&te,q[1]=te>>>8&255,q[2]=te>>>16&255,q[3]=te>>>24&255,m.check=p(m.check,q,4,0)),Z=te=0,m.mode=4;case 4:for(;Z<16;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}m.head&&(m.head.xflags=255&te,m.head.os=te>>8),512&m.flags&&(q[0]=255&te,q[1]=te>>>8&255,m.check=p(m.check,q,2,0)),Z=te=0,m.mode=5;case 5:if(1024&m.flags){for(;Z<16;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}m.length=te,m.head&&(m.head.extra_len=te),512&m.flags&&(q[0]=255&te,q[1]=te>>>8&255,m.check=p(m.check,q,2,0)),Z=te=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(Se<(ke=m.length)&&(ke=Se),ke&&(m.head&&(f=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),c.arraySet(m.head.extra,$,V,ke,f)),512&m.flags&&(m.check=p(m.check,$,ke,V)),Se-=ke,V+=ke,m.length-=ke),m.length))break e;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(0===Se)break e;for(ke=0;f=$[V+ke++],m.head&&f&&m.length<65536&&(m.head.name+=String.fromCharCode(f)),f&&ke<Se;);if(512&m.flags&&(m.check=p(m.check,$,ke,V)),Se-=ke,V+=ke,f)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(0===Se)break e;for(ke=0;f=$[V+ke++],m.head&&f&&m.length<65536&&(m.head.comment+=String.fromCharCode(f)),f&&ke<Se;);if(512&m.flags&&(m.check=p(m.check,$,ke,V)),Se-=ke,V+=ke,f)break e}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;Z<16;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(te!==(65535&m.check)){U.msg="header crc mismatch",m.mode=30;break}Z=te=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),U.adler=m.check=0,m.mode=12;break;case 10:for(;Z<32;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}U.adler=m.check=v(te),Z=te=0,m.mode=11;case 11:if(0===m.havedict)return U.next_out=xe,U.avail_out=Oe,U.next_in=V,U.avail_in=Se,m.hold=te,m.bits=Z,2;U.adler=m.check=1,m.mode=12;case 12:if(5===J||6===J)break e;case 13:if(m.last){te>>>=7&Z,Z-=7&Z,m.mode=27;break}for(;Z<3;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}switch(m.last=1&te,Z-=1,3&(te>>>=1)){case 0:m.mode=14;break;case 1:if(be(m),m.mode=20,6!==J)break;te>>>=2,Z-=2;break e;case 2:m.mode=17;break;case 3:U.msg="invalid block type",m.mode=30}te>>>=2,Z-=2;break;case 14:for(te>>>=7&Z,Z-=7&Z;Z<32;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if((65535&te)!=(te>>>16^65535)){U.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&te,Z=te=0,m.mode=15,6===J)break e;case 15:m.mode=16;case 16:if(ke=m.length){if(Se<ke&&(ke=Se),Oe<ke&&(ke=Oe),0===ke)break e;c.arraySet(ce,$,V,ke,xe),Se-=ke,V+=ke,Oe-=ke,xe+=ke,m.length-=ke;break}m.mode=12;break;case 17:for(;Z<14;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(m.nlen=257+(31&te),Z-=5,m.ndist=1+(31&(te>>>=5)),Z-=5,m.ncode=4+(15&(te>>>=5)),te>>>=4,Z-=4,286<m.nlen||30<m.ndist){U.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;Z<3;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}m.lens[ue[m.have++]]=7&te,te>>>=3,Z-=3}for(;m.have<19;)m.lens[ue[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,ae=u(0,m.lens,0,19,m.lencode,0,m.work,ie={bits:m.lenbits}),m.lenbits=ie.bits,ae){U.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;Xe=(x=m.lencode[te&(1<<m.lenbits)-1])>>>16&255,wt=65535&x,!(($e=x>>>24)<=Z);){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(wt<16)te>>>=$e,Z-=$e,m.lens[m.have++]=wt;else{if(16===wt){for(M=$e+2;Z<M;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(te>>>=$e,Z-=$e,0===m.have){U.msg="invalid bit length repeat",m.mode=30;break}f=m.lens[m.have-1],ke=3+(3&te),te>>>=2,Z-=2}else if(17===wt){for(M=$e+3;Z<M;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}Z-=$e,f=0,ke=3+(7&(te>>>=$e)),te>>>=3,Z-=3}else{for(M=$e+7;Z<M;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}Z-=$e,f=0,ke=11+(127&(te>>>=$e)),te>>>=7,Z-=7}if(m.have+ke>m.nlen+m.ndist){U.msg="invalid bit length repeat",m.mode=30;break}for(;ke--;)m.lens[m.have++]=f}}if(30===m.mode)break;if(0===m.lens[256]){U.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,ae=u(1,m.lens,0,m.nlen,m.lencode,0,m.work,ie={bits:m.lenbits}),m.lenbits=ie.bits,ae){U.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,ae=u(2,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,ie={bits:m.distbits}),m.distbits=ie.bits,ae){U.msg="invalid distances set",m.mode=30;break}if(m.mode=20,6===J)break e;case 20:m.mode=21;case 21:if(6<=Se&&258<=Oe){U.next_out=xe,U.avail_out=Oe,U.next_in=V,U.avail_in=Se,m.hold=te,m.bits=Z,I(U,Ne),xe=U.next_out,ce=U.output,Oe=U.avail_out,V=U.next_in,$=U.input,Se=U.avail_in,te=m.hold,Z=m.bits,12===m.mode&&(m.back=-1);break}for(m.back=0;Xe=(x=m.lencode[te&(1<<m.lenbits)-1])>>>16&255,wt=65535&x,!(($e=x>>>24)<=Z);){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(Xe&&!(240&Xe)){for(at=$e,Tt=Xe,Nt=wt;Xe=(x=m.lencode[Nt+((te&(1<<at+Tt)-1)>>at)])>>>16&255,wt=65535&x,!(at+($e=x>>>24)<=Z);){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}te>>>=at,Z-=at,m.back+=at}if(te>>>=$e,Z-=$e,m.back+=$e,m.length=wt,0===Xe){m.mode=26;break}if(32&Xe){m.back=-1,m.mode=12;break}if(64&Xe){U.msg="invalid literal/length code",m.mode=30;break}m.extra=15&Xe,m.mode=22;case 22:if(m.extra){for(M=m.extra;Z<M;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}m.length+=te&(1<<m.extra)-1,te>>>=m.extra,Z-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;Xe=(x=m.distcode[te&(1<<m.distbits)-1])>>>16&255,wt=65535&x,!(($e=x>>>24)<=Z);){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(!(240&Xe)){for(at=$e,Tt=Xe,Nt=wt;Xe=(x=m.distcode[Nt+((te&(1<<at+Tt)-1)>>at)])>>>16&255,wt=65535&x,!(at+($e=x>>>24)<=Z);){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}te>>>=at,Z-=at,m.back+=at}if(te>>>=$e,Z-=$e,m.back+=$e,64&Xe){U.msg="invalid distance code",m.mode=30;break}m.offset=wt,m.extra=15&Xe,m.mode=24;case 24:if(m.extra){for(M=m.extra;Z<M;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}m.offset+=te&(1<<m.extra)-1,te>>>=m.extra,Z-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){U.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(0===Oe)break e;if(m.offset>(ke=Ne-Oe)){if((ke=m.offset-ke)>m.whave&&m.sane){U.msg="invalid distance too far back",m.mode=30;break}rt=ke>m.wnext?m.wsize-(ke-=m.wnext):m.wnext-ke,ke>m.length&&(ke=m.length),_t=m.window}else _t=ce,rt=xe-m.offset,ke=m.length;for(Oe<ke&&(ke=Oe),Oe-=ke,m.length-=ke;ce[xe++]=_t[rt++],--ke;);0===m.length&&(m.mode=21);break;case 26:if(0===Oe)break e;ce[xe++]=m.length,Oe--,m.mode=21;break;case 27:if(m.wrap){for(;Z<32;){if(0===Se)break e;Se--,te|=$[V++]<<Z,Z+=8}if(U.total_out+=Ne-=Oe,m.total+=Ne,Ne&&(U.adler=m.check=m.flags?p(m.check,ce,Ne,xe-Ne):y(m.check,ce,Ne,xe-Ne)),Ne=Oe,(m.flags?te:v(te))!==m.check){U.msg="incorrect data check",m.mode=30;break}Z=te=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;Z<32;){if(0===Se)break e;Se--,te+=$[V++]<<Z,Z+=8}if(te!==(4294967295&m.total)){U.msg="incorrect length check",m.mode=30;break}Z=te=0}m.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;default:return b}return U.next_out=xe,U.avail_out=Oe,U.next_in=V,U.avail_in=Se,m.hold=te,m.bits=Z,(m.wsize||Ne!==U.avail_out&&m.mode<30&&(m.mode<27||4!==J))&&Ve(U,U.output,U.next_out,Ne-U.avail_out)?(m.mode=31,-4):(Ne-=U.avail_out,U.total_in+=Ue-=U.avail_in,U.total_out+=Ne,m.total+=Ne,m.wrap&&Ne&&(U.adler=m.check=m.flags?p(m.check,ce,Ne,U.next_out-Ne):y(m.check,ce,Ne,U.next_out-Ne)),U.data_type=m.bits+(m.last?64:0)+(12===m.mode?128:0)+(20===m.mode||15===m.mode?256:0),(0==Ue&&0===Ne||4===J)&&ae===E&&(ae=-5),ae)},n.inflateEnd=function(U){if(!U||!U.state)return b;var J=U.state;return J.window&&(J.window=null),U.state=null,E},n.inflateGetHeader=function(U,J){var m;return U&&U.state&&2&(m=U.state).wrap?((m.head=J).done=!1,E):b},n.inflateSetDictionary=function(U,J){var m,$=J.length;return U&&U.state?0!==(m=U.state).wrap&&11!==m.mode?b:11===m.mode&&y(1,J,$,0)!==m.check?-3:Ve(U,J,$,$)?(m.mode=31,-4):(m.havedict=1,E):b},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(F,O,n){"use strict";var c=F("../utils/common"),y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];O.exports=function(D,w,E,b,o,_,C,v){var A,k,R,P,X,Y,de,ne,be,Ve=v.bits,U=0,J=0,m=0,$=0,ce=0,V=0,xe=0,Se=0,Oe=0,te=0,Z=null,Ue=0,Ne=new c.Buf16(16),ke=new c.Buf16(16),rt=null,_t=0;for(U=0;U<=15;U++)Ne[U]=0;for(J=0;J<b;J++)Ne[w[E+J]]++;for(ce=Ve,$=15;1<=$&&0===Ne[$];$--);if($<ce&&(ce=$),0===$)return o[_++]=20971520,o[_++]=20971520,v.bits=1,0;for(m=1;m<$&&0===Ne[m];m++);for(ce<m&&(ce=m),U=Se=1;U<=15;U++)if(Se<<=1,(Se-=Ne[U])<0)return-1;if(0<Se&&(0===D||1!==$))return-1;for(ke[1]=0,U=1;U<15;U++)ke[U+1]=ke[U]+Ne[U];for(J=0;J<b;J++)0!==w[E+J]&&(C[ke[w[E+J]]++]=J);if(Y=0===D?(Z=rt=C,19):1===D?(Z=y,Ue-=257,rt=p,_t-=257,256):(Z=I,rt=u,-1),U=m,X=_,xe=J=te=0,R=-1,P=(Oe=1<<(V=ce))-1,1===D&&852<Oe||2===D&&592<Oe)return 1;for(;;){for(de=U-xe,be=C[J]<Y?(ne=0,C[J]):C[J]>Y?(ne=rt[_t+C[J]],Z[Ue+C[J]]):(ne=96,0),A=1<<U-xe,m=k=1<<V;o[X+(te>>xe)+(k-=A)]=de<<24|ne<<16|be,0!==k;);for(A=1<<U-1;te&A;)A>>=1;if(0!==A?(te&=A-1,te+=A):te=0,J++,0==--Ne[U]){if(U===$)break;U=w[E+C[J]]}if(ce<U&&(te&P)!==R){for(0===xe&&(xe=ce),X+=m,Se=1<<(V=U-xe);V+xe<$&&!((Se-=Ne[V+xe])<=0);)V++,Se<<=1;if(Oe+=1<<V,1===D&&852<Oe||2===D&&592<Oe)return 1;o[R=te&P]=ce<<24|V<<16|X-_}}return 0!==te&&(o[X+te]=U-xe<<24|64<<16),v.bits=ce,0}},{"../utils/common":41}],51:[function(F,O,n){"use strict";O.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(F,O,n){"use strict";var c=F("../utils/common");function I(x){for(var q=x.length;0<=--q;)x[q]=0}var w=256,E=286,b=30,C=15,v=16,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],de=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ve=new Array(576);I(Ve);var U=new Array(60);I(U);var J=new Array(512);I(J);var m=new Array(256);I(m);var $=new Array(29);I($);var ce,V,xe,Se=new Array(b);function Oe(x,q,ue,T,H){this.static_tree=x,this.extra_bits=q,this.extra_base=ue,this.elems=T,this.max_length=H,this.has_stree=x&&x.length}function te(x,q){this.dyn_tree=x,this.max_code=0,this.stat_desc=q}function Z(x){return x<256?J[x]:J[256+(x>>>7)]}function Ue(x,q){x.pending_buf[x.pending++]=255&q,x.pending_buf[x.pending++]=q>>>8&255}function Ne(x,q,ue){x.bi_valid>v-ue?(x.bi_buf|=q<<x.bi_valid&65535,Ue(x,x.bi_buf),x.bi_buf=q>>v-x.bi_valid,x.bi_valid+=ue-v):(x.bi_buf|=q<<x.bi_valid&65535,x.bi_valid+=ue)}function ke(x,q,ue){Ne(x,ue[2*q],ue[2*q+1])}function rt(x,q){for(var ue=0;ue|=1&x,x>>>=1,ue<<=1,0<--q;);return ue>>>1}function _t(x,q,ue){var T,H,N=new Array(C+1),Q=0;for(T=1;T<=C;T++)N[T]=Q=Q+ue[T-1]<<1;for(H=0;H<=q;H++){var G=x[2*H+1];0!==G&&(x[2*H]=rt(N[G]++,G))}}function $e(x){var q;for(q=0;q<E;q++)x.dyn_ltree[2*q]=0;for(q=0;q<b;q++)x.dyn_dtree[2*q]=0;for(q=0;q<19;q++)x.bl_tree[2*q]=0;x.dyn_ltree[512]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Xe(x){8<x.bi_valid?Ue(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function wt(x,q,ue,T){var H=2*q,N=2*ue;return x[H]<x[N]||x[H]===x[N]&&T[q]<=T[ue]}function at(x,q,ue){for(var T=x.heap[ue],H=ue<<1;H<=x.heap_len&&(H<x.heap_len&&wt(q,x.heap[H+1],x.heap[H],x.depth)&&H++,!wt(q,T,x.heap[H],x.depth));)x.heap[ue]=x.heap[H],ue=H,H<<=1;x.heap[ue]=T}function Tt(x,q,ue){var T,H,N,Q,G=0;if(0!==x.last_lit)for(;T=x.pending_buf[x.d_buf+2*G]<<8|x.pending_buf[x.d_buf+2*G+1],H=x.pending_buf[x.l_buf+G],G++,0===T?ke(x,H,q):(ke(x,(N=m[H])+w+1,q),0!==(Q=Y[N])&&Ne(x,H-=$[N],Q),ke(x,N=Z(--T),ue),0!==(Q=de[N])&&Ne(x,T-=Se[N],Q)),G<x.last_lit;);ke(x,256,q)}function Nt(x,q){var ue,T,H,N=q.dyn_tree,Q=q.stat_desc.static_tree,G=q.stat_desc.has_stree,Ee=q.stat_desc.elems,et=-1;for(x.heap_len=0,x.heap_max=573,ue=0;ue<Ee;ue++)0!==N[2*ue]?(x.heap[++x.heap_len]=et=ue,x.depth[ue]=0):N[2*ue+1]=0;for(;x.heap_len<2;)N[2*(H=x.heap[++x.heap_len]=et<2?++et:0)]=1,x.depth[H]=0,x.opt_len--,G&&(x.static_len-=Q[2*H+1]);for(q.max_code=et,ue=x.heap_len>>1;1<=ue;ue--)at(x,N,ue);for(H=Ee;ue=x.heap[1],x.heap[1]=x.heap[x.heap_len--],at(x,N,1),T=x.heap[1],x.heap[--x.heap_max]=ue,x.heap[--x.heap_max]=T,N[2*H]=N[2*ue]+N[2*T],x.depth[H]=(x.depth[ue]>=x.depth[T]?x.depth[ue]:x.depth[T])+1,N[2*ue+1]=N[2*T+1]=H,x.heap[1]=H++,at(x,N,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(Je,xt){var ut,Ce,kt,Ze,ht,na,It=xt.dyn_tree,ra=xt.max_code,W=xt.stat_desc.static_tree,Xc=xt.stat_desc.has_stree,Tl=xt.stat_desc.extra_bits,aa=xt.stat_desc.extra_base,ys=xt.stat_desc.max_length,ot=0;for(Ze=0;Ze<=C;Ze++)Je.bl_count[Ze]=0;for(It[2*Je.heap[Je.heap_max]+1]=0,ut=Je.heap_max+1;ut<573;ut++)ys<(Ze=It[2*It[2*(Ce=Je.heap[ut])+1]+1]+1)&&(Ze=ys,ot++),It[2*Ce+1]=Ze,ra<Ce||(Je.bl_count[Ze]++,ht=0,aa<=Ce&&(ht=Tl[Ce-aa]),Je.opt_len+=(na=It[2*Ce])*(Ze+ht),Xc&&(Je.static_len+=na*(W[2*Ce+1]+ht)));if(0!==ot){do{for(Ze=ys-1;0===Je.bl_count[Ze];)Ze--;Je.bl_count[Ze]--,Je.bl_count[Ze+1]+=2,Je.bl_count[ys]--,ot-=2}while(0<ot);for(Ze=ys;0!==Ze;Ze--)for(Ce=Je.bl_count[Ze];0!==Ce;)ra<(kt=Je.heap[--ut])||(It[2*kt+1]!==Ze&&(Je.opt_len+=(Ze-It[2*kt+1])*It[2*kt],It[2*kt+1]=Ze),Ce--)}}(x,q),_t(N,et,x.bl_count)}function f(x,q,ue){var T,H,N=-1,Q=q[1],G=0,Ee=7,et=4;for(0===Q&&(Ee=138,et=3),q[2*(ue+1)+1]=65535,T=0;T<=ue;T++)H=Q,Q=q[2*(T+1)+1],++G<Ee&&H===Q||(G<et?x.bl_tree[2*H]+=G:0!==H?(H!==N&&x.bl_tree[2*H]++,x.bl_tree[32]++):G<=10?x.bl_tree[34]++:x.bl_tree[36]++,N=H,et=(G=0)===Q?(Ee=138,3):H===Q?(Ee=6,3):(Ee=7,4))}function ae(x,q,ue){var T,H,N=-1,Q=q[1],G=0,Ee=7,et=4;for(0===Q&&(Ee=138,et=3),T=0;T<=ue;T++)if(H=Q,Q=q[2*(T+1)+1],!(++G<Ee&&H===Q)){if(G<et)for(;ke(x,H,x.bl_tree),0!=--G;);else 0!==H?(H!==N&&(ke(x,H,x.bl_tree),G--),ke(x,16,x.bl_tree),Ne(x,G-3,2)):G<=10?(ke(x,17,x.bl_tree),Ne(x,G-3,3)):(ke(x,18,x.bl_tree),Ne(x,G-11,7));N=H,et=(G=0)===Q?(Ee=138,3):H===Q?(Ee=6,3):(Ee=7,4)}}I(Se);var ie=!1;function M(x,q,ue,T){var H,N,Q;Ne(x,0+(T?1:0),3),N=q,Q=ue,Xe(H=x),Ue(H,Q),Ue(H,~Q),c.arraySet(H.pending_buf,H.window,N,Q,H.pending),H.pending+=Q}n._tr_init=function(x){ie||(function(){var q,ue,T,H,N,Q=new Array(C+1);for(H=T=0;H<28;H++)for($[H]=T,q=0;q<1<<Y[H];q++)m[T++]=H;for(m[T-1]=H,H=N=0;H<16;H++)for(Se[H]=N,q=0;q<1<<de[H];q++)J[N++]=H;for(N>>=7;H<b;H++)for(Se[H]=N<<7,q=0;q<1<<de[H]-7;q++)J[256+N++]=H;for(ue=0;ue<=C;ue++)Q[ue]=0;for(q=0;q<=143;)Ve[2*q+1]=8,q++,Q[8]++;for(;q<=255;)Ve[2*q+1]=9,q++,Q[9]++;for(;q<=279;)Ve[2*q+1]=7,q++,Q[7]++;for(;q<=287;)Ve[2*q+1]=8,q++,Q[8]++;for(_t(Ve,287,Q),q=0;q<b;q++)U[2*q+1]=5,U[2*q]=rt(q,5);ce=new Oe(Ve,Y,257,E,C),V=new Oe(U,de,0,b,C),xe=new Oe(new Array(0),ne,0,19,7)}(),ie=!0),x.l_desc=new te(x.dyn_ltree,ce),x.d_desc=new te(x.dyn_dtree,V),x.bl_desc=new te(x.bl_tree,xe),x.bi_buf=0,x.bi_valid=0,$e(x)},n._tr_stored_block=M,n._tr_flush_block=function(x,q,ue,T){var H,N,Q=0;0<x.level?(2===x.strm.data_type&&(x.strm.data_type=function(G){var Ee,et=4093624447;for(Ee=0;Ee<=31;Ee++,et>>>=1)if(1&et&&0!==G.dyn_ltree[2*Ee])return 0;if(0!==G.dyn_ltree[18]||0!==G.dyn_ltree[20]||0!==G.dyn_ltree[26])return 1;for(Ee=32;Ee<w;Ee++)if(0!==G.dyn_ltree[2*Ee])return 1;return 0}(x)),Nt(x,x.l_desc),Nt(x,x.d_desc),Q=function(G){var Ee;for(f(G,G.dyn_ltree,G.l_desc.max_code),f(G,G.dyn_dtree,G.d_desc.max_code),Nt(G,G.bl_desc),Ee=18;3<=Ee&&0===G.bl_tree[2*be[Ee]+1];Ee--);return G.opt_len+=3*(Ee+1)+5+5+4,Ee}(x),(N=x.static_len+3+7>>>3)<=(H=x.opt_len+3+7>>>3)&&(H=N)):H=N=ue+5,ue+4<=H&&-1!==q?M(x,q,ue,T):4===x.strategy||N===H?(Ne(x,2+(T?1:0),3),Tt(x,Ve,U)):(Ne(x,4+(T?1:0),3),function(G,Ee,et,Je){var xt;for(Ne(G,Ee-257,5),Ne(G,et-1,5),Ne(G,Je-4,4),xt=0;xt<Je;xt++)Ne(G,G.bl_tree[2*be[xt]+1],3);ae(G,G.dyn_ltree,Ee-1),ae(G,G.dyn_dtree,et-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,Q+1),Tt(x,x.dyn_ltree,x.dyn_dtree)),$e(x),T&&Xe(x)},n._tr_tally=function(x,q,ue){return x.pending_buf[x.d_buf+2*x.last_lit]=q>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&q,x.pending_buf[x.l_buf+x.last_lit]=255&ue,x.last_lit++,0===q?x.dyn_ltree[2*ue]++:(x.matches++,q--,x.dyn_ltree[2*(m[ue]+w+1)]++,x.dyn_dtree[2*Z(q)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){var q;Ne(x,2,3),ke(x,256,Ve),16===(q=x).bi_valid?(Ue(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)}},{"../utils/common":41}],53:[function(F,O,n){"use strict";O.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(F,O,n){(function(c){!function(y,p){"use strict";if(!y.setImmediate){var I,u,D,w,E=1,b={},o=!1,_=y.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(y);C=C&&C.setTimeout?C:y,I="[object process]"==={}.toString.call(y.process)?function(R){process.nextTick(function(){A(R)})}:function(){if(y.postMessage&&!y.importScripts){var R=!0,P=y.onmessage;return y.onmessage=function(){R=!1},y.postMessage("","*"),y.onmessage=P,R}}()?(w="setImmediate$"+Math.random()+"$",y.addEventListener?y.addEventListener("message",k,!1):y.attachEvent("onmessage",k),function(R){y.postMessage(w+R,"*")}):y.MessageChannel?((D=new MessageChannel).port1.onmessage=function(R){A(R.data)},function(R){D.port2.postMessage(R)}):_&&"onreadystatechange"in _.createElement("script")?(u=_.documentElement,function(R){var P=_.createElement("script");P.onreadystatechange=function(){A(R),P.onreadystatechange=null,u.removeChild(P),P=null},u.appendChild(P)}):function(R){setTimeout(A,0,R)},C.setImmediate=function(R){"function"!=typeof R&&(R=new Function(""+R));for(var P=new Array(arguments.length-1),X=0;X<P.length;X++)P[X]=arguments[X+1];return b[E]={callback:R,args:P},I(E),E++},C.clearImmediate=v}function v(R){delete b[R]}function A(R){if(o)setTimeout(A,0,R);else{var P=b[R];if(P){o=!0;try{!function(X){var Y=X.callback,de=X.args;switch(de.length){case 0:Y();break;case 1:Y(de[0]);break;case 2:Y(de[0],de[1]);break;case 3:Y(de[0],de[1],de[2]);break;default:Y.apply(p,de)}}(P)}finally{v(R),o=!1}}}}function k(R){R.source===y&&"string"==typeof R.data&&0===R.data.indexOf(w)&&A(+R.data.slice(w.length))}}(typeof self>"u"?void 0===c?this:c:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)},153:(Qe,F)=>{"use strict";class c{static isArrayBuffer(v){return"[object ArrayBuffer]"===Object.prototype.toString.call(v)}static toArrayBuffer(v){return this.isArrayBuffer(v)?v:v.byteLength===v.buffer.byteLength||0===v.byteOffset&&v.byteLength===v.buffer.byteLength?v.buffer:this.toUint8Array(v.buffer).slice(v.byteOffset,v.byteOffset+v.byteLength).buffer}static toUint8Array(v){return this.toView(v,Uint8Array)}static toView(v,A){if(v.constructor===A)return v;if(this.isArrayBuffer(v))return new A(v);if(this.isArrayBufferView(v))return new A(v.buffer,v.byteOffset,v.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(v){return this.isArrayBufferView(v)||this.isArrayBuffer(v)}static isArrayBufferView(v){return ArrayBuffer.isView(v)||v&&this.isArrayBuffer(v.buffer)}static isEqual(v,A){const k=c.toUint8Array(v),R=c.toUint8Array(A);if(k.length!==R.byteLength)return!1;for(let P=0;P<k.length;P++)if(k[P]!==R[P])return!1;return!0}static concat(...v){let A;A=Array.isArray(v[0])&&!(v[1]instanceof Function)||Array.isArray(v[0])&&v[1]instanceof Function?v[0]:v[v.length-1]instanceof Function?v.slice(0,v.length-1):v;let k=0;for(const X of A)k+=X.byteLength;const R=new Uint8Array(k);let P=0;for(const X of A){const Y=this.toUint8Array(X);R.set(Y,P),P+=Y.length}return v[v.length-1]instanceof Function?this.toView(R,v[v.length-1]):R.buffer}}const y="string",p=/^[0-9a-f]+$/i,I=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,u=/^[a-zA-Z0-9-_]+$/;class D{static fromString(v){const A=unescape(encodeURIComponent(v)),k=new Uint8Array(A.length);for(let R=0;R<A.length;R++)k[R]=A.charCodeAt(R);return k.buffer}static toString(v){const A=c.toUint8Array(v);let k="";for(let P=0;P<A.length;P++)k+=String.fromCharCode(A[P]);return decodeURIComponent(escape(k))}}class w{static toString(v,A=!1){const k=c.toArrayBuffer(v),R=new DataView(k);let P="";for(let X=0;X<k.byteLength;X+=2){const Y=R.getUint16(X,A);P+=String.fromCharCode(Y)}return P}static fromString(v,A=!1){const k=new ArrayBuffer(2*v.length),R=new DataView(k);for(let P=0;P<v.length;P++)R.setUint16(2*P,v.charCodeAt(P),A);return k}}let E=(()=>{class C{static isHex(A){return typeof A===y&&p.test(A)}static isBase64(A){return typeof A===y&&I.test(A)}static isBase64Url(A){return typeof A===y&&u.test(A)}static ToString(A,k="utf8"){const R=c.toUint8Array(A);switch(k.toLowerCase()){case"utf8":return this.ToUtf8String(R);case"binary":return this.ToBinary(R);case"hex":return this.ToHex(R);case"base64":return this.ToBase64(R);case"base64url":return this.ToBase64Url(R);case"utf16le":return w.toString(R,!0);case"utf16":case"utf16be":return w.toString(R);default:throw new Error(`Unknown type of encoding '${k}'`)}}static FromString(A,k="utf8"){if(!A)return new ArrayBuffer(0);switch(k.toLowerCase()){case"utf8":return this.FromUtf8String(A);case"binary":return this.FromBinary(A);case"hex":return this.FromHex(A);case"base64":return this.FromBase64(A);case"base64url":return this.FromBase64Url(A);case"utf16le":return w.fromString(A,!0);case"utf16":case"utf16be":return w.fromString(A);default:throw new Error(`Unknown type of encoding '${k}'`)}}static ToBase64(A){const k=c.toUint8Array(A);if(typeof btoa<"u"){const R=this.ToString(k,"binary");return btoa(R)}return Buffer.from(k).toString("base64")}static FromBase64(A){const k=this.formatString(A);if(!k)return new ArrayBuffer(0);if(!C.isBase64(k))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(k)):new Uint8Array(Buffer.from(k,"base64")).buffer}static FromBase64Url(A){const k=this.formatString(A);if(!k)return new ArrayBuffer(0);if(!C.isBase64Url(k))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(k.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(A){return this.ToBase64(A).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(A,k=C.DEFAULT_UTF8_ENCODING){switch(k){case"ascii":return this.FromBinary(A);case"utf8":return D.fromString(A);case"utf16":case"utf16be":return w.fromString(A);case"utf16le":case"usc2":return w.fromString(A,!0);default:throw new Error(`Unknown type of encoding '${k}'`)}}static ToUtf8String(A,k=C.DEFAULT_UTF8_ENCODING){switch(k){case"ascii":return this.ToBinary(A);case"utf8":return D.toString(A);case"utf16":case"utf16be":return w.toString(A);case"utf16le":case"usc2":return w.toString(A,!0);default:throw new Error(`Unknown type of encoding '${k}'`)}}static FromBinary(A){const k=A.length,R=new Uint8Array(k);for(let P=0;P<k;P++)R[P]=A.charCodeAt(P);return R.buffer}static ToBinary(A){const k=c.toUint8Array(A);let R="";for(let P=0;P<k.length;P++)R+=String.fromCharCode(k[P]);return R}static ToHex(A){const k=c.toUint8Array(A);let R="";const P=k.length;for(let X=0;X<P;X++){const Y=k[X];Y<16&&(R+="0"),R+=Y.toString(16)}return R}static FromHex(A){let k=this.formatString(A);if(!k)return new ArrayBuffer(0);if(!C.isHex(k))throw new TypeError("Argument 'hexString' is not HEX encoded");k.length%2&&(k=`0${k}`);const R=new Uint8Array(k.length/2);for(let P=0;P<k.length;P+=2){const X=k.slice(P,P+2);R[P/2]=parseInt(X,16)}return R.buffer}static ToUtf16String(A,k=!1){return w.toString(A,k)}static FromUtf16String(A,k=!1){return w.fromString(A,k)}static Base64Padding(A){const k=4-A.length%4;if(k<4)for(let R=0;R<k;R++)A+="=";return A}static formatString(A){return A?.replace(/[\n\r\t ]/g,"")||""}}return C.DEFAULT_UTF8_ENCODING="utf8",C})();F._H=c,F.U$=E},3205:(Qe,F,O)=>{"use strict";O.d(F,{_:()=>y});var n=O(2500),c=O(9301);function y(p,I){const u="object"==typeof I;return new Promise((D,w)=>{const E=new c.Ms({next:b=>{D(b),E.unsubscribe()},error:w,complete:()=>{u?D(I.defaultValue):w(new n.G)}});p.subscribe(E)})}},4623:(Qe,F,O)=>{"use strict";O.d(F,{o:()=>y});const y=["check",(0,O(5930).s)({outline:'<path d="M13.72,27.69,3.29,17.27a1,1,0,0,1,1.41-1.41l9,9L31.29,7.29a1,1,0,0,1,1.41,1.41Z"/>'})]},357:(Qe,F,O)=>{"use strict";O.d(F,{V:()=>y});const y=["help-info",(0,O(5930).s)({outline:'<path d="M25.39,25.45a1,1,0,0,0-1.38.29c-1.41,2.16-4,4.81-6.31,5.7s-4.12.57-4.84,0c-.31-.27-1.12-1-.43-3.49.46-1.66,3.32-9.48,4-11.38l-2.18.28c-.69,1.86-3.29,8.84-3.76,10.58-.68,2.49-.34,4.3,1.09,5.56A5.59,5.59,0,0,0,15,34a9.53,9.53,0,0,0,3.45-.7c2.79-1.09,5.72-4.12,7.26-6.47A1,1,0,0,0,25.39,25.45Z"/><path d="M19.3,11a4.5,4.5,0,1,0-4.5-4.5A4.5,4.5,0,0,0,19.3,11Zm0-7a2.5,2.5,0,1,1-2.5,2.5A2.5,2.5,0,0,1,19.3,4Z"/><path d="M11.81,15c.06,0,6.27-.82,7.73-1,.65-.1,1.14,0,1.3.15s.21.8-.07,1.68c-.61,1.86-3.69,11-4.59,13.71a8,8,0,0,0,1.29-.38,7.32,7.32,0,0,0,1.15-.6C19.85,25,22.15,18.1,22.67,16.52s.39-2.78-.3-3.6a3.16,3.16,0,0,0-3.08-.83c-1.43.15-7.47.94-7.73,1a1,1,0,0,0,.26,2Z"/>',solid:'<circle cx="20.75" cy="6" r="4"/><path d="M24.84,26.23a1,1,0,0,0-1.4.29,16.6,16.6,0,0,1-3.51,3.77c-.33.25-1.56,1.2-2.08,1-.36-.11-.15-.82-.08-1.12l.53-1.57c.22-.64,4.05-12,4.47-13.3.62-1.9.35-3.77-2.48-3.32-.77.08-8.58,1.09-8.72,1.1a1,1,0,0,0,.13,2s3-.39,3.33-.42a.88.88,0,0,1,.85.44,2.47,2.47,0,0,1-.07,1.71c-.26,1-4.37,12.58-4.5,13.25a2.78,2.78,0,0,0,1.18,3,5,5,0,0,0,3.08.83h0a8.53,8.53,0,0,0,3.09-.62c2.49-1,5.09-3.66,6.46-5.75A1,1,0,0,0,24.84,26.23Z"/>'})]},7949:(Qe,F,O)=>{"use strict";O.d(F,{Q:()=>y});const y=["layers",(0,O(5930).s)({outline:'<path d="M18,20.25a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,0-1.81l15-7.09a1,1,0,0,1,.85,0l15,7.09a1,1,0,0,1,0,1.81l-15,7.09A1,1,0,0,1,18,20.25ZM5.34,12.16l12.66,6,12.66-6L18,6.18Z"/><path d="M18,26.16a1,1,0,0,1-.43-.1L2.57,19a1,1,0,1,1,.85-1.81L18,24.06l14.57-6.89A1,1,0,1,1,33.43,19l-15,7.09A1,1,0,0,1,18,26.16Z"/><path d="M18,32.07a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,.85-1.81L18,30l14.57-6.89a1,1,0,1,1,.85,1.81L18.43,32A1,1,0,0,1,18,32.07Z"/>',solid:'<path d="M18,20.25a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,0-1.81l15-7.09a1,1,0,0,1,.85,0l15,7.09a1,1,0,0,1,0,1.81l-15,7.09A1,1,0,0,1,18,20.25Z"/><path d="M18,26.16a1,1,0,0,1-.43-.1L2.57,19a1,1,0,1,1,.85-1.81L18,24.06l14.57-6.89A1,1,0,1,1,33.43,19l-15,7.09A1,1,0,0,1,18,26.16Z"/><path d="M18,32.07a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,.85-1.81L18,30l14.57-6.89a1,1,0,1,1,.85,1.81L18.43,32A1,1,0,0,1,18,32.07Z"/>'})]},6156:(Qe,F,O)=>{"use strict";O.d(F,{h:()=>y});const y=["lock",(0,O(5930).s)({outline:'<path d="M18.09,20.59A2.41,2.41,0,0,0,17,25.14V28h2V25.23a2.41,2.41,0,0,0-.91-4.64Z"/><path d="M26,15V10.72a8.2,8.2,0,0,0-8-8.36,8.2,8.2,0,0,0-8,8.36V15H7V32a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V15ZM12,10.72a6.2,6.2,0,0,1,6-6.36,6.2,6.2,0,0,1,6,6.36V15H12ZM9,32V17H27V32Z"/>',solid:'<path d="M26,15V10.72a8.2,8.2,0,0,0-8-8.36,8.2,8.2,0,0,0-8,8.36V15H7V32a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V15ZM19,25.23V28H17V25.14a2.4,2.4,0,1,1,2,.09ZM24,15H12V10.72a6.2,6.2,0,0,1,6-6.36,6.2,6.2,0,0,1,6,6.36Z"/>'})]},7537:(Qe,F,O)=>{"use strict";O.d(F,{t:()=>y});const y=["network-globe",(0,O(5930).s)({outline:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M17.75,2a14,14,0,0,0-14,14c0,.45,0,.89.07,1.33l0,0h0A14,14,0,1,0,17.75,2Zm0,2a12,12,0,0,1,8.44,3.48c0,.33,0,.66,0,1A18.51,18.51,0,0,0,14,8.53a2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92,11.92,0,0,1,17.75,4Zm-3,5.87A17,17,0,0,1,25.92,10a16.9,16.9,0,0,1-3.11,7,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77Zm-4-3.6c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Zm6.51-8.9a2.33,2.33,0,0,0-.33-1.19,18.4,18.4,0,0,0,3.39-7.37q.75.35,1.48.78a12,12,0,0,1,.42,8.2A16,16,0,0,1,24.27,19.11Z"/>',outlineAlerted:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.73,15.4h-2c0,.2,0,.4,0,.61a12,12,0,0,1-.53,3.52,16,16,0,0,1-5-.41,2.33,2.33,0,0,0-.33-1.19,18.87,18.87,0,0,0,1.62-2.52H23.83a17.29,17.29,0,0,1-1,1.54,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77A17.08,17.08,0,0,1,19.56,9l.87-1.51a18.59,18.59,0,0,0-6.39,1,2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.88,11.88,0,0,1,22,4.79L23,3A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0A14,14,0,0,0,31.76,16C31.76,15.8,31.74,15.6,31.73,15.4Zm-21-9.13c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Z"/>',outlineBadged:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.5,13.35a7.54,7.54,0,0,1-1.5.15l-.51,0a11.91,11.91,0,0,1-.25,6,16,16,0,0,1-5-.41,2.33,2.33,0,0,0-.33-1.19,18.59,18.59,0,0,0,2.78-5.18,7.49,7.49,0,0,1-1.31-.82,17,17,0,0,1-2.61,5,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77,17,17,0,0,1,8.53-.62,7.43,7.43,0,0,1-.56-1.59A18.56,18.56,0,0,0,14,8.53a2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92,11.92,0,0,1,22.57,5a7.45,7.45,0,0,1,.53-2A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0a14,14,0,1,0,27.68-4ZM10.76,6.27c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Z"/>',solid:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M14.72,9.87a2.25,2.25,0,0,1-.47,1.77,16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,16.9,16.9,0,0,0,3.11-7A17,17,0,0,0,14.72,9.87Z"/><path d="M17.75,2a14,14,0,0,0-14,14c0,.45,0,.89.07,1.33l0,0h0A14,14,0,1,0,17.75,2ZM28.1,21.09a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.51,18.51,0,0,1,12.11-.07c0-.32,0-.65,0-1h0a12,12,0,0,1,2.62,3.85h0q-.73-.43-1.48-.78a18.4,18.4,0,0,1-3.39,7.37,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53Z"/>',solidAlerted:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.73,15.4H25.56a18.87,18.87,0,0,1-1.62,2.52,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53H28.1a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.59,18.59,0,0,1,6.39-1L23,3A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0A14,14,0,0,0,31.76,16C31.76,15.8,31.74,15.6,31.73,15.4Z"/><path d="M14.26,11.64a16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,17.29,17.29,0,0,0,1-1.54h-1.6A3.68,3.68,0,0,1,19,9.89L19.56,9a17.08,17.08,0,0,0-4.84.88,2.25,2.25,0,0,1-.47,1.77Z"/>',solidBadged:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.5,13.35a7.54,7.54,0,0,1-1.5.15,7.46,7.46,0,0,1-3.28-.76,18.59,18.59,0,0,1-2.78,5.18,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53H28.1a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.56,18.56,0,0,1,8.65-.87,7.45,7.45,0,0,1,.41-4.59A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0a14,14,0,1,0,27.68-4Z"/><path d="M14.72,9.87a2.25,2.25,0,0,1-.47,1.77,16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,17,17,0,0,0,2.61-5,7.52,7.52,0,0,1-2.16-2.67A17,17,0,0,0,14.72,9.87Z"/>'})]}}]);