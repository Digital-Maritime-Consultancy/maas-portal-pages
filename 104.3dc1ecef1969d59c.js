(self.webpackChunkmaas_portal_clr=self.webpackChunkmaas_portal_clr||[]).push([[104],{6482:(et,P,I)=>{"use strict";I.d(P,{u:()=>b});var n=I(6994),c=function(E){return E[E.User=1]="User",E[E.OrgAdmin=2]="OrgAdmin",E[E.SiteAdmin=4]="SiteAdmin",E[E.UserAdmin=8]="UserAdmin",E[E.VesselAdmin=16]="VesselAdmin",E[E.ServiceAdmin=32]="ServiceAdmin",E[E.DeviceAdmin=64]="DeviceAdmin",E[E.MMSAdmin=128]="MMSAdmin",E[E.ApproveOrg=256]="ApproveOrg",E[E.EntityAdmin=512]="EntityAdmin",E}(c||{}),u=I(8974),B=I(3205),_=I(897),C=I(217),S=I(5950),o=I(2514),A=I(9238),k=I(8745);const v={[C.X.SuperAdmin]:[_.B.SuperAdmin,_.B.OrgAdmin,_.B.UserAdmin,_.B.User],[C.X.OrgAdmin]:[_.B.OrgAdmin,_.B.UserAdmin,_.B.User],[C.X.UserAdmin]:[_.B.UserAdmin,_.B.User],[C.X.User]:[_.B.User]};let b=(()=>{class E{constructor(O,Z,Q){this.keycloakService=O,this.myUserService=Z,this.router=Q,this.userSubject=new u.t(null),this.user$=this.userSubject.asObservable(),this.isAuthenticatedSubject=new u.t(!1),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable(),this.initialize()}initialize(){var O=this;return(0,n.A)(function*(){const Z=yield O.keycloakService.isLoggedIn();O.setAuthenticated(Z),Z&&O.fetchUserInfo()})()}login(){var O=this;return(0,n.A)(function*(){const Z=window.location;yield O.keycloakService.login({redirectUri:Z.protocol+"//"+Z.host+"/pages"});const Q=yield O.keycloakService.isLoggedIn();O.setAuthenticated(Q),Q&&O.fetchUserInfo()})()}setAuthenticated(O){this.isAuthenticatedSubject.next(O)}logout(){var O=this;return(0,n.A)(function*(){const Z=window.location;yield O.keycloakService.logout(Z.protocol+"//"+Z.host+"/login"),O.setAuthenticated(!1)})()}fetchUserInfo(){var O=this;return(0,n.A)(function*(){if(O.userSubject.value)return O.userSubject.value;{let Z;try{if(Z=yield(0,B._)(O.myUserService.getMyUser()),Z)return O.userSubject.next(Z),Z}catch(Q){return void console.error("Failed to fetch user info:",Q)}return Z?(O.userSubject.next(Z),Z):void 0}})()}isAuthenticated(){var O=this;return(0,n.A)(function*(){const Z=yield O.keycloakService.isLoggedIn();return O.setAuthenticated(Z),Promise.resolve(Z)})()}getToken(){var O=this;return(0,n.A)(function*(){return O.keycloakService.getToken()})()}getOrgMrn(){var O=this;return(0,n.A)(function*(){return O.keycloakService.getKeycloakInstance().tokenParsed?O.keycloakService.getKeycloakInstance().tokenParsed.org:""})()}getUserName(){var O=this;return(0,n.A)(function*(){return O.keycloakService.getKeycloakInstance().tokenParsed?O.keycloakService.getKeycloakInstance().tokenParsed.name:""})()}getUserMrn(){var O=this;return(0,n.A)(function*(){return O.keycloakService.getKeycloakInstance().tokenParsed?O.keycloakService.getKeycloakInstance().tokenParsed.mrn:""})()}getUserRoles(){var O=this;return(0,n.A)(function*(){return O.keycloakService.getKeycloakInstance().tokenParsed?O.keycloakService.getKeycloakInstance().tokenParsed.roles:[]})()}getUserPermission(){var O=this;return(0,n.A)(function*(){return O.keycloakService.getKeycloakInstance().tokenParsed?new Promise(function(){var Z=(0,n.A)(function*(Q,fe){yield O.keycloakService.getKeycloakInstance().tokenParsed.roles});return function(Q,fe){return Z.apply(this,arguments)}}()):c.User})()}hasPermission(O){return!!this.keycloakService.isLoggedIn()&&(v[this.userSubject.value?.role].includes(O)??!1)}static#e=this.\u0275fac=function(Z){return new(Z||E)(S.KVO(o.F1),S.KVO(A.tv),S.KVO(k.Ix))};static#t=this.\u0275prov=S.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},1748:(et,P,I)=>{"use strict";I.d(P,{Y:()=>w});const n=[{value:"AF",code3:"AFG",title:"Afghanistan",valueText:"Afghanistan"},{value:"AL",code3:"ALB",title:"Albania",valueText:"Albania"},{value:"DZ",code3:"DZA",title:"Algeria",valueText:"Algeria"},{value:"AS",code3:"ASM",title:"American Samoa",valueText:"American Samoa"},{value:"AD",code3:"AND",title:"Andorra",valueText:"Andorra"},{value:"AO",code3:"AGO",title:"Angola",valueText:"Angola"},{value:"AI",code3:"AIA",title:"Anguilla",valueText:"Anguilla"},{value:"AQ",code3:"ATA",title:"Antarctica",valueText:"Antarctica"},{value:"AG",code3:"ATG",title:"Antigua and Barbuda",valueText:"Antigua and Barbuda"},{value:"AR",code3:"ARG",title:"Argentina",valueText:"Argentina"},{value:"AM",code3:"ARM",title:"Armenia",valueText:"Armenia"},{value:"AW",code3:"ABW",title:"Aruba",valueText:"Aruba"},{value:"AU",code3:"AUS",title:"Australia",valueText:"Australia"},{value:"AT",code3:"AUT",title:"Austria",valueText:"Austria"},{value:"AZ",code3:"AZE",title:"Azerbaijan",valueText:"Azerbaijan"},{value:"BS",code3:"BHS",title:"Bahamas (the)",valueText:"Bahamas (the)"},{value:"BH",code3:"BHR",title:"Bahrain",valueText:"Bahrain"},{value:"BD",code3:"BGD",title:"Bangladesh",valueText:"Bangladesh"},{value:"BB",code3:"BRB",title:"Barbados",valueText:"Barbados"},{value:"BY",code3:"BLR",title:"Belarus",valueText:"Belarus"},{value:"BE",code3:"BEL",title:"Belgium",valueText:"Belgium"},{value:"BZ",code3:"BLZ",title:"Belize",valueText:"Belize"},{value:"BJ",code3:"BEN",title:"Benin",valueText:"Benin"},{value:"BM",code3:"BMU",title:"Bermuda",valueText:"Bermuda"},{value:"BT",code3:"BTN",title:"Bhutan",valueText:"Bhutan"},{value:"BO",code3:"BOL",title:"Bolivia (Plurinational State of)",valueText:"Bolivia (Plurinational State of)"},{value:"BQ",code3:"BES",title:"Bonaire, Sint Eustatius and Saba",valueText:"Bonaire, Sint Eustatius and Saba"},{value:"BA",code3:"BIH",title:"Bosnia and Herzegovina",valueText:"Bosnia and Herzegovina"},{value:"BW",code3:"BWA",title:"Botswana",valueText:"Botswana"},{value:"BV",code3:"BVT",title:"Bouvet Island",valueText:"Bouvet Island"},{value:"BR",code3:"BRA",title:"Brazil",valueText:"Brazil"},{value:"IO",code3:"IOT",title:"British Indian Ocean Territory (the)",valueText:"British Indian Ocean Territory (the)"},{value:"BN",code3:"BRN",title:"Brunei Darussalam",valueText:"Brunei Darussalam"},{value:"BG",code3:"BGR",title:"Bulgaria",valueText:"Bulgaria"},{value:"BF",code3:"BFA",title:"Burkina Faso",valueText:"Burkina Faso"},{value:"BI",code3:"BDI",title:"Burundi",valueText:"Burundi"},{value:"CV",code3:"CPV",title:"Cabo Verde",valueText:"Cabo Verde"},{value:"KH",code3:"KHM",title:"Cambodia",valueText:"Cambodia"},{value:"CM",code3:"CMR",title:"Cameroon",valueText:"Cameroon"},{value:"CA",code3:"CAN",title:"Canada",valueText:"Canada"},{value:"KY",code3:"CYM",title:"Cayman Islands (the)",valueText:"Cayman Islands (the)"},{value:"CF",code3:"CAF",title:"Central African Republic (the)",valueText:"Central African Republic (the)"},{value:"TD",code3:"TCD",title:"Chad",valueText:"Chad"},{value:"CL",code3:"CHL",title:"Chile",valueText:"Chile"},{value:"CN",code3:"CHN",title:"China",valueText:"China"},{value:"CX",code3:"CXR",title:"Christmas Island",valueText:"Christmas Island"},{value:"CC",code3:"CCK",title:"Cocos (Keeling) Islands (the)",valueText:"Cocos (Keeling) Islands (the)"},{value:"CO",code3:"COL",title:"Colombia",valueText:"Colombia"},{value:"KM",code3:"COM",title:"Comoros (the)",valueText:"Comoros (the)"},{value:"CD",code3:"COD",title:"Congo (the Democratic Republic of the)",valueText:"Congo (the Democratic Republic of the)"},{value:"CG",code3:"COG",title:"Congo (the)",valueText:"Congo (the)"},{value:"CK",code3:"COK",title:"Cook Islands (the)",valueText:"Cook Islands (the)"},{value:"CR",code3:"CRI",title:"Costa Rica",valueText:"Costa Rica"},{value:"HR",code3:"HRV",title:"Croatia",valueText:"Croatia"},{value:"CU",code3:"CUB",title:"Cuba",valueText:"Cuba"},{value:"CW",code3:"CUW",title:"Cura\xe7ao",valueText:"Cura\xe7ao"},{value:"CY",code3:"CYP",title:"Cyprus",valueText:"Cyprus"},{value:"CZ",code3:"CZE",title:"Czechia",valueText:"Czechia"},{value:"CI",code3:"CIV",title:"C\xf4te d'Ivoire",valueText:"C\xf4te d'Ivoire"},{value:"DK",code3:"DNK",title:"Denmark",valueText:"Denmark"},{value:"DJ",code3:"DJI",title:"Djibouti",valueText:"Djibouti"},{value:"DM",code3:"DMA",title:"Dominica",valueText:"Dominica"},{value:"DO",code3:"DOM",title:"Dominican Republic (the)",valueText:"Dominican Republic (the)"},{value:"EC",code3:"ECU",title:"Ecuador",valueText:"Ecuador"},{value:"EG",code3:"EGY",title:"Egypt",valueText:"Egypt"},{value:"SV",code3:"SLV",title:"El Salvador",valueText:"El Salvador"},{value:"GQ",code3:"GNQ",title:"Equatorial Guinea",valueText:"Equatorial Guinea"},{value:"ER",code3:"ERI",title:"Eritrea",valueText:"Eritrea"},{value:"EE",code3:"EST",title:"Estonia",valueText:"Estonia"},{value:"SZ",code3:"SWZ",title:"Eswatini",valueText:"Eswatini"},{value:"ET",code3:"ETH",title:"Ethiopia",valueText:"Ethiopia"},{value:"FK",code3:"FLK",title:"Falkland Islands (the) [Malvinas]",valueText:"Falkland Islands (the) [Malvinas]"},{value:"FO",code3:"FRO",title:"Faroe Islands (the)",valueText:"Faroe Islands (the)"},{value:"FJ",code3:"FJI",title:"Fiji",valueText:"Fiji"},{value:"FI",code3:"FIN",title:"Finland",valueText:"Finland"},{value:"FR",code3:"FRA",title:"France",valueText:"France"},{value:"GF",code3:"GUF",title:"French Guiana",valueText:"French Guiana"},{value:"PF",code3:"PYF",title:"French Polynesia",valueText:"French Polynesia"},{value:"TF",code3:"ATF",title:"French Southern Territories (the)",valueText:"French Southern Territories (the)"},{value:"GA",code3:"GAB",title:"Gabon",valueText:"Gabon"},{value:"GM",code3:"GMB",title:"Gambia (the)",valueText:"Gambia (the)"},{value:"GE",code3:"GEO",title:"Georgia",valueText:"Georgia"},{value:"DE",code3:"DEU",title:"Germany",valueText:"Germany"},{value:"GH",code3:"GHA",title:"Ghana",valueText:"Ghana"},{value:"GI",code3:"GIB",title:"Gibraltar",valueText:"Gibraltar"},{value:"GR",code3:"GRC",title:"Greece",valueText:"Greece"},{value:"GL",code3:"GRL",title:"Greenland",valueText:"Greenland"},{value:"GD",code3:"GRD",title:"Grenada",valueText:"Grenada"},{value:"GP",code3:"GLP",title:"Guadeloupe",valueText:"Guadeloupe"},{value:"GU",code3:"GUM",title:"Guam",valueText:"Guam"},{value:"GT",code3:"GTM",title:"Guatemala",valueText:"Guatemala"},{value:"GG",code3:"GGY",title:"Guernsey",valueText:"Guernsey"},{value:"GN",code3:"GIN",title:"Guinea",valueText:"Guinea"},{value:"GW",code3:"GNB",title:"Guinea-Bissau",valueText:"Guinea-Bissau"},{value:"GY",code3:"GUY",title:"Guyana",valueText:"Guyana"},{value:"HT",code3:"HTI",title:"Haiti",valueText:"Haiti"},{value:"HM",code3:"HMD",title:"Heard Island and McDonald Islands",valueText:"Heard Island and McDonald Islands"},{value:"VA",code3:"VAT",title:"Holy See (the)",valueText:"Holy See (the)"},{value:"HN",code3:"HND",title:"Honduras",valueText:"Honduras"},{value:"HK",code3:"HKG",title:"Hong Kong",valueText:"Hong Kong"},{value:"HU",code3:"HUN",title:"Hungary",valueText:"Hungary"},{value:"IS",code3:"ISL",title:"Iceland",valueText:"Iceland"},{value:"IN",code3:"IND",title:"India",valueText:"India"},{value:"ID",code3:"IDN",title:"Indonesia",valueText:"Indonesia"},{value:"IR",code3:"IRN",title:"Iran (Islamic Republic of)",valueText:"Iran (Islamic Republic of)"},{value:"IQ",code3:"IRQ",title:"Iraq",valueText:"Iraq"},{value:"IE",code3:"IRL",title:"Ireland",valueText:"Ireland"},{value:"IM",code3:"IMN",title:"Isle of Man",valueText:"Isle of Man"},{value:"IL",code3:"ISR",title:"Israel",valueText:"Israel"},{value:"IT",code3:"ITA",title:"Italy",valueText:"Italy"},{value:"JM",code3:"JAM",title:"Jamaica",valueText:"Jamaica"},{value:"JP",code3:"JPN",title:"Japan",valueText:"Japan"},{value:"JE",code3:"JEY",title:"Jersey",valueText:"Jersey"},{value:"JO",code3:"JOR",title:"Jordan",valueText:"Jordan"},{value:"KZ",code3:"KAZ",title:"Kazakhstan",valueText:"Kazakhstan"},{value:"KE",code3:"KEN",title:"Kenya",valueText:"Kenya"},{value:"KI",code3:"KIR",title:"Kiribati",valueText:"Kiribati"},{value:"KP",code3:"PRK",title:"Korea (the Democratic People's Republic of)",valueText:"Korea (the Democratic People's Republic of)"},{value:"KR",code3:"KOR",title:"Korea (the Republic of)",valueText:"Korea (the Republic of)"},{value:"KW",code3:"KWT",title:"Kuwait",valueText:"Kuwait"},{value:"KG",code3:"KGZ",title:"Kyrgyzstan",valueText:"Kyrgyzstan"},{value:"LA",code3:"LAO",title:"Lao People's Democratic Republic (the)",valueText:"Lao People's Democratic Republic (the)"},{value:"LV",code3:"LVA",title:"Latvia",valueText:"Latvia"},{value:"LB",code3:"LBN",title:"Lebanon",valueText:"Lebanon"},{value:"LS",code3:"LSO",title:"Lesotho",valueText:"Lesotho"},{value:"LR",code3:"LBR",title:"Liberia",valueText:"Liberia"},{value:"LY",code3:"LBY",title:"Libya",valueText:"Libya"},{value:"LI",code3:"LIE",title:"Liechtenstein",valueText:"Liechtenstein"},{value:"LT",code3:"LTU",title:"Lithuania",valueText:"Lithuania"},{value:"LU",code3:"LUX",title:"Luxembourg",valueText:"Luxembourg"},{value:"MO",code3:"MAC",title:"Macao",valueText:"Macao"},{value:"MG",code3:"MDG",title:"Madagascar",valueText:"Madagascar"},{value:"MW",code3:"MWI",title:"Malawi",valueText:"Malawi"},{value:"MY",code3:"MYS",title:"Malaysia",valueText:"Malaysia"},{value:"MV",code3:"MDV",title:"Maldives",valueText:"Maldives"},{value:"ML",code3:"MLI",title:"Mali",valueText:"Mali"},{value:"MT",code3:"MLT",title:"Malta",valueText:"Malta"},{value:"MH",code3:"MHL",title:"Marshall Islands (the)",valueText:"Marshall Islands (the)"},{value:"MQ",code3:"MTQ",title:"Martinique",valueText:"Martinique"},{value:"MR",code3:"MRT",title:"Mauritania",valueText:"Mauritania"},{value:"MU",code3:"MUS",title:"Mauritius",valueText:"Mauritius"},{value:"YT",code3:"MYT",title:"Mayotte",valueText:"Mayotte"},{value:"MX",code3:"MEX",title:"Mexico",valueText:"Mexico"},{value:"FM",code3:"FSM",title:"Micronesia (Federated States of)",valueText:"Micronesia (Federated States of)"},{value:"MD",code3:"MDA",title:"Moldova (the Republic of)",valueText:"Moldova (the Republic of)"},{value:"MC",code3:"MCO",title:"Monaco",valueText:"Monaco"},{value:"MN",code3:"MNG",title:"Mongolia",valueText:"Mongolia"},{value:"ME",code3:"MNE",title:"Montenegro",valueText:"Montenegro"},{value:"MS",code3:"MSR",title:"Montserrat",valueText:"Montserrat"},{value:"MA",code3:"MAR",title:"Morocco",valueText:"Morocco"},{value:"MZ",code3:"MOZ",title:"Mozambique",valueText:"Mozambique"},{value:"MM",code3:"MMR",title:"Myanmar",valueText:"Myanmar"},{value:"NA",code3:"NAM",title:"Namibia",valueText:"Namibia"},{value:"NR",code3:"NRU",title:"Nauru",valueText:"Nauru"},{value:"NP",code3:"NPL",title:"Nepal",valueText:"Nepal"},{value:"NL",code3:"NLD",title:"Netherlands (the)",valueText:"Netherlands (the)"},{value:"NC",code3:"NCL",title:"New Caledonia",valueText:"New Caledonia"},{value:"NZ",code3:"NZL",title:"New Zealand",valueText:"New Zealand"},{value:"NI",code3:"NIC",title:"Nicaragua",valueText:"Nicaragua"},{value:"NE",code3:"NER",title:"Niger (the)",valueText:"Niger (the)"},{value:"NG",code3:"NGA",title:"Nigeria",valueText:"Nigeria"},{value:"NU",code3:"NIU",title:"Niue",valueText:"Niue"},{value:"NF",code3:"NFK",title:"Norfolk Island",valueText:"Norfolk Island"},{value:"MP",code3:"MNP",title:"Northern Mariana Islands (the)",valueText:"Northern Mariana Islands (the)"},{value:"NO",code3:"NOR",title:"Norway",valueText:"Norway"},{value:"OM",code3:"OMN",title:"Oman",valueText:"Oman"},{value:"PK",code3:"PAK",title:"Pakistan",valueText:"Pakistan"},{value:"PW",code3:"PLW",title:"Palau",valueText:"Palau"},{value:"PS",code3:"PSE",title:"Palestine, State of",valueText:"Palestine, State of"},{value:"PA",code3:"PAN",title:"Panama",valueText:"Panama"},{value:"PG",code3:"PNG",title:"Papua New Guinea",valueText:"Papua New Guinea"},{value:"PY",code3:"PRY",title:"Paraguay",valueText:"Paraguay"},{value:"PE",code3:"PER",title:"Peru",valueText:"Peru"},{value:"PH",code3:"PHL",title:"Philippines (the)",valueText:"Philippines (the)"},{value:"PN",code3:"PCN",title:"Pitcairn",valueText:"Pitcairn"},{value:"PL",code3:"POL",title:"Poland",valueText:"Poland"},{value:"PT",code3:"PRT",title:"Portugal",valueText:"Portugal"},{value:"PR",code3:"PRI",title:"Puerto Rico",valueText:"Puerto Rico"},{value:"QA",code3:"QAT",title:"Qatar",valueText:"Qatar"},{value:"MK",code3:"MKD",title:"Republic of North Macedonia",valueText:"Republic of North Macedonia"},{value:"RO",code3:"ROU",title:"Romania",valueText:"Romania"},{value:"RU",code3:"RUS",title:"Russian Federation (the)",valueText:"Russian Federation (the)"},{value:"RW",code3:"RWA",title:"Rwanda",valueText:"Rwanda"},{value:"RE",code3:"REU",title:"R\xe9union",valueText:"R\xe9union"},{value:"BL",code3:"BLM",title:"Saint Barth\xe9lemy",valueText:"Saint Barth\xe9lemy"},{value:"SH",code3:"SHN",title:"Saint Helena, Ascension and Tristan da Cunha",valueText:"Saint Helena, Ascension and Tristan da Cunha"},{value:"KN",code3:"KNA",title:"Saint Kitts and Nevis",valueText:"Saint Kitts and Nevis"},{value:"LC",code3:"LCA",title:"Saint Lucia",valueText:"Saint Lucia"},{value:"MF",code3:"MAF",title:"Saint Martin (French part)",valueText:"Saint Martin (French part)"},{value:"PM",code3:"SPM",title:"Saint Pierre and Miquelon",valueText:"Saint Pierre and Miquelon"},{value:"VC",code3:"VCT",title:"Saint Vincent and the Grenadines",valueText:"Saint Vincent and the Grenadines"},{value:"WS",code3:"WSM",title:"Samoa",valueText:"Samoa"},{value:"SM",code3:"SMR",title:"San Marino",valueText:"San Marino"},{value:"ST",code3:"STP",title:"Sao Tome and Principe",valueText:"Sao Tome and Principe"},{value:"SA",code3:"SAU",title:"Saudi Arabia",valueText:"Saudi Arabia"},{value:"SN",code3:"SEN",title:"Senegal",valueText:"Senegal"},{value:"RS",code3:"SRB",title:"Serbia",valueText:"Serbia"},{value:"SC",code3:"SYC",title:"Seychelles",valueText:"Seychelles"},{value:"SL",code3:"SLE",title:"Sierra Leone",valueText:"Sierra Leone"},{value:"SG",code3:"SGP",title:"Singapore",valueText:"Singapore"},{value:"SX",code3:"SXM",title:"Sint Maarten (Dutch part)",valueText:"Sint Maarten (Dutch part)"},{value:"SK",code3:"SVK",title:"Slovakia",valueText:"Slovakia"},{value:"SI",code3:"SVN",title:"Slovenia",valueText:"Slovenia"},{value:"SB",code3:"SLB",title:"Solomon Islands",valueText:"Solomon Islands"},{value:"SO",code3:"SOM",title:"Somalia",valueText:"Somalia"},{value:"ZA",code3:"ZAF",title:"South Africa",valueText:"South Africa"},{value:"GS",code3:"SGS",title:"South Georgia and the South Sandwich Islands",valueText:"South Georgia and the South Sandwich Islands"},{value:"SS",code3:"SSD",title:"South Sudan",valueText:"South Sudan"},{value:"ES",code3:"ESP",title:"Spain",valueText:"Spain"},{value:"LK",code3:"LKA",title:"Sri Lanka",valueText:"Sri Lanka"},{value:"SD",code3:"SDN",title:"Sudan (the)",valueText:"Sudan (the)"},{value:"SR",code3:"SUR",title:"Surititle",valueText:"Surititle"},{value:"SJ",code3:"SJM",title:"Svalbard and Jan Mayen",valueText:"Svalbard and Jan Mayen"},{value:"SE",code3:"SWE",title:"Sweden",valueText:"Sweden"},{value:"CH",code3:"CHE",title:"Switzerland",valueText:"Switzerland"},{value:"SY",code3:"SYR",title:"Syrian Arab Republic",valueText:"Syrian Arab Republic"},{value:"TW",code3:"TWN",title:"Taiwan",valueText:"Taiwan"},{value:"TJ",code3:"TJK",title:"Tajikistan",valueText:"Tajikistan"},{value:"TZ",code3:"TZA",title:"Tanzania, United Republic of",valueText:"Tanzania, United Republic of"},{value:"TH",code3:"THA",title:"Thailand",valueText:"Thailand"},{value:"TL",code3:"TLS",title:"Timor-Leste",valueText:"Timor-Leste"},{value:"TG",code3:"TGO",title:"Togo",valueText:"Togo"},{value:"TK",code3:"TKL",title:"Tokelau",valueText:"Tokelau"},{value:"TO",code3:"TON",title:"Tonga",valueText:"Tonga"},{value:"TT",code3:"TTO",title:"Trinidad and Tobago",valueText:"Trinidad and Tobago"},{value:"TN",code3:"TUN",title:"Tunisia",valueText:"Tunisia"},{value:"TR",code3:"TUR",title:"Turkey",valueText:"Turkey"},{value:"TM",code3:"TKM",title:"Turkmenistan",valueText:"Turkmenistan"},{value:"TC",code3:"TCA",title:"Turks and Caicos Islands (the)",valueText:"Turks and Caicos Islands (the)"},{value:"TV",code3:"TUV",title:"Tuvalu",valueText:"Tuvalu"},{value:"UG",code3:"UGA",title:"Uganda",valueText:"Uganda"},{value:"UA",code3:"UKR",title:"Ukraine",valueText:"Ukraine"},{value:"AE",code3:"ARE",title:"United Arab Emirates (the)",valueText:"United Arab Emirates (the)"},{value:"GB",code3:"GBR",title:"United Kingdom of Great Britain and Northern Ireland (the)",valueText:"United Kingdom of Great Britain and Northern Ireland (the)"},{value:"UM",code3:"UMI",title:"United States Minor Outlying Islands (the)",valueText:"United States Minor Outlying Islands (the)"},{value:"US",code3:"USA",title:"United States of America (the)",valueText:"United States of America (the)"},{value:"UY",code3:"URY",title:"Uruguay",valueText:"Uruguay"},{value:"UZ",code3:"UZB",title:"Uzbekistan",valueText:"Uzbekistan"},{value:"VU",code3:"VUT",title:"Vanuatu",valueText:"Vanuatu"},{value:"VE",code3:"VEN",title:"Venezuela (Bolivarian Republic of)",valueText:"Venezuela (Bolivarian Republic of)"},{value:"VN",code3:"VNM",title:"Viet Nam",valueText:"Viet Nam"},{value:"VG",code3:"VGB",title:"Virgin Islands (British)",valueText:"Virgin Islands (British)"},{value:"VI",code3:"VIR",title:"Virgin Islands (U.S.)",valueText:"Virgin Islands (U.S.)"},{value:"WF",code3:"WLF",title:"Wallis and Futuna",valueText:"Wallis and Futuna"},{value:"EH",code3:"ESH",title:"Western Sahara",valueText:"Western Sahara"},{value:"YE",code3:"YEM",title:"Yemen",valueText:"Yemen"},{value:"ZM",code3:"ZMB",title:"Zambia",valueText:"Zambia"},{value:"ZW",code3:"ZWE",title:"Zimbabwe",valueText:"Zimbabwe"},{value:"AX",code3:"ALA",title:"\xc5land Islands",valueText:"\xc5land Islands"}];var c=I(1066);const w={organization:{id:{title:"ID",type:"string",description:"Unique identifier for the organization",visibleFrom:["detail"],immutable:!0},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifier",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,shortIdType:"organization",error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>'"},name:{title:"Name",type:"string",description:"Name of the organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},email:{title:"Email",type:"string",description:"Contact email of the organization",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},phone:{title:"Phone",type:"string",description:"Contact phone number of the organization",visibleFrom:["detail","edit"]},country:{title:"Country",type:"string",description:"Country that the organization belongs to",visibleFrom:["detail","list","edit","edit-new"],options:n,required:!0},address:{title:"Address",type:"string",description:"Physical address of the organization",visibleFrom:["detail","edit","edit-new"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["edit-new"],required:!0,error:"Please enter a valid URL"},createdAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]},status:{title:"Status",type:"string",description:"Approval status of the organization",visibleFrom:["detail","list","edit"],options:[{title:"Pending",value:"pending"},{title:"Approved",value:"approved"},{title:"Disapproved",value:"disapproved"},{title:"Suspended",value:"suspended"}],required:!0},currentBalance:{title:"Current Balance",type:"number",description:"Current account balance of the organization",visibleFrom:["detail","edit"],defaultValue:0}},service:{id:{title:"ID",type:"number",description:"Unique identifier for the service",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization owning the service",visibleFrom:["detail","edit","edit-new"],options:[],required:!0},name:{title:"Name",type:"string",description:"Name of the service",visibleFrom:["detail","list","edit","edit-new"],required:!0},description:{title:"Description",type:"string",description:"Brief details about the service",visibleFrom:["detail","edit","edit-new"]},orgContributionWeight:{title:"Organization Contribution Weight",type:"number",description:"Weight percentage of the organization's contribution",visibleFrom:["detail","edit"]},unitPrice:{title:"Unit Price",type:"number",description:"Price per unit of the service",visibleFrom:["detail","edit","edit-new"]},unit:{title:"Unit",type:"string",description:"Unit of the service cost",visibleFrom:["detail","edit","edit-new"]},isActive:{title:"Active Status",type:"boolean",description:"Whether the service is currently active",visibleFrom:["detail","list","edit"]},createdAt:{title:"Created At",type:"string",description:"Time of service creation",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the service",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},plan:{id:{title:"ID",type:"number",description:"Unique identifier for the plan",visibleFrom:["detail"],required:!0},name:{title:"Name",type:"string",description:"Name of the plan",visibleFrom:["detail","list","edit","edit-new"],required:!0},description:{title:"Description",type:"string",description:"Brief details about the plan",visibleFrom:["detail","edit","edit-new"],required:!1},monthlyCost:{title:"Monthly Cost",type:"number",description:"Monthly subscription cost for the plan",visibleFrom:["detail","edit","list","edit-new"],required:!0},annualCost:{title:"Annual Cost",type:"number",description:"Annual subscription cost for the plan",visibleFrom:["detail","edit","edit-new"],required:!1},usageLimit:{title:"Usage Limit",type:"number",description:"Service usage limit for the plan",visibleFrom:["detail","list","edit","edit-new"],required:!1},currency:{title:"Currency",type:"string",description:"Currency used for the plan costs (e.g., USD, EUR)",visibleFrom:["detail","edit","edit-new"],required:!0},maxUsers:{title:"Maximum Users",type:"number",description:"Maximum number of users allowed in this plan",visibleFrom:["detail","edit","edit-new"],required:!0},maxStorageGb:{title:"Maximum Storage (GB)",type:"number",description:"Maximum storage in GB allowed for the plan",visibleFrom:["detail","edit","edit-new"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Whether the plan is currently active",visibleFrom:["detail","list","edit"],required:!1},createdAt:{title:"Created At",type:"string",description:"Time of plan creation",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the plan",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgpayment:{id:{title:"ID",type:"number",description:"Unique identifier for the payment record",visibleFrom:["detail","edit","edit-new"],required:!0},organizationId:{title:"Organization ID",type:"string",description:"UUID of the organization linked to this payment",visibleFrom:["detail","edit"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"number",description:"Optional ID of the associated subscription plan",visibleFrom:["detail","edit"],required:!1},transactionId:{title:"Transaction ID",type:"string",description:"Unique identifier for the payment transaction",visibleFrom:["detail","list","edit","edit-new"],required:!0},amount:{title:"Amount",type:"number",description:"Payment amount in the specified currency",visibleFrom:["detail","list","edit"],required:!0},status:{title:"Payment Status",type:"string",description:"Current status of the payment (e.g., completed, pending)",visibleFrom:["detail","list","edit"],options:[{title:"Completed",value:"completed"},{title:"Pending",value:"pending"},{title:"Failed",value:"failed"},{title:"Refunded",value:"refunded"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the payment record was created",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the payment record",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsubscription:{id:{title:"ID",type:"number",description:"Unique identifier for the organization subscription",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization associated with the subscription",visibleFrom:["edit","edit-new"],required:!0},organizationName:{title:"Organization Name",type:"organizationName",description:"Name of the organization associated with the subscription",visibleFrom:["detail","list"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"subscriptionPlanId",description:"ID of the subscription plan linked to the organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},startDate:{title:"Start Date",type:"date",description:"Date when the subscription started",visibleFrom:["detail","list","edit","edit-new"],required:!0},endDate:{title:"End Date",type:"date",description:"Date when the subscription ends",visibleFrom:["detail","list","edit","edit-new"],required:!0},status:{title:"Subscription Status",type:"string",description:"Current status of the subscription",visibleFrom:["detail","list","edit"],options:[{title:"Active",value:"active"},{title:"Canceled",value:"canceled"},{title:"Expired",value:"expired"},{title:"Pending",value:"pending"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time of subscription creation",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the subscription",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},user:{id:{title:"ID",type:"string",description:"Unique identifier for the user (UUID)",visibleFrom:["detail"],required:!1},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization the user belongs to",visibleFrom:["detail"],required:!0},mrn:{title:"MRN",type:"string",description:"Unique Maritime Resource Name of the user",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid MRN following the format 'urn:mrn:mcp:<entity_type>:<org_id>:<user_id>'"},email:{title:"Email",type:"string",description:"Contact email address of the user",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},username:{title:"Username",type:"string",description:"Unique username of the user",visibleFrom:["detail","list","edit","edit-new"],required:!0},passwordHash:{title:"Password Hash",type:"string",description:"Hashed password of the user",visibleFrom:[]},role:{title:"Role",type:"string",description:"Role assigned to the user",visibleFrom:["detail","edit","edit-new"],options:[{title:"User",value:"User"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the user was created",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update made to the user",filter:!1,valuePrepareFunction:p=>new Date(p).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usersvcsubscription:{id:{title:"ID",type:"number",description:"Unique identifier for the service subscription",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"string",description:"UUID of the organization subscribing to the service",visibleFrom:["detail","list","edit"],required:!0},serviceId:{title:"Service ID",type:"serviceId",description:"ID of the service being subscribed to",visibleFrom:["detail","list","edit","edit-new"],required:!0},startDate:{title:"Start Date",type:"date",description:"Date when the subscription started",visibleFrom:["detail","list","edit","edit-new"],required:!0},endDate:{title:"End Date",type:"date",description:"Date when the subscription ended (if applicable)",visibleFrom:["detail","list","edit","edit-new"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Indicates whether the subscription is active",visibleFrom:["detail","list","edit","edit-new"],required:!0},pricingModel:{title:"Pricing Model",type:"string",description:"Model used for pricing (usage-based or flat-rate)",visibleFrom:[],options:[{title:"Usage-Based",value:"usage-based"},{title:"Flat-Rate",value:"flat-rate"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Timestamp when the subscription was created",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Timestamp of the last update to the subscription",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsvcusage:{id:{title:"ID",type:"number",description:"Unique identifier for the organization service usage",visibleFrom:["detail","edit"],required:!0},userName:{title:"User Name",type:"string",description:"User associated with the usage record",visibleFrom:["detail","list"]},serviceId:{title:"Service ID",type:"number",description:"Unique identifier for the service",visibleFrom:["detail","edit"],required:!0},serviceName:{title:"Service Name",type:"string",description:"Service name",visibleFrom:["detail","list","edit"],required:!0},usageMetricId:{title:"Usage Metric ID",type:"number",description:"Identifier for the usage metric",visibleFrom:["detail","edit"],required:!0},usageAmount:{title:"Usage Amount",type:"number",description:"Amount of the service used",visibleFrom:["detail","list","edit"],required:!0},usageDate:{title:"Usage Date",type:"string",description:"Date when the usage was recorded",valuePrepareFunction:p=>(0,c.YF)(p),visibleFrom:["detail","list"],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the usage record was created",valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time when the usage record was last updated",valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},invoice:{id:{title:"ID",type:"number",description:"Unique identifier for the invoice",visibleFrom:["detail","list"],required:!0},organizationSubscriptionId:{title:"Organization Subscription ID",type:"organizationSubscriptionId",description:"ID of the associated organization subscription",visibleFrom:["detail","edit","edit-new"],required:!0},invoiceDate:{title:"Invoice Date",type:"date",description:"Date when the invoice was generated",valuePrepareFunction:p=>(0,c.YF)(p),visibleFrom:["detail","list","edit","edit-new"]},dueDate:{title:"Due Date",type:"date",description:"Date by which the invoice needs to be paid",valuePrepareFunction:p=>(0,c.YF)(p),visibleFrom:["detail","list","edit","edit-new"],required:!0},amountDue:{title:"Amount Due",type:"number",description:"Total amount due on the invoice",visibleFrom:["detail","list","edit","edit-new"],required:!0},amountPaid:{title:"Amount Paid",type:"number",description:"Amount that has been paid for the invoice",visibleFrom:["detail","list","edit"]},status:{title:"Status",type:"string",description:"Current status of the invoice",options:[{title:"Unpaid",value:"unpaid"},{title:"Paid",value:"paid"},{title:"Overdue",value:"overdue"},{title:"Canceled",value:"canceled"}],visibleFrom:["detail","list","edit"],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the invoice was created",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time when the invoice was last updated",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usercert:{id:{title:"ID",type:"number"},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,shortIdType:"user",error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>:<unique_id>'"},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,error:"Please enter a valid email address"}},orgcandidate:{id:{title:"ID",type:"number"},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list","edit","edit-new"],shortIdType:"organization",immutable:!0,required:!0,error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>'"},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},phone:{title:"Phone",type:"string",description:"Contact phone number of the organization",visibleFrom:["detail","edit","edit-new"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid email address"},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid URL"},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail","edit","edit-new"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list","edit","edit-new"],options:n,required:!0},adminUserEmail:{title:"Admin User e-mail",type:"string",description:"Contact organization admin user e-mail",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},adminUserName:{title:"Admin User Name",type:"string",description:"Name of organization admin user",visibleFrom:["detail","edit","edit-new"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"number",description:"Name of organization",visibleFrom:["detail","list","edit"],required:!0},status:{title:"Status",type:"string",description:"Organization status",visibleFrom:["detail","list","edit"]},createdAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usersvcusage:{id:{title:"ID",type:"number",description:"Unique identifier for the user service usage",visibleFrom:["detail"]},user:{title:"User",type:"User",description:"User associated with the usage record",visibleFrom:[]},userName:{title:"User Name",type:"string",description:"User associated with the usage record",visibleFrom:["detail","list"]},service:{title:"Service",type:"Service",description:"Service being used",visibleFrom:[]},serviceName:{title:"Service Name",type:"string",description:"Service being used",visibleFrom:["detail","list"]},serviceId:{title:"Service ID",type:"serviceId",description:"Service being used",visibleFrom:["edit","edit-new"],required:!0},usageMetric:{title:"Usage Metric",type:"string",description:"Optional metric for tracking service usage",visibleFrom:[],required:!1},usageAmount:{title:"Usage Amount",type:"number",description:"Amount of usage for the service",visibleFrom:["detail","list","edit","edit-new"],required:!0},usageDate:{title:"Usage Date",type:"string",description:"Date of the usage event in ISO format",visibleFrom:["detail","list"]},createdAt:{title:"Created At",type:"string",description:"Time of record creation",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the record",filter:!1,valuePrepareFunction:p=>(0,c.YF)(p),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},instance:{id:{title:"ID",type:"number"},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list","edit","edit-new"],required:!0},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["detail","list","edit","edit-new"],required:!0},serviceType:{title:"Service type",type:"stringArray",options:[{title:"MS 1 - VTS Information service (INS)",value:"VTSInformationService"},{title:"MS 2 - VTS Navigational assistance service (NAS)",value:"VTSNavigationalAssistanceService"},{title:"MS 3 - Traffic organization service (TOS)",value:"TrafficOrganizationService"},{title:"MS 4 - Port support service (PSS)",value:"PortSupportService"},{title:"MS 5 - Maritime safety information (MSI) service",value:"MaritimeSafetyInformationService"},{title:"MS 6 - Pilotage service",value:"PilotageService"},{title:"MS 7 - Tug service",value:"TugService"},{title:"MS 8 - Vessel shore reporting",value:"VesselShoreReporting"},{title:"MS 9 - Telemedical assistance service (TMAS)",value:"TelemedicalAssistanceService"},{title:"MS 10 - Maritime assistance service (MAS)",value:"MaritimeAssistanceService"},{title:"MS 11 - Nautical chart service",value:"NauticalChartService"},{title:"MS 12 - Nautical publications service",value:"NauticalPublicationsService"},{title:"MS 13 - Ice navigation service",value:"IceNavigationService"},{title:"MS 14 - Meteorological information service",value:"MeteorologicalInformationService"},{title:"MS 15 - Real-time hydrographic and environmental information services",value:"RealTimeHydrographicAndEnvironmentalInformationServices"},{title:"MS 16 - Search and rescue (SAR) service",value:"SearchAndRescueService"},{title:"Other",value:"other:etc"}],description:"The service type shall reflect the associated operational service type provided according to defined types",visibleFrom:["detail","list","edit","edit-new"]},dataProductType:{title:"Data product type",type:"stringArray",options:[{title:"S-57 Electronic Navigational Chart (ENC)",value:"S57"},{title:"S-101 Electronic Navigational Chart (ENC)",value:"S101"},{title:"S-102 Bathymetric Surface",value:"S102"},{title:"S-104 Water Level Information for Surface Navigation",value:"S104"},{title:"S-111 Surface Currents",value:"S111"},{title:"S-122 Marine Protected Areas (MPAs)",value:"S122"},{title:"S-123 Marine Radio Services",value:"S123"},{title:"S-124 Navigational Warnings",value:"S124"},{title:"S-125 Marine Navigational Services",value:"S125"},{title:"S-126 Marine Physical Environment",value:"S126"},{title:"S-127 Marine Traffic Management",value:"S127"},{title:"S-128 Catalogue of Nautical Products",value:"S128"},{title:"S-129 Under Keel Clearance Management (UKCM)",value:"S129"},{title:"S-131 Marine Harbour Infrastructure",value:"S131"},{title:"S-210 Inter-VTS Exchange Format",value:"S210"},{title:"S-211 Port Call Message Format",value:"S211"},{title:"S-212 VTS Digital Information Service",value:"S212"},{title:"S-401 Inland ENC",value:"S401"},{title:"S-402 Bathymetric Contour Overlay for Inland ENC",value:"S402"},{title:"S-411 Sea Ice Information",value:"S411"},{title:"S-412 Weather Overlay",value:"S412"},{title:"S-413 Marine Weather Conditions",value:"S413"},{title:"S-414 Marine Weather Observations",value:"S414"},{title:"S-421 Route Plan",value:"S421"},{title:"Route Plan",value:"RTZ"},{title:"Electronic Port Clearance",value:"EPC"},{title:"Other data types not covered in this table",value:"OTHER"}],description:"Data product type defined in IEC 63173-2 SECOM standard",visibleFrom:["detail","list","edit","edit-new"]},status:{title:"Status",type:"string",options:[{title:"Provisional",value:"PROVISIONAL"},{title:"Released",value:"RELEASED"},{title:"Deprecated",value:"DEPRECATED"},{title:"Deleted",value:"DELETED"}],visibleFrom:["detail","list","edit","edit-new"],required:!0},endpointUri:{title:"Endpoint URI",type:"string",visibleFrom:["detail","edit","edit-new"],required:!0},endpointType:{title:"Endpoint type",type:"string",visibleFrom:[]},organizationId:{title:"Organization ID",type:"string",visibleFrom:["detail","edit","edit-new"],required:!0},keywords:{title:"Keywords",type:"stringArray",placeholder:"Please enter keyword",visibleFrom:["detail","list","edit","edit-new"]},instanceId:{title:"Instance ID",type:"string",description:"MCP MRN as unique identifer",placeholder:"urn:mrn:",visibleFrom:["detail","edit","edit-new"]},implementsServiceDesign:{title:"Technical design ID",type:"string",description:"MCP MRN as unique identifer",placeholder:"urn:mrn:",visibleFrom:["detail","edit","edit-new"]},implementsServiceDesignVersion:{title:"Technical design version",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","edit","edit-new"]},comment:{title:"Comment",type:"string",visibleFrom:["detail","edit","edit-new"]},geometryContentType:{title:"Geometry content type",type:"string",visibleFrom:[]},geometry:{title:"Geometry",type:"object",visibleFrom:[]},unlocode:{title:"Unlocode",type:"stringArray",placeholder:"Please enter UN/LOCODE",visibleFrom:[]},mmsi:{title:"MMSI",type:"string",visibleFrom:[]},imo:{title:"IMO number",type:"string",visibleFrom:[]},instanceAsXml:{title:"Instance as XML",type:"file",notShowOnEdit:!0,visibleFrom:["detail","edit","edit-new"]},instanceAsDocId:{title:"Instance as DocId",type:"number"},instanceAsDoc:{title:"Instance as document",type:"file",visibleFrom:["detail","edit","edit-new"]},ledgerRequestId:{title:"Ledger Request ID",type:"number"},ledgerRequestStatus:{title:"Ledger Request status",type:"string",options:[{title:"Inactive",value:"INACTIVE"},{title:"Created",value:"CREATED"},{title:"Vetting",value:"VETTING"},{title:"Vetted",value:"VETTED"},{title:"Requesting",value:"REQUESTING"},{title:"Succeeded",value:"SUCCEEDED"},{title:"Failed",value:"FAILED"},{title:"Rejected",value:"REJECTED"}],visibleFrom:[]},docIds:{title:"Related documents",type:"fileArray",filter:!1,visibleFrom:[]},publishedAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:[]},lastUpdatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]}},newOrganization:{orgMrn:{title:"Maritime Resource Name (MRN) for organization",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","edit","edit-new"],required:!0,shortIdType:"organization"},orgName:{title:"Organization name",type:"string",description:"Name of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgEmail:{title:"Organization contact e-mail",type:"string",description:"Contact e-mail",placeholder:"non-personal email, e.g., info@example.org",visibleFrom:["detail","edit","edit-new"],required:!0},orgUrl:{title:"URL of organization",type:"string",description:"URL of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgAddress:{title:"Address of organization",type:"string",description:"Address of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgCountry:{title:"Country of organization",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","edit","edit-new"],options:n,required:!0}},ledgerInstance:{name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["list"]},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"]},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["list"]},keywords:{title:"Keywords",type:"string",visibleFrom:["list"]},coverageArea:{title:"Coverage ",type:"string"},status:{title:"Status",type:"string",options:[{title:"Provisional",value:"PROVISIONAL"},{title:"Released",value:"RELEASED"},{title:"Deprecated",value:"DEPRECATED"},{title:"Deleted",value:"DELETED"}],visibleFrom:["list"]},implementsDesignMRN:{title:"Technical design ID",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"],shortIdType:"design",immutable:!0},implementsDesignVersion:{title:"Technical design version",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"]},msrName:{title:"MSR Name of register",type:"string",visibleFrom:["list"]},msrUrl:{title:"MSR URL of register",type:"string",visibleFrom:["list"]}}}},9677:(et,P,I)=>{"use strict";I.d(P,{C:()=>n});const n=c=>(Object.keys(c).forEach(w=>{"organization"===w&&(c.organizationId=c[w].id,c.organizationName=c[w].name),"subscriptionPlan"===w&&(c.subscriptionPlanId=c[w].id),"organizationSubscription"===w&&(c.organizationSubscriptionId=c[w].id),"service"===w&&(c.serviceId=c[w].id,c.serviceName=c[w].name),"user"===w&&(c.userName=c[w].username)}),c)},2170:(et,P,I)=>{"use strict";I.d(P,{c:()=>n,e:()=>c});const n=["en-GB","ko-KR"],c=[{code:"en-GB",name:"English"},{code:"ko-KR",name:"\ud55c\uad6d\uc5b4"}]},5166:(et,P,I)=>{"use strict";I.d(P,{N3:()=>c,SP:()=>n,Sx:()=>S,X:()=>_,xV:()=>C});var n=function(o){return o.None="none",o.Subscription="subscription",o.Organization="organization",o.Service="service",o.User="user",o.OrgSub="orgsub",o.Invoice="invoice",o.Plan="plan",o.Payment="payment",o.OrgPayment="orgpayment",o.OrgSubscription="orgsubscription",o.Usage="usage",o.Role="role",o.UserSvcSubscription="usersvcsubscription",o.DashboardElement="dashboardelement",o.OrgCandidate="orgcandidate",o.OrgSvcUsage="orgsvcusage",o.Certificate="certificate",o.UserSvcUsage="usersvcusage",o.UserCert="usercert",o.Device="device",o.MMS="mms",o.Vessel="vessel",o.Instance="instance",o}(n||{});const c=["start","end","revokedAt","createdAt","updatedAt"];var _=function(o){return o.Approved="approved",o.Disapproved="disapproved",o.Pending="pending",o.Suspended="suspended",o}(_||{}),C=function(o){return o.Active="active",o.Canceled="canceled",o.Expired="expired",o.Pending="pending",o}(C||{}),S=function(o){return o.Paid="paid",o.Unpaid="unpaid",o.Overdue="overdue",o.Canceled="canceled",o}(S||{})},3830:(et,P,I)=>{"use strict";I.d(P,{B:()=>c});var n=I(5166);const c=(w,p)=>{const N=w.split(":");return p===n.SP.Organization?N.slice(0,3).join(":")+":org:"+N.slice(4,5).join(":")+":":N.slice(0,3).join(":")+":"+p+":"+N.slice(4,6).join(":")+":"}},217:(et,P,I)=>{"use strict";I.d(P,{X:()=>n});var n=function(c){return c.SuperAdmin="SuperAdmin",c.OrgAdmin="OrgAdmin",c.UserAdmin="UserAdmin",c.User="User",c}(n||{})},8839:(et,P,I)=>{"use strict";I.d(P,{i:()=>w});var n=I(8974),c=I(5950);let w=(()=>{class p{constructor(){this.organizationsSubject=new n.t([]),this.organizations$=this.organizationsSubject.asObservable()}setOrganizations(u){this.organizationsSubject.next(u)}getOrganizations(){return this.organizationsSubject.value}static#e=this.\u0275fac=function(B){return new(B||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},5949:(et,P,I)=>{"use strict";I.d(P,{e:()=>w});var n=I(8974),c=I(5950);let w=(()=>{class p{constructor(){this.organizationSubscriptionSubject=new n.t([]),this.organizationSubscriptions$=this.organizationSubscriptionSubject.asObservable()}setOrganizationSubscriptions(u){this.organizationSubscriptionSubject.next(u)}getOrganizationSubscriptions(){return this.organizationSubscriptionSubject.value}static#e=this.\u0275fac=function(B){return new(B||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},3682:(et,P,I)=>{"use strict";I.d(P,{j:()=>w});var n=I(8974),c=I(5950);let w=(()=>{class p{constructor(){this.subscriptionPlansSubject=new n.t([]),this.subscriptionPlans$=this.subscriptionPlansSubject.asObservable()}setSubscriptionPlans(u){this.subscriptionPlansSubject.next(u)}getSubscriptionPlans(){return this.subscriptionPlansSubject.value}static#e=this.\u0275fac=function(B){return new(B||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},58:(et,P,I)=>{"use strict";I.d(P,{G:()=>p});var n=I(2047),c=I(9380),w=I(5950);let p=(()=>{class N{static#e=this.\u0275fac=function(_){return new(_||N)};static#t=this.\u0275mod=w.$C({type:N});static#s=this.\u0275inj=w.G2t({imports:[n.MD,n.MD,c.h]})}return N})()},1523:(et,P,I)=>{"use strict";I.d(P,{g:()=>w});var n=I(8974),c=I(5950);let w=(()=>{class p{constructor(){this.serviceSubject=new n.t([]),this.services$=this.serviceSubject.asObservable()}setServices(u){this.serviceSubject.next(u)}getServices(){return this.serviceSubject.value}static#e=this.\u0275fac=function(B){return new(B||p)};static#t=this.\u0275prov=c.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1066:(et,P,I)=>{"use strict";I.d(P,{Qj:()=>w,YF:()=>c,t:()=>n});const n=p=>new Date(p).toLocaleString(),c=p=>new Date(1e3*p).toLocaleString(),w=p=>{const N=new Date(p);return`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`}},3987:(et,P,I)=>{"use strict";I.d(P,{Xo:()=>N,lk:()=>p,rR:()=>w,xs:()=>c});var n=I(2170);const c=u=>{u.addLangs(n.c)},w=u=>{const B=localStorage.getItem("locale"),_=B&&n.c.includes(B)?localStorage.getItem("locale"):"en-GB";if(null!==_)return u.setDefaultLang(_),u.use(_),_;throw new Error("Locale not found")},p=(u,B)=>{u.use(B),u.setDefaultLang(B),localStorage.setItem("locale",B)},N=u=>n.e.find(B=>B.code===u)?.name||"English"},8168:(et,P,I)=>{"use strict";I.d(P,{s:()=>n});const n="ORGADMIN"},9850:(et,P,I)=>{"use strict";I.d(P,{h:()=>C});var n=I(2047),c=I(58),w=I(6908),p=I(888),N=I(3103),u=I(2537),B=I(3426),_=I(5950);let C=(()=>{class S{static#e=this.\u0275fac=function(k){return new(k||S)};static#t=this.\u0275mod=_.$C({type:S});static#s=this.\u0275inj=_.G2t({imports:[n.MD,c.G,w.PuD,p.j,N.Y,u.B,B.d]})}return S})()},888:(et,P,I)=>{"use strict";I.d(P,{j:()=>X});var n=I(5950),c=I(7882),w=I(6908),p=I(1748);const N=H=>Object.fromEntries(Object.entries(H).filter(([L,K])=>void 0!==K&&K.toString().length>0));var _=I(5166),S=I(58),o=I(217);var b=I(874),E=I(6482),R=I(5189),O=I(9380),Z=I(8839),Q=I(3682),fe=I(5949),re=I(1523),Ae=I(2047);function Oe(H,L){1&H&&(n.j41(0,"div",3)(1,"span",4),n.EFF(2,"Loading..."),n.k0s()())}function D(H,L){if(1&H&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(),n.JRh(K.value.error)}}function J(H,L){1&H&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function m(H,L){if(1&H){const K=n.RV6();n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"input",11),n.bIt("ngModelChange",function(Le){n.eBV(K);const ct=n.XpG(3);return n.Njj(ct.onMrnChange(Le))})("keydown",function(Le){n.eBV(K);const ct=n.XpG(3);return n.Njj(ct.onMrnKeyDown(Le))}),n.k0s(),n.j41(4,"clr-control-helper"),n.EFF(5),n.k0s(),n.DNE(6,D,2,1,"clr-control-error")(7,J,2,0,"clr-control-error"),n.k0s()}if(2&H){const K=n.XpG().$implicit,Ve=n.XpG(2);n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",K.value.type)("formControlName",K.key)("required",!0===K.value.required)("placeholder",Ve.mrnPrefix),n.R7$(2),n.JRh(K.value.description),n.R7$(),n.vxM(K.value.error?6:7)}}function j(H,L){if(1&H&&(n.j41(0,"span",13),n.EFF(1),n.k0s()),2&H){const K=L.$implicit;n.R7$(),n.JRh(K)}}function ue(H,L){if(1&H&&n.Z7z(0,j,2,1,"span",13,n.fX1),2&H){const K=n.XpG(2).$implicit,Ve=n.XpG(2);n.Dyx(Ve.item[K.key])}}function V(H,L){1&H&&(n.j41(0,"button",12),n.EFF(1,"No value assigned"),n.k0s())}function xe(H,L){if(1&H&&(n.j41(0,"option",16),n.EFF(1),n.k0s()),2&H){const K=L.$implicit;n.Y8G("value",K.value),n.R7$(),n.JRh(K.title)}}function be(H,L){if(1&H&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&H){const K=n.XpG(3).$implicit;n.R7$(),n.JRh(K.value.error)}}function Pe(H,L){1&H&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function se(H,L){if(1&H&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",14),n.DNE(4,xe,2,2,"option",15),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,be,2,1,"clr-control-error")(8,Pe,2,0,"clr-control-error"),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",K.key)("required",!0===K.value.required),n.R7$(),n.Y8G("ngForOf",K.value.options),n.R7$(2),n.JRh(K.value.description),n.R7$(),n.vxM(K.value.error?7:8)}}function ee(H,L){if(1&H&&(n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",17),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",K.value.type)("formControlName",K.key)("required",!0===K.value.required)}}function Me(H,L){if(1&H&&n.DNE(0,ue,2,0)(1,V,2,0,"button",12)(2,se,9,8,"clr-select-container")(3,ee,4,6,"clr-input-container"),2&H){const K=n.XpG().$implicit,Ve=n.XpG(2);n.vxM(Ve.item[K.key].length>0?0:1),n.R7$(2),n.vxM(K.value.options?2:3)}}function Ce(H,L){if(1&H&&(n.j41(0,"option",16),n.EFF(1),n.k0s()),2&H){const K=L.$implicit;n.Y8G("value",K.value),n.R7$(),n.JRh(K.title)}}function Ee(H,L){if(1&H&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(),n.JRh(K.value.error)}}function ot(H,L){1&H&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function kt(H,L){if(1&H){const K=n.RV6();n.j41(0,"clr-select-container",18),n.bIt("click",function(){n.eBV(K);const Le=n.XpG().$implicit,ct=n.XpG(2);return n.Njj(ct.reloadIfEmpty(Le.key))}),n.j41(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",14),n.DNE(4,Ce,2,2,"option",15),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,Ee,2,1,"clr-control-error")(8,ot,2,0,"clr-control-error"),n.k0s()}if(2&H){const K=n.XpG().$implicit;n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",K.key)("required",!0===K.value.required),n.R7$(),n.Y8G("ngForOf",K.value.options),n.R7$(2),n.JRh(K.value.description),n.R7$(),n.vxM(K.value.error?7:8)}}function Je(H,L){if(1&H&&(n.j41(0,"option",16),n.EFF(1),n.k0s()),2&H){const K=L.$implicit;n.Y8G("value",K),n.R7$(),n.JRh(K)}}function Ze(H,L){if(1&H&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(),n.JRh(K.value.error)}}function yt(H,L){1&H&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function lt(H,L){if(1&H&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",14),n.DNE(4,Je,2,2,"option",15),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,Ze,2,1,"clr-control-error")(8,yt,2,0,"clr-control-error"),n.k0s()),2&H){const K=n.XpG().$implicit,Ve=n.XpG(2);n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",K.key)("required",!0===K.value.required),n.R7$(),n.Y8G("ngForOf",Ve.roles),n.R7$(2),n.JRh(K.value.description),n.R7$(),n.vxM(K.value.error?7:8)}}function xt(H,L){if(1&H&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(),n.JRh(K.value.error)}}function It(H,L){1&H&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function f(H,L){if(1&H&&(n.j41(0,"clr-checkbox-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"clr-checkbox-wrapper"),n.nrm(4,"input",19),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,xt,2,1,"clr-control-error")(8,It,2,0,"clr-control-error"),n.k0s()()),2&H){const K=n.XpG().$implicit;n.R7$(2),n.JRh(K.value.title),n.R7$(2),n.xc7("width",400,"px"),n.Y8G("formControlName",K.key)("required",!0===K.value.required),n.R7$(2),n.JRh(K.value.description),n.R7$(),n.vxM(K.value.error?7:8)}}function oe(H,L){if(1&H&&(n.j41(0,"clr-date-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",20),n.k0s()),2&H){const K=n.XpG().$implicit;n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",366,"px"),n.Y8G("formControlName",K.key)}}function ne(H,L){if(1&H&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&H){const K=n.XpG(2).$implicit;n.R7$(),n.JRh(K.value.error)}}function U(H,L){1&H&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function x(H,L){if(1&H&&(n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",17),n.j41(4,"clr-control-helper"),n.EFF(5),n.k0s(),n.DNE(6,ne,2,1,"clr-control-error")(7,U,2,0,"clr-control-error"),n.k0s()),2&H){const K=n.XpG().$implicit;n.R7$(2),n.JRh(K.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",K.value.type)("formControlName",K.key)("required",!0===K.value.required),n.R7$(2),n.JRh(K.value.description),n.R7$(),n.vxM(K.value.error?6:7)}}function q(H,L){if(1&H&&(n.j41(0,"div"),n.DNE(1,m,8,9,"clr-input-container")(2,Me,4,2)(3,kt,9,8,"clr-select-container")(4,lt,9,8,"clr-select-container")(5,f,9,7,"clr-checkbox-container")(6,oe,4,4,"clr-date-container")(7,x,8,8,"clr-input-container"),n.k0s()),2&H){const K=L.$implicit;n.R7$(),n.vxM("mrn"===K.key?1:"stringArray"===K.value.type?2:K.value.options?3:"permissions"===K.key?4:"boolean"===K.value.type?5:"date"===K.value.type?6:7)}}function he(H,L){if(1&H){const K=n.RV6();n.j41(0,"button",24),n.bIt("click",function(){n.eBV(K);const Le=n.XpG(3);return n.Njj(Le.cancel())}),n.EFF(1,"Cancel"),n.k0s()}}function W(H,L){if(1&H){const K=n.RV6();n.j41(0,"div",10)(1,"button",21),n.bIt("click",function(){n.eBV(K);const Le=n.XpG(2);return n.Njj(Le.submit())}),n.EFF(2,"Submit"),n.k0s(),n.j41(3,"button",22),n.bIt("click",function(){n.eBV(K);const Le=n.XpG(2);return n.Njj(Le.resetForm())}),n.EFF(4,"Reset"),n.k0s(),n.DNE(5,he,2,0,"button",23),n.k0s()}if(2&H){const K=n.XpG(2);n.R7$(5),n.vxM(K.isForNew?-1:5)}}function G(H,L){if(1&H&&(n.j41(0,"div",5),n.EFF(1),n.k0s(),n.j41(2,"div",6)(3,"div",7)(4,"form",8),n.DNE(5,q,8,1,"div",9),n.nI1(6,"keyvalue"),n.k0s()()(),n.DNE(7,W,6,1,"div",10)),2&H){const K=n.XpG();n.R7$(),n.SpI(" ",K.title," "),n.R7$(3),n.Y8G("formGroup",K.itemForm),n.R7$(),n.Y8G("ngForOf",n.i5U(6,4,K.columnForMenu,K.sortColumnForMenu)),n.R7$(2),n.vxM(K.onSubmitIsGiven?7:-1)}}let X=(()=>{class H{constructor(K,Ve,Le,ct,es,Te,rs,rt){this.formBuilder=K,this.authService=Ve,this.notifierService=Le,this.translate=ct,this.orgOptionsService=es,this.planOptionsService=Te,this.orgsubOptionsService=rs,this.svcOptionsService=rt,this.itemType=_.SP.None,this.isForNew=!1,this.item={},this.mrnPrefix="urn:mrn:",this.title="",this.onCancel=new n.bkB,this.onSubmit=new n.bkB,this.onLoadOptions=new n.bkB,this.viewContext="edit",this.itemForm=new c.gE({}),this.columnForMenu={},this.isEditing=!1,this.roles=[],this.id="",this.onSubmitIsGiven=!0,this.organizations=[],this.plans=[],this.orgsubs=[],this.services=[],this.myInfo=null,this.isLoading=!1,this.isSelectOptionReady=!1,this.submit=()=>{if(this.isValid()){const $e=N(this.itemForm.value),Ct=((H,L)=>(Object.entries(L).map(([K,Ve])=>{((H,L)=>!!H[L]&&"date"===H[L].type)(H,K)?L[K]=new Date(Ve).toISOString().split("T")[0]:((H,L)=>!!H[L]&&"number"===H[L].type)(H,K)&&(L[K]=parseFloat(Ve))}),L))(this.columnForMenu,$e);if(this.isForNew)this.onSubmit.emit(Ct);else{const tt=((H,L)=>({...this.item,...L}))(0,Ct);this.onSubmit.emit(tt)}}},this.isValid=()=>this.itemForm.valid?this.itemForm.value.mrn!==this.mrnPrefix||(this.notifierService.notify("error",this.translate.instant("error.form.invalidmrn")),!1):(this.itemForm.markAllAsTouched(),this.clrForm?.markAsTouched(),this.notifierService.notify("error",this.translate.instant("error.form.invalid")),!1),this.getFormValue=()=>{if(this.isValid())return N(this.itemForm.value)},this.resetForm=()=>{this.setForm(),0===this.title.length&&(this.title=this.isForNew?"New "+this.capitalize(this.itemType):"Edit "+this.capitalize(this.itemType)),this.onSubmitIsGiven=0!==this.onSubmit.observers.length,this.isForNew?(this.item={mrn:this.mrnPrefix},this.itemForm.patchValue(this.item)):this.itemForm.patchValue(this.item)},this.cancel=()=>{this.onCancel.emit()},this.setForm=()=>{if(this.itemType===_.SP.None)return;let $e={};Object.entries(p.Y[this.itemType.toString()]).map(([Ct,tt])=>{if(tt.visibleFrom&&(!tt.visibleFrom||tt.visibleFrom.includes(this.viewContext))){if("mrn"===Ct){const zt=new RegExp("urn:mrn:mcp:(entity|mir|mms|msr|device|org|user|vessel|service|mms):([a-z0-9]([a-z0-9]|-){0,20}[a-z0-9]):((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$");$e[Ct]=["",[c.k0.required,c.k0.pattern(zt)]]}else $e[Ct]="email"===Ct?["",[c.k0.required,c.k0.email]]:"url"===Ct?["",[c.k0.required,c.k0.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]]:["",tt.required?c.k0.required:void 0];"organizationId"===tt.type&&(tt.options=this.organizations),"subscriptionPlanId"===tt.type&&(tt.options=this.plans),"organizationSubscriptionId"===tt.type&&(tt.options=this.orgsubs),"serviceId"===tt.type&&(tt.options=this.services),"role"===Ct&&this.myInfo&&(tt.options={[o.X.SuperAdmin]:[{title:"Super Admin",value:"SuperAdmin"},{title:"Org Admin",value:"OrgAdmin"},{title:"User Admin",value:"UserAdmin"},{title:"User",value:"User"}],[o.X.OrgAdmin]:[[{title:"Org Admin",value:"OrgAdmin"},{title:"User Admin",value:"UserAdmin"},{title:"User",value:"User"}]],[o.X.UserAdmin]:[[{title:"User Admin",value:"UserAdmin"},{title:"User",value:"User"}]],[o.X.User]:[[{title:"User",value:"User"}]]}[this.myInfo.role]),this.columnForMenu[Ct]=tt}}),this.itemForm=this.formBuilder.group($e)},this.needShortId=$e=>void 0!==this.getShortIdType($e),this.getShortIdType=$e=>this.columnForMenu[$e]?this.columnForMenu[$e].shortIdType:void 0,this.sortColumnForMenu=($e,Ct)=>$e.order>Ct.order?-1:1,this.capitalize=$e=>$e[0].toUpperCase()+$e.slice(1),this.reloadIfEmpty=$e=>{0===this.columnForMenu[$e].options.length&&(this.isLoading=!0,this.onLoadOptions.emit())},this.isLoading=!0}ngOnInit(){this.itemType!==_.SP.OrgCandidate&&this.authService.user$.subscribe(K=>{this.myInfo=K}),(0,b.z)([this.orgOptionsService.organizations$,this.planOptionsService.subscriptionPlans$,this.orgsubOptionsService.organizationSubscriptions$,this.svcOptionsService.services$]).subscribe(([K,Ve,Le,ct])=>{this.organizations=K,this.plans=Ve,this.orgsubs=Le,this.services=ct,this.resetForm(),this.isSelectOptionReady=!0,this.isLoading=!1})}ngOnChanges(K){this.isForNew&&(this.viewContext="edit-new"),this.itemType===_.SP.None||!this.item||Object.keys(this.item)}onMrnKeyDown(K){const Ve=K.target.value;Ve.includes(this.mrnPrefix)?this.item.mrn=Ve:K.target.value=this.mrnPrefix}onMrnChange(K){this.item.mrn=K.startsWith(this.mrnPrefix)?K:this.mrnPrefix}static#e=this.\u0275fac=function(Ve){return new(Ve||H)(n.rXU(c.ok),n.rXU(E.u),n.rXU(R.iJ),n.rXU(O.c$),n.rXU(Z.i),n.rXU(Q.j),n.rXU(fe.e),n.rXU(re.g))};static#t=this.\u0275cmp=n.VBU({type:H,selectors:[["app-item-form"]],viewQuery:function(Ve,Le){if(1&Ve&&n.GBs(w.mDd,7),2&Ve){let ct;n.mGM(ct=n.lsd())&&(Le.clrForm=ct.first)}},inputs:{itemType:"itemType",isForNew:"isForNew",item:"item",mrnPrefix:"mrnPrefix",title:"title"},outputs:{onCancel:"onCancel",onSubmit:"onSubmit",onLoadOptions:"onLoadOptions"},standalone:!0,features:[n.OA$,n.aNF],decls:5,vars:1,consts:[[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[1,"card"],[1,"clr-row","clr-justify-content-center"],[1,"spinner"],[1,"card-header"],[1,"card-block"],[1,"card-text"],["clrForm","",1,"ng-untouched",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"card-footer"],["clrInput","",3,"ngModelChange","keydown","type","formControlName","required","placeholder"],["disabled","",1,"btn","btn-sm","btn-outline"],[1,"label","label-light-blue"],["clrSelect","",3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["clrInput","",3,"type","formControlName","required"],[3,"click"],["clrCheckbox","","type","checkbox",3,"formControlName","required"],["clrDate","","type","date","autocomplete","off",3,"formControlName"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"]],template:function(Ve,Le){1&Ve&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.DNE(3,Oe,3,0,"div",3)(4,G,8,7),n.k0s()()()),2&Ve&&(n.R7$(3),n.vxM(Le.isLoading?3:4))},dependencies:[S.G,Ae.Sq,Ae.lG,w.t5G,w.aZZ,w.Hpg,w.bnk,w.mDd,w.Jej,w.EjB,w.eAx,w.lnv,w._Qf,w.WF1,w.icl,w.Xu5,w.Yf6,w.hTQ,c.YN,c.qT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.cb,c.YS,c.xq,w.Nsh,w.CxT,c.X1,c.j4,c.JD]})}return H})()},3103:(et,P,I)=>{"use strict";I.d(P,{Y:()=>sv});var n=I(5950),c=I(5166),w=I(1748),p=I(7882),N=I(2047),u=I(58),B=I(6908),_=I(6994),C=I(153);function o(s,r,e){var t;return s instanceof Object&&null!==(t=s[r])&&void 0!==t?t:e}function A(s,r=0,e=s.byteLength-r,t=!1){let i="";for(const a of new Uint8Array(s,r,e)){const l=a.toString(16).toUpperCase();1===l.length&&(i+="0"),i+=l,t&&(i+=" ")}return i.trim()}function v(s,r){let e=0;if(1===s.length)return s[0];for(let t=s.length-1;t>=0;t--)e+=s[s.length-1-t]*Math.pow(2,r*t);return e}function b(s,r,e=-1){const t=e;let i=s,a=0,l=Math.pow(2,r);for(let h=1;h<8;h++){if(s<l){let d;if(t<0)d=new ArrayBuffer(h),a=h;else{if(t<h)return new ArrayBuffer(0);d=new ArrayBuffer(t),a=t}const g=new Uint8Array(d);for(let T=h-1;T>=0;T--){const M=Math.pow(2,T*r);g[a-T-1]=Math.floor(i/M),i-=g[a-T-1]*M}return d}l*=Math.pow(2,r)}return new ArrayBuffer(0)}function E(...s){let r=0,e=0;for(const a of s)r+=a.byteLength;const t=new ArrayBuffer(r),i=new Uint8Array(t);for(const a of s)i.set(new Uint8Array(a),e),e+=a.byteLength;return t}function R(...s){let r=0,e=0;for(const a of s)r+=a.length;const t=new ArrayBuffer(r),i=new Uint8Array(t);for(const a of s)i.set(a,e),e+=a.length;return i}function O(){const s=new Uint8Array(this.valueHex);this.valueHex.byteLength>=2&&(255===s[0]&&128&s[1]||0===s[0]&&!(128&s[1]))&&this.warnings.push("Needlessly long format");const r=new ArrayBuffer(this.valueHex.byteLength),e=new Uint8Array(r);for(let h=0;h<this.valueHex.byteLength;h++)e[h]=0;e[0]=128&s[0];const t=v(e,8),i=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(i);for(let h=0;h<this.valueHex.byteLength;h++)a[h]=s[h];return a[0]&=127,v(a,8)-t}function Q(s,r){if(s.byteLength!==r.byteLength)return!1;const e=new Uint8Array(s),t=new Uint8Array(r);for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function fe(s,r){const e=s.toString(10);if(r<e.length)return"";const t=r-e.length,i=new Array(t);for(let l=0;l<t;l++)i[l]="0";return i.join("").concat(e)}const re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Oe(s,r=!1,e=!1,t=!1){let i=0,a=0,l=0,h="";const d=r?Ae:re;if(t){let g=0;for(let T=0;T<s.length;T++)if(0!==s.charCodeAt(T)){g=T;break}s=s.slice(g)}for(;i<s.length;){const g=s.charCodeAt(i++);i>=s.length&&(a=1);const T=s.charCodeAt(i++);i>=s.length&&(l=1);const M=s.charCodeAt(i++),z=g>>2,$=(3&g)<<4|T>>4;let le=(15&T)<<2|M>>6,ke=63&M;1===a?le=ke=64:1===l&&(ke=64),h+=e?64===le?`${d.charAt(z)}${d.charAt($)}`:64===ke?`${d.charAt(z)}${d.charAt($)}${d.charAt(le)}`:`${d.charAt(z)}${d.charAt($)}${d.charAt(le)}${d.charAt(ke)}`:`${d.charAt(z)}${d.charAt($)}${d.charAt(le)}${d.charAt(ke)}`}return h}function D(s,r=!1,e=!1){const t=r?Ae:re;function i(d){for(let g=0;g<64;g++)if(t.charAt(g)===d)return g;return 64}function a(d){return 64===d?0:d}let l=0,h="";for(;l<s.length;){const d=i(s.charAt(l++)),g=l>=s.length?0:i(s.charAt(l++)),T=l>=s.length?0:i(s.charAt(l++)),M=l>=s.length?0:i(s.charAt(l++)),z=a(d)<<2|a(g)>>4,$=(15&a(g))<<4|a(T)>>2,le=(3&a(T))<<6|a(M);h+=String.fromCharCode(z),64!==T&&(h+=String.fromCharCode($)),64!==M&&(h+=String.fromCharCode(le))}if(e){let g=-1;for(let T=h.length-1;T>=0;T--)if(0!==h.charCodeAt(T)){g=T;break}h=-1!==g?h.slice(0,g+1):""}return h}function J(s){let r="";const e=new Uint8Array(s);for(const t of e)r+=String.fromCharCode(t);return r}function m(s){const r=s.length,e=new ArrayBuffer(r),t=new Uint8Array(e);for(let i=0;i<r;i++)t[i]=s.charCodeAt(i);return e}const j=Math.log(2);function ue(s){const r=Math.log(s)/j,e=Math.floor(r),t=Math.round(r);return e===t?e:t}function V(s,r){for(const e of r)delete s[e]}function xe(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function be(s){let r=0,e=0;for(let i=0;i<s.length;i++)r+=s[i].byteLength;const t=new Uint8Array(r);for(let i=0;i<s.length;i++){const a=s[i];t.set(new Uint8Array(a),e),e+=a.byteLength}return t.buffer}function Pe(s,r,e,t){return r instanceof Uint8Array?r.byteLength?e<0?(s.error="Wrong parameter: inputOffset less than zero",!1):t<0?(s.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-e-t<0&&(s.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(s.error="Wrong parameter: inputBuffer has zero length",!1):(s.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class se{constructor(){this.items=[]}write(r){this.items.push(r)}final(){return be(this.items)}}const ee=[new Uint8Array([1])],Me="0123456789",Ce="name",Ee="valueHexView",f="",oe=new ArrayBuffer(0),ne=new Uint8Array(0),U="EndOfContent",x="OCTET STRING",q="BIT STRING";function he(s){var r;return(r=class extends s{constructor(...t){var i;super(...t);const a=t[0]||{};this.isHexOnly=null!==(i=a.isHexOnly)&&void 0!==i&&i,this.valueHexView=a.valueHex?C._H.toUint8Array(a.valueHex):ne}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,i,a){const l=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!Pe(this,l,i,a))return-1;const h=i+a;return this.valueHexView=l.subarray(i,h),this.valueHexView.length?(this.blockLength=a,h):(this.warnings.push("Zero buffer length"),i)}toBER(t=!1){return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",oe)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:C.U$.ToHex(this.valueHexView)}}}).NAME="hexBlock",r}let W=(()=>{class s{constructor({blockLength:e=0,error:t=f,warnings:i=[],valueBeforeDecode:a=ne}={}){this.blockLength=e,this.error=t,this.warnings=i,this.valueBeforeDecodeView=C._H.toUint8Array(a)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:C.U$.ToHex(this.valueBeforeDecodeView)}}}return s.NAME="baseBlock",s})(),G=(()=>{class s extends W{fromBER(e,t,i){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}return s.NAME="valueBlock",s})(),X=(()=>{class s extends(he(W)){constructor({idBlock:e={}}={}){var t,i,a,l;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?C._H.toUint8Array(e.valueHex):ne,this.tagClass=null!==(i=e.tagClass)&&void 0!==i?i:-1,this.tagNumber=null!==(a=e.tagNumber)&&void 0!==a?a:-1,this.isConstructed=null!==(l=e.isConstructed)&&void 0!==l&&l):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",oe}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const a=new Uint8Array(1);if(!e){let l=this.tagNumber;l&=31,t|=l,a[0]=t}return a.buffer}if(!this.isHexOnly){const a=b(this.tagNumber,7),l=new Uint8Array(a),h=a.byteLength,d=new Uint8Array(h+1);if(d[0]=31|t,!e){for(let g=0;g<h-1;g++)d[g+1]=128|l[g];d[h]=l[h-1]}return d.buffer}const i=new Uint8Array(this.valueHexView.byteLength+1);if(i[0]=31|t,!e){const a=this.valueHexView;for(let l=0;l<a.length-1;l++)i[l+1]=128|a[l];i[this.valueHexView.byteLength]=a[a.length-1]}return i.buffer}fromBER(e,t,i){const a=C._H.toUint8Array(e);if(!Pe(this,a,t,i))return-1;const l=a.subarray(t,t+i);if(0===l.length)return this.error="Zero buffer length",-1;switch(192&l[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=!(32&~l[0]),this.isHexOnly=!1;const d=31&l[0];if(31!==d)this.tagNumber=d,this.blockLength=1;else{let g=1,T=this.valueHexView=new Uint8Array(255),M=255;for(;128&l[g];){if(T[g-1]=127&l[g],g++,g>=l.length)return this.error="End of input reached before message was fully decoded",-1;if(g===M){M+=255;const $=new Uint8Array(M);for(let le=0;le<T.length;le++)$[le]=T[le];T=this.valueHexView=new Uint8Array(M)}}this.blockLength=g+1,T[g-1]=127&l[g];const z=new Uint8Array(g);for(let $=0;$<g;$++)z[$]=T[$];T=this.valueHexView=new Uint8Array(g),T.set(z),this.blockLength<=9?this.tagNumber=v(T,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}return s.NAME="identificationBlock",s})(),H=(()=>{class s extends W{constructor({lenBlock:e={}}={}){var t,i,a;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(i=e.longFormUsed)&&void 0!==i&&i,this.length=null!==(a=e.length)&&void 0!==a?a:0}fromBER(e,t,i){const a=C._H.toUint8Array(e);if(!Pe(this,a,t,i))return-1;const l=a.subarray(t,t+i);if(0===l.length)return this.error="Zero buffer length",-1;if(255===l[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===l[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&l[0]),!1===this.longFormUsed)return this.length=l[0],this.blockLength=1,t+this.blockLength;const h=127&l[0];if(h>8)return this.error="Too big integer",-1;if(h+1>l.length)return this.error="End of input reached before message was fully decoded",-1;const d=t+1,g=a.subarray(d,d+h);return 0===g[h-1]&&this.warnings.push("Needlessly long encoded length"),this.length=v(g,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=h+1,t+this.blockLength}toBER(e=!1){let t,i;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(i=new Uint8Array(t),i[0]=128),t;if(this.longFormUsed){const a=b(this.length,8);if(a.byteLength>127)return this.error="Too big length",oe;if(t=new ArrayBuffer(a.byteLength+1),e)return t;const l=new Uint8Array(a);i=new Uint8Array(t),i[0]=128|a.byteLength;for(let h=0;h<a.byteLength;h++)i[h+1]=l[h];return t}return t=new ArrayBuffer(1),!1===e&&(i=new Uint8Array(t),i[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}return s.NAME="lengthBlock",s})();const L={};let K=(()=>{class s extends W{constructor({name:e=f,optional:t=!1,primitiveSchema:i,...a}={},l){super(a),this.name=e,this.optional=t,i&&(this.primitiveSchema=i),this.idBlock=new X(a),this.lenBlock=new H(a),this.valueBlock=l?new l(a):new G(a)}fromBER(e,t,i){const a=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),a)}toBER(e,t){const i=t||new se;t||Ve(this);const a=this.idBlock.toBER(e);if(i.write(a),this.lenBlock.isIndefiniteForm)i.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,i),i.write(new ArrayBuffer(2));else{const l=this.valueBlock.toBER(e);this.lenBlock.length=l.byteLength;const h=this.lenBlock.toBER(e);i.write(h),i.write(l)}return t?oe:i.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():C.U$.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${C.U$.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){return this===e||e instanceof this.constructor&&Q(this.toBER(),e.toBER())}}return s.NAME="BaseBlock",s})();function Ve(s){if(s instanceof L.Constructed)for(const r of s.valueBlock.value)Ve(r)&&(s.lenBlock.isIndefiniteForm=!0);return!!s.lenBlock.isIndefiniteForm}let Le=(()=>{class s extends K{constructor({value:e=f,...t}={},i){super(t,i),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,i){const a=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),a)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}return s.NAME="BaseStringBlock",s})(),ct=(()=>{class s extends(he(G)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}return s.NAME="PrimitiveValueBlock",s})();class Te extends K{constructor(r={}){super(r,ct),this.idBlock.isConstructed=!1}}function rt(s,r=0,e=s.length){const t=r;let i=new K({},G);const a=new W;if(!Pe(a,s,r,e))return i.error=a.error,{offset:-1,result:i};if(!s.subarray(r,r+e).length)return i.error="Zero buffer length",{offset:-1,result:i};let h=i.idBlock.fromBER(s,r,e);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===h)return i.error=i.idBlock.error,{offset:-1,result:i};if(h=i.lenBlock.fromBER(s,r=h,e-=i.idBlock.blockLength),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===h)return i.error=i.lenBlock.error,{offset:-1,result:i};if(r=h,e-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let d=K;if(1===i.idBlock.tagClass){if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};d=L.EndOfContent;break;case 1:d=L.Boolean;break;case 2:d=L.Integer;break;case 3:d=L.BitString;break;case 4:d=L.OctetString;break;case 5:d=L.Null;break;case 6:d=L.ObjectIdentifier;break;case 10:d=L.Enumerated;break;case 12:d=L.Utf8String;break;case 13:d=L.RelativeObjectIdentifier;break;case 14:d=L.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:d=L.Sequence;break;case 17:d=L.Set;break;case 18:d=L.NumericString;break;case 19:d=L.PrintableString;break;case 20:d=L.TeletexString;break;case 21:d=L.VideotexString;break;case 22:d=L.IA5String;break;case 23:d=L.UTCTime;break;case 24:d=L.GeneralizedTime;break;case 25:d=L.GraphicString;break;case 26:d=L.VisibleString;break;case 27:d=L.GeneralString;break;case 28:d=L.UniversalString;break;case 29:d=L.CharacterString;break;case 30:d=L.BmpString;break;case 31:d=L.DATE;break;case 32:d=L.TimeOfDay;break;case 33:d=L.DateTime;break;case 34:d=L.Duration;break;default:{const g=i.idBlock.isConstructed?new L.Constructed:new L.Primitive;g.idBlock=i.idBlock,g.lenBlock=i.lenBlock,g.warnings=i.warnings,i=g}}}else d=i.idBlock.isConstructed?L.Constructed:L.Primitive;return i=function rs(s,r){if(s instanceof r)return s;const e=new r;return e.idBlock=s.idBlock,e.lenBlock=s.lenBlock,e.warnings=s.warnings,e.valueBeforeDecodeView=s.valueBeforeDecodeView,e}(i,d),h=i.fromBER(s,r,i.lenBlock.isIndefiniteForm?e:i.lenBlock.length),i.valueBeforeDecodeView=s.subarray(t,t+i.blockLength),{offset:h,result:i}}function $e(s){if(!s.byteLength){const r=new K({},G);return r.error="Input buffer has zero length",{offset:-1,result:r}}return rt(C._H.toUint8Array(s).slice(),0,s.byteLength)}function Ct(s,r){return s?1:r}L.Primitive=Te,Te.NAME="PRIMITIVE";let tt=(()=>{class s extends G{constructor({value:e=[],isIndefiniteForm:t=!1,...i}={}){super(i),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,i){const a=C._H.toUint8Array(e);if(!Pe(this,a,t,i))return-1;if(this.valueBeforeDecodeView=a.subarray(t,t+i),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let l=t;for(;Ct(this.isIndefiniteForm,i)>0;){const h=rt(a,l,i);if(-1===h.offset)return this.error=h.result.error,this.warnings.concat(h.result.warnings),-1;if(l=h.offset,this.blockLength+=h.result.blockLength,i-=h.result.blockLength,this.value.push(h.result),this.isIndefiniteForm&&h.result.constructor.NAME===U)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===U?this.value.pop():this.warnings.push("No EndOfContent block encoded")),l}toBER(e,t){const i=t||new se;for(let a=0;a<this.value.length;a++)this.value[a].toBER(e,i);return t?oe:i.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}return s.NAME="ConstructedValueBlock",s})();class Y extends K{constructor(r={}){super(r,tt),this.idBlock.isConstructed=!0}fromBER(r,e,t){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(r,e,this.lenBlock.isIndefiniteForm?t:this.lenBlock.length);return-1===i?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const r=[];for(const t of this.valueBlock.value)r.push(t.toString("ascii").split("\n").map(i=>`  ${i}`).join("\n"));const e=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return r.length?`${e} :\n${r.join("\n")}`:`${e} :`}}L.Constructed=Y,Y.NAME="CONSTRUCTED";let Xc=(()=>{class s extends G{fromBER(e,t,i){return t}toBER(e){return oe}}return s.override="EndOfContentValueBlock",s})();class aa extends K{constructor(r={}){super(r,Xc),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}L.EndOfContent=aa,aa.NAME=U;class ut extends K{constructor(r={}){super(r,G),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(r,e,t){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=t,e+t>r.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):e+t}toBER(r,e){const t=new ArrayBuffer(2);if(!r){const i=new Uint8Array(t);i[0]=5,i[1]=0}return e&&e.write(t),t}onAsciiEncoding(){return`${this.constructor.NAME}`}}L.Null=ut,ut.NAME="NULL";let Xf=(()=>{class s extends(he(G)){constructor({value:e,...t}={}){super(t),this.valueHexView=t.valueHex?C._H.toUint8Array(t.valueHex):new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,i){const a=C._H.toUint8Array(e);return Pe(this,a,t,i)?(this.valueHexView=a.subarray(t,t+i),i>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,O.call(this),this.blockLength=i,t+i):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}return s.NAME="BooleanValueBlock",s})();class _s extends K{constructor(r={}){super(r,Xf),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(r){this.valueBlock.value=r}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}L.Boolean=_s,_s.NAME="BOOLEAN";let Yf=(()=>{class s extends(he(tt)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,i){let a=0;if(this.isConstructed){if(this.isHexOnly=!1,a=tt.prototype.fromBER.call(this,e,t,i),-1===a)return a;for(let l=0;l<this.value.length;l++){const h=this.value[l].constructor.NAME;if(h===U){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(h!==x)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=super.fromBER(e,t,i),this.blockLength=i;return a}toBER(e,t){return this.isConstructed?tt.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}return s.NAME="OctetStringValueBlock",s})();class ve extends K{constructor({idBlock:r={},lenBlock:e={},...t}={}){var i,a;null!==(i=t.isConstructed)&&void 0!==i||(t.isConstructed=!(null===(a=t.value)||void 0===a||!a.length)),super({idBlock:{isConstructed:t.isConstructed,...r},lenBlock:{...e,isIndefiniteForm:!!t.isIndefiniteForm},...t},Yf),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(r,e,t){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===t)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),e;if(!this.valueBlock.isConstructed){const a=(r instanceof ArrayBuffer?new Uint8Array(r):r).subarray(e,e+t);try{if(a.byteLength){const l=rt(a,0,a.byteLength);-1!==l.offset&&l.offset===t&&(this.valueBlock.value=[l.result])}}catch{}}return super.fromBER(r,e,t)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Y.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${C.U$.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const r=[];for(const e of this.valueBlock.value)e instanceof ve&&r.push(e.valueBlock.valueHexView);return C._H.concat(r)}}L.OctetString=ve,ve.NAME=x;let Zf=(()=>{class s extends(he(tt)){constructor({unusedBits:e=0,isConstructed:t=!1,...i}={}){super(i),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,i){if(!i)return t;let a=-1;if(this.isConstructed){if(a=tt.prototype.fromBER.call(this,e,t,i),-1===a)return a;for(const d of this.value){const g=d.constructor.NAME;if(g===U){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(g!==q)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const T=d.valueBlock;if(this.unusedBits>0&&T.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=T.unusedBits}return a}const l=C._H.toUint8Array(e);if(!Pe(this,l,t,i))return-1;const h=l.subarray(t,t+i);if(this.unusedBits=h[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const d=h.subarray(1);try{if(d.byteLength){const g=rt(d,0,d.byteLength);-1!==g.offset&&g.offset===i-1&&(this.value=[g.result])}}catch{}}return this.valueHexView=h.subarray(1),this.blockLength=h.length,t+i}toBER(e,t){if(this.isConstructed)return tt.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return oe;const i=new Uint8Array(this.valueHexView.length+1);return i[0]=this.unusedBits,i.set(this.valueHexView,1),i.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}return s.NAME="BitStringValueBlock",s})();var zh;class Qe extends K{constructor({idBlock:r={},lenBlock:e={},...t}={}){var i,a;null!==(i=t.isConstructed)&&void 0!==i||(t.isConstructed=!(null===(a=t.value)||void 0===a||!a.length)),super({idBlock:{isConstructed:t.isConstructed,...r},lenBlock:{...e,isIndefiniteForm:!!t.isIndefiniteForm},...t},Zf),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(r,e,t){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(r,e,t)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Y.prototype.onAsciiEncoding.call(this);{const r=[],e=this.valueBlock.valueHexView;for(const i of e)r.push(i.toString(2).padStart(8,"0"));const t=r.join("");return`${this.constructor.NAME} : ${t.substring(0,t.length-this.valueBlock.unusedBits)}`}}}function Qf(s,r){const e=new Uint8Array([0]),t=new Uint8Array(s),i=new Uint8Array(r);let a=t.slice(0);const l=a.length-1,h=i.slice(0),d=h.length-1;let g=0,M=0;for(let z=d<l?l:d;z>=0;z--,M++)g=1==M<h.length?a[l-M]+h[d-M]+e[0]:a[l-M]+e[0],e[0]=g/10,1==M>=a.length?a=R(new Uint8Array([g%10]),a):a[l-M]=g%10;return e[0]>0&&(a=R(e,a)),a}function qh(s){if(s>=ee.length)for(let r=ee.length;r<=s;r++){const e=new Uint8Array([0]);let t=ee[r-1].slice(0);for(let i=t.length-1;i>=0;i--){const a=new Uint8Array([(t[i]<<1)+e[0]]);e[0]=a[0]/10,t[i]=a[0]%10}e[0]>0&&(t=R(e,t)),ee.push(t)}return ee[s]}function em(s,r){let e=0;const t=new Uint8Array(s),i=new Uint8Array(r),a=t.slice(0),l=a.length-1,h=i.slice(0),d=h.length-1;let g,T=0;for(let M=d;M>=0;M--,T++)g=a[l-T]-h[d-T]-e,1==g<0?(e=1,a[l-T]=g+10):(e=0,a[l-T]=g);if(e>0)for(let M=l-d+1;M>=0;M--,T++){if(g=a[l-T]-e,!(g<0)){e=0,a[l-T]=g;break}e=1,a[l-T]=g+10}return a.slice()}L.BitString=Qe,Qe.NAME=q;class Yc extends(he(G)){constructor({value:r,...e}={}){super(e),this._valueDec=0,e.valueHex&&this.setValueHex(),void 0!==r&&(this.valueDec=r)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=O.call(this)))}set valueDec(r){this._valueDec=r,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function Z(s){const r=s<0?-1*s:s;let e=128;for(let t=1;t<8;t++){if(r<=e){if(s<0){const h=b(e-r,8,t);return new Uint8Array(h)[0]|=128,h}let i=b(r,8,t),a=new Uint8Array(i);if(128&a[0]){const l=i.slice(0),h=new Uint8Array(l);i=new ArrayBuffer(i.byteLength+1),a=new Uint8Array(i);for(let d=0;d<l.byteLength;d++)a[d+1]=h[d];a[0]=0}return i}e*=Math.pow(2,8)}return new ArrayBuffer(0)}(r))}get valueDec(){return this._valueDec}fromDER(r,e,t,i=0){const a=this.fromBER(r,e,t);if(-1===a)return a;const l=this.valueHexView;return 0===l[0]&&128&l[1]?this.valueHexView=l.subarray(1):0!==i&&l.length<i&&(i-l.length>1&&(i=l.length+1),this.valueHexView=l.subarray(i-l.length)),a}toDER(r=!1){const e=this.valueHexView;switch(!0){case!!(128&e[0]):{const t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(e,1),this.valueHexView=t}break;case 0===e[0]&&!(128&e[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(r)}fromBER(r,e,t){const i=super.fromBER(r,e,t);return-1===i||this.setValueHex(),i}toBER(r){return r?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const r=8*this.valueHexView.length-1;let i,e=new Uint8Array(8*this.valueHexView.length/3),t=0;const a=this.valueHexView;let l="",h=!1;for(let d=a.byteLength-1;d>=0;d--){i=a[d];for(let g=0;g<8;g++)1&~i||(t===r?(e=em(qh(t),e),l="-"):e=Qf(e,qh(t))),t++,i>>=1}for(let d=0;d<e.length;d++)e[d]&&(h=!0),h&&(l+=Me.charAt(e[d]));return!1===h&&(l+=Me.charAt(0)),l}}zh=Yc,Yc.NAME="IntegerValueBlock",Object.defineProperty(zh.prototype,"valueHex",{set:function(s){this.valueHexView=new Uint8Array(s),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class te extends K{constructor(r={}){super(r,Yc),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return xe(),BigInt(this.valueBlock.toString())}static fromBigInt(r){xe();const e=BigInt(r),t=new se,i=e.toString(16).replace(/^-/,""),a=new Uint8Array(C.U$.FromHex(i));if(e<0){const h=new Uint8Array(a.length+(128&a[0]?1:0));h[0]|=128;const g=BigInt(`0x${C.U$.ToHex(h)}`)+e,T=C._H.toUint8Array(C.U$.FromHex(g.toString(16)));T[0]|=128,t.write(T)}else 128&a[0]&&t.write(new Uint8Array([0])),t.write(a);return new te({valueHex:t.final()})}convertToDER(){const r=new te({valueHex:this.valueBlock.valueHexView});return r.valueBlock.toDER(),r}convertFromDER(){return new te({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}L.Integer=te,te.NAME="INTEGER";class oa extends te{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}L.Enumerated=oa,oa.NAME="ENUMERATED";let Yh=(()=>{class s extends(he(G)){constructor({valueDec:e=-1,isFirstSid:t=!1,...i}={}){super(i),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,i){if(!i)return t;const a=C._H.toUint8Array(e);if(!Pe(this,a,t,i))return-1;const l=a.subarray(t,t+i);this.valueHexView=new Uint8Array(i);for(let d=0;d<i&&(this.valueHexView[d]=127&l[d],this.blockLength++,128&l[d]);d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,128&l[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=v(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){xe();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const i=new Uint8Array(t.length/7);for(let a=0;a<i.length;a++)i[a]=parseInt(t.slice(7*a,7*a+7),2)+(a+1<i.length?128:0);this.fromBER(i.buffer,0,i.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const a=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=128|a[h];return l[this.blockLength-1]=a[this.blockLength-1],l.buffer}const t=b(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",oe;const i=new Uint8Array(t.byteLength);if(!e){const a=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)i[h]=128|a[h];i[l]=a[l]}return i}toString(){let e="";if(this.isHexOnly)e=C.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}return s.NAME="sidBlock",s})(),tm=(()=>{class s extends G{constructor({value:e=f,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,i){let a=t;for(;i>0;){const l=new Yh;if(a=l.fromBER(e,a,i),-1===a)return this.blockLength=0,this.error=l.error,a;0===this.value.length&&(l.isFirstSid=!0),this.blockLength+=l.blockLength,i-=l.blockLength,this.value.push(l)}return a}toBER(e){const t=[];for(let i=0;i<this.value.length;i++){const a=this.value[i].toBER(e);if(0===a.byteLength)return this.error=this.value[i].error,oe;t.push(a)}return be(t)}fromString(e){this.value=[];let t=0,i=0,a="",l=!1;do{if(i=e.indexOf(".",t),a=-1===i?e.substring(t):e.substring(t,i),t=i+1,l){const h=this.value[0];let d=0;switch(h.valueDec){case 0:break;case 1:d=40;break;case 2:d=80;break;default:return void(this.value=[])}const g=parseInt(a,10);if(isNaN(g))return;h.valueDec=g+d,l=!1}else{const h=new Yh;if(a>Number.MAX_SAFE_INTEGER){xe();const d=BigInt(a);h.valueBigInt=d}else if(h.valueDec=parseInt(a,10),isNaN(h.valueDec))return;this.value.length||(h.isFirstSid=!0,l=!0),this.value.push(h)}}while(-1!==i)}toString(){let e="",t=!1;for(let i=0;i<this.value.length;i++){t=this.value[i].isHexOnly;let a=this.value[i].toString();0!==i&&(e=`${e}.`),t?(a=`{${a}}`,this.value[i].isFirstSid?e=`2.{${a} - 80}`:e+=a):e+=a}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}return s.NAME="ObjectIdentifierValueBlock",s})();class Be extends K{constructor(r={}){super(r,tm),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}L.ObjectIdentifier=Be,Be.NAME="OBJECT IDENTIFIER";let Qh=(()=>{class s extends(he(W)){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,i){if(0===i)return t;const a=C._H.toUint8Array(e);if(!Pe(this,a,t,i))return-1;const l=a.subarray(t,t+i);this.valueHexView=new Uint8Array(i);for(let d=0;d<i&&(this.valueHexView[d]=127&l[d],this.blockLength++,128&l[d]);d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,128&l[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=v(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const a=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=128|a[h];return l[this.blockLength-1]=a[this.blockLength-1],l.buffer}const t=b(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",oe;const i=new Uint8Array(t.byteLength);if(!e){const a=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)i[h]=128|a[h];i[l]=a[l]}return i.buffer}toString(){let e="";return e=this.isHexOnly?C.U$.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}return s.NAME="relativeSidBlock",s})(),sm=(()=>{class s extends G{constructor({value:e=f,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,i){let a=t;for(;i>0;){const l=new Qh;if(a=l.fromBER(e,a,i),-1===a)return this.blockLength=0,this.error=l.error,a;this.blockLength+=l.blockLength,i-=l.blockLength,this.value.push(l)}return a}toBER(e,t){const i=[];for(let a=0;a<this.value.length;a++){const l=this.value[a].toBER(e);if(0===l.byteLength)return this.error=this.value[a].error,oe;i.push(l)}return be(i)}fromString(e){this.value=[];let t=0,i=0,a="";do{i=e.indexOf(".",t),a=-1===i?e.substring(t):e.substring(t,i),t=i+1;const l=new Qh;if(l.valueDec=parseInt(a,10),isNaN(l.valueDec))return!0;this.value.push(l)}while(-1!==i);return!0}toString(){let e="",t=!1;for(let i=0;i<this.value.length;i++){t=this.value[i].isHexOnly;let a=this.value[i].toString();0!==i&&(e=`${e}.`),t&&(a=`{${a}}`),e+=a}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}return s.NAME="RelativeObjectIdentifierValueBlock",s})();class td extends K{constructor(r={}){super(r,sm),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}L.RelativeObjectIdentifier=td,td.NAME="RelativeObjectIdentifier";class F extends Y{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}L.Sequence=F,F.NAME="SEQUENCE";class Et extends Y{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}L.Set=Et,Et.NAME="SET";let im=(()=>{class s extends(he(G)){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=f}toJSON(){return{...super.toJSON(),value:this.value}}}return s.NAME="StringValueBlock",s})(),nm=(()=>{class s extends im{}return s.NAME="SimpleStringValueBlock",s})(),Ht=(()=>{class s extends Le{constructor({...e}={}){super(e,nm)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,C._H.toUint8Array(e))}fromString(e){const t=e.length,i=this.valueBlock.valueHexView=new Uint8Array(t);for(let a=0;a<t;a++)i[a]=e.charCodeAt(a);this.valueBlock.value=e}}return s.NAME="SIMPLE STRING",s})(),rm=(()=>{class s extends Ht{fromBuffer(e){this.valueBlock.valueHexView=C._H.toUint8Array(e);try{this.valueBlock.value=C.U$.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=C.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(C.U$.FromUtf8String(e)),this.valueBlock.value=e}}return s.NAME="Utf8StringValueBlock",s})();class ts extends rm{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}L.Utf8String=ts,ts.NAME="UTF8String";let am=(()=>{class s extends Ht{fromBuffer(e){this.valueBlock.value=C.U$.ToUtf16String(e),this.valueBlock.valueHexView=C._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(C.U$.FromUtf16String(e))}}return s.NAME="BmpStringValueBlock",s})();class qt extends am{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}L.BmpString=qt,qt.NAME="BMPString";let om=(()=>{class s extends Ht{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),i=new Uint8Array(t);for(let a=0;a<i.length;a+=4)i[a]=i[a+3],i[a+1]=i[a+2],i[a+2]=0,i[a+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,i=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let a=0;a<t;a++){const l=b(e.charCodeAt(a),8),h=new Uint8Array(l);if(h.length>4)continue;const d=4-h.length;for(let g=h.length-1;g>=0;g--)i[4*a+g+d]=h[g]}this.valueBlock.value=e}}return s.NAME="UniversalStringValueBlock",s})();class la extends om{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}L.UniversalString=la,la.NAME="UniversalString";class On extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}L.NumericString=On,On.NAME="NumericString";class $t extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}L.PrintableString=$t,$t.NAME="PrintableString";class ca extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}L.TeletexString=ca,ca.NAME="TeletexString";class Zc extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}L.VideotexString=Zc,Zc.NAME="VideotexString";class Tl extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}L.IA5String=Tl,Tl.NAME="IA5String";class Qc extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}L.GraphicString=Qc,Qc.NAME="GraphicString";class Bl extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}L.VisibleString=Bl,Bl.NAME="VisibleString";class eu extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}L.GeneralString=eu,eu.NAME="GeneralString";class tu extends Ht{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}L.CharacterString=tu,tu.NAME="CharacterString";class Pn extends Bl{constructor({value:r,valueDate:e,...t}={}){if(super(t),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,r){this.fromString(r),this.valueBlock.valueHexView=new Uint8Array(r.length);for(let i=0;i<r.length;i++)this.valueBlock.valueHexView[i]=r.charCodeAt(i)}e&&(this.fromDate(e),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(r){this.fromString(String.fromCharCode.apply(null,C._H.toUint8Array(r)))}toBuffer(){const r=this.toString(),e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return e}fromDate(r){this.year=r.getUTCFullYear(),this.month=r.getUTCMonth()+1,this.day=r.getUTCDate(),this.hour=r.getUTCHours(),this.minute=r.getUTCMinutes(),this.second=r.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(r){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(r);if(null===t)return void(this.error="Wrong input string for conversion");const i=parseInt(t[1],10);this.year=i>=50?1900+i:2e3+i,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(r="iso"){if("iso"===r){const e=new Array(7);return e[0]=fe(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=fe(this.month,2),e[2]=fe(this.day,2),e[3]=fe(this.hour,2),e[4]=fe(this.minute,2),e[5]=fe(this.second,2),e[6]="Z",e.join("")}return super.toString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}L.UTCTime=Pn,Pn.NAME="UTCTime";class mt extends Pn{constructor(r={}){var e;super(r),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(r){super.fromDate(r),this.millisecond=r.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(r){let l,e=!1,t="",i="",a=0,h=0,d=0;if("Z"===r[r.length-1])t=r.substring(0,r.length-1),e=!0;else{const M=new Number(r[r.length-1]);if(isNaN(M.valueOf()))throw new Error("Wrong input string for conversion");t=r}if(e){if(-1!==t.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==t.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let M=1,z=t.indexOf("+"),$="";if(-1===z&&(z=t.indexOf("-"),M=-1),-1!==z){if($=t.substring(z+1),t=t.substring(0,z),2!==$.length&&4!==$.length)throw new Error("Wrong input string for conversion");let le=parseInt($.substring(0,2),10);if(isNaN(le.valueOf()))throw new Error("Wrong input string for conversion");if(h=M*le,4===$.length){if(le=parseInt($.substring(2,4),10),isNaN(le.valueOf()))throw new Error("Wrong input string for conversion");d=M*le}}}let g=t.indexOf(".");if(-1===g&&(g=t.indexOf(",")),-1!==g){const M=new Number(`0${t.substring(g)}`);if(isNaN(M.valueOf()))throw new Error("Wrong input string for conversion");a=M.valueOf(),i=t.substring(0,g)}else i=t;switch(!0){case 8===i.length:if(l=/(\d{4})(\d{2})(\d{2})/gi,-1!==g)throw new Error("Wrong input string for conversion");break;case 10===i.length:if(l=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==g){let M=60*a;this.minute=Math.floor(M),M=60*(M-this.minute),this.second=Math.floor(M),M=1e3*(M-this.second),this.millisecond=Math.floor(M)}break;case 12===i.length:if(l=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==g){let M=60*a;this.second=Math.floor(M),M=1e3*(M-this.second),this.millisecond=Math.floor(M)}break;case 14===i.length:l=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==g&&(this.millisecond=Math.floor(1e3*a));break;default:throw new Error("Wrong input string for conversion")}const T=l.exec(i);if(null===T)throw new Error("Wrong input string for conversion");for(let M=1;M<T.length;M++)switch(M){case 1:this.year=parseInt(T[M],10);break;case 2:this.month=parseInt(T[M],10);break;case 3:this.day=parseInt(T[M],10);break;case 4:this.hour=parseInt(T[M],10)+h;break;case 5:this.minute=parseInt(T[M],10)+d;break;case 6:this.second=parseInt(T[M],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===e){const M=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=M.getUTCFullYear(),this.month=M.getUTCMonth(),this.day=M.getUTCDay(),this.hour=M.getUTCHours(),this.minute=M.getUTCMinutes(),this.second=M.getUTCSeconds(),this.millisecond=M.getUTCMilliseconds()}}toString(r="iso"){if("iso"===r){const e=[];return e.push(fe(this.year,4)),e.push(fe(this.month,2)),e.push(fe(this.day,2)),e.push(fe(this.hour,2)),e.push(fe(this.minute,2)),e.push(fe(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(fe(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(r)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}L.GeneralizedTime=mt,mt.NAME="GeneralizedTime";class yd extends ts{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}L.DATE=yd,yd.NAME="DATE";class bd extends ts{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}L.TimeOfDay=bd,bd.NAME="TimeOfDay";class _d extends ts{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}L.DateTime=_d,_d.NAME="DateTime";class Ed extends ts{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}L.Duration=Ed,Ed.NAME="Duration";class Nd extends ts{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}L.TIME=Nd,Nd.NAME="TIME";class Fe{constructor({name:r=f,optional:e=!1}={}){this.name=r,this.optional=e}}class pt extends Fe{constructor({value:r=[],...e}={}){super(e),this.value=r}}class Ke extends Fe{constructor({value:r=new Fe,local:e=!1,...t}={}){super(t),this.value=r,this.local=e}}class Rl{constructor({data:r=ne}={}){this.dataView=C._H.toUint8Array(r)}get data(){return this.dataView.slice().buffer}set data(r){this.dataView=C._H.toUint8Array(r)}fromBER(r,e,t){const i=e+t;return this.dataView=C._H.toUint8Array(r).subarray(e,i),i}toBER(r){return this.dataView.slice().buffer}}function pe(s,r,e){if(e instanceof pt){for(let a=0;a<e.value.length;a++)if(pe(s,r,e.value[a]).verified)return{verified:!0,result:s};{const a={verified:!1,result:{error:"Wrong values for Choice type"}};return e.hasOwnProperty(Ce)&&(a.name=e.name),a}}if(e instanceof Fe)return e.hasOwnProperty(Ce)&&(s[e.name]=r),{verified:!0,result:s};if(!(s instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("idBlock"in e))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("fromBER"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("toBER"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const t=e.idBlock.toBER(!1);if(0===t.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===e.idBlock.fromBER(t,0,t.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===e.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.tagClass!==r.idBlock.tagClass)return{verified:!1,result:s};if(!1===e.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.tagNumber!==r.idBlock.tagNumber)return{verified:!1,result:s};if(!1===e.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.isConstructed!==r.idBlock.isConstructed)return{verified:!1,result:s};if(!("isHexOnly"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.isHexOnly!==r.idBlock.isHexOnly)return{verified:!1,result:s};if(e.idBlock.isHexOnly){if(!(Ee in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const a=e.idBlock.valueHexView,l=r.idBlock.valueHexView;if(a.length!==l.length)return{verified:!1,result:s};for(let h=0;h<a.length;h++)if(a[h]!==l[1])return{verified:!1,result:s}}if(e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(s[e.name]=r)),e instanceof L.Constructed){let a=0,l={verified:!1,result:{error:"Unknown error"}},h=e.valueBlock.value.length;if(h>0&&e.valueBlock.value[0]instanceof Ke&&(h=r.valueBlock.value.length),0===h)return{verified:!0,result:s};if(0===r.valueBlock.value.length&&0!==e.valueBlock.value.length){let d=!0;for(let g=0;g<e.valueBlock.value.length;g++)d=d&&(e.valueBlock.value[g].optional||!1);return d?{verified:!0,result:s}:(e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),s.error="Inconsistent object length",{verified:!1,result:s})}for(let d=0;d<h;d++)if(d-a>=r.valueBlock.value.length){if(!1===e.valueBlock.value[d].optional){const g={verified:!1,result:s};return s.error="Inconsistent length between ASN.1 data and schema",e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],g.name=e.name)),g}}else if(e.valueBlock.value[0]instanceof Ke){if(l=pe(s,r.valueBlock.value[d],e.valueBlock.value[0].value),!1===l.verified){if(!e.valueBlock.value[0].optional)return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),l;a++}if(Ce in e.valueBlock.value[0]&&e.valueBlock.value[0].name.length>0){let g={};g="local"in e.valueBlock.value[0]&&e.valueBlock.value[0].local?r:s,typeof g[e.valueBlock.value[0].name]>"u"&&(g[e.valueBlock.value[0].name]=[]),g[e.valueBlock.value[0].name].push(r.valueBlock.value[d])}}else if(l=pe(s,r.valueBlock.value[d-a],e.valueBlock.value[d]),!1===l.verified){if(!e.valueBlock.value[d].optional)return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),l;a++}if(!1===l.verified){const d={verified:!1,result:s};return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],d.name=e.name)),d}return{verified:!0,result:s}}if(e.primitiveSchema&&Ee in r.valueBlock){const a=rt(r.valueBlock.valueHexView);if(-1===a.offset){const l={verified:!1,result:a.result};return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],l.name=e.name)),l}return pe(s,a.result,e.primitiveSchema)}return{verified:!0,result:s}}class St{constructor(r={}){if("view"in r)this.fromUint8Array(r.view);else if("buffer"in r)this.fromArrayBuffer(r.buffer);else if("string"in r)this.fromString(r.string);else if("hexstring"in r)this.fromHexString(r.hexstring);else if("length"in r&&r.length>0){if(this.length=r.length,r.stub)for(let e=0;e<this._view.length;e++)this._view[e]=r.stub}else this.length=0}set buffer(r){this._buffer=r,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(r){this._buffer=new ArrayBuffer(r.length),this._view=new Uint8Array(this._buffer),this._view.set(r)}get view(){return this._view}get length(){return this.view.byteLength}set length(r){this._buffer=new ArrayBuffer(r),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(r){this._buffer=r,this._view=new Uint8Array(this._buffer)}fromUint8Array(r){this.fromArrayBuffer(new Uint8Array(r).buffer)}fromString(r){const e=r.length;this.length=e;for(let t=0;t<e;t++)this.view[t]=r.charCodeAt(t)}toString(r=0,e=this.view.length-r){let t="";(r>=this.view.length||r<0)&&(r=0),(e>=this.view.length||e<0)&&(e=this.view.length-r);for(let i=r;i<r+e;i++)t+=String.fromCharCode(this.view[i]);return t}fromHexString(r){const e=r.length;this.buffer=new ArrayBuffer(e>>1),this.view=new Uint8Array(this.buffer);const t=new Map;t.set("0",0),t.set("1",1),t.set("2",2),t.set("3",3),t.set("4",4),t.set("5",5),t.set("6",6),t.set("7",7),t.set("8",8),t.set("9",9),t.set("A",10),t.set("a",10),t.set("B",11),t.set("b",11),t.set("C",12),t.set("c",12),t.set("D",13),t.set("d",13),t.set("E",14),t.set("e",14),t.set("F",15),t.set("f",15);let i=0,a=0;for(let l=0;l<e;l++)l%2?(a|=t.get(r.charAt(l)),this.view[i]=a,i++):a=t.get(r.charAt(l))<<4}toHexString(r=0,e=this.view.length-r){let t="";(r>=this.view.length||r<0)&&(r=0),(e>=this.view.length||e<0)&&(e=this.view.length-r);for(let i=r;i<r+e;i++){const a=this.view[i].toString(16).toUpperCase();t=t+(1==a.length?"0":"")+a}return t}copy(r=0,e=this.length-r){if(!r&&!this.length)return new St;if(r<0||r>this.length-1)throw new Error(`Wrong start position: ${r}`);return new St({buffer:this._buffer.slice(r,r+e)})}slice(r=0,e=this.length){if(!r&&!this.length)return new St;if(r<0||r>this.length-1)throw new Error(`Wrong start position: ${r}`);return new St({buffer:this._buffer.slice(r,e)})}realloc(r){const e=new ArrayBuffer(r);new Uint8Array(e).set(r>this._view.length?this._view:new Uint8Array(this._buffer,0,r)),this._buffer=e,this._view=new Uint8Array(this._buffer)}append(r){const e=this.length,t=r.length,i=r._view.subarray();this.realloc(e+t),this._view.set(i,e)}insert(r,e=0,t=this.length-e){return!(e>this.length-1||(t>this.length-e&&(t=this.length-e),t>r.length&&(t=r.length),this._view.set(t==r.length?r._view:r._view.subarray(0,t),e),0))}isEqual(r){if(this.length!=r.length)return!1;for(let e=0;e<r.length;e++)if(this.view[e]!=r.view[e])return!1;return!0}isEqualView(r){if(r.length!=this.view.length)return!1;for(let e=0;e<r.length;e++)if(this.view[e]!=r[e])return!1;return!0}findPattern(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i),d=r.length;if(d>l)return-1;const g=[];for(let T=0;T<d;T++)g.push(r.view[T]);for(let T=0;T<=l-d;T++){let M=!0;const z=h?a-d-T:a+T;for(let $=0;$<d;$++)if(this.view[$+z]!=g[$]){M=!1;break}if(M)return h?a-d-T:a+d+T}return-1}findFirstIn(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i),d={id:-1,position:h?0:a+l,length:0};for(let g=0;g<r.length;g++){const T=this.findPattern(r[g],a,l,h);if(-1!=T){let M=!1;const z=r[g].length;h?T-z>=d.position-d.length&&(M=!0):T-z<=d.position-d.length&&(M=!0),M&&(d.position=T,d.id=g,d.length=z)}}return d}findAllIn(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={id:-1,position:i};for(;;){const d=h.position;if(h=this.findFirstIn(r,h.position,a),-1==h.id)break;a-=h.position-d,l.push({id:h.id,position:h.position})}return l}findAllPatternIn(r,e,t){const{start:i,length:a}=this.prepareFindParameters(e,t),l=[],h=r.length;if(h>a)return-1;const d=Array.from(r.view);for(let g=0;g<=a-h;g++){let T=!0;const M=i+g;for(let z=0;z<h;z++)if(this.view[z+M]!=d[z]){T=!1;break}T&&(l.push(i+h+g),g+=h-1)}return l}findFirstNotIn(r,e,t,i){let{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);const d={left:{id:-1,position:a},right:{id:-1,position:0},value:new St};let g=l;for(;g>0;){if(d.right=this.findFirstIn(r,h?a-l+g:a+l-g,g,h),-1==d.right.id){l=g,h?a-=l:a=d.left.position,d.value=new St({buffer:this._buffer.slice(a,a+l)});break}if(d.right.position!=(h?d.left.position-r[d.right.id].length:d.left.position+r[d.right.id].length)){h?(a=d.right.position+r[d.right.id].length,l=d.left.position-d.right.position-r[d.right.id].length):(a=d.left.position,l=d.right.position-d.left.position-r[d.right.id].length),d.value=new St({buffer:this._buffer.slice(a,a+l)});break}d.left=d.right,g-=r[d.right.id].length}if(h){const T=d.right;d.right=d.left,d.left=T}return d}findAllNotIn(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={left:{id:-1,position:i},right:{id:-1,position:i},value:new St};do{const d=h.right.position;h=this.findFirstNotIn(r,h.right.position,a),a-=h.right.position-d,l.push({left:{id:h.left.id,position:h.left.position},right:{id:h.right.id,position:h.right.position},value:h.value})}while(-1!=h.right.id);return l}findFirstSequence(r,e,t,i){let{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);const d=this.skipNotPatterns(r,a,l,h);if(-1==d)return{position:-1,value:new St};const g=this.skipPatterns(r,d,l-(h?a-d:d-a),h);return h?(a=g,l=d-g):(a=d,l=g-d),{position:g,value:new St({buffer:this._buffer.slice(a,a+l)})}}findAllSequences(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={position:i,value:new St};do{const d=h.position;h=this.findFirstSequence(r,h.position,a),-1!=h.position&&(a-=h.position-d,l.push({position:h.position,value:h.value}))}while(-1!=h.position);return l}findPairedPatterns(r,e,t,i){const a=[];if(r.isEqual(e))return a;const{start:l,length:h}=this.prepareFindParameters(t,i);let d=0;const g=this.findAllPatternIn(r,l,h);if(!Array.isArray(g)||0==g.length)return a;const T=this.findAllPatternIn(e,l,h);if(!Array.isArray(T)||0==T.length)return a;for(;d<g.length&&0!=T.length;)if(g[0]!=T[0]){if(g[d]>T[0])break;for(;g[d]<T[0]&&(d++,!(d>=g.length)););a.push({left:g[d-1],right:T[0]}),g.splice(d-1,1),T.splice(0,1),d=0}else a.push({left:g[0],right:T[0]}),g.splice(0,1),T.splice(0,1);return a.sort((M,z)=>M.left-z.left),a}findPairedArrays(r,e,t,i){const{start:a,length:l}=this.prepareFindParameters(t,i),h=[];let d=0;const g=this.findAllIn(r,a,l);if(0==g.length)return h;const T=this.findAllIn(e,a,l);if(0==T.length)return h;for(;d<g.length&&0!=T.length;)if(g[0].position!=T[0].position){if(g[d].position>T[0].position)break;for(;g[d].position<T[0].position&&(d++,!(d>=g.length)););h.push({left:g[d-1],right:T[0]}),g.splice(d-1,1),T.splice(0,1),d=0}else h.push({left:g[0],right:T[0]}),g.splice(0,1),T.splice(0,1);return h.sort((M,z)=>M.left.position-z.left.position),h}replacePattern(r,e,t,i,a=null){let h,l=[];const d={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:g,length:T}=this.prepareFindParameters(t,i);if(null==a){if(l=this.findAllIn([r],g,T),0==l.length)return d}else l=a;d.searchPatternPositions.push(...Array.from(l,le=>le.position));const M=r.length-e.length,z=new ArrayBuffer(this.view.length-l.length*M),$=new Uint8Array(z);for($.set(new Uint8Array(this.buffer,0,g)),h=0;h<l.length;h++){const le=0==h?g:l[h-1].position;$.set(new Uint8Array(this.buffer,le,l[h].position-r.length-le),le-h*M),$.set(e.view,l[h].position-r.length-h*M),d.replacePatternPositions.push(l[h].position-r.length-h*M)}return h--,$.set(new Uint8Array(this.buffer,l[h].position,this.length-l[h].position),l[h].position-r.length+e.length-h*M),this.buffer=z,this.view=new Uint8Array(this.buffer),d.status=1,d}skipPatterns(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);let d=a;for(let g=0;g<r.length;g++){const T=r[g].length,M=h?d-T:d;let z=!0;for(let $=0;$<T;$++)if(this.view[$+M]!=r[g].view[$]){z=!1;break}if(z)if(g=-1,h){if(d-=T,d<=0)return d}else if(d+=T,d>=a+l)return d}return d}skipNotPatterns(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);let d=-1;for(let g=0;g<l;g++){for(let T=0;T<r.length;T++){const M=r[T].length,z=h?a-g-M:a+g;let $=!0;for(let le=0;le<M;le++)if(this.view[le+z]!=r[T].view[le]){$=!1;break}if($){d=h?a-g:a+g;break}}if(-1!=d)break}return d}prepareFindParameters(r=null,e=null,t=!1){return null===r&&(r=t?this.length:0),r>this.length&&(r=this.length),t?(null===e&&(e=r),e>r&&(e=r)):(null===e&&(e=this.length-r),e>this.length-r&&(e=this.length-r)),{start:r,length:e,backward:t}}}let ua=(()=>{class s{constructor(e={}){this._stream=new St,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new St({view:e.view}):"buffer"in e?new St({buffer:e.buffer}):"string"in e?new St({string:e.string}):"hexstring"in e?new St({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new St,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(null==t||t>this.length)&&(t=this.length);const i=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==i)return i;if(this.backward){if(i<this.start-e.length-t)return-1}else if(i>this.start+e.length+t)return-1;return this.start=i,i}findFirstIn(e,t=null){(null==t||t>this.length)&&(t=this.length);const i=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==i.id)return i;if(this.backward){if(i.position<this.start-e[i.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(i.position>this.start+e[i.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=i.position,i}findAllIn(e){return this.stream.findAllIn(e,this.backward?this.start-this.length:this.start,this.length)}findFirstNotIn(e,t=null){(null==t||t>this._length)&&(t=this._length);const i=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==i.left.id&&-1==i.right.id)return i;if(this.backward){if(-1!=i.right.id&&i.right.position<this._start-e[i.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new St}}else if(-1!=i.left.id&&i.left.position>this._start+e[i.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new St};return this.start=this.backward?-1==i.left.id?0:i.left.position:-1==i.right.id?this._start+this._length:i.right.position,i}findAllNotIn(e){return this._stream.findAllNotIn(e,this.backward?this._start-this._length:this._start,this._length)}findFirstSequence(e,t=null,i=null){(null==t||t>this._length)&&(t=this._length),(null==i||i>t)&&(i=t);const a=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==a.value.length)return a;if(this.backward){if(a.position<this._start-a.value.length-i)return{position:-1,value:new St}}else if(a.position>this._start+a.value.length+i)return{position:-1,value:new St};return this.start=a.position,a}findAllSequences(e){return this.stream.findAllSequences(e,this.backward?this.start-this.length:this.start,this.length)}findPairedPatterns(e,t,i=null){(null==i||i>this.length)&&(i=this.length);const l=this.stream.findPairedPatterns(e,t,this.backward?this.start-this.length:this.start,this.length);if(l.length)if(this.backward){if(l[0].right<this.start-t.length-i)return[]}else if(l[0].left>this.start+e.length+i)return[];return l}findPairedArrays(e,t,i=null){(null==i||i>this.length)&&(i=this.length);const l=this.stream.findPairedArrays(e,t,this.backward?this.start-this.length:this.start,this.length);if(l.length)if(this.backward){if(l[0].right.position<this.start-t[l[0].right.id].length-i)return[]}else if(l[0].left.position>this.start+e[l[0].left.id].length+i)return[];return l}replacePattern(e,t){return this.stream.replacePattern(e,t,this.backward?this.start-this.length:this.start,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),i=new Uint8Array(t.buffer);this.stream.view[this._start]=i[1],this._stream.view[this._start+1]=i[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[2],this._stream.view[this._start+1]=i[1],this._stream.view[this._start+2]=i[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[3],this._stream.view[this._start+1]=i[2],this._stream.view[this._start+2]=i[1],this._stream.view[this._start+3]=i[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[1],this._stream.view[this._start+1]=i[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[3],this._stream.view[this._start+1]=i[2],this._stream.view[this._start+2]=i[1],this._stream.view[this._start+3]=i[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);let i;if(this._length<e&&(e=this._length),this.backward){const a=this._stream.view.subarray(this._length-e,this._length);i=new Uint8Array(e);for(let l=0;l<e;l++)i[e-1-l]=a[l]}else i=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),i}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),i=32768;return t&i?-(i-(t^i)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),i=2147483648;return t&i?-(i-(t^i)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+s.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}return s.APPEND_BLOCK=1e3,s})();function iu(s,...r){if(!function um(s){return s instanceof Uint8Array||null!=s&&"object"==typeof s&&"Uint8Array"===s.constructor.name}(s))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(s.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${s.length}`)}function nu(s,r=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(r&&s.finished)throw new Error("Hash#digest() has already been called")}const ru=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),ss=(s,r)=>s<<32-r|s>>>r,au=(s,r)=>s<<r|s>>>32-r>>>0;function Vl(s){return"string"==typeof s&&(s=function pm(s){if("string"!=typeof s)throw new Error("utf8ToBytes expected string, got "+typeof s);return new Uint8Array((new TextEncoder).encode(s))}(s)),iu(s),s}new Uint8Array(new Uint32Array([287454020]).buffer);class gm{clone(){return this._cloneInto()}}function Ol(s){const r=t=>s().update(Vl(t)).digest(),e=s();return r.outputLen=e.outputLen,r.blockLen=e.blockLen,r.create=()=>s(),r}const Td=(s,r,e)=>s&r^~s&e,Bd=(s,r,e)=>s&r^s&e^r&e;class lu extends gm{constructor(r,e,t,i){super(),this.blockLen=r,this.outputLen=e,this.padOffset=t,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=ru(this.buffer)}update(r){nu(this);const{view:e,buffer:t,blockLen:i}=this,a=(r=Vl(r)).length;for(let l=0;l<a;){const h=Math.min(i-this.pos,a-l);if(h!==i)t.set(r.subarray(l,l+h),this.pos),this.pos+=h,l+=h,this.pos===i&&(this.process(e,0),this.pos=0);else{const d=ru(r);for(;i<=a-l;l+=i)this.process(d,l)}}return this.length+=r.length,this.roundClean(),this}digestInto(r){nu(this),function Id(s,r){iu(s);const e=r.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}(r,this),this.finished=!0;const{buffer:e,view:t,blockLen:i,isLE:a}=this;let{pos:l}=this;e[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(t,0),l=0);for(let M=l;M<i;M++)e[M]=0;(function wm(s,r,e,t){if("function"==typeof s.setBigUint64)return s.setBigUint64(r,e,t);const i=BigInt(32),a=BigInt(4294967295),l=Number(e>>i&a),h=Number(e&a),g=t?0:4;s.setUint32(r+(t?4:0),l,t),s.setUint32(r+g,h,t)})(t,i-8,BigInt(8*this.length),a),this.process(t,0);const h=ru(r),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=d/4,T=this.get();if(g>T.length)throw new Error("_sha2: outputLen bigger than state");for(let M=0;M<g;M++)h.setUint32(4*M,T[M],a)}digest(){const{buffer:r,outputLen:e}=this;this.digestInto(r);const t=r.slice(0,e);return this.destroy(),t}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:e,buffer:t,length:i,finished:a,destroyed:l,pos:h}=this;return r.length=i,r.pos=h,r.finished=a,r.destroyed=l,i%e&&r.buffer.set(t),r}}const ha=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),ks=new Uint32Array(80);class ym extends lu{constructor(){super(64,20,8,!1),this.A=0|ha[0],this.B=0|ha[1],this.C=0|ha[2],this.D=0|ha[3],this.E=0|ha[4]}get(){const{A:r,B:e,C:t,D:i,E:a}=this;return[r,e,t,i,a]}set(r,e,t,i,a){this.A=0|r,this.B=0|e,this.C=0|t,this.D=0|i,this.E=0|a}process(r,e){for(let d=0;d<16;d++,e+=4)ks[d]=r.getUint32(e,!1);for(let d=16;d<80;d++)ks[d]=au(ks[d-3]^ks[d-8]^ks[d-14]^ks[d-16],1);let{A:t,B:i,C:a,D:l,E:h}=this;for(let d=0;d<80;d++){let g,T;d<20?(g=Td(i,a,l),T=1518500249):d<40?(g=i^a^l,T=1859775393):d<60?(g=Bd(i,a,l),T=2400959708):(g=i^a^l,T=3395469782);const M=au(t,5)+g+h+T+ks[d]|0;h=l,l=a,a=au(i,30),i=t,t=M}t=t+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,h=h+this.E|0,this.set(t,i,a,l,h)}roundClean(){ks.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}const Sm=Ol(()=>new ym),bm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Es=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cs=new Uint32Array(64);class Rd extends lu{constructor(){super(64,32,8,!1),this.A=0|Es[0],this.B=0|Es[1],this.C=0|Es[2],this.D=0|Es[3],this.E=0|Es[4],this.F=0|Es[5],this.G=0|Es[6],this.H=0|Es[7]}get(){const{A:r,B:e,C:t,D:i,E:a,F:l,G:h,H:d}=this;return[r,e,t,i,a,l,h,d]}set(r,e,t,i,a,l,h,d){this.A=0|r,this.B=0|e,this.C=0|t,this.D=0|i,this.E=0|a,this.F=0|l,this.G=0|h,this.H=0|d}process(r,e){for(let M=0;M<16;M++,e+=4)Cs[M]=r.getUint32(e,!1);for(let M=16;M<64;M++){const z=Cs[M-15],$=Cs[M-2],le=ss(z,7)^ss(z,18)^z>>>3,ke=ss($,17)^ss($,19)^$>>>10;Cs[M]=ke+Cs[M-7]+le+Cs[M-16]|0}let{A:t,B:i,C:a,D:l,E:h,F:d,G:g,H:T}=this;for(let M=0;M<64;M++){const $=T+(ss(h,6)^ss(h,11)^ss(h,25))+Td(h,d,g)+bm[M]+Cs[M]|0,ke=(ss(t,2)^ss(t,13)^ss(t,22))+Bd(t,i,a)|0;T=g,g=d,d=h,h=l+$|0,l=a,a=i,i=t,t=$+ke|0}t=t+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,h=h+this.E|0,d=d+this.F|0,g=g+this.G|0,T=T+this.H|0,this.set(t,i,a,l,h,d,g,T)}roundClean(){Cs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Am=Ol(()=>new Rd),Pl=BigInt(2**32-1),cu=BigInt(32);function Vd(s,r=!1){return r?{h:Number(s&Pl),l:Number(s>>cu&Pl)}:{h:0|Number(s>>cu&Pl),l:0|Number(s&Pl)}}const ze_split=function _m(s,r=!1){let e=new Uint32Array(s.length),t=new Uint32Array(s.length);for(let i=0;i<s.length;i++){const{h:a,l}=Vd(s[i],r);[e[i],t[i]]=[a,l]}return[e,t]},ze_shrSH=(s,r,e)=>s>>>e,ze_shrSL=(s,r,e)=>s<<32-e|r>>>e,ze_rotrSH=(s,r,e)=>s>>>e|r<<32-e,ze_rotrSL=(s,r,e)=>s<<32-e|r>>>e,ze_rotrBH=(s,r,e)=>s<<64-e|r>>>e-32,ze_rotrBL=(s,r,e)=>s>>>e-32|r<<64-e,ze_add=function Um(s,r,e,t){const i=(r>>>0)+(t>>>0);return{h:s+e+(i/2**32|0)|0,l:0|i}},ze_add3L=(s,r,e)=>(s>>>0)+(r>>>0)+(e>>>0),ze_add3H=(s,r,e,t)=>r+e+t+(s/2**32|0)|0,ze_add4L=(s,r,e,t)=>(s>>>0)+(r>>>0)+(e>>>0)+(t>>>0),ze_add4H=(s,r,e,t,i)=>r+e+t+i+(s/2**32|0)|0,ze_add5H=(s,r,e,t,i,a)=>r+e+t+i+a+(s/2**32|0)|0,ze_add5L=(s,r,e,t,i)=>(s>>>0)+(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),[Mm,Lm]=ze_split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),Ns=new Uint32Array(80),Is=new Uint32Array(80);class Dl extends lu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:e,Bh:t,Bl:i,Ch:a,Cl:l,Dh:h,Dl:d,Eh:g,El:T,Fh:M,Fl:z,Gh:$,Gl:le,Hh:ke,Hl:ye}=this;return[r,e,t,i,a,l,h,d,g,T,M,z,$,le,ke,ye]}set(r,e,t,i,a,l,h,d,g,T,M,z,$,le,ke,ye){this.Ah=0|r,this.Al=0|e,this.Bh=0|t,this.Bl=0|i,this.Ch=0|a,this.Cl=0|l,this.Dh=0|h,this.Dl=0|d,this.Eh=0|g,this.El=0|T,this.Fh=0|M,this.Fl=0|z,this.Gh=0|$,this.Gl=0|le,this.Hh=0|ke,this.Hl=0|ye}process(r,e){for(let ce=0;ce<16;ce++,e+=4)Ns[ce]=r.getUint32(e),Is[ce]=r.getUint32(e+=4);for(let ce=16;ce<80;ce++){const me=0|Ns[ce-15],we=0|Is[ce-15],_e=ze_rotrSH(me,we,1)^ze_rotrSH(me,we,8)^ze_shrSH(me,we,7),Ne=ze_rotrSL(me,we,1)^ze_rotrSL(me,we,8)^ze_shrSL(me,we,7),Ie=0|Ns[ce-2],Ue=0|Is[ce-2],We=ze_rotrSH(Ie,Ue,19)^ze_rotrBH(Ie,Ue,61)^ze_shrSH(Ie,Ue,6),_t=ze_rotrSL(Ie,Ue,19)^ze_rotrBL(Ie,Ue,61)^ze_shrSL(Ie,Ue,6),Xe=ze_add4L(Ne,_t,Is[ce-7],Is[ce-16]),dt=ze_add4H(Xe,_e,We,Ns[ce-7],Ns[ce-16]);Ns[ce]=0|dt,Is[ce]=0|Xe}let{Ah:t,Al:i,Bh:a,Bl:l,Ch:h,Cl:d,Dh:g,Dl:T,Eh:M,El:z,Fh:$,Fl:le,Gh:ke,Gl:ye,Hh:ae,Hl:Se}=this;for(let ce=0;ce<80;ce++){const me=ze_rotrSH(M,z,14)^ze_rotrSH(M,z,18)^ze_rotrBH(M,z,41),we=ze_rotrSL(M,z,14)^ze_rotrSL(M,z,18)^ze_rotrBL(M,z,41),_e=M&$^~M&ke,Ie=ze_add5L(Se,we,z&le^~z&ye,Lm[ce],Is[ce]),Ue=ze_add5H(Ie,ae,me,_e,Mm[ce],Ns[ce]),We=0|Ie,_t=ze_rotrSH(t,i,28)^ze_rotrBH(t,i,34)^ze_rotrBH(t,i,39),Xe=ze_rotrSL(t,i,28)^ze_rotrBL(t,i,34)^ze_rotrBL(t,i,39),dt=t&a^t&h^a&h,jt=i&l^i&d^l&d;ae=0|ke,Se=0|ye,ke=0|$,ye=0|le,$=0|M,le=0|z,({h:M,l:z}=ze_add(0|g,0|T,0|Ue,0|We)),g=0|h,T=0|d,h=0|a,d=0|l,a=0|t,l=0|i;const Pt=ze_add3L(We,Xe,jt);t=ze_add3H(Pt,Ue,_t,dt),i=0|Pt}({h:t,l:i}=ze_add(0|this.Ah,0|this.Al,0|t,0|i)),({h:a,l}=ze_add(0|this.Bh,0|this.Bl,0|a,0|l)),({h,l:d}=ze_add(0|this.Ch,0|this.Cl,0|h,0|d)),({h:g,l:T}=ze_add(0|this.Dh,0|this.Dl,0|g,0|T)),({h:M,l:z}=ze_add(0|this.Eh,0|this.El,0|M,0|z)),({h:$,l:le}=ze_add(0|this.Fh,0|this.Fl,0|$,0|le)),({h:ke,l:ye}=ze_add(0|this.Gh,0|this.Gl,0|ke,0|ye)),({h:ae,l:Se}=ze_add(0|this.Hh,0|this.Hl,0|ae,0|Se)),this.set(t,i,a,l,h,d,g,T,M,z,$,le,ke,ye,ae,Se)}roundClean(){Ns.fill(0),Is.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Fm extends Dl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const jm=Ol(()=>new Dl),Hm=Ol(()=>new Fm),Nt=new ArrayBuffer(0),y="";let ht=(()=>{class s extends TypeError{constructor(){super(...arguments),this.name=s.NAME}static isType(e,t){if("string"==typeof t){if("Array"===t&&Array.isArray(e))return!0;if("ArrayBuffer"===t&&e instanceof ArrayBuffer)return!0;if("ArrayBufferView"===t&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...i){for(const l of i)if(this.isType(e,l))return;const a=i.map(l=>l instanceof Function&&"name"in l?l.name:`${l}`);throw new s(`Parameter '${t}' is not of type ${a.length>1?`(${a.join(" or ")})`:a[0]}`)}}return s.NAME="ArgumentError",s})(),st=(()=>{class s extends TypeError{static assert(...e){let i,a,t=null;"string"==typeof e[0]?(t=e[0],i=e[1],a=e.slice(2)):(i=e[0],a=e.slice(1)),ht.assert(i,"parameters","object");for(const l of a)if(null==i[l])throw new s(l,t)}static assertEmpty(e,t,i){if(null==e)throw new s(t,i)}constructor(e,t=null,i){super(),this.name=s.NAME,this.field=e,t&&(this.target=t),this.message=i||`Absent mandatory parameter '${e}' ${t?` in '${t}'`:y}`}}return s.NAME="ParameterError",s})();class de extends Error{static assertSchema(r,e){if(!r.verified)throw new Error(`Object's schema was not verified against input data for ${e}`)}static assert(r,e){if(-1===r.offset)throw new de(`Error during parsing of ASN.1 data. Data is not correct for '${e}'.`)}constructor(r){super(r),this.name="AsnError"}}let ge=(()=>{class s{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=$e(e);de.assert(t,this.name);try{return new this({schema:t.result})}catch{throw new de(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return C.U$.ToString(t.toBER(),e)}}return s.CLASS_NAME="PkiObject",s})();function xs(s){let r=!1,e=y;const t=s.trim();for(let i=0;i<t.length;i++)32===t.charCodeAt(i)?!1===r&&(r=!0):(r&&(e+=" ",r=!1),e+=t[i]);return e.toLowerCase()}const da="type",uu="value";let hu=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,da,s.defaultValues(da)),this.value=o(e,uu,s.defaultValues(uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case da:return y;case uu:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.type||y}),new Fe({name:t.value||y})]})}fromSchema(e){V(e,[da,"typeValue"]);const t=pe(e,e,s.schema({names:{type:da,value:"typeValue"}}));de.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new F({value:[new Be({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return e.value=0!==Object.keys(this.value).length?this.value.toJSON():this.value,e}isEqual(e){const t=[ts.blockName(),qt.blockName(),la.blockName(),On.blockName(),$t.blockName(),ca.blockName(),Zc.blockName(),Tl.blockName(),Qc.blockName(),Bl.blockName(),eu.blockName(),tu.blockName()];if(e instanceof ArrayBuffer)return C._H.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===s.blockName()){if(this.type!==e.type)return!1;const i=[!1,!1],a=this.value.constructor.blockName();for(const h of t)a===h&&(i[0]=!0),e.value.constructor.blockName()===h&&(i[1]=!0);if(i[0]!==i[1])return!1;if(i[0]&&i[1]){const h=xs(this.value.valueBlock.value),d=xs(e.value.valueBlock.value);if(0!==h.localeCompare(d))return!1}else if(!C._H.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}return s.CLASS_NAME="AttributeTypeAndValue",s})();const yi="typesAndValues",Ul="valueBeforeDecode";let gt=(()=>{class s extends ge{constructor(e={}){super(),this.typesAndValues=o(e,yi,s.defaultValues(yi)),this.valueBeforeDecode=o(e,Ul,s.defaultValues(Ul)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yi:return[];case Ul:return Nt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case yi:return 0===t.length;case Ul:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.repeatedSequence||y,value:new Et({value:[new Ke({name:t.repeatedSet||y,value:hu.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){V(e,["RDN",yi]);const t=pe(e,e,s.schema({names:{blockName:"RDN",repeatedSet:yi}}));de.assertSchema(t,this.className),yi in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,i=>new hu({schema:i}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(0===this.valueBeforeDecode.byteLength)return new F({value:[new Et({value:Array.from(this.typesAndValues,t=>t.toSchema())})]});const e=$e(this.valueBeforeDecode);if(de.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof F))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof s){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,i]of this.typesAndValues.entries())if(!1===i.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&Q(this.valueBeforeDecode,e)}}return s.CLASS_NAME="RelativeDistinguishedNames",s})();const fa="type",ma="value";function $m(s={},r=!1){const e=o(s,"names",{});return new F({optional:r,value:[new Y({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:e.country_name||y,value:[new pt({value:[new On,new $t]})]}),new Y({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:e.administration_domain_name||y,value:[new pt({value:[new On,new $t]})]}),new Te({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:e.network_address||y,isHexOnly:!0}),new Te({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:e.terminal_identifier||y,isHexOnly:!0}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:e.private_domain_name||y,value:[new pt({value:[new On,new $t]})]}),new Te({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:e.organization_name||y,isHexOnly:!0}),new Te({optional:!0,name:e.numeric_user_identifier||y,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new Y({optional:!0,name:e.personal_name||y,idBlock:{tagClass:3,tagNumber:5},value:[new Te({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Te({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new Te({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new Te({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new Y({optional:!0,name:e.organizational_unit_names||y,idBlock:{tagClass:3,tagNumber:6},value:[new Ke({value:new $t})]})]})}function Km(s=!1){return new F({optional:s,value:[new $t,new $t]})}function Gm(s=!1){return new Et({optional:s,value:[new Te({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Fe]})]})}let At=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,fa,s.defaultValues(fa)),this.value=o(e,ma,s.defaultValues(ma)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fa:return 9;case ma:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fa:return t===s.defaultValues(e);case ma:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new pt({value:[new Y({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||y,value:[new Be,new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe]})]}),new Te({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:1}}),new Te({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:2}}),new Y({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||y,value:[$m(t.builtInStandardAttributes||{},!1),Km(!0),Gm(!0)]}),new Y({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||y,value:[gt.schema(t.directoryName||{})]}),new Y({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||y,value:[new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new pt({value:[new ca,new $t,new la,new ts,new qt]})]}),new Y({idBlock:{tagClass:3,tagNumber:1},value:[new pt({value:[new ca,new $t,new la,new ts,new qt]})]})]}),new Te({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:6}}),new Te({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:7}}),new Te({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){V(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=pe(e,e,s.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(de.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=t.result.blockName;break;case 1:case 2:case 6:{const i=t.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=22;const l=$e(i.toBER(!1));de.assert(l,"GeneralName value"),this.value=l.result.valueBlock.value}break;case 4:this.value=new gt({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new ve({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const i=t.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;const l=$e(i.toBER(!1));de.assert(l,"GeneralName registeredID"),this.value=l.result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new Y({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new Tl({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new Y({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new Be({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return s.schema()}}toJSON(){const e={type:this.type,value:y};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}return s.CLASS_NAME="GeneralName",s})();const pa="accessMethod",ga="accessLocation",Jm=[pa,ga];let Pd=(()=>{class s extends ge{constructor(e={}){super(),this.accessMethod=o(e,pa,s.defaultValues(pa)),this.accessLocation=o(e,ga,s.defaultValues(ga)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pa:return y;case ga:return new At;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.accessMethod||y}),At.schema(t.accessLocation||{})]})}fromSchema(e){V(e,Jm);const t=pe(e,e,s.schema({names:{accessMethod:pa,accessLocation:{names:{blockName:ga}}}}));de.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new At({schema:t.result.accessLocation})}toSchema(){return new F({value:[new Be({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}return s.CLASS_NAME="AccessDescription",s})();const Ts="seconds",Bs="millis",Rs="micros";let Dn=(()=>{class s extends ge{constructor(e={}){super(),Ts in e&&(this.seconds=o(e,Ts,s.defaultValues(Ts))),Bs in e&&(this.millis=o(e,Bs,s.defaultValues(Bs))),Rs in e&&(this.micros=o(e,Rs,s.defaultValues(Rs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ts:case Bs:case Rs:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ts:case Bs:case Rs:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,optional:!0,value:[new te({optional:!0,name:t.seconds||y}),new Te({name:t.millis||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Te({name:t.micros||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){V(e,[Ts,Bs,Rs]);const t=pe(e,e,s.schema({names:{seconds:Ts,millis:Bs,micros:Rs}}));if(de.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const i=new te({valueHex:t.result.millis.valueBlock.valueHex});this.millis=i.valueBlock.valueDec}if("micros"in t.result){const i=new te({valueHex:t.result.micros.valueBlock.valueHex});this.micros=i.valueBlock.valueDec}}toSchema(){const e=[];if(void 0!==this.seconds&&e.push(new te({value:this.seconds})),void 0!==this.millis){const t=new te({value:this.millis});e.push(new Te({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(void 0!==this.micros){const t=new te({value:this.micros});e.push(new Te({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new F({value:e})}toJSON(){const e={};return void 0!==this.seconds&&(e.seconds=this.seconds),void 0!==this.millis&&(e.millis=this.millis),void 0!==this.micros&&(e.micros=this.micros),e}}return s.CLASS_NAME="Accuracy",s})();const Ml="algorithmId",va="algorithmParams",Dd="algorithm",du="params",zm=[Dd,du];let ie=(()=>{class s extends ge{constructor(e={}){super(),this.algorithmId=o(e,Ml,s.defaultValues(Ml)),va in e&&(this.algorithmParams=o(e,va,s.defaultValues(va))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ml:return y;case va:return new Fe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ml:return t===y;case va:return t instanceof Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,optional:t.optional||!1,value:[new Be({name:t.algorithmIdentifier||y}),new Fe({name:t.algorithmParams||y,optional:!0})]})}fromSchema(e){V(e,zm);const t=pe(e,e,s.schema({names:{algorithmIdentifier:Dd,algorithmParams:du}}));de.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),du in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new Be({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof Fe)&&e.push(this.algorithmParams),new F({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof Fe)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof s&&this.algorithmId===e.algorithmId&&(this.algorithmParams?!!e.algorithmParams&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!e.algorithmParams)}}return s.CLASS_NAME="AlgorithmIdentifier",s})();const Un="altNames",qm=[Un];let Ud=(()=>{class s extends ge{constructor(e={}){super(),this.altNames=o(e,Un,s.defaultValues(Un)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Un?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.altNames||y,value:At.schema()})]})}fromSchema(e){V(e,qm);const t=pe(e,e,s.schema({names:{altNames:Un}}));de.assertSchema(t,this.className),Un in t.result&&(this.altNames=Array.from(t.result.altNames,i=>new At({schema:i})))}toSchema(){return new F({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}return s.CLASS_NAME="AltName",s})();const Mn="type",Ln="values",Wm=[Mn,Ln];let it=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,Mn,s.defaultValues(Mn)),this.values=o(e,Ln,s.defaultValues(Ln)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mn:return y;case Ln:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mn:return t===y;case Ln:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.type||y}),new Et({name:t.setName||y,value:[new Ke({name:t.values||y,value:new Fe})]})]})}fromSchema(e){V(e,Wm);const t=pe(e,e,s.schema({names:{type:Mn,values:Ln}}));de.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new F({value:[new Be({value:this.type}),new Et({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}return s.CLASS_NAME="Attribute",s})();const wa="notBeforeTime",ya="notAfterTime",Xm=[wa,ya];let Fn=(()=>{class s extends ge{constructor(e={}){super(),this.notBeforeTime=o(e,wa,s.defaultValues(wa)),this.notAfterTime=o(e,ya,s.defaultValues(ya)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wa:case ya:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new mt({name:t.notBeforeTime||y}),new mt({name:t.notAfterTime||y})]})}fromSchema(e){V(e,Xm);const t=pe(e,e,s.schema({names:{notBeforeTime:wa,notAfterTime:ya}}));de.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new F({value:[new mt({valueDate:this.notBeforeTime}),new mt({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}return s.CLASS_NAME="AttCertValidityPeriod",s})();const Sa="names",Md="generalNames";let Tt=(()=>{class s extends ge{constructor(e={}){super(),this.names=o(e,Sa,s.defaultValues(Sa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return"names"===e?[]:super.defaultValues(e)}static schema(e={},t=!1){const i=o(e,Sa,{});return new F({optional:t,name:i.blockName||y,value:[new Ke({name:i.generalNames||y,value:At.schema()})]})}fromSchema(e){V(e,[Sa,Md]);const t=pe(e,e,s.schema({names:{blockName:Sa,generalNames:Md}}));de.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,i=>new At({schema:i}))}toSchema(){return new F({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}return s.CLASS_NAME="GeneralNames",s})();const Ld="2.5.29.17",Fd="2.5.29.18",fu="2.5.29.19",jd="2.5.29.28",Hd="2.5.29.29",$d="2.5.29.30",Kd="2.5.29.31",mu="2.5.29.46",Gd="2.5.29.32",Kt="2.5.29.32.0",Jd="2.5.29.33",pu="2.5.29.35",zd="2.5.29.36",gu="1.3.6.1.5.5.7.1.1",vu="1.2.840.113549.1.7.1",Wd="1.2.840.113549.1.7.3",Xd="1.2.840.113549.1.7.6",Yd="1.2.840.113549.1.9.22.1",Zd="1.2.840.113549.1.9.22.3",Qd="1.2.840.113549.1.9.23.1",Si="keyIdentifier",bi="authorityCertIssuer",Ai="authorityCertSerialNumber",g1=[Si,bi,Ai];let ef=(()=>{class s extends ge{constructor(e={}){super(),Si in e&&(this.keyIdentifier=o(e,Si,s.defaultValues(Si))),bi in e&&(this.authorityCertIssuer=o(e,bi,s.defaultValues(bi))),Ai in e&&(this.authorityCertSerialNumber=o(e,Ai,s.defaultValues(Ai))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Si:return new ve;case bi:return[];case Ai:return new te;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Te({name:t.keyIdentifier||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ke({name:t.authorityCertIssuer||y,value:At.schema()})]}),new Te({name:t.authorityCertSerialNumber||y,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){V(e,g1);const t=pe(e,e,s.schema({names:{keyIdentifier:Si,authorityCertIssuer:bi,authorityCertSerialNumber:Ai}}));de.assertSchema(t,this.className),Si in t.result&&(this.keyIdentifier=new ve({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),bi in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,i=>new At({schema:i}))),Ai in t.result&&(this.authorityCertSerialNumber=new te({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new Te({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,t=>t.toSchema())})),this.authorityCertSerialNumber&&e.push(new Te({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new F({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,t=>t.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}return s.CLASS_NAME="AuthorityKeyIdentifier",s})();const _i="pathLenConstraint",ki="cA";let tf=(()=>{class s extends ge{constructor(e={}){super(),this.cA=o(e,ki,!1),_i in e&&(this.pathLenConstraint=o(e,_i,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e!==ki&&super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new _s({optional:!0,name:t.cA||y}),new te({optional:!0,name:t.pathLenConstraint||y})]})}fromSchema(e){V(e,[ki,_i]);const t=pe(e,e,s.schema({names:{cA:ki,pathLenConstraint:_i}}));de.assertSchema(t,this.className),ki in t.result&&(this.cA=t.result.cA.valueBlock.value),_i in t.result&&(this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.isHexOnly?t.result.pathLenConstraint:t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==s.defaultValues(ki)&&e.push(new _s({value:this.cA})),_i in this&&e.push(this.pathLenConstraint instanceof te?this.pathLenConstraint:new te({value:this.pathLenConstraint})),new F({value:e})}toJSON(){const e={};return this.cA!==s.defaultValues(ki)&&(e.cA=this.cA),_i in this&&(e.pathLenConstraint=this.pathLenConstraint instanceof te?this.pathLenConstraint.toJSON():this.pathLenConstraint),e}}return s.CLASS_NAME="BasicConstraints",s})();const wu="certificateIndex",yu="keyIndex";let v1=(()=>{class s extends ge{constructor(e={}){super(),this.certificateIndex=o(e,wu,s.defaultValues(wu)),this.keyIndex=o(e,yu,s.defaultValues(yu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wu:case yu:return 0;default:return super.defaultValues(e)}}static schema(){return new te}fromSchema(e){if(e.constructor.blockName()!==te.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const i=new Uint8Array(t);switch(!0){case t.byteLength<4:{const z=new ArrayBuffer(4);new Uint8Array(z).set(i,4-t.byteLength),t=z.slice(0)}break;case t.byteLength>4:{const z=new ArrayBuffer(4);new Uint8Array(z).set(i.slice(0,4)),t=z.slice(0)}}const a=t.slice(0,2),l=new Uint8Array(a);let h=l[0];l[0]=l[1],l[1]=h;const d=new Uint16Array(a);this.keyIndex=d[0];const g=t.slice(2),T=new Uint8Array(g);h=T[0],T[0]=T[1],T[1]=h;const M=new Uint16Array(g);this.certificateIndex=M[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const i=new Uint8Array(e);let a=i[0];i[0]=i[1],i[1]=a;const l=new ArrayBuffer(2);new Uint16Array(l)[0]=this.keyIndex;const d=new Uint8Array(l);return a=d[0],d[0]=d[1],d[1]=a,new te({valueHex:E(l,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}return s.CLASS_NAME="CAVersion",s})();const ba="policyQualifierId",Aa="qualifier",w1=[ba,Aa];let sf=(()=>{class s extends ge{constructor(e={}){super(),this.policyQualifierId=o(e,ba,s.defaultValues(ba)),this.qualifier=o(e,Aa,s.defaultValues(Aa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ba:return y;case Aa:return new Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.policyQualifierId||y}),new Fe({name:t.qualifier||y})]})}fromSchema(e){V(e,w1);const t=pe(e,e,s.schema({names:{policyQualifierId:ba,qualifier:Aa}}));de.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new F({value:[new Be({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}return s.CLASS_NAME="PolicyQualifierInfo",s})();const _a="policyIdentifier",Ei="policyQualifiers",y1=[_a,Ei];let nf=(()=>{class s extends ge{constructor(e={}){super(),this.policyIdentifier=o(e,_a,s.defaultValues(_a)),Ei in e&&(this.policyQualifiers=o(e,Ei,s.defaultValues(Ei))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _a:return y;case Ei:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.policyIdentifier||y}),new F({optional:!0,value:[new Ke({name:t.policyQualifiers||y,value:sf.schema()})]})]})}fromSchema(e){V(e,y1);const t=pe(e,e,s.schema({names:{policyIdentifier:_a,policyQualifiers:Ei}}));de.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),Ei in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,i=>new sf({schema:i})))}toSchema(){const e=[];return e.push(new Be({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new F({value:Array.from(this.policyQualifiers,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,t=>t.toJSON())),e}}return s.CLASS_NAME="PolicyInformation",s})();const ka="certificatePolicies",S1=[ka];let rf=(()=>{class s extends ge{constructor(e={}){super(),this.certificatePolicies=o(e,ka,s.defaultValues(ka)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ka?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.certificatePolicies||y,value:nf.schema()})]})}fromSchema(e){V(e,S1);const t=pe(e,e,s.schema({names:{certificatePolicies:ka}}));de.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,i=>new nf({schema:i}))}toSchema(){return new F({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}return s.CLASS_NAME="CertificatePolicies",s})();const Ea="templateID",os="templateMajorVersion",ls="templateMinorVersion",b1=[Ea,os,ls];class jn extends ge{constructor(r={}){super(),this.templateID=o(r,Ea,jn.defaultValues(Ea)),os in r&&(this.templateMajorVersion=o(r,os,jn.defaultValues(os))),ls in r&&(this.templateMinorVersion=o(r,ls,jn.defaultValues(ls))),r.schema&&this.fromSchema(r.schema)}static defaultValues(r){switch(r){case Ea:return y;case os:case ls:return 0;default:return super.defaultValues(r)}}static schema(r={}){const e=o(r,"names",{});return new F({name:e.blockName||y,value:[new Be({name:e.templateID||y}),new te({name:e.templateMajorVersion||y,optional:!0}),new te({name:e.templateMinorVersion||y,optional:!0})]})}fromSchema(r){V(r,b1);const e=pe(r,r,jn.schema({names:{templateID:Ea,templateMajorVersion:os,templateMinorVersion:ls}}));de.assertSchema(e,this.className),this.templateID=e.result.templateID.valueBlock.toString(),os in e.result&&(this.templateMajorVersion=e.result.templateMajorVersion.valueBlock.valueDec),ls in e.result&&(this.templateMinorVersion=e.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const r=[];return r.push(new Be({value:this.templateID})),os in this&&r.push(new te({value:this.templateMajorVersion})),ls in this&&r.push(new te({value:this.templateMinorVersion})),new F({value:r})}toJSON(){const r={templateID:this.templateID};return os in this&&(r.templateMajorVersion=this.templateMajorVersion),ls in this&&(r.templateMinorVersion=this.templateMinorVersion),r}}const Ci="distributionPoint",af="distributionPointNames",Ni="reasons",Ii="cRLIssuer",of="cRLIssuerNames",A1=[Ci,af,Ni,Ii,of];let lf=(()=>{class s extends ge{constructor(e={}){super(),Ci in e&&(this.distributionPoint=o(e,Ci,s.defaultValues(Ci))),Ni in e&&(this.reasons=o(e,Ni,s.defaultValues(Ni))),Ii in e&&(this.cRLIssuer=o(e,Ii,s.defaultValues(Ii))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ci:return[];case Ni:return new Qe;case Ii:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new pt({value:[new Y({name:t.distributionPoint||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({name:t.distributionPointNames||y,value:At.schema()})]}),new Y({name:t.distributionPoint||y,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:gt.schema().valueBlock.value})]})]}),new Te({name:t.reasons||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Y({name:t.cRLIssuer||y,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Ke({name:t.cRLIssuerNames||y,value:At.schema()})]})]})}fromSchema(e){V(e,A1);const t=pe(e,e,s.schema({names:{distributionPoint:Ci,distributionPointNames:af,reasons:Ni,cRLIssuer:Ii,cRLIssuerNames:of}}));de.assertSchema(t,this.className),Ci in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,i=>new At({schema:i}))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new gt({schema:new F({value:t.result.distributionPoint.valueBlock.value})}))),Ni in t.result&&(this.reasons=new Qe({valueHex:t.result.reasons.valueBlock.valueHex})),Ii in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,i=>new At({schema:i})))}toSchema(){const e=[];if(this.distributionPoint){let t;t=new Y(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,i=>i.toSchema())}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new Te({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new Y({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={};return this.distributionPoint&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,t=>t.toJSON()):this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,t=>t.toJSON())),e}}return s.CLASS_NAME="DistributionPoint",s})();const Ca="distributionPoints",_1=[Ca];let cf=(()=>{class s extends ge{constructor(e={}){super(),this.distributionPoints=o(e,Ca,s.defaultValues(Ca)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ca?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.distributionPoints||y,value:lf.schema()})]})}fromSchema(e){V(e,_1);const t=pe(e,e,s.schema({names:{distributionPoints:Ca}}));de.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,i=>new lf({schema:i}))}toSchema(){return new F({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}return s.CLASS_NAME="CRLDistributionPoints",s})();const Na="keyPurposes",k1=[Na];let E1=(()=>{class s extends ge{constructor(e={}){super(),this.keyPurposes=o(e,Na,s.defaultValues(Na)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Na?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.keyPurposes||y,value:new Be})]})}fromSchema(e){V(e,k1);const t=pe(e,e,s.schema({names:{keyPurposes:Na}}));de.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,i=>i.valueBlock.toString())}toSchema(){return new F({value:Array.from(this.keyPurposes,e=>new Be({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}return s.CLASS_NAME="ExtKeyUsage",s})();const Ia="accessDescriptions";let uf=(()=>{class s extends ge{constructor(e={}){super(),this.accessDescriptions=o(e,Ia,s.defaultValues(Ia)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ia?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.accessDescriptions||y,value:Pd.schema()})]})}fromSchema(e){V(e,[Ia]);const t=pe(e,e,s.schema({names:{accessDescriptions:Ia}}));de.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,i=>new Pd({schema:i}))}toSchema(){return new F({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}return s.CLASS_NAME="InfoAccess",s})();const xi="distributionPoint",hf="distributionPointNames",Vs="onlyContainsUserCerts",Os="onlyContainsCACerts",Ps="onlySomeReasons",Ds="indirectCRL",Us="onlyContainsAttributeCerts",C1=[xi,hf,Vs,Os,Ps,Ds,Us];let N1=(()=>{class s extends ge{constructor(e={}){super(),xi in e&&(this.distributionPoint=o(e,xi,s.defaultValues(xi))),this.onlyContainsUserCerts=o(e,Vs,s.defaultValues(Vs)),this.onlyContainsCACerts=o(e,Os,s.defaultValues(Os)),Ps in e&&(this.onlySomeReasons=o(e,Ps,s.defaultValues(Ps))),this.indirectCRL=o(e,Ds,s.defaultValues(Ds)),this.onlyContainsAttributeCerts=o(e,Us,s.defaultValues(Us)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xi:return[];case Vs:case Os:return!1;case Ps:return 0;case Ds:case Us:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new pt({value:[new Y({name:t.distributionPoint||y,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({name:t.distributionPointNames||y,value:At.schema()})]}),new Y({name:t.distributionPoint||y,idBlock:{tagClass:3,tagNumber:1},value:gt.schema().valueBlock.value})]})]}),new Te({name:t.onlyContainsUserCerts||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Te({name:t.onlyContainsCACerts||y,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Te({name:t.onlySomeReasons||y,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new Te({name:t.indirectCRL||y,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new Te({name:t.onlyContainsAttributeCerts||y,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){V(e,C1);const t=pe(e,e,s.schema({names:{distributionPoint:xi,distributionPointNames:hf,onlyContainsUserCerts:Vs,onlyContainsCACerts:Os,onlySomeReasons:Ps,indirectCRL:Ds,onlyContainsAttributeCerts:Us}}));if(de.assertSchema(t,this.className),xi in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,i=>new At({schema:i}));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new gt({schema:new F({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(Vs in t.result){const i=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==i[0]}if(Os in t.result){const i=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==i[0]}if(Ps in t.result){const i=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if(Ds in t.result){const i=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==i[0]}if(Us in t.result){const i=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==i[0]}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new Y({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,i=>i.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==s.defaultValues(Vs)&&e.push(new Te({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==s.defaultValues(Os)&&e.push(new Te({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),void 0!==this.onlySomeReasons){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new Te({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==s.defaultValues(Ds)&&e.push(new Te({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==s.defaultValues(Us)&&e.push(new Te({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new F({value:e})}toJSON(){const e={};return this.distributionPoint&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,t=>t.toJSON()):this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==s.defaultValues(Vs)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==s.defaultValues(Os)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Ps in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==s.defaultValues(Ds)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==s.defaultValues(Us)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}return s.CLASS_NAME="IssuingDistributionPoint",s})();const xa="base",Hn="minimum",Ms="maximum",I1=[xa,Hn,Ms];let Ll=(()=>{class s extends ge{constructor(e={}){super(),this.base=o(e,xa,s.defaultValues(xa)),this.minimum=o(e,Hn,s.defaultValues(Hn)),Ms in e&&(this.maximum=o(e,Ms,s.defaultValues(Ms))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xa:return new At;case Hn:case Ms:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[At.schema(t.base||{}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new te({name:t.minimum||y})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new te({name:t.maximum||y})]})]})}fromSchema(e){V(e,I1);const t=pe(e,e,s.schema({names:{base:{names:{blockName:xa}},minimum:Hn,maximum:Ms}}));de.assertSchema(t,this.className),this.base=new At({schema:t.result.base}),Hn in t.result&&(this.minimum=t.result.minimum.valueBlock.isHexOnly?t.result.minimum:t.result.minimum.valueBlock.valueDec),Ms in t.result&&(this.maximum=t.result.maximum.valueBlock.isHexOnly?t.result.maximum:t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof te?this.minimum:new te({value:this.minimum}),e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Ms in this){let t=0;t=this.maximum instanceof te?this.maximum:new te({value:this.maximum}),e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new F({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&(e.minimum="number"==typeof this.minimum?this.minimum:this.minimum.toJSON()),void 0!==this.maximum&&(e.maximum="number"==typeof this.maximum?this.maximum:this.maximum.toJSON()),e}}return s.CLASS_NAME="GeneralSubtree",s})();const Ti="permittedSubtrees",Bi="excludedSubtrees",x1=[Ti,Bi];let T1=(()=>{class s extends ge{constructor(e={}){super(),Ti in e&&(this.permittedSubtrees=o(e,Ti,s.defaultValues(Ti))),Bi in e&&(this.excludedSubtrees=o(e,Bi,s.defaultValues(Bi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ti:case Bi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({name:t.permittedSubtrees||y,value:Ll.schema()})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ke({name:t.excludedSubtrees||y,value:Ll.schema()})]})]})}fromSchema(e){V(e,x1);const t=pe(e,e,s.schema({names:{permittedSubtrees:Ti,excludedSubtrees:Bi}}));de.assertSchema(t,this.className),Ti in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,i=>new Ll({schema:i}))),Bi in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,i=>new Ll({schema:i})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,t=>t.toSchema())})),this.excludedSubtrees&&e.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,t=>t.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,t=>t.toJSON())),e}}return s.CLASS_NAME="NameConstraints",s})();const cs="requireExplicitPolicy",us="inhibitPolicyMapping",B1=[cs,us];let R1=(()=>{class s extends ge{constructor(e={}){super(),cs in e&&(this.requireExplicitPolicy=o(e,cs,s.defaultValues(cs))),us in e&&(this.inhibitPolicyMapping=o(e,us,s.defaultValues(us))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cs:case us:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Te({name:t.requireExplicitPolicy||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Te({name:t.inhibitPolicyMapping||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){V(e,B1);const t=pe(e,e,s.schema({names:{requireExplicitPolicy:cs,inhibitPolicyMapping:us}}));if(de.assertSchema(t,this.className),cs in t.result){const i=t.result.requireExplicitPolicy;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;const l=$e(i.toBER(!1));de.assert(l,"Integer"),this.requireExplicitPolicy=l.result.valueBlock.valueDec}if(us in t.result){const i=t.result.inhibitPolicyMapping;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;const l=$e(i.toBER(!1));de.assert(l,"Integer"),this.inhibitPolicyMapping=l.result.valueBlock.valueDec}}toSchema(){const e=[];if(cs in this){const t=new te({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(us in this){const t=new te({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new F({value:e})}toJSON(){const e={};return cs in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),us in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}return s.CLASS_NAME="PolicyConstraints",s})();const Ta="issuerDomainPolicy",Ba="subjectDomainPolicy",V1=[Ta,Ba];let df=(()=>{class s extends ge{constructor(e={}){super(),this.issuerDomainPolicy=o(e,Ta,s.defaultValues(Ta)),this.subjectDomainPolicy=o(e,Ba,s.defaultValues(Ba)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ta:case Ba:return y;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.issuerDomainPolicy||y}),new Be({name:t.subjectDomainPolicy||y})]})}fromSchema(e){V(e,V1);const t=pe(e,e,s.schema({names:{issuerDomainPolicy:Ta,subjectDomainPolicy:Ba}}));de.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new F({value:[new Be({value:this.issuerDomainPolicy}),new Be({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}return s.CLASS_NAME="PolicyMapping",s})();const Ra="mappings",O1=[Ra];let P1=(()=>{class s extends ge{constructor(e={}){super(),this.mappings=o(e,Ra,s.defaultValues(Ra)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ra?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.mappings||y,value:df.schema()})]})}fromSchema(e){V(e,O1);const t=pe(e,e,s.schema({names:{mappings:Ra}}));de.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,i=>new df({schema:i}))}toSchema(){return new F({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}return s.CLASS_NAME="PolicyMappings",s})();const Ls="notBefore",Fs="notAfter",D1=[Ls,Fs];let U1=(()=>{class s extends ge{constructor(e={}){super(),Ls in e&&(this.notBefore=o(e,Ls,s.defaultValues(Ls))),Fs in e&&(this.notAfter=o(e,Fs,s.defaultValues(Fs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ls:case Fs:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Te({name:t.notBefore||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Te({name:t.notAfter||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){V(e,D1);const t=pe(e,e,s.schema({names:{notBefore:Ls,notAfter:Fs}}));if(de.assertSchema(t,this.className),Ls in t.result){const i=new mt;i.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=i.toDate()}if(Fs in t.result){const i=new mt({valueHex:t.result.notAfter.valueBlock.valueHex});i.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=i.toDate()}}toSchema(){const e=[];return Ls in this&&e.push(new Te({idBlock:{tagClass:3,tagNumber:0},valueHex:new mt({valueDate:this.notBefore}).valueBlock.valueHexView})),Fs in this&&e.push(new Te({idBlock:{tagClass:3,tagNumber:1},valueHex:new mt({valueDate:this.notAfter}).valueBlock.valueHexView})),new F({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}return s.CLASS_NAME="PrivateKeyUsagePeriod",s})();const $n="id",hs="type",Kn="values",M1=[$n,hs],L1=[Kn];let ff=(()=>{class s extends ge{constructor(e={}){super(),this.id=o(e,$n,s.defaultValues($n)),hs in e&&(this.type=o(e,hs,s.defaultValues(hs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $n:return y;case hs:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $n:return t===y;case hs:return t instanceof ut;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.id||y}),new Fe({name:t.type||y,optional:!0})]})}fromSchema(e){V(e,M1);const t=pe(e,e,s.schema({names:{id:$n,type:hs}}));de.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),hs in t.result&&(this.type=t.result.type)}toSchema(){const e=[new Be({value:this.id})];return hs in this&&e.push(this.type),new F({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}return s.CLASS_NAME="QCStatement",s})(),F1=(()=>{class s extends ge{constructor(e={}){super(),this.values=o(e,Kn,s.defaultValues(Kn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Kn?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Kn?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.values||y,value:ff.schema(t.value||{})})]})}fromSchema(e){V(e,L1);const t=pe(e,e,s.schema({names:{values:Kn}}));de.assertSchema(t,this.className),this.values=Array.from(t.result.values,i=>new ff({schema:i}))}toSchema(){return new F({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}return s.CLASS_NAME="QCStatements",s})();var Ri;class js{static register(r,e,t){this.namedCurves[r.toLowerCase()]=this.namedCurves[e]={name:r,id:e,size:t}}static find(r){return this.namedCurves[r.toLowerCase()]||null}}Ri=js,js.namedCurves={},Ri.register("P-256","1.2.840.10045.3.1.7",32),Ri.register("P-384","1.3.132.0.34",48),Ri.register("P-521","1.3.132.0.35",66),Ri.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),Ri.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),Ri.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const Hl="namedCurve";let Hs=(()=>{class s extends ge{constructor(e={}){super(),this.x=o(e,"x",s.defaultValues("x")),this.y=o(e,"y",s.defaultValues("y")),this.namedCurve=o(e,Hl,s.defaultValues(Hl)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"x":case"y":return Nt;case Hl:return y;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"x":case"y":return t instanceof ArrayBuffer&&Q(t,s.defaultValues(e));case Hl:return"string"==typeof t&&t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new Rl}fromSchema(e){const t=C._H.toUint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const i=js.find(this.namedCurve);if(!i)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const a=i.size;if(t.byteLength!==2*a+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=i.name,this.x=t.slice(1,a+1).buffer,this.y=t.slice(1+a,2*a+1).buffer}toSchema(){return new Rl({data:E(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=js.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Oe(J(this.x),!0,!0,!1),y:Oe(J(this.y),!0,!0,!1)}}fromJSON(e){st.assert("json",e,"crv","x","y");let t=0;const i=js.find(e.crv);i&&(this.namedCurve=i.id,t=i.size);const a=m(D(e.x,!0));if(a.byteLength<t){this.x=new ArrayBuffer(t);const h=new Uint8Array(this.x),d=new Uint8Array(a);h.set(d,1)}else this.x=a.slice(0,t);const l=m(D(e.y,!0));if(l.byteLength<t){this.y=new ArrayBuffer(t);const h=new Uint8Array(this.y),d=new Uint8Array(l);h.set(d,1)}else this.y=l.slice(0,t)}}return s.CLASS_NAME="ECPublicKey",s})();const Va="modulus",Oa="publicExponent",j1=[Va,Oa];let mf=(()=>{class s extends ge{constructor(e={}){super(),this.modulus=o(e,Va,s.defaultValues(Va)),this.publicExponent=o(e,Oa,s.defaultValues(Oa)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Va:case Oa:return new te;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.modulus||y}),new te({name:t.publicExponent||y})]})}fromSchema(e){V(e,j1);const t=pe(e,e,s.schema({names:{modulus:Va,publicExponent:Oa}}));de.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new F({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:C.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:C.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){st.assert("json",e,"n","e");const t=m(D(e.n,!0));this.modulus=new te({valueHex:t.slice(0,Math.pow(2,ue(t.byteLength)))}),this.publicExponent=new te({valueHex:m(D(e.e,!0)).slice(0,3)})}}return s.CLASS_NAME="RSAPublicKey",s})();const Pa="algorithm",Da="subjectPublicKey",H1=[Pa,Da];let is=(()=>{class s extends ge{get parsedKey(){if(void 0===this._parsedKey){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===Be.blockName())try{this._parsedKey=new Hs({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=$e(this.subjectPublicKey.valueBlock.valueHexView);if(-1!==e.offset)try{this._parsedKey=new mf({schema:e.result})}catch{}}}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}constructor(e={}){super(),this.algorithm=o(e,Pa,s.defaultValues(Pa)),this.subjectPublicKey=o(e,Da,s.defaultValues(Da));const t=o(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pa:return new ie;case Da:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.algorithm||{}),new Qe({name:t.subjectPublicKey||y})]})}fromSchema(e){V(e,H1);const t=pe(e,e,s.schema({names:{algorithm:{names:{blockName:Pa}},subjectPublicKey:Da}}));de.assertSchema(t,this.className),this.algorithm=new ie({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new F({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Hs({json:e}),this.algorithm=new ie({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Be({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new mf({json:e}),this.algorithm=new ie({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new ut});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new Qe({valueHex:this.parsedKey.toSchema().toBER(!1)})}}importKey(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){try{if(!e)throw new Error("Need to provide publicKey input parameter");const l=$e(yield t.exportKey("spki",e));try{i.fromSchema(l.result)}catch{throw new Error("Error during initializing object from schema")}}catch(a){const l=a instanceof Error?a.message:`${a}`;throw new Error(`Error during exporting public key: ${l}`)}})()}}return s.CLASS_NAME="PublicKeyInfo",s})();const Gn="version",Jn="privateKey",Wt="namedCurve",$s="publicKey",$1=[Gn,Jn,Wt,$s];let pf=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Gn,s.defaultValues(Gn)),this.privateKey=o(e,Jn,s.defaultValues(Jn)),Wt in e&&(this.namedCurve=o(e,Wt,s.defaultValues(Wt))),$s in e&&(this.publicKey=o(e,$s,s.defaultValues($s))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Gn:return 1;case Jn:return new ve;case Wt:return y;case $s:return new Hs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Gn:return t===s.defaultValues(e);case Jn:return t.isEqual(s.defaultValues(e));case Wt:return t===y;case $s:return Hs.compareWithDefault(Wt,t.namedCurve)&&Hs.compareWithDefault("x",t.x)&&Hs.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),new ve({name:t.privateKey||y}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Be({name:t.namedCurve||y})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Qe({name:t.publicKey||y})]})]})}fromSchema(e){V(e,$1);const t=pe(e,e,s.schema({names:{version:Gn,privateKey:Jn,namedCurve:Wt,publicKey:$s}}));if(de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Wt in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),$s in t.result){const i={schema:t.result.publicKey.valueBlock.valueHex};Wt in this&&(i.namedCurve=this.namedCurve),this.publicKey=new Hs(i)}}toSchema(){const e=[new te({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Be({value:this.namedCurve})]})),this.publicKey&&e.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:[new Qe({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new F({value:e})}toJSON(){if(!this.namedCurve||s.compareWithDefault(Wt,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=js.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:C.U$.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const i=this.publicKey.toJSON();t.x=i.x,t.y=i.y}return t}fromJSON(e){st.assert("json",e,"crv","d");let t=0;const i=js.find(e.crv);i&&(this.namedCurve=i.id,t=i.size);const a=C.U$.FromBase64Url(e.d);if(a.byteLength<t){const l=new ArrayBuffer(t),h=new Uint8Array(l),d=new Uint8Array(a);h.set(d,1),this.privateKey=new ve({valueHex:l})}else this.privateKey=new ve({valueHex:a.slice(0,t)});e.x&&e.y&&(this.publicKey=new Hs({json:e}))}}return s.CLASS_NAME="ECPrivateKey",s})();const Ua="prime",Ma="exponent",La="coefficient",K1=[Ua,Ma,La];let Su=(()=>{class s extends ge{constructor(e={}){super(),this.prime=o(e,Ua,s.defaultValues(Ua)),this.exponent=o(e,Ma,s.defaultValues(Ma)),this.coefficient=o(e,La,s.defaultValues(La)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ua:case Ma:case La:return new te;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.prime||y}),new te({name:t.exponent||y}),new te({name:t.coefficient||y})]})}fromSchema(e){V(e,K1);const t=pe(e,e,s.schema({names:{prime:Ua,exponent:Ma,coefficient:La}}));de.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new F({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:C.U$.ToBase64Url(this.prime.valueBlock.valueHexView),d:C.U$.ToBase64Url(this.exponent.valueBlock.valueHexView),t:C.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){st.assert("json",e,"r","d","r"),this.prime=new te({valueHex:C.U$.FromBase64Url(e.r)}),this.exponent=new te({valueHex:C.U$.FromBase64Url(e.d)}),this.coefficient=new te({valueHex:C.U$.FromBase64Url(e.t)})}}return s.CLASS_NAME="OtherPrimeInfo",s})();const Fa="version",ja="modulus",Ha="publicExponent",$a="privateExponent",Ka="prime1",Ga="prime2",Ja="exponent1",za="exponent2",qa="coefficient",Vi="otherPrimeInfos",G1=[Fa,ja,Ha,$a,Ka,Ga,Ja,za,qa,Vi];let gf=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Fa,s.defaultValues(Fa)),this.modulus=o(e,ja,s.defaultValues(ja)),this.publicExponent=o(e,Ha,s.defaultValues(Ha)),this.privateExponent=o(e,$a,s.defaultValues($a)),this.prime1=o(e,Ka,s.defaultValues(Ka)),this.prime2=o(e,Ga,s.defaultValues(Ga)),this.exponent1=o(e,Ja,s.defaultValues(Ja)),this.exponent2=o(e,za,s.defaultValues(za)),this.coefficient=o(e,qa,s.defaultValues(qa)),Vi in e&&(this.otherPrimeInfos=o(e,Vi,s.defaultValues(Vi))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fa:return 0;case ja:case Ha:case $a:case Ka:case Ga:case Ja:case za:case qa:return new te;case Vi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),new te({name:t.modulus||y}),new te({name:t.publicExponent||y}),new te({name:t.privateExponent||y}),new te({name:t.prime1||y}),new te({name:t.prime2||y}),new te({name:t.exponent1||y}),new te({name:t.exponent2||y}),new te({name:t.coefficient||y}),new F({optional:!0,value:[new Ke({name:t.otherPrimeInfosName||y,value:Su.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){V(e,G1);const t=pe(e,e,s.schema({names:{version:Fa,modulus:ja,publicExponent:Ha,privateExponent:$a,prime1:Ka,prime2:Ga,exponent1:Ja,exponent2:za,coefficient:qa,otherPrimeInfo:{names:{blockName:Vi}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Vi in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,i=>new Su({schema:i})))}toSchema(){const e=[];return e.push(new te({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new F({value:Array.from(this.otherPrimeInfos,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={n:C.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:C.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:C.U$.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:C.U$.ToBase64Url(this.prime1.valueBlock.valueHexView),q:C.U$.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:C.U$.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:C.U$.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:C.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,t=>t.toJSON())),e}fromJSON(e){st.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new te({valueHex:C.U$.FromBase64Url(e.n)}),this.publicExponent=new te({valueHex:C.U$.FromBase64Url(e.e)}),this.privateExponent=new te({valueHex:C.U$.FromBase64Url(e.d)}),this.prime1=new te({valueHex:C.U$.FromBase64Url(e.p)}),this.prime2=new te({valueHex:C.U$.FromBase64Url(e.q)}),this.exponent1=new te({valueHex:C.U$.FromBase64Url(e.dp)}),this.exponent2=new te({valueHex:C.U$.FromBase64Url(e.dq)}),this.coefficient=new te({valueHex:C.U$.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,t=>new Su({json:t})))}}return s.CLASS_NAME="RSAPrivateKey",s})();const Wa="version",Xa="privateKeyAlgorithm",Ya="privateKey",Oi="attributes",$l="parsedKey",J1=[Wa,Xa,Ya,Oi];let zn=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Wa,s.defaultValues(Wa)),this.privateKeyAlgorithm=o(e,Xa,s.defaultValues(Xa)),this.privateKey=o(e,Ya,s.defaultValues(Ya)),Oi in e&&(this.attributes=o(e,Oi,s.defaultValues(Oi))),$l in e&&(this.parsedKey=o(e,$l,s.defaultValues($l))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wa:return 0;case Xa:return new ie;case Ya:return new ve;case Oi:return[];case $l:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),ie.schema(t.privateKeyAlgorithm||{}),new ve({name:t.privateKey||y}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({name:t.attributes||y,value:it.schema()})]})]})}fromSchema(e){V(e,J1);const t=pe(e,e,s.schema({names:{version:Wa,privateKeyAlgorithm:{names:{blockName:Xa}},privateKey:Ya,attributes:Oi}}));switch(de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new ie({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,Oi in t.result&&(this.attributes=Array.from(t.result.attributes,i=>new it({schema:i}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const i=$e(this.privateKey.valueBlock.valueHexView);-1!==i.offset&&(this.parsedKey=new gf({schema:i.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof Be){const i=$e(this.privateKey.valueBlock.valueHexView);-1!==i.offset&&(this.parsedKey=new pf({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:i.result}))}}}toSchema(){const e=[new te({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,t=>t.toSchema())})),new F({value:e})}toJSON(){if(!this.parsedKey){const i={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(i.attributes=Array.from(this.attributes,a=>a.toJSON())),i}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new pf({json:e}),this.privateKeyAlgorithm=new ie({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Be({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new gf({json:e}),this.privateKeyAlgorithm=new ie({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new ut});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new ve({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}return s.CLASS_NAME="PrivateKeyInfo",s})();const qn="contentType",Wn="contentEncryptionAlgorithm",Pi="encryptedContent",z1=[qn,Wn,Pi];let Dt=(()=>{class s extends ge{constructor(e={}){if(super(),this.contentType=o(e,qn,s.defaultValues(qn)),this.contentEncryptionAlgorithm=o(e,Wn,s.defaultValues(Wn)),Pi in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed&&!e.disableSplit)){const t=new ve({idBlock:{isConstructed:!0},isConstructed:!0});let i=0;const a=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let l=a.byteLength;for(;l>0;){const h=new Uint8Array(a,i,i+1024>a.byteLength?a.byteLength-i:1024),d=new ArrayBuffer(h.length),g=new Uint8Array(d);for(let T=0;T<g.length;T++)g[T]=h[T];t.valueBlock.value.push(new ve({valueHex:d})),l-=h.length,i+=h.length}this.encryptedContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qn:return y;case Wn:return new ie;case Pi:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case qn:return t===y;case Wn:return t.algorithmId===y&&!("algorithmParams"in t);case Pi:return t.isEqual(s.defaultValues(Pi));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.contentType||y}),ie.schema(t.contentEncryptionAlgorithm||{}),new pt({value:[new Y({name:t.encryptedContent||y,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({value:new ve})]}),new Te({name:t.encryptedContent||y,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){V(e,z1);const t=pe(e,e,s.schema({names:{contentType:qn,contentEncryptionAlgorithm:{names:{blockName:Wn}},encryptedContent:Pi}}));de.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new ie({schema:t.result.contentEncryptionAlgorithm}),Pi in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new Be({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const i=this.encryptedContent;i.idBlock.tagClass=3,i.idBlock.tagNumber=0,i.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(i)}return new F({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return ve.prototype.getValue.call(this.encryptedContent)}}return s.CLASS_NAME="EncryptedContentInfo",s})();const Ks="hashAlgorithm",Gs="maskGenAlgorithm",Js="saltLength",zs="trailerField",q1=[Ks,Gs,Js,zs];let bu=(()=>{class s extends ge{constructor(e={}){super(),this.hashAlgorithm=o(e,Ks,s.defaultValues(Ks)),this.maskGenAlgorithm=o(e,Gs,s.defaultValues(Gs)),this.saltLength=o(e,Js,s.defaultValues(Js)),this.trailerField=o(e,zs,s.defaultValues(zs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ks:return new ie({algorithmId:"1.3.14.3.2.26",algorithmParams:new ut});case Gs:return new ie({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new ie({algorithmId:"1.3.14.3.2.26",algorithmParams:new ut}).toSchema()});case Js:return 20;case zs:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[ie.schema(t.hashAlgorithm||{})]}),new Y({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[ie.schema(t.maskGenAlgorithm||{})]}),new Y({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new te({name:t.saltLength||y})]}),new Y({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new te({name:t.trailerField||y})]})]})}fromSchema(e){V(e,q1);const t=pe(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:Ks}},maskGenAlgorithm:{names:{blockName:Gs}},saltLength:Js,trailerField:zs}}));de.assertSchema(t,this.className),Ks in t.result&&(this.hashAlgorithm=new ie({schema:t.result.hashAlgorithm})),Gs in t.result&&(this.maskGenAlgorithm=new ie({schema:t.result.maskGenAlgorithm})),Js in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),zs in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(s.defaultValues(Ks))||e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(s.defaultValues(Gs))||e.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==s.defaultValues(Js)&&e.push(new Y({idBlock:{tagClass:3,tagNumber:2},value:[new te({value:this.saltLength})]})),this.trailerField!==s.defaultValues(zs)&&e.push(new Y({idBlock:{tagClass:3,tagNumber:3},value:[new te({value:this.trailerField})]})),new F({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(s.defaultValues(Ks))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(s.defaultValues(Gs))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==s.defaultValues(Js)&&(e.saltLength=this.saltLength),this.trailerField!==s.defaultValues(zs)&&(e.trailerField=this.trailerField),e}}return s.CLASS_NAME="RSASSAPSSParams",s})();const Xn="salt",Za="iterationCount",Xt="keyLength",ds="prf",W1=[Xn,Za,Xt,ds];let Qa=(()=>{class s extends ge{constructor(e={}){super(),this.salt=o(e,Xn,s.defaultValues(Xn)),this.iterationCount=o(e,Za,s.defaultValues(Za)),Xt in e&&(this.keyLength=o(e,Xt,s.defaultValues(Xt))),ds in e&&(this.prf=o(e,ds,s.defaultValues(ds))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xn:return{};case Za:return-1;case Xt:return 0;case ds:return new ie({algorithmId:"1.3.14.3.2.26",algorithmParams:new ut});default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new pt({value:[new ve({name:t.saltPrimitive||y}),ie.schema(t.saltConstructed||{})]}),new te({name:t.iterationCount||y}),new te({name:t.keyLength||y,optional:!0}),ie.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){V(e,W1);const t=pe(e,e,s.schema({names:{saltPrimitive:Xn,saltConstructed:{names:{blockName:Xn}},iterationCount:Za,keyLength:Xt,prf:{names:{blockName:ds,optional:!0}}}}));de.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,Xt in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),ds in t.result&&(this.prf=new ie({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new te({value:this.iterationCount})),Xt in this&&s.defaultValues(Xt)!==this.keyLength&&e.push(new te({value:this.keyLength})),this.prf&&!1===s.defaultValues(ds).isEqual(this.prf)&&e.push(this.prf.toSchema()),new F({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return Xt in this&&s.defaultValues(Xt)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&!1===s.defaultValues(ds).isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}return s.CLASS_NAME="PBKDF2Params",s})();const eo="keyDerivationFunc",to="encryptionScheme",X1=[eo,to];let wf=(()=>{class s extends ge{constructor(e={}){super(),this.keyDerivationFunc=o(e,eo,s.defaultValues(eo)),this.encryptionScheme=o(e,to,s.defaultValues(to)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eo:case to:return new ie;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.keyDerivationFunc||{}),ie.schema(t.encryptionScheme||{})]})}fromSchema(e){V(e,X1);const t=pe(e,e,s.schema({names:{keyDerivationFunc:{names:{blockName:eo}},encryptionScheme:{names:{blockName:to}}}}));de.assertSchema(t,this.className),this.keyDerivationFunc=new ie({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new ie({schema:t.result.encryptionScheme})}toSchema(){return new F({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}return s.CLASS_NAME="PBES2Params",s})();class Y1{constructor(r){this.crypto=r.crypto,this.subtle="webkitSubtle"in r.crypto?r.crypto.webkitSubtle:r.crypto.subtle,this.name=o(r,"name",y)}encrypt(...r){var e=this;return(0,_.A)(function*(){return e.subtle.encrypt(...r)})()}decrypt(...r){var e=this;return(0,_.A)(function*(){return e.subtle.decrypt(...r)})()}sign(...r){return this.subtle.sign(...r)}verify(...r){var e=this;return(0,_.A)(function*(){return e.subtle.verify(...r)})()}digest(...r){var e=this;return(0,_.A)(function*(){return e.subtle.digest(...r)})()}generateKey(...r){var e=this;return(0,_.A)(function*(){return e.subtle.generateKey(...r)})()}deriveKey(...r){var e=this;return(0,_.A)(function*(){return e.subtle.deriveKey(...r)})()}deriveBits(...r){var e=this;return(0,_.A)(function*(){return e.subtle.deriveBits(...r)})()}wrapKey(...r){var e=this;return(0,_.A)(function*(){return e.subtle.wrapKey(...r)})()}unwrapKey(...r){var e=this;return(0,_.A)(function*(){return e.subtle.unwrapKey(...r)})()}exportKey(...r){return this.subtle.exportKey(...r)}importKey(...r){return this.subtle.importKey(...r)}getRandomValues(r){return this.crypto.getRandomValues(r)}}function yf(s,r,e,t,i){return Au.apply(this,arguments)}function Au(){return(Au=(0,_.A)(function*(s,r,e,t,i){let a,l,h;switch(s.toUpperCase()){case"SHA-1":a=20,l=64,h=Sm;break;case"SHA-256":a=32,l=64,h=Am;break;case"SHA-384":a=48,l=128,h=Hm;break;case"SHA-512":a=64,l=128,h=jm;break;default:throw new Error("Unsupported hashing algorithm")}const d=new Uint8Array(e);let g=(new TextDecoder).decode(e);(new TextEncoder).encode(g).some((me,we)=>me!==d[we])&&(g=String.fromCharCode(...d));const M=new Uint8Array(2*g.length+2),z=new DataView(M.buffer);for(let me=0;me<g.length;me++)z.setUint16(2*me,g.charCodeAt(me),!1);z.setUint16(2*g.length,0,!1);const $=new Uint8Array(l).fill(3),le=new Uint8Array(t),ke=new Uint8Array(l*Math.ceil(le.length/l)).map((me,we)=>le[we%le.length]),ye=new Uint8Array(l*Math.ceil(M.length/l)).map((me,we)=>M[we%M.length]);let ae=new Uint8Array(ke.length+ye.length);ae.set(ke),ae.set(ye,ke.length);const Se=Math.ceil((r>>3)/a),ce=[];for(let me=0;me<Se;me++){let we=new Uint8Array($.length+ae.length);we.set($),we.set(ae,$.length);for(let Ue=0;Ue<i;Ue++)we=h(we);const _e=new Uint8Array(l).map((Ue,We)=>we[We%we.length]),Ne=Math.ceil(le.length/l)+Math.ceil(M.length/l),Ie=[];for(let Ue=0;Ue<Ne;Ue++){const We=Array.from(ae.slice(Ue*l,(Ue+1)*l));let _t=511;for(let Xe=_e.length-1;Xe>=0;Xe--)_t>>=8,_t+=_e[Xe]+(We[Xe]||0),We[Xe]=255&_t;Ie.push(...We)}ae=new Uint8Array(Ie),ce.push(...we)}return new Uint8Array(ce.slice(0,r>>3)).buffer})).apply(this,arguments)}function Sf(s){const r="string"==typeof s?{name:s}:s;return"hash"in r?{...r,hash:Sf(r.hash)}:r}class Kl extends Y1{importKey(r,e,t,i,a){var l=this;return(0,_.A)(function*(){var h,d,g,T,M,z;let $={};const le=Sf(t);switch(r.toLowerCase()){case"raw":return l.subtle.importKey("raw",e,t,i,a);case"spki":{const ke=$e(C._H.toArrayBuffer(e));de.assert(ke,"keyData");const ye=new is;try{ye.fromSchema(ke.result)}catch{throw new ht("Incorrect keyData")}switch(le.name.toUpperCase()){case"RSA-PSS":if(!le.hash)throw new st("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(le.hash.name.toUpperCase()){case"SHA-1":$.alg="PS1";break;case"SHA-256":$.alg="PS256";break;case"SHA-384":$.alg="PS384";break;case"SHA-512":$.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${le.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(a=["verify"],$.kty="RSA",$.ext=i,$.key_ops=a,"1.2.840.113549.1.1.1"!==ye.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${ye.algorithm.algorithmId}`);if(!$.alg){if(!le.hash)throw new st("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(le.hash.name.toUpperCase()){case"SHA-1":$.alg="RS1";break;case"SHA-256":$.alg="RS256";break;case"SHA-384":$.alg="RS384";break;case"SHA-512":$.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${le.hash.name.toUpperCase()}`)}}const ae=ye.toJSON();Object.assign($,ae)}break;case"ECDSA":a=["verify"];case"ECDH":{if($={kty:"EC",ext:i,key_ops:a},"1.2.840.10045.2.1"!==ye.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${ye.algorithm.algorithmId}`);const ae=ye.toJSON();Object.assign($,ae)}break;case"RSA-OAEP":{if($.kty="RSA",$.ext=i,$.key_ops=a,"safari"===l.name.toLowerCase())$.alg="RSA-OAEP";else{if(!le.hash)throw new st("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(le.hash.name.toUpperCase()){case"SHA-1":$.alg="RSA-OAEP";break;case"SHA-256":$.alg="RSA-OAEP-256";break;case"SHA-384":$.alg="RSA-OAEP-384";break;case"SHA-512":$.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${le.hash.name.toUpperCase()}`)}}const ae=ye.toJSON();Object.assign($,ae)}break;case"RSAES-PKCS1-V1_5":{$.kty="RSA",$.ext=i,$.key_ops=a,$.alg="PS1";const ae=ye.toJSON();Object.assign($,ae)}break;default:throw new Error(`Incorrect algorithm name: ${le.name.toUpperCase()}`)}}break;case"pkcs8":{const ke=new zn,ye=$e(C._H.toArrayBuffer(e));de.assert(ye,"keyData");try{ke.fromSchema(ye.result)}catch{throw new Error("Incorrect keyData")}if(!ke.parsedKey)throw new Error("Incorrect keyData");switch(le.name.toUpperCase()){case"RSA-PSS":switch(null===(h=le.hash)||void 0===h?void 0:h.name.toUpperCase()){case"SHA-1":$.alg="PS1";break;case"SHA-256":$.alg="PS256";break;case"SHA-384":$.alg="PS384";break;case"SHA-512":$.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(d=le.hash)||void 0===d?void 0:d.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(a=["sign"],$.kty="RSA",$.ext=i,$.key_ops=a,"1.2.840.113549.1.1.1"!==ke.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect private key algorithm: ${ke.privateKeyAlgorithm.algorithmId}`);if(!("alg"in $))switch(null===(g=le.hash)||void 0===g?void 0:g.name.toUpperCase()){case"SHA-1":$.alg="RS1";break;case"SHA-256":$.alg="RS256";break;case"SHA-384":$.alg="RS384";break;case"SHA-512":$.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(T=le.hash)||void 0===T?void 0:T.name.toUpperCase()}`)}const ae=ke.toJSON();Object.assign($,ae)}break;case"ECDSA":a=["sign"];case"ECDH":{if($={kty:"EC",ext:i,key_ops:a},"1.2.840.10045.2.1"!==ke.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect algorithm: ${ke.privateKeyAlgorithm.algorithmId}`);const ae=ke.toJSON();Object.assign($,ae)}break;case"RSA-OAEP":{if($.kty="RSA",$.ext=i,$.key_ops=a,"safari"===l.name.toLowerCase())$.alg="RSA-OAEP";else switch(null===(M=le.hash)||void 0===M?void 0:M.name.toUpperCase()){case"SHA-1":$.alg="RSA-OAEP";break;case"SHA-256":$.alg="RSA-OAEP-256";break;case"SHA-384":$.alg="RSA-OAEP-384";break;case"SHA-512":$.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(z=le.hash)||void 0===z?void 0:z.name.toUpperCase()}`)}const ae=ke.toJSON();Object.assign($,ae)}break;case"RSAES-PKCS1-V1_5":{a=["decrypt"],$.kty="RSA",$.ext=i,$.key_ops=a,$.alg="PS1";const ae=ke.toJSON();Object.assign($,ae)}break;default:throw new Error(`Incorrect algorithm name: ${le.name.toUpperCase()}`)}}break;case"jwk":$=e;break;default:throw new Error(`Incorrect format: ${r}`)}if("safari"===l.name.toLowerCase())try{return l.subtle.importKey("jwk",m(JSON.stringify($)),t,i,a)}catch{return l.subtle.importKey("jwk",$,t,i,a)}return l.subtle.importKey("jwk",$,t,i,a)})()}exportKey(r,e){var t=this;return(0,_.A)(function*(){let i=yield t.subtle.exportKey("jwk",e);switch("safari"===t.name.toLowerCase()&&i instanceof ArrayBuffer&&(i=JSON.parse(J(i))),r.toLowerCase()){case"raw":return t.subtle.exportKey("raw",e);case"spki":{const a=new is;try{a.fromJSON(i)}catch{throw new Error("Incorrect key data")}return a.toSchema().toBER(!1)}case"pkcs8":{const a=new zn;try{a.fromJSON(i)}catch{throw new Error("Incorrect key data")}return a.toSchema().toBER(!1)}case"jwk":return i;default:throw new Error(`Incorrect format: ${r}`)}})()}convert(r,e,t,i,a,l){var h=this;return(0,_.A)(function*(){if(r.toLowerCase()===e.toLowerCase())return t;const d=yield h.importKey(r,t,i,a,l);return h.exportKey(e,d)})()}getAlgorithmByOID(r,e=!1,t){switch(r){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(e)throw new Error(`Unsupported algorithm identifier ${t?`for ${t} `:y}: ${r}`);return{}}getOIDByAlgorithm(r,e=!1,t){let i=y;switch(r.name.toUpperCase()){case"RSAES-PKCS1-V1_5":i="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.1.1.5";break;case"SHA-256":i="1.2.840.113549.1.1.11";break;case"SHA-384":i="1.2.840.113549.1.1.12";break;case"SHA-512":i="1.2.840.113549.1.1.13"}break;case"RSA-PSS":i="1.2.840.113549.1.1.10";break;case"RSA-OAEP":i="1.2.840.113549.1.1.7";break;case"ECDSA":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.10045.4.1";break;case"SHA-256":i="1.2.840.10045.4.3.2";break;case"SHA-384":i="1.2.840.10045.4.3.3";break;case"SHA-512":i="1.2.840.10045.4.3.4"}break;case"ECDH":switch(r.kdf.toUpperCase()){case"SHA-1":i="1.3.133.16.840.63.0.2";break;case"SHA-256":i="1.3.132.1.11.1";break;case"SHA-384":i="1.3.132.1.11.2";break;case"SHA-512":i="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.2";break;case 192:i="2.16.840.1.101.3.4.1.22";break;case 256:i="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.6";break;case 192:i="2.16.840.1.101.3.4.1.26";break;case 256:i="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.4";break;case 192:i="2.16.840.1.101.3.4.1.24";break;case 256:i="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.5";break;case 192:i="2.16.840.1.101.3.4.1.25";break;case 256:i="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.2.7";break;case"SHA-256":i="1.2.840.113549.2.9";break;case"SHA-384":i="1.2.840.113549.2.10";break;case"SHA-512":i="1.2.840.113549.2.11"}break;case"DH":i="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":i="1.3.14.3.2.26";break;case"SHA-256":i="2.16.840.1.101.3.4.2.1";break;case"SHA-384":i="2.16.840.1.101.3.4.2.2";break;case"SHA-512":i="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":i="1.2.840.113549.1.5.12";break;case"P-256":i="1.2.840.10045.3.1.7";break;case"P-384":i="1.3.132.0.34";break;case"P-521":i="1.3.132.0.35"}if(!i&&e)throw new Error(`Unsupported algorithm ${t?`for ${t} `:y}: ${r.name}`);return i}getAlgorithmParameters(r,e){let t={algorithm:{},usages:[]};switch(r.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(e.toLowerCase()){case"generatekey":t={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":t={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(e.toLowerCase()){case"sign":case"verify":t={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":t={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":t={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(e.toLowerCase()){case"encrypt":case"decrypt":t={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":t={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":t={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(e.toLowerCase()){case"generatekey":t={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":t={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":t={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(e.toLowerCase()){case"exportkey":case"importkey":case"generatekey":t={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":t={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":t={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(e.toLowerCase()){case"sign":case"verify":t={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==e.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};t={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==e.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};t={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return t}getHashAlgorithm(r){let e=y;switch(r.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":e="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":e="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":e="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":e="SHA-512";break;case"1.2.840.113549.1.1.10":try{const t=new bu({schema:r.algorithmParams});if(t.hashAlgorithm){const i=this.getAlgorithmByOID(t.hashAlgorithm.algorithmId);if(!("name"in i))return y;e=i.name}else e="SHA-1"}catch{}}return e}encryptEncryptedContentInfo(r){var e=this;return(0,_.A)(function*(){st.assert(r,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=e.getOIDByAlgorithm(r.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),i=e.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),a=e.getOIDByAlgorithm({name:"HMAC",hash:{name:r.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),l=new ArrayBuffer(16),h=new Uint8Array(l);e.getRandomValues(h);const d=new ArrayBuffer(64),g=new Uint8Array(d);e.getRandomValues(g);const T=new Uint8Array(r.contentToEncrypt),M=new Qa({salt:new ve({valueHex:d}),iterationCount:r.iterationCount,prf:new ie({algorithmId:a,algorithmParams:new ut})}),z=new Uint8Array(r.password),$=yield e.importKey("raw",z,"PBKDF2",!1,["deriveKey"]),le=yield e.deriveKey({name:"PBKDF2",hash:{name:r.hmacHashAlgorithm},salt:g,iterations:r.iterationCount},$,r.contentEncryptionAlgorithm,!1,["encrypt"]),ke=yield e.encrypt({name:r.contentEncryptionAlgorithm.name,iv:h},le,T),ye=new wf({keyDerivationFunc:new ie({algorithmId:i,algorithmParams:M.toSchema()}),encryptionScheme:new ie({algorithmId:t,algorithmParams:new ve({valueHex:l})})});return new Dt({contentType:r.contentType,contentEncryptionAlgorithm:new ie({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:ye.toSchema()}),encryptedContent:new ve({valueHex:ke})})})()}decryptEncryptedContentInfo(r){var e=this;return(0,_.A)(function*(){if(st.assert(r,"password","encryptedContentInfo"),"1.2.840.113549.1.5.13"!==r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)throw new Error(`Unknown "contentEncryptionAlgorithm": ${r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t,i;try{t=new wf({schema:r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}try{i=new Qa({schema:t.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const a=e.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),h=new Uint8Array(t.encryptionScheme.algorithmParams.valueBlock.valueHex),g=new Uint8Array(i.salt.valueBlock.valueHex),T=i.iterationCount;let M="SHA-1";i.prf&&(M=e.getAlgorithmByOID(i.prf.algorithmId,!0).hash.name);const z=yield e.importKey("raw",r.password,"PBKDF2",!1,["deriveKey"]),$=yield e.deriveKey({name:"PBKDF2",hash:{name:M},salt:g,iterations:T},z,a,!1,["decrypt"]),le=r.encryptedContentInfo.getEncryptedContent();return e.decrypt({name:a.name,iv:h},$,le)})()}stampDataWithPassword(r){var e=this;return(0,_.A)(function*(){if(!(r instanceof Object))throw new Error('Parameters must have type "Object"');let t;switch(st.assert(r,"password","hashAlgorithm","iterationCount","salt","contentToStamp"),r.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${r.hashAlgorithm}`)}const i={name:"HMAC",length:t,hash:{name:r.hashAlgorithm}},a=yield yf(r.hashAlgorithm,t,r.password,r.salt,r.iterationCount),l=yield e.importKey("raw",new Uint8Array(a),i,!1,["sign"]);return e.sign(i,l,new Uint8Array(r.contentToStamp))})()}verifyDataStampedWithPassword(r){var e=this;return(0,_.A)(function*(){st.assert(r,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(r.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${r.hashAlgorithm}`)}const i={name:"HMAC",length:t,hash:{name:r.hashAlgorithm}},a=yield yf(r.hashAlgorithm,t,r.password,r.salt,r.iterationCount),l=yield e.importKey("raw",new Uint8Array(a),i,!1,["verify"]);return e.verify(i,l,new Uint8Array(r.signatureToVerify),new Uint8Array(r.contentToVerify))})()}getSignatureParameters(r,e="SHA-1"){var t=this;return(0,_.A)(function*(){t.getOIDByAlgorithm({name:e},!0,"hashAlgorithm");const i=new ie,a=t.getAlgorithmParameters(r.algorithm.name,"sign");if(!Object.keys(a.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const l=a.algorithm;switch(l.hash.name="hash"in r.algorithm&&r.algorithm.hash&&r.algorithm.hash.name?r.algorithm.hash.name:e,r.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":i.algorithmId=t.getOIDByAlgorithm(l,!0);break;case"RSA-PSS":{switch(l.hash.name.toUpperCase()){case"SHA-256":l.saltLength=32;break;case"SHA-384":l.saltLength=48;break;case"SHA-512":l.saltLength=64}const h={};if("SHA-1"!==l.hash.name.toUpperCase()){const g=t.getOIDByAlgorithm({name:l.hash.name},!0,"hashAlgorithm");h.hashAlgorithm=new ie({algorithmId:g,algorithmParams:new ut}),h.maskGenAlgorithm=new ie({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:h.hashAlgorithm.toSchema()})}20!==l.saltLength&&(h.saltLength=l.saltLength);const d=new bu(h);i.algorithmId="1.2.840.113549.1.1.10",i.algorithmParams=d.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${r.algorithm.name}`)}return{signatureAlgorithm:i,parameters:a}})()}signWithPrivateKey(r,e,t){var i=this;return(0,_.A)(function*(){const a=yield i.sign(t.algorithm,e,r);return"ECDSA"===t.algorithm.name?function Q1(s){if(s.byteLength%2!=0)return Nt;const r=s.byteLength/2,e=new ArrayBuffer(r);new Uint8Array(e).set(new Uint8Array(s,0,r));const i=new te({valueHex:e}),a=new ArrayBuffer(r);new Uint8Array(a).set(new Uint8Array(s,r,r));const h=new te({valueHex:a});return new F({value:[i.convertToDER(),h.convertToDER()]}).toBER(!1)}(a):a})()}fillPublicKeyParameters(r,e){const t={},i=this.getHashAlgorithm(e);if(i===y)throw new Error(`Unsupported signature algorithm: ${e.algorithmId}`);let a;a="1.2.840.113549.1.1.10"===e.algorithmId?e.algorithmId:r.algorithm.algorithmId;const l=this.getAlgorithmByOID(a,!0);if(t.algorithm=this.getAlgorithmParameters(l.name,"importKey"),"hash"in t.algorithm.algorithm&&(t.algorithm.algorithm.hash.name=i),"ECDSA"===l.name){const h=r.algorithm;if(!h.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const d=h.algorithmParams;if("idBlock"in h.algorithmParams&&(1!==d.idBlock.tagClass||6!==d.idBlock.tagNumber))throw new Error("Incorrect type for ECDSA public key parameters");const g=this.getAlgorithmByOID(d.valueBlock.toString(),!0);t.algorithm.algorithm.namedCurve=g.name}return t}getPublicKey(r,e,t){var i=this;return(0,_.A)(function*(){t||(t=i.fillPublicKeyParameters(r,e));const a=r.toSchema().toBER(!1);return i.importKey("spki",a,t.algorithm.algorithm,!0,t.algorithm.usages)})()}verifyWithPublicKey(r,e,t,i,a){var l=this;return(0,_.A)(function*(){let h;if(a){const T={};let M;M="1.2.840.113549.1.1.10"===i.algorithmId?i.algorithmId:t.algorithm.algorithmId;const z=l.getAlgorithmByOID(M,!0);if(T.algorithm=l.getAlgorithmParameters(z.name,"importKey"),"hash"in T.algorithm.algorithm&&(T.algorithm.algorithm.hash.name=a),"ECDSA"===z.name){let $=!1;if("algorithmParams"in t.algorithm&&"idBlock"in t.algorithm.algorithmParams&&1===t.algorithm.algorithmParams.idBlock.tagClass&&6===t.algorithm.algorithmParams.idBlock.tagNumber&&($=!0),!1===$)throw new Error("Incorrect type for ECDSA public key parameters");const le=l.getAlgorithmByOID(t.algorithm.algorithmParams.valueBlock.toString(),!0);T.algorithm.algorithm.namedCurve=le.name}h=yield l.getPublicKey(t,null,T)}else{if(!(a=l.getHashAlgorithm(i)))throw new Error(`Unsupported signature algorithm: ${i.algorithmId}`);h=yield l.getPublicKey(t,i)}const d=l.getAlgorithmParameters(h.algorithm.name,"verify");"hash"in d.algorithm&&(d.algorithm.hash.name=a);let g=e.valueBlock.valueHexView;if("ECDSA"===h.algorithm.name){const T=js.find(h.algorithm.namedCurve);if(!T)throw new Error("Unsupported named curve in use");const M=$e(g);de.assert(M,"Signature value"),g=function ep(s,r){if(!(s instanceof F&&2===s.valueBlock.value.length&&s.valueBlock.value[0]instanceof te&&s.valueBlock.value[1]instanceof te))return Nt;const e=s.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,t=s.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,i=new Uint8Array(2*r);return i.set(e,r-e.byteLength),i.set(t,2*r-t.byteLength),i.buffer}(M.result,T.size)}if("RSA-PSS"===h.algorithm.name){const T=new bu({schema:i.algorithmParams});d.algorithm.saltLength="saltLength"in T?T.saltLength:20;let M="SHA-1";"hashAlgorithm"in T&&(M=l.getAlgorithmByOID(T.hashAlgorithm.algorithmId,!0).name),d.algorithm.hash.name=M}return l.verify(d.algorithm,h,g,r)})()}}let bf={name:"none",crypto:null};function Af(s){return!(!s||"object"!=typeof s||!("crypto"in s))}function _f(s,...r){let e=null;if(r.length<2)e=r.length?r[0]:typeof self<"u"&&self.crypto?new Kl({name:"browser",crypto:self.crypto}):null;else{const t=r[0],i=r[1];Af(i)?e=i:Af(t)?e=t:"subtle"in t&&"getRandomValues"in t&&(e=new Kl({crypto:t}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if("object"!=typeof global[process.pid])throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if("object"!=typeof global[process.pid].pkijs)throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:s,crypto:e}}else bf={name:s,crypto:e}}function Ge(s=!1){const r=function Z1(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let s;try{s=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return s}return bf}();if(!r.crypto&&s)throw new Error("Unable to create WebCrypto object");return r.crypto}function _u(s){return Ge(!0).getRandomValues(s)}function tp(s,r,e,t,i){return ku.apply(this,arguments)}function ku(){return(ku=(0,_.A)(function*(s,r,e,t,i){switch(s.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new ht(`Unknown hash function: ${s}`)}if(ht.assert(r,"zBuffer","ArrayBuffer"),0===r.byteLength)throw new ht("'zBuffer' has zero length, error");if(ht.assert(t,"SharedInfo","ArrayBuffer"),e>255)throw new ht("Please set 'Counter' argument to value less or equal to 255");const a=new ArrayBuffer(4),l=new Uint8Array(a);l[0]=0,l[1]=0,l[2]=0,l[3]=e;let h=Nt;return h=E(h,r),h=E(h,a),h=E(h,t),{counter:e,result:yield i.digest({name:s},h)}})).apply(this,arguments)}function kf(s,r,e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,_.A)(function*(s,r,e,t,i=Ge(!0)){let a=0,l=1;switch(s.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:throw new ht(`Unknown hash function: ${s}`)}if(ht.assert(r,"Zbuffer","ArrayBuffer"),0===r.byteLength)throw new ht("'Zbuffer' has zero length, error");ht.assert(t,"SharedInfo","ArrayBuffer");const h=e/a;Math.floor(h)>0&&(l=Math.floor(h),h-l>0&&l++);const d=[];for(let z=1;z<=l;z++)d.push(yield tp(s,r,z,t,i));let g=Nt,T=1,M=!0;for(;M;){M=!1;for(const z of d)if(z.counter===T){g=E(g,z.result),M=!0;break}T++}if(g.byteLength>(e>>=3)){const z=new ArrayBuffer(e),$=new Uint8Array(z),le=new Uint8Array(g);for(let ke=0;ke<e;ke++)$[ke]=le[ke];return z}return g})).apply(this,arguments)}const Cu="version",Nu="logID",Iu="extensions",xu="timestamp",Tu="hashAlgorithm",Bu="signatureAlgorithm",Ru="signature",Rf="anonymous";let sp=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Cu,s.defaultValues(Cu)),this.logID=o(e,Nu,s.defaultValues(Nu)),this.timestamp=o(e,xu,s.defaultValues(xu)),this.extensions=o(e,Iu,s.defaultValues(Iu)),this.hashAlgorithm=o(e,Tu,s.defaultValues(Tu)),this.signatureAlgorithm=o(e,Bu,s.defaultValues(Bu)),this.signature=o(e,Ru,s.defaultValues(Ru)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cu:return 0;case Nu:case Iu:return Nt;case xu:return new Date(0);case Tu:case Bu:return y;case Ru:return new Fe;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof Rl))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new ua({stream:new St({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(v(new Uint8Array(e.getBlock(8)),8));const i=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(i)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Rf;break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const a=e.getUint16(),h=$e(new Uint8Array(e.getBlock(a)).buffer.slice(0));if(de.assert(h,"SignedCertificateTimestamp"),this.signature=h.result,t!==47+i+a)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new Rl({data:e.stream.buffer})}toStream(){const e=new ua;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),i=new Uint8Array(t),a=b(this.timestamp.valueOf(),8);let l,h;switch(i.set(new Uint8Array(a),8-a.byteLength),e.appendView(i),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":l=0;break;case"md5":l=1;break;case"sha1":l=2;break;case"sha224":l=3;break;case"sha256":l=4;break;case"sha384":l=5;break;case"sha512":l=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}switch(e.appendChar(l),this.signatureAlgorithm.toLowerCase()){case Rf:h=0;break;case"rsa":h=1;break;case"dsa":h=2;break;case"ecdsa":h=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(h);const d=this.signature.toBER(!1);return e.appendUint16(d.byteLength),e.appendView(new Uint8Array(d)),e}toJSON(){return{version:this.version,logID:A(this.logID),timestamp:this.timestamp,extensions:A(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}verify(e,t,i=0,a=Ge(!0)){var l=this;return(0,_.A)(function*(){const h=Oe(J(l.logID));let d=null;const g=new ua;for(const ke of e)if(ke.log_id===h){d=ke.key;break}if(!d)throw new Error(`Public key not found for CT with logId: ${h}`);const T=m(D(d)),M=is.fromBER(T);g.appendChar(0),g.appendChar(0);const z=new ArrayBuffer(8),$=new Uint8Array(z),le=b(l.timestamp.valueOf(),8);return $.set(new Uint8Array(le),8-le.byteLength),g.appendView($),g.appendUint16(i),0===i&&g.appendUint24(t.byteLength),g.appendView(new Uint8Array(t)),g.appendUint16(l.extensions.byteLength),0!==l.extensions.byteLength&&g.appendView(new Uint8Array(l.extensions)),a.verifyWithPublicKey(g.buffer.slice(0,g.length),new ve({valueHex:l.signature.toBER(!1)}),M,{algorithmId:y},"SHA-256")})()}}return s.CLASS_NAME="SignedCertificateTimestamp",s})();const Gl="timestamps";let ip=(()=>{class s extends ge{constructor(e={}){super(),this.timestamps=o(e,Gl,s.defaultValues(Gl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Gl?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Gl?0===t.length:super.defaultValues(e)}static schema(e={}){var t;const i=o(e,"names",{});return null!==(t=i.optional)&&void 0!==t||(i.optional=!1),new ve({name:i.blockName||"SignedCertificateTimestampList",optional:i.optional})}fromSchema(e){if(!(e instanceof ve))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new ua({stream:new St({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new sp({stream:t}))}toSchema(){const e=new ua;let t=0;const i=[];for(const a of this.timestamps){const l=a.toStream();i.push(l),t+=l.stream.buffer.byteLength}e.appendUint16(t);for(const a of i)e.appendView(a.stream.view);return new ve({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}return s.CLASS_NAME="SignedCertificateTimestampList",s})();const so="attributes",np=[so];let rp=(()=>{class s extends ge{constructor(e={}){super(),this.attributes=o(e,so,s.defaultValues(so)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===so?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.attributes||y,value:it.schema()})]})}fromSchema(e){V(e,np);const t=pe(e,e,s.schema({names:{attributes:so}}));de.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,i=>new it({schema:i}))}toSchema(){return new F({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}return s.CLASS_NAME="SubjectDirectoryAttributes",s})();class bt{static getItems(){return this.types||(this.types={},bt.register(Ld,"SubjectAltName",Ud),bt.register(Fd,"IssuerAltName",Ud),bt.register(pu,"AuthorityKeyIdentifier",ef),bt.register(fu,"BasicConstraints",tf),bt.register("1.3.6.1.4.1.311.21.1","MicrosoftCaVersion",v1),bt.register(Gd,"CertificatePolicies",rf),bt.register("1.3.6.1.4.1.311.21.10","CertificatePoliciesMicrosoft",rf),bt.register("1.3.6.1.4.1.311.21.7","MicrosoftCertTemplateV2",jn),bt.register(Kd,"CRLDistributionPoints",cf),bt.register(mu,"FreshestCRL",cf),bt.register("2.5.29.37","ExtKeyUsage",E1),bt.register(Hd,"CertificateIssuer",Tt),bt.register(gu,"AuthorityInfoAccess",uf),bt.register("1.3.6.1.5.5.7.1.11","SubjectInfoAccess",uf),bt.register(jd,"IssuingDistributionPoint",N1),bt.register($d,"NameConstraints",T1),bt.register(zd,"PolicyConstraints",R1),bt.register(Jd,"PolicyMappings",P1),bt.register("2.5.29.16","PrivateKeyUsagePeriod",U1),bt.register("1.3.6.1.5.5.7.1.3","QCStatements",F1),bt.register("1.3.6.1.4.1.11129.2.4.2","SignedCertificateTimestampList",ip),bt.register("2.5.29.9","SubjectDirectoryAttributes",rp)),this.types}static fromBER(r,e){const t=$e(e);if(-1===t.offset)return null;const i=this.find(r);if(i)try{return new i.type({schema:t.result})}catch{const l=new i.type;return l.parsingError=`Incorrectly formatted value of extension ${i.name} (${r})`,l}return t.result}static find(r){return this.getItems()[r]||null}static register(r,e,t){this.getItems()[r]={name:e,type:t}}}const io="extnID",qs="critical",no="extnValue",Jl="parsedValue",ap=[io,qs,no];let Di=(()=>{class s extends ge{get parsedValue(){if(void 0===this._parsedValue){const e=bt.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}constructor(e={}){super(),this.extnID=o(e,io,s.defaultValues(io)),this.critical=o(e,qs,s.defaultValues(qs)),this.extnValue=no in e?new ve({valueHex:e.extnValue}):s.defaultValues(no),Jl in e&&(this.parsedValue=o(e,Jl,s.defaultValues(Jl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case io:return y;case qs:return!1;case no:return new ve;case Jl:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.extnID||y}),new _s({name:t.critical||y,optional:!0}),new ve({name:t.extnValue||y})]})}fromSchema(e){V(e,ap);const t=pe(e,e,s.schema({names:{extnID:io,critical:qs,extnValue:no}}));de.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),qs in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new Be({value:this.extnID})),this.critical!==s.defaultValues(qs)&&e.push(new _s({value:this.critical})),e.push(this.extnValue),new F({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==s.defaultValues(qs)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}return s.CLASS_NAME="Extension",s})();const ro="extensions",op=[ro];let Bt=(()=>{class s extends ge{constructor(e={}){super(),this.extensions=o(e,ro,s.defaultValues(ro)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ro?[]:super.defaultValues(e)}static schema(e={},t=!1){const i=o(e,"names",{});return new F({optional:t,name:i.blockName||y,value:[new Ke({name:i.extensions||y,value:Di.schema(i.extension||{})})]})}fromSchema(e){V(e,op);const t=pe(e,e,s.schema({names:{extensions:ro}}));de.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,i=>new Di({schema:i}))}toSchema(){return new F({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}return s.CLASS_NAME="Extensions",s})();const ao="issuer",oo="serialNumber",Ui="issuerUID",lp=[ao,oo,Ui];let fs=(()=>{class s extends ge{constructor(e={}){super(),this.issuer=o(e,ao,s.defaultValues(ao)),this.serialNumber=o(e,oo,s.defaultValues(oo)),Ui in e&&(this.issuerUID=o(e,Ui,s.defaultValues(Ui))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ao:return new Tt;case oo:return new te;case Ui:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[Tt.schema(t.issuer||{}),new te({name:t.serialNumber||y}),new Qe({optional:!0,name:t.issuerUID||y})]})}fromSchema(e){V(e,lp);const t=pe(e,e,s.schema({names:{issuer:{names:{blockName:ao}},serialNumber:oo,issuerUID:Ui}}));de.assertSchema(t,this.className),this.issuer=new Tt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,Ui in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new F({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}return s.CLASS_NAME="IssuerSerial",s})();const lo="version",Mi="baseCertificateID",Li="subjectName",co="issuer",uo="signature",ho="serialNumber",fo="attrCertValidityPeriod",mo="attributes",Fi="issuerUniqueID",ji="extensions",cp=[lo,Mi,Li,co,uo,ho,fo,mo,Fi,ji];let Ou=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,lo,s.defaultValues(lo)),Mi in e&&(this.baseCertificateID=o(e,Mi,s.defaultValues(Mi))),Li in e&&(this.subjectName=o(e,Li,s.defaultValues(Li))),this.issuer=o(e,co,s.defaultValues(co)),this.signature=o(e,uo,s.defaultValues(uo)),this.serialNumber=o(e,ho,s.defaultValues(ho)),this.attrCertValidityPeriod=o(e,fo,s.defaultValues(fo)),this.attributes=o(e,mo,s.defaultValues(mo)),Fi in e&&(this.issuerUniqueID=o(e,Fi,s.defaultValues(Fi))),ji in e&&(this.extensions=o(e,ji,s.defaultValues(ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lo:return 0;case Mi:return new fs;case Li:case co:return new Tt;case uo:return new ie;case ho:return new te;case fo:return new Fn;case mo:return[];case Fi:return new Qe;case ji:return new Bt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),new pt({value:[new Y({name:t.baseCertificateID||y,idBlock:{tagClass:3,tagNumber:0},value:fs.schema().valueBlock.value}),new Y({name:t.subjectName||y,idBlock:{tagClass:3,tagNumber:1},value:Tt.schema().valueBlock.value})]}),Tt.schema({names:{blockName:t.issuer||y}}),ie.schema(t.signature||{}),new te({name:t.serialNumber||y}),Fn.schema(t.attrCertValidityPeriod||{}),new F({name:t.attributes||y,value:[new Ke({value:it.schema()})]}),new Qe({optional:!0,name:t.issuerUniqueID||y}),Bt.schema(t.extensions||{},!0)]})}fromSchema(e){V(e,cp);const t=pe(e,e,s.schema({names:{version:lo,baseCertificateID:Mi,subjectName:Li,issuer:co,signature:{names:{blockName:uo}},serialNumber:ho,attrCertValidityPeriod:{names:{blockName:fo}},attributes:mo,issuerUniqueID:Fi,extensions:{names:{blockName:ji}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Mi in t.result&&(this.baseCertificateID=new fs({schema:new F({value:t.result.baseCertificateID.valueBlock.value})})),Li in t.result&&(this.subjectName=new Tt({schema:new F({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new ie({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Fn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,i=>new it({schema:i})),Fi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),ji in t.result&&(this.extensions=new Bt({schema:t.result.extensions}))}toSchema(){const e=new F({value:[new te({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new F({value:Array.from(this.attributes,t=>t.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,t=>t.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}return s.CLASS_NAME="AttributeCertificateInfoV1",s})();const po="acinfo",go="signatureAlgorithm",vo="signatureValue",up=[po,vo,go];let Pu=(()=>{class s extends ge{constructor(e={}){super(),this.acinfo=o(e,po,s.defaultValues(po)),this.signatureAlgorithm=o(e,go,s.defaultValues(go)),this.signatureValue=o(e,vo,s.defaultValues(vo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case po:return new Ou;case go:return new ie;case vo:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[Ou.schema(t.acinfo||{}),ie.schema(t.signatureAlgorithm||{}),new Qe({name:t.signatureValue||y})]})}fromSchema(e){V(e,up);const t=pe(e,e,s.schema({names:{acinfo:{names:{blockName:po}},signatureAlgorithm:{names:{blockName:go}},signatureValue:vo}}));de.assertSchema(t,this.className),this.acinfo=new Ou({schema:t.result.acinfo}),this.signatureAlgorithm=new ie({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new F({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}return s.CLASS_NAME="AttributeCertificateV1",s})();const wo="digestedObjectType",Hi="otherObjectTypeID",yo="digestAlgorithm",So="objectDigest",hp=[wo,Hi,yo,So];let Yn=(()=>{class s extends ge{constructor(e={}){super(),this.digestedObjectType=o(e,wo,s.defaultValues(wo)),Hi in e&&(this.otherObjectTypeID=o(e,Hi,s.defaultValues(Hi))),this.digestAlgorithm=o(e,yo,s.defaultValues(yo)),this.objectDigest=o(e,So,s.defaultValues(So)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wo:return new oa;case Hi:return new Be;case yo:return new ie;case So:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new oa({name:t.digestedObjectType||y}),new Be({optional:!0,name:t.otherObjectTypeID||y}),ie.schema(t.digestAlgorithm||{}),new Qe({name:t.objectDigest||y})]})}fromSchema(e){V(e,hp);const t=pe(e,e,s.schema({names:{digestedObjectType:wo,otherObjectTypeID:Hi,digestAlgorithm:{names:{blockName:yo}},objectDigest:So}}));de.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,Hi in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new ie({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new F({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}return s.CLASS_NAME="ObjectDigestInfo",s})();const $i="issuerName",Ki="baseCertificateID",Gi="objectDigestInfo",dp=[$i,Ki,Gi];let Df=(()=>{class s extends ge{constructor(e={}){super(),$i in e&&(this.issuerName=o(e,$i,s.defaultValues($i))),Ki in e&&(this.baseCertificateID=o(e,Ki,s.defaultValues(Ki))),Gi in e&&(this.objectDigestInfo=o(e,Gi,s.defaultValues(Gi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $i:return new Tt;case Ki:return new fs;case Gi:return new Yn;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[Tt.schema({names:{blockName:t.issuerName}},!0),new Y({optional:!0,name:t.baseCertificateID||y,idBlock:{tagClass:3,tagNumber:0},value:fs.schema().valueBlock.value}),new Y({optional:!0,name:t.objectDigestInfo||y,idBlock:{tagClass:3,tagNumber:1},value:Yn.schema().valueBlock.value})]})}fromSchema(e){V(e,dp);const t=pe(e,e,s.schema({names:{issuerName:$i,baseCertificateID:Ki,objectDigestInfo:Gi}}));de.assertSchema(t,this.className),$i in t.result&&(this.issuerName=new Tt({schema:t.result.issuerName})),Ki in t.result&&(this.baseCertificateID=new fs({schema:new F({value:t.result.baseCertificateID.valueBlock.value})})),Gi in t.result&&(this.objectDigestInfo=new Yn({schema:new F({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new F;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}return s.CLASS_NAME="V2Form",s})();const Ji="baseCertificateID",zi="entityName",qi="objectDigestInfo",fp=[Ji,zi,qi];let Du=(()=>{class s extends ge{constructor(e={}){super(),Ji in e&&(this.baseCertificateID=o(e,Ji,s.defaultValues(Ji))),zi in e&&(this.entityName=o(e,zi,s.defaultValues(zi))),qi in e&&(this.objectDigestInfo=o(e,qi,s.defaultValues(qi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ji:return new fs;case zi:return new Tt;case qi:return new Yn;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({optional:!0,name:t.baseCertificateID||y,idBlock:{tagClass:3,tagNumber:0},value:fs.schema().valueBlock.value}),new Y({optional:!0,name:t.entityName||y,idBlock:{tagClass:3,tagNumber:1},value:Tt.schema().valueBlock.value}),new Y({optional:!0,name:t.objectDigestInfo||y,idBlock:{tagClass:3,tagNumber:2},value:Yn.schema().valueBlock.value})]})}fromSchema(e){V(e,fp);const t=pe(e,e,s.schema({names:{baseCertificateID:Ji,entityName:zi,objectDigestInfo:qi}}));de.assertSchema(t,this.className),Ji in t.result&&(this.baseCertificateID=new fs({schema:new F({value:t.result.baseCertificateID.valueBlock.value})})),zi in t.result&&(this.entityName=new Tt({schema:new F({value:t.result.entityName.valueBlock.value})})),qi in t.result&&(this.objectDigestInfo=new Yn({schema:new F({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new F;return this.baseCertificateID&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new Y({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}return s.CLASS_NAME="Holder",s})();const bo="version",Ao="holder",_o="issuer",ko="signature",Eo="serialNumber",Co="attrCertValidityPeriod",No="attributes",Wi="issuerUniqueID",Xi="extensions",mp=[bo,Ao,_o,ko,Eo,Co,No,Wi,Xi];let Uu=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,bo,s.defaultValues(bo)),this.holder=o(e,Ao,s.defaultValues(Ao)),this.issuer=o(e,_o,s.defaultValues(_o)),this.signature=o(e,ko,s.defaultValues(ko)),this.serialNumber=o(e,Eo,s.defaultValues(Eo)),this.attrCertValidityPeriod=o(e,Co,s.defaultValues(Co)),this.attributes=o(e,No,s.defaultValues(No)),Wi in e&&(this.issuerUniqueID=o(e,Wi,s.defaultValues(Wi))),Xi in e&&(this.extensions=o(e,Xi,s.defaultValues(Xi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bo:return 1;case Ao:return new Du;case _o:return{};case ko:return new ie;case Eo:return new te;case Co:return new Fn;case No:return[];case Wi:return new Qe;case Xi:return new Bt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),Du.schema(t.holder||{}),new pt({value:[Tt.schema({names:{blockName:t.issuer||y}}),new Y({name:t.issuer||y,idBlock:{tagClass:3,tagNumber:0},value:Df.schema().valueBlock.value})]}),ie.schema(t.signature||{}),new te({name:t.serialNumber||y}),Fn.schema(t.attrCertValidityPeriod||{}),new F({name:t.attributes||y,value:[new Ke({value:it.schema()})]}),new Qe({optional:!0,name:t.issuerUniqueID||y}),Bt.schema(t.extensions||{},!0)]})}fromSchema(e){V(e,mp);const t=pe(e,e,s.schema({names:{version:bo,holder:{names:{blockName:Ao}},issuer:_o,signature:{names:{blockName:ko}},serialNumber:Eo,attrCertValidityPeriod:{names:{blockName:Co}},attributes:No,issuerUniqueID:Wi,extensions:{names:{blockName:Xi}}}}));if(3!==(de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Du({schema:t.result.holder}),t.result.issuer.idBlock.tagClass))throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new Df({schema:new F({value:t.result.issuer.valueBlock.value})}),this.signature=new ie({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Fn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,i=>new it({schema:i})),Wi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Xi in t.result&&(this.extensions=new Bt({schema:t.result.extensions}))}toSchema(){const e=new F({value:[new te({value:this.version}),this.holder.toSchema(),new Y({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new F({value:Array.from(this.attributes,t=>t.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,t=>t.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}return s.CLASS_NAME="AttributeCertificateInfoV2",s})();const Io="acinfo",xo="signatureAlgorithm",To="signatureValue",pp=[Io,xo,To];let Yi=(()=>{class s extends ge{constructor(e={}){super(),this.acinfo=o(e,Io,s.defaultValues(Io)),this.signatureAlgorithm=o(e,xo,s.defaultValues(xo)),this.signatureValue=o(e,To,s.defaultValues(To)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Io:return new Uu;case xo:return new ie;case To:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[Uu.schema(t.acinfo||{}),ie.schema(t.signatureAlgorithm||{}),new Qe({name:t.signatureValue||y})]})}fromSchema(e){V(e,pp);const t=pe(e,e,s.schema({names:{acinfo:{names:{blockName:Io}},signatureAlgorithm:{names:{blockName:xo}},signatureValue:To}}));de.assertSchema(t,this.className),this.acinfo=new Uu({schema:t.result.acinfo}),this.signatureAlgorithm=new ie({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new F({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}return s.CLASS_NAME="AttributeCertificateV2",s})();const Zi="contentType",Zn="content",gp=[Zi,Zn];let Ut=(()=>{class s extends ge{constructor(e={}){super(),this.contentType=o(e,Zi,s.defaultValues(Zi)),this.content=o(e,Zn,s.defaultValues(Zn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zi:return y;case Zn:return new Fe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zi:return"string"==typeof t&&t===this.defaultValues(Zi);case Zn:return t instanceof Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return"optional"in t||(t.optional=!1),new F({name:t.blockName||"ContentInfo",optional:t.optional,value:[new Be({name:t.contentType||Zi}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.content||Zn})]})]})}fromSchema(e){V(e,gp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new F({value:[new Be({value:this.contentType}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof Fe||(e.content=this.content.toJSON()),e}}return s.CLASS_NAME="ContentInfo",s.DATA=vu,s.SIGNED_DATA="1.2.840.113549.1.7.2",s.ENVELOPED_DATA=Wd,s.ENCRYPTED_DATA=Xd,s})();const Mu="type",Lu="value",Fu="utcTimeName",ju="generalTimeName",vp=[Fu,ju];let Rt=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,Mu,s.defaultValues(Mu)),this.value=o(e,Lu,s.defaultValues(Lu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mu:return 0;case Lu:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const i=o(e,"names",{});return new pt({optional:t,value:[new Pn({name:i.utcTimeName||y}),new mt({name:i.generalTimeName||y})]})}fromSchema(e){V(e,vp);const t=pe(e,e,s.schema({names:{utcTimeName:Fu,generalTimeName:ju}}));de.assertSchema(t,this.className),Fu in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),ju in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return 0===this.type?new Pn({valueDate:this.value}):1===this.type?new mt({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}return s.CLASS_NAME="Time",s})();const Ws="version",zl="serialNumber",ql="signature",Wl="issuer",Xl="notBefore",Yl="notAfter",Zl="subject",Ql="subjectPublicKeyInfo",Bo="issuerUniqueID",Ro="subjectUniqueID",Vo="extensions",Oo="signatureAlgorithm",Po="signatureValue",Lt="tbsCertificate",ec=`${Lt}.${Ws}`,$u=`${Lt}.${zl}`,Ku=`${Lt}.${ql}`,Gu=`${Lt}.${Wl}`,tc=`${Lt}.${Xl}`,sc=`${Lt}.${Yl}`,Ju=`${Lt}.${Zl}`,zu=`${Lt}.${Ql}`,ic=`${Lt}.${Bo}`,nc=`${Lt}.${Ro}`,Do=`${Lt}.${Vo}`,yp=[Lt,ec,$u,Ku,Gu,tc,sc,Ju,zu,ic,nc,Do,Oo,Po];function Sp(s={}){const r=o(s,"names",{});return new F({name:r.blockName||Lt,value:[new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new te({name:r.tbsCertificateVersion||ec})]}),new te({name:r.tbsCertificateSerialNumber||$u}),ie.schema(r.signature||{names:{blockName:Ku}}),gt.schema(r.issuer||{names:{blockName:Gu}}),new F({name:r.tbsCertificateValidity||"tbsCertificate.validity",value:[Rt.schema(r.notBefore||{names:{utcTimeName:tc,generalTimeName:tc}}),Rt.schema(r.notAfter||{names:{utcTimeName:sc,generalTimeName:sc}})]}),gt.schema(r.subject||{names:{blockName:Ju}}),is.schema(r.subjectPublicKeyInfo||{names:{blockName:zu}}),new Te({name:r.tbsCertificateIssuerUniqueID||ic,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Te({name:r.tbsCertificateSubjectUniqueID||nc,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[Bt.schema(r.extensions||{names:{blockName:Do}})]})]})}let Gt=(()=>{class s extends ge{get tbs(){return C._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Ws,s.defaultValues(Ws)),this.serialNumber=o(e,zl,s.defaultValues(zl)),this.signature=o(e,ql,s.defaultValues(ql)),this.issuer=o(e,Wl,s.defaultValues(Wl)),this.notBefore=o(e,Xl,s.defaultValues(Xl)),this.notAfter=o(e,Yl,s.defaultValues(Yl)),this.subject=o(e,Zl,s.defaultValues(Zl)),this.subjectPublicKeyInfo=o(e,Ql,s.defaultValues(Ql)),Bo in e&&(this.issuerUniqueID=o(e,Bo,s.defaultValues(Bo))),Ro in e&&(this.subjectUniqueID=o(e,Ro,s.defaultValues(Ro))),Vo in e&&(this.extensions=o(e,Vo,s.defaultValues(Vo))),this.signatureAlgorithm=o(e,Oo,s.defaultValues(Oo)),this.signatureValue=o(e,Po,s.defaultValues(Po)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return Nt;case Ws:return 0;case zl:return new te;case ql:return new ie;case Wl:return new gt;case Xl:case Yl:return new Rt;case Zl:return new gt;case Ql:return new is;case Bo:case Ro:return Nt;case Vo:return[];case Oo:return new ie;case Po:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[Sp(t.tbsCertificate),ie.schema(t.signatureAlgorithm||{names:{blockName:Oo}}),new Qe({name:t.signatureValue||Po})]})}fromSchema(e){V(e,yp);const t=pe(e,e,s.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:Do}}}}}}));de.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,ec in t.result&&(this.version=t.result[ec].valueBlock.valueDec),this.serialNumber=t.result[$u],this.signature=new ie({schema:t.result[Ku]}),this.issuer=new gt({schema:t.result[Gu]}),this.notBefore=new Rt({schema:t.result[tc]}),this.notAfter=new Rt({schema:t.result[sc]}),this.subject=new gt({schema:t.result[Ju]}),this.subjectPublicKeyInfo=new is({schema:t.result[zu]}),ic in t.result&&(this.issuerUniqueID=t.result[ic].valueBlock.valueHex),nc in t.result&&(this.subjectUniqueID=t.result[nc].valueBlock.valueHex),Do in t.result&&(this.extensions=Array.from(t.result[Do],i=>new Di({schema:i}))),this.signatureAlgorithm=new ie({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return Ws in this&&this.version!==s.defaultValues(Ws)&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new te({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new F({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new Te({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new Te({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new F({value:Array.from(this.extensions,t=>t.toSchema())})]})),new F({value:e})}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return s.schema().value[0];const i=$e(this.tbsView);de.assert(i,"TBS Certificate"),t=i.result}else t=this.encodeTBS();return new F({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:C.U$.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Ws in this&&this.version!==s.defaultValues(Ws)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=C.U$.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=C.U$.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}getPublicKey(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){return t.getPublicKey(i.subjectPublicKeyInfo,i.signatureAlgorithm,e)})()}getKeyHash(e="SHA-1",t=Ge(!0)){var i=this;return(0,_.A)(function*(){return t.digest({name:e},i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)})()}sign(e,t="SHA-1",i=Ge(!0)){var a=this;return(0,_.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters;a.signature=l.signatureAlgorithm,a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Qe({valueHex:d})})()}verify(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){let a;if(e?a=e.subjectPublicKeyInfo:i.issuer.isEqual(i.subject)&&(a=i.subjectPublicKeyInfo),!(a instanceof is))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(i.tbsView,i.signatureValue,a,i.signatureAlgorithm)})()}}return s.CLASS_NAME="Certificate",s})();function Uf(s,r=null){if(r&&s.issuer.isEqual(r.issuer)&&s.serialNumber.isEqual(r.serialNumber))return null;let e=!1;if(s.extensions)for(const t of s.extensions)if(t.extnID===fu&&t.parsedValue instanceof tf&&t.parsedValue.cA){e=!0;break}return e?s:null}const Qn="certId",er="certValue",tr="parsedValue",bp=[Qn,er];let qu=(()=>{class s extends ge{constructor(e={}){super(),this.certId=o(e,Qn,s.defaultValues(Qn)),this.certValue=o(e,er,s.defaultValues(er)),tr in e&&(this.parsedValue=o(e,tr,s.defaultValues(tr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qn:return y;case er:return new Fe;case tr:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qn:return t===y;case er:return t instanceof Fe;case tr:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.id||"id"}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.value||"value"})]})]})}fromSchema(e){V(e,bp);const t=pe(e,e,s.schema({names:{id:Qn,value:er}}));de.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const i=this.certValue.valueBlock.valueHexView;switch(this.certId){case Yd:try{this.parsedValue=Gt.fromBER(i)}catch{Yi.fromBER(i)}break;case Zd:this.parsedValue=Yi.fromBER(i);break;default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return tr in this&&(this.certId="acinfo"in this.parsedValue?Zd:Yd,this.certValue=new ve({valueHex:this.parsedValue.toSchema().toBER(!1)})),new F({value:[new Be({value:this.certId}),new Y({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}return s.CLASS_NAME="CertBag",s})();const Uo="userCertificate",sr="revocationDate",Qi="crlEntryExtensions",Ap=[Uo,sr,Qi];let _p=(()=>{class s extends ge{constructor(e={}){super(),this.userCertificate=o(e,Uo,s.defaultValues(Uo)),this.revocationDate=o(e,sr,s.defaultValues(sr)),Qi in e&&(this.crlEntryExtensions=o(e,Qi,s.defaultValues(Qi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uo:return new te;case sr:return new Rt;case Qi:return new Bt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.userCertificate||Uo}),Rt.schema({names:{utcTimeName:t.revocationDate||sr,generalTimeName:t.revocationDate||sr}}),Bt.schema({names:{blockName:t.crlEntryExtensions||Qi}},!0)]})}fromSchema(e){V(e,Ap);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new Rt({schema:t.result.revocationDate}),Qi in t.result&&(this.crlEntryExtensions=new Bt({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new F({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}return s.CLASS_NAME="RevokedCertificate",s})();const Mo="version",Xu="signature",Yu="issuer",Zu="thisUpdate",rc="nextUpdate",ac="revokedCertificates",oc="crlExtensions",Lo="signatureAlgorithm",Fo="signatureValue",ms="tbsCertList",lc=`${ms}.version`,Qu=`${ms}.signature`,eh=`${ms}.issuer`,cc=`${ms}.thisUpdate`,jo=`${ms}.nextUpdate`,uc=`${ms}.revokedCertificates`,hc=`${ms}.extensions`,kp=[ms,lc,Qu,eh,cc,jo,uc,hc,Lo,Fo];function Ep(s={}){const r=o(s,"names",{});return new F({name:r.blockName||ms,value:[new te({optional:!0,name:r.tbsCertListVersion||lc,value:2}),ie.schema(r.signature||{names:{blockName:Qu}}),gt.schema(r.issuer||{names:{blockName:eh}}),Rt.schema(r.tbsCertListThisUpdate||{names:{utcTimeName:cc,generalTimeName:cc}}),Rt.schema(r.tbsCertListNextUpdate||{names:{utcTimeName:jo,generalTimeName:jo}},!0),new F({optional:!0,value:[new Ke({name:r.tbsCertListRevokedCertificates||uc,value:new F({value:[new te,Rt.schema(),Bt.schema({},!0)]})})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Bt.schema(r.crlExtensions||{names:{blockName:hc}})]})]})}const Cp=[pu,Fd,"2.5.29.20","2.5.29.27",jd,mu,gu,"2.5.29.21","2.5.29.24",Hd];let dc=(()=>{class s extends ge{get tbs(){return C._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Mo,s.defaultValues(Mo)),this.signature=o(e,Xu,s.defaultValues(Xu)),this.issuer=o(e,Yu,s.defaultValues(Yu)),this.thisUpdate=o(e,Zu,s.defaultValues(Zu)),rc in e&&(this.nextUpdate=o(e,rc,s.defaultValues(rc))),ac in e&&(this.revokedCertificates=o(e,ac,s.defaultValues(ac))),oc in e&&(this.crlExtensions=o(e,oc,s.defaultValues(oc))),this.signatureAlgorithm=o(e,Lo,s.defaultValues(Lo)),this.signatureValue=o(e,Fo,s.defaultValues(Fo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return Nt;case Mo:return 0;case Xu:return new ie;case Yu:return new gt;case Zu:case rc:return new Rt;case ac:return[];case oc:return new Bt;case Lo:return new ie;case Fo:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||"CertificateList",value:[Ep(e),ie.schema(t.signatureAlgorithm||{names:{blockName:Lo}}),new Qe({name:t.signatureValue||Fo})]})}fromSchema(e){V(e,kp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,lc in t.result&&(this.version=t.result[lc].valueBlock.valueDec),this.signature=new ie({schema:t.result[Qu]}),this.issuer=new gt({schema:t.result[eh]}),this.thisUpdate=new Rt({schema:t.result[cc]}),jo in t.result&&(this.nextUpdate=new Rt({schema:t.result[jo]})),uc in t.result&&(this.revokedCertificates=Array.from(t.result[uc],i=>new _p({schema:i}))),hc in t.result&&(this.crlExtensions=new Bt({schema:t.result[hc]})),this.signatureAlgorithm=new ie({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==s.defaultValues(Mo)&&e.push(new te({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new F({value:Array.from(this.revokedCertificates,t=>t.toSchema())})),this.crlExtensions&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new F({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return s.schema();const i=$e(this.tbsView);de.assert(i,"TBS Certificate Revocation List"),t=i.result}return new F({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:C.U$.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==s.defaultValues(Mo)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,t=>t.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}sign(e,t="SHA-1",i=Ge(!0)){var a=this;return(0,_.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),{parameters:h}=l;a.signature=l.signatureAlgorithm,a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Qe({valueHex:d})})()}verify(e={},t=Ge(!0)){var i=this;return(0,_.A)(function*(){let a;if(e.issuerCertificate&&(a=e.issuerCertificate.subjectPublicKeyInfo,!i.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(a=e.publicKeyInfo),!a)throw new Error("Issuer's certificate must be provided as an input parameter");if(i.crlExtensions)for(const l of i.crlExtensions.extensions)if(l.critical&&!Cp.includes(l.extnID))return!1;return t.verifyWithPublicKey(i.tbsView,i.signatureValue,a,i.signatureAlgorithm)})()}}return s.CLASS_NAME="CertificateRevocationList",s})();const ir="crlId",nr="crlValue",Ho="parsedValue",Np=[ir,nr];let Ip=(()=>{class s extends ge{constructor(e={}){super(),this.crlId=o(e,ir,s.defaultValues(ir)),this.crlValue=o(e,nr,s.defaultValues(nr)),Ho in e&&(this.parsedValue=o(e,Ho,s.defaultValues(Ho))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ir:return y;case nr:return new Fe;case Ho:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ir:return t===y;case nr:return t instanceof Fe;case Ho:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.id||"id"}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.value||"value"})]})]})}fromSchema(e){V(e,Np);const t=pe(e,e,s.schema({names:{id:ir,value:nr}}));if(de.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId!==Qd)throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`);this.parsedValue=dc.fromBER(this.certValue.valueBlock.valueHex)}toSchema(){return this.parsedValue&&(this.crlId=Qd,this.crlValue=new ve({valueHex:this.parsedValue.toSchema().toBER(!1)})),new F({value:[new Be({value:this.crlId}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}return s.CLASS_NAME="CRLBag",s})();const rr="version",ar="encryptedContentInfo",Xs="unprotectedAttrs",xp=[rr,ar,Xs];let fc=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,rr,s.defaultValues(rr)),this.encryptedContentInfo=o(e,ar,s.defaultValues(ar)),Xs in e&&(this.unprotectedAttrs=o(e,Xs,s.defaultValues(Xs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rr:return 0;case ar:return new Dt;case Xs:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rr:return 0===t;case ar:return Dt.compareWithDefault("contentType",t.contentType)&&Dt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Dt.compareWithDefault("encryptedContent",t.encryptedContent);case Xs:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),Dt.schema(t.encryptedContentInfo||{}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ke({name:t.unprotectedAttrs||y,value:it.schema()})]})]})}fromSchema(e){V(e,xp);const t=pe(e,e,s.schema({names:{version:rr,encryptedContentInfo:{names:{blockName:ar}},unprotectedAttrs:Xs}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new Dt({schema:t.result.encryptedContentInfo}),Xs in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,i=>new it({schema:i})))}toSchema(){const e=[];return e.push(new te({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}encrypt(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){ht.assert(e,"parameters","object");const a={...e,contentType:"1.2.840.113549.1.7.1"};i.encryptedContentInfo=yield t.encryptEncryptedContentInfo(a)})()}decrypt(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){ht.assert(e,"parameters","object");const a={...e,encryptedContentInfo:i.encryptedContentInfo};return t.decryptEncryptedContentInfo(a)})()}}return s.CLASS_NAME="EncryptedData",s})();const en="encryptionAlgorithm",Ys="encryptedData",$o="parsedValue",Tp=[en,Ys];let Mf=(()=>{class s extends ge{constructor(e={}){super(),this.encryptionAlgorithm=o(e,en,s.defaultValues(en)),this.encryptedData=o(e,Ys,s.defaultValues(Ys)),$o in e&&(this.parsedValue=o(e,$o,s.defaultValues($o))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case en:return new ie;case Ys:return new ve;case $o:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case en:return ie.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Ys:return t.isEqual(s.defaultValues(e));case $o:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.encryptionAlgorithm||{names:{blockName:en}}),new pt({value:[new ve({name:t.encryptedData||Ys}),new ve({idBlock:{isConstructed:!0},name:t.encryptedData||Ys})]})]})}fromSchema(e){V(e,Tp);const t=pe(e,e,s.schema({names:{encryptionAlgorithm:{names:{blockName:en}},encryptedData:Ys}}));de.assertSchema(t,this.className),this.encryptionAlgorithm=new ie({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new F({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}parseInternalValues(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){const l=yield new fc({encryptedContentInfo:new Dt({contentEncryptionAlgorithm:i.encryptionAlgorithm,encryptedContent:i.encryptedData})}).decrypt(e,t);i.parsedValue=zn.fromBER(l)})()}makeInternalValues(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){if(!i.parsedValue)throw new Error('Please initialize "parsedValue" first');const a=new fc,l={...e,contentToEncrypt:i.parsedValue.toSchema().toBER(!1)};if(yield a.encrypt(l,t),!a.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");i.encryptionAlgorithm=a.encryptedContentInfo.contentEncryptionAlgorithm,i.encryptedData=a.encryptedContentInfo.encryptedContent})()}}return s.CLASS_NAME="PKCS8ShroudedKeyBag",s})();const or="secretTypeId",lr="secretValue",Bp=[or,lr];let Rp=(()=>{class s extends ge{constructor(e={}){super(),this.secretTypeId=o(e,or,s.defaultValues(or)),this.secretValue=o(e,lr,s.defaultValues(lr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case or:return y;case lr:return new Fe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case or:return t===y;case lr:return t instanceof Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.id||"id"}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.value||"value"})]})]})}fromSchema(e){V(e,Bp);const t=pe(e,e,s.schema({names:{id:or,value:lr}}));de.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new F({value:[new Be({value:this.secretTypeId}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}return s.CLASS_NAME="SecretBag",s})();class Zs{static getItems(){return this.items||(this.items={},Zs.register("1.2.840.113549.1.12.10.1.1",zn),Zs.register("1.2.840.113549.1.12.10.1.2",Mf),Zs.register("1.2.840.113549.1.12.10.1.3",qu),Zs.register("1.2.840.113549.1.12.10.1.4",Ip),Zs.register("1.2.840.113549.1.12.10.1.5",Rp),Zs.register("1.2.840.113549.1.12.10.1.6",nn)),this.items}static register(r,e){this.getItems()[r]=e}static find(r){return this.getItems()[r]||null}}const tn="bagId",sn="bagValue",ps="bagAttributes",Vp=[tn,sn,ps];let Ko=(()=>{class s extends ge{constructor(e={}){super(),this.bagId=o(e,tn,s.defaultValues(tn)),this.bagValue=o(e,sn,s.defaultValues(sn)),ps in e&&(this.bagAttributes=o(e,ps,s.defaultValues(ps))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tn:return y;case sn:return new Fe;case ps:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case tn:return t===y;case sn:return t instanceof Fe;case ps:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.bagId||tn}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.bagValue||sn})]}),new Et({optional:!0,value:[new Ke({name:t.bagAttributes||ps,value:it.schema()})]})]})}fromSchema(e){V(e,Vp);const t=pe(e,e,s.schema({names:{bagId:tn,bagValue:sn,bagAttributes:ps}}));de.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const i=Zs.find(this.bagId);if(!i)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new i({schema:t.result.bagValue}),ps in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,a=>new it({schema:a})))}toSchema(){const e=[new Be({value:this.bagId}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new Et({value:Array.from(this.bagAttributes,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,t=>t.toJSON())),e}}return s.CLASS_NAME="SafeBag",s})();const cr="safeBags";let nn=(()=>{class s extends ge{constructor(e={}){super(),this.safeBags=o(e,cr,s.defaultValues(cr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===cr?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===cr?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.safeBags||y,value:Ko.schema()})]})}fromSchema(e){V(e,[cr]);const t=pe(e,e,s.schema({names:{safeBags:cr}}));de.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,i=>new Ko({schema:i}))}toSchema(){return new F({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}return s.CLASS_NAME="SafeContents",s})();const Go="otherCertFormat",Jo="otherCert",Op=[Go,Jo];class Qs extends ge{constructor(r={}){super(),this.otherCertFormat=o(r,Go,Qs.defaultValues(Go)),this.otherCert=o(r,Jo,Qs.defaultValues(Jo)),r.schema&&this.fromSchema(r.schema)}static defaultValues(r){switch(r){case Go:return y;case Jo:return new Fe;default:return super.defaultValues(r)}}static schema(r={}){const e=o(r,"names",{});return new F({name:e.blockName||y,value:[new Be({name:e.otherCertFormat||Go}),new Fe({name:e.otherCert||Jo})]})}fromSchema(r){V(r,Op);const e=pe(r,r,Qs.schema());de.assertSchema(e,this.className),this.otherCertFormat=e.result.otherCertFormat.valueBlock.toString(),this.otherCert=e.result.otherCert}toSchema(){return new F({value:[new Be({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const r={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof Fe||(r.otherCert=this.otherCert.toJSON()),r}}const zo="certificates",Pp=[zo];let ur=(()=>{class s extends ge{constructor(e={}){super(),this.certificates=o(e,zo,s.defaultValues(zo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===zo?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new Et({name:t.blockName||y,value:[new Ke({name:t.certificates||zo,value:new pt({value:[Gt.schema(),new Y({idBlock:{tagClass:3,tagNumber:0},value:[new Fe]}),new Y({idBlock:{tagClass:3,tagNumber:1},value:[new F]}),new Y({idBlock:{tagClass:3,tagNumber:2},value:Yi.schema().valueBlock.value}),new Y({idBlock:{tagClass:3,tagNumber:3},value:Qs.schema().valueBlock.value})]})})]})}fromSchema(e){V(e,Pp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],i=>{const a=i.idBlock.tagNumber;if(1===i.idBlock.tagClass)return new Gt({schema:i});const l=new F({value:i.valueBlock.value});switch(a){case 1:return 1===l.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new Yi({schema:l}):new Pu({schema:l});case 2:return new Yi({schema:l});case 3:return new Qs({schema:l})}return i})}toSchema(){return new Et({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof Gt:return e.toSchema();case e instanceof Pu:return new Y({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof Yi:return new Y({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Qs:return new Y({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}return s.CLASS_NAME="CertificateSet",s})();const qo="otherRevInfoFormat",Wo="otherRevInfo",Dp=[qo,Wo];let mc=(()=>{class s extends ge{constructor(e={}){super(),this.otherRevInfoFormat=o(e,qo,s.defaultValues(qo)),this.otherRevInfo=o(e,Wo,s.defaultValues(Wo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qo:return y;case Wo:return new Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.otherRevInfoFormat||qo}),new Fe({name:t.otherRevInfo||Wo})]})}fromSchema(e){V(e,Dp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new F({value:[new Be({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof Fe||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}return s.CLASS_NAME="OtherRevocationInfoFormat",s})();const Xo="crls",th="otherRevocationInfos",Up=[Xo];let pc=(()=>{class s extends ge{constructor(e={}){super(),this.crls=o(e,Xo,s.defaultValues(Xo)),this.otherRevocationInfos=o(e,th,s.defaultValues(th)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xo:case th:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new Et({name:t.blockName||y,value:[new Ke({name:t.crls||y,value:new pt({value:[dc.schema(),new Y({idBlock:{tagClass:3,tagNumber:1},value:[new Be,new Fe]})]})})]})}fromSchema(e){V(e,Up);const t=pe(e,e,s.schema({names:{crls:Xo}}));if(de.assertSchema(t,this.className),t.result.crls)for(const i of t.result.crls)1===i.idBlock.tagClass?this.crls.push(new dc({schema:i})):this.otherRevocationInfos.push(new mc({schema:i}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,t=>t.toSchema())),e.push(...Array.from(this.otherRevocationInfos,t=>{const i=t.toSchema();return i.idBlock.tagClass=3,i.idBlock.tagNumber=1,i})),new Et({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}return s.CLASS_NAME="RevocationInfoChoices",s})();const Yo="certs",rn="crls",Mp=[Yo,rn];let sh=(()=>{class s extends ge{constructor(e={}){super(),this.crls=o(e,rn,s.defaultValues(rn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yo:return new ur;case rn:return new pc;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yo:return 0===t.certificates.length;case rn:return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({name:t.certs||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:ur.schema().valueBlock.value}),new Y({name:t.crls||y,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pc.schema().valueBlock.value})]})}fromSchema(e){V(e,Mp);const t=pe(e,e,s.schema({names:{certs:Yo,crls:rn}}));de.assertSchema(t,this.className),Yo in t.result&&(this.certs=new ur({schema:new Et({value:t.result.certs.valueBlock.value})})),rn in t.result&&(this.crls=new pc({schema:new Et({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new F({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}return s.CLASS_NAME="OriginatorInfo",s})();const Zo="issuer",Qo="serialNumber",Lp=[Zo,Qo];let Vt=(()=>{class s extends ge{constructor(e={}){super(),this.issuer=o(e,Zo,s.defaultValues(Zo)),this.serialNumber=o(e,Qo,s.defaultValues(Qo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zo:return new gt;case Qo:return new te;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[gt.schema(t.issuer||{}),new te({name:t.serialNumber||y})]})}fromSchema(e){V(e,Lp);const t=pe(e,e,s.schema({names:{issuer:{names:{blockName:Zo}},serialNumber:Qo}}));de.assertSchema(t,this.className),this.issuer=new gt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new F({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}return s.CLASS_NAME="IssuerAndSerialNumber",s})();const gc="variant",el="value",Fp=["blockName"];let jp=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,gc,s.defaultValues(gc)),el in e&&(this.value=o(e,el,s.defaultValues(el))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gc:return-1;case el:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gc:return-1===t;case el:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new pt({value:[Vt.schema({names:{blockName:t.blockName||y}}),new Te({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){V(e,Fp);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Vt({schema:t.result.blockName})):(this.variant=2,this.value=new ve({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Vt))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof ve))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new Te({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Fe}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant)&&this.value&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="RecipientIdentifier",s})();const an="version",hr="rid",dr="keyEncryptionAlgorithm",fr="encryptedKey",vc="recipientCertificate",Hp=[an,hr,dr,fr];let ih=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,an,s.defaultValues(an)),this.rid=o(e,hr,s.defaultValues(hr)),this.keyEncryptionAlgorithm=o(e,dr,s.defaultValues(dr)),this.encryptedKey=o(e,fr,s.defaultValues(fr)),this.recipientCertificate=o(e,vc,s.defaultValues(vc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case an:return-1;case hr:return{};case dr:return new ie;case fr:return new ve;case vc:return new Gt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case an:return t===s.defaultValues(an);case hr:return 0===Object.keys(t).length;case dr:case fr:return t.isEqual(s.defaultValues(e));case vc:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),jp.schema(t.rid||{}),ie.schema(t.keyEncryptionAlgorithm||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){V(e,Hp);const t=pe(e,e,s.schema({names:{version:an,rid:{names:{blockName:hr}},keyEncryptionAlgorithm:{names:{blockName:dr}},encryptedKey:fr}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.rid=3===t.result.rid.idBlock.tagClass?new ve({valueHex:t.result.rid.valueBlock.valueHex}):new Vt({schema:t.result.rid}),this.keyEncryptionAlgorithm=new ie({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Vt?(this.version=0,e.push(new te({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new te({value:this.version})),e.push(new Te({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new F({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="KeyTransRecipientInfo",s})();const mr="algorithm",pr="publicKey",$p=[mr,pr];let nh=(()=>{class s extends ge{constructor(e={}){super(),this.algorithm=o(e,mr,s.defaultValues(mr)),this.publicKey=o(e,pr,s.defaultValues(pr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mr:return new ie;case pr:return new Qe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case mr:case pr:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.algorithm||{}),new Qe({name:t.publicKey||y})]})}fromSchema(e){V(e,$p);const t=pe(e,e,s.schema({names:{algorithm:{names:{blockName:mr}},publicKey:pr}}));de.assertSchema(t,this.className),this.algorithm=new ie({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new F({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}return s.CLASS_NAME="OriginatorPublicKey",s})();const wc="variant",tl="value",Kp=["blockName"];let yc=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,wc,s.defaultValues(wc)),tl in e&&(this.value=o(e,tl,s.defaultValues(tl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wc:return-1;case tl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wc:return-1===t;case tl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new pt({value:[Vt.schema({names:{blockName:t.blockName||y}}),new Te({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||y}),new Y({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||y,value:nh.schema().valueBlock.value})]})}fromSchema(e){V(e,Kp);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Vt({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new nh({schema:new F({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new Fe}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant||3===this.variant)&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="OriginatorIdentifierOrKey",s})();const gr="keyAttrId",ns="keyAttr",Gp=[gr,ns];let vr=(()=>{class s extends ge{constructor(e={}){super(),this.keyAttrId=o(e,gr,s.defaultValues(gr)),ns in e&&(this.keyAttr=o(e,ns,s.defaultValues(ns))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gr:return y;case ns:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gr:return"string"==typeof t&&t===y;case ns:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({optional:t.optional||!0,name:t.blockName||y,value:[new Be({name:t.keyAttrId||y}),new Fe({optional:!0,name:t.keyAttr||y})]})}fromSchema(e){V(e,Gp);const t=pe(e,e,s.schema({names:{keyAttrId:gr,keyAttr:ns}}));de.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),ns in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new Be({value:this.keyAttrId})),ns in this&&e.push(this.keyAttr),new F({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return ns in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}return s.CLASS_NAME="OtherKeyAttribute",s})();const on="subjectKeyIdentifier",ei="date",ti="other",Jp=[on,ei,ti];let rh=(()=>{class s extends ge{constructor(e={}){super(),this.subjectKeyIdentifier=o(e,on,s.defaultValues(on)),ei in e&&(this.date=o(e,ei,s.defaultValues(ei))),ti in e&&(this.other=o(e,ti,s.defaultValues(ti))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case on:return new ve;case ei:return new mt;case ti:return new vr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case on:return t.isEqual(s.defaultValues(on));case ei:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case ti:return t.keyAttrId===y&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new ve({name:t.subjectKeyIdentifier||y}),new mt({optional:!0,name:t.date||y}),vr.schema(t.other||{})]})}fromSchema(e){V(e,Jp);const t=pe(e,e,s.schema({names:{subjectKeyIdentifier:on,date:ei,other:{names:{blockName:ti}}}}));de.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,ei in t.result&&(this.date=t.result.date),ti in t.result&&(this.other=new vr({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new F({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}return s.CLASS_NAME="RecipientKeyIdentifier",s})();const Sc="variant",bc="value",zp=["blockName"];let sl=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,Sc,s.defaultValues(Sc)),this.value=o(e,bc,s.defaultValues(bc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sc:return-1;case bc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Sc:return-1===t;case bc:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new pt({value:[Vt.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||y}}),new Y({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:0},value:rh.schema(t.rKeyId||{names:{blockName:t.blockName||y}}).valueBlock.value})]})}fromSchema(e){V(e,zp);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Vt({schema:t.result.blockName})):(this.variant=2,this.value=new rh({schema:new F({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new Y({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Fe}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant)&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="KeyAgreeRecipientIdentifier",s})();const wr="rid",ln="encryptedKey",qp=[wr,ln];let ah=(()=>{class s extends ge{constructor(e={}){super(),this.rid=o(e,wr,s.defaultValues(wr)),this.encryptedKey=o(e,ln,s.defaultValues(ln)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wr:return new sl;case ln:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wr:return-1===t.variant&&!("value"in t);case ln:return t.isEqual(s.defaultValues(ln));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[sl.schema(t.rid||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){V(e,qp);const t=pe(e,e,s.schema({names:{rid:{names:{blockName:wr}},encryptedKey:ln}}));de.assertSchema(t,this.className),this.rid=new sl({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new F({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="RecipientEncryptedKey",s})();const Ac="encryptedKeys",Lf="RecipientEncryptedKeys",Wp=[Lf];let _c=(()=>{class s extends ge{constructor(e={}){super(),this.encryptedKeys=o(e,Ac,s.defaultValues(Ac)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ac?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Ac?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.RecipientEncryptedKeys||y,value:ah.schema()})]})}fromSchema(e){V(e,Wp);const t=pe(e,e,s.schema({names:{RecipientEncryptedKeys:Lf}}));de.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,i=>new ah({schema:i}))}toSchema(){return new F({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}return s.CLASS_NAME="RecipientEncryptedKeys",s})();const yr="version",Sr="originator",gs="ukm",br="keyEncryptionAlgorithm",Ar="recipientEncryptedKeys",kc="recipientCertificate",Ec="recipientPublicKey",Xp=[yr,Sr,gs,br,Ar];let oh=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,yr,s.defaultValues(yr)),this.originator=o(e,Sr,s.defaultValues(Sr)),gs in e&&(this.ukm=o(e,gs,s.defaultValues(gs))),this.keyEncryptionAlgorithm=o(e,br,s.defaultValues(br)),this.recipientEncryptedKeys=o(e,Ar,s.defaultValues(Ar)),this.recipientCertificate=o(e,kc,s.defaultValues(kc)),this.recipientPublicKey=o(e,Ec,s.defaultValues(Ec)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yr:return 0;case Sr:return new yc;case gs:return new ve;case br:return new ie;case Ar:return new _c;case kc:return new Gt;case Ec:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case yr:return 0===t;case Sr:return-1===t.variant&&!("value"in t);case gs:return t.isEqual(s.defaultValues(gs));case br:return t.algorithmId===y&&!("algorithmParams"in t);case Ar:return 0===t.encryptedKeys.length;case kc:case Ec:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),new Y({idBlock:{tagClass:3,tagNumber:0},value:[yc.schema(t.originator||{})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ve({name:t.ukm||y})]}),ie.schema(t.keyEncryptionAlgorithm||{}),_c.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){V(e,Xp);const t=pe(e,e,s.schema({names:{version:yr,originator:{names:{blockName:Sr}},ukm:gs,keyEncryptionAlgorithm:{names:{blockName:br}},recipientEncryptedKeys:{names:{blockName:Ar}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new yc({schema:t.result.originator}),gs in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new ie({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new _c({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new te({value:this.version})),e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new F({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}return s.CLASS_NAME="KeyAgreeRecipientInfo",s})();const cn="keyIdentifier",si="date",ii="other",Yp=[cn,si,ii];let Cc=(()=>{class s extends ge{constructor(e={}){super(),this.keyIdentifier=o(e,cn,s.defaultValues(cn)),si in e&&(this.date=o(e,si,s.defaultValues(si))),ii in e&&(this.other=o(e,ii,s.defaultValues(ii))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cn:return new ve;case si:return new mt;case ii:return new vr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case cn:return t.isEqual(s.defaultValues(cn));case si:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case ii:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new ve({name:t.keyIdentifier||y}),new mt({optional:!0,name:t.date||y}),vr.schema(t.other||{})]})}fromSchema(e){V(e,Yp);const t=pe(e,e,s.schema({names:{keyIdentifier:cn,date:si,other:{names:{blockName:ii}}}}));de.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,si in t.result&&(this.date=t.result.date),ii in t.result&&(this.other=new vr({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new F({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}return s.CLASS_NAME="KEKIdentifier",s})();const _r="version",kr="kekid",Er="keyEncryptionAlgorithm",un="encryptedKey",Nc="preDefinedKEK",Zp=[_r,kr,Er,un];let lh=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,_r,s.defaultValues(_r)),this.kekid=o(e,kr,s.defaultValues(kr)),this.keyEncryptionAlgorithm=o(e,Er,s.defaultValues(Er)),this.encryptedKey=o(e,un,s.defaultValues(un)),this.preDefinedKEK=o(e,Nc,s.defaultValues(Nc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _r:return 0;case kr:return new Cc;case Er:return new ie;case un:return new ve;case Nc:return Nt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===s.defaultValues(_r);case kr:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&!("date"in t)&&!("other"in t);case Er:return t.algorithmId===y&&!("algorithmParams"in t);case un:return t.isEqual(s.defaultValues(un));case Nc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),Cc.schema(t.kekid||{}),ie.schema(t.keyEncryptionAlgorithm||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){V(e,Zp);const t=pe(e,e,s.schema({names:{version:_r,kekid:{names:{blockName:kr}},keyEncryptionAlgorithm:{names:{blockName:Er}},encryptedKey:un}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Cc({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new ie({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new F({value:[new te({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="KEKRecipientInfo",s})();const Cr="version",ni="keyDerivationAlgorithm",Nr="keyEncryptionAlgorithm",hn="encryptedKey",Ic="password",Qp=[Cr,ni,Nr,hn];let ch=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Cr,s.defaultValues(Cr)),ni in e&&(this.keyDerivationAlgorithm=o(e,ni,s.defaultValues(ni))),this.keyEncryptionAlgorithm=o(e,Nr,s.defaultValues(Nr)),this.encryptedKey=o(e,hn,s.defaultValues(hn)),this.password=o(e,Ic,s.defaultValues(Ic)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cr:return-1;case ni:case Nr:return new ie;case hn:return new ve;case Ic:return Nt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Cr:return-1===t;case ni:case Nr:return t.algorithmId===y&&!("algorithmParams"in t);case hn:return t.isEqual(s.defaultValues(hn));case Ic:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),new Y({name:t.keyDerivationAlgorithm||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:ie.schema().valueBlock.value}),ie.schema(t.keyEncryptionAlgorithm||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){V(e,Qp);const t=pe(e,e,s.schema({names:{version:Cr,keyDerivationAlgorithm:ni,keyEncryptionAlgorithm:{names:{blockName:Nr}},encryptedKey:hn}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ni in t.result&&(this.keyDerivationAlgorithm=new ie({schema:new F({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new ie({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new te({value:this.version})),this.keyDerivationAlgorithm&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new F({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}return s.CLASS_NAME="PasswordRecipientInfo",s})();const Ir="oriType",dn="oriValue",eg=[Ir,dn];let Ff=(()=>{class s extends ge{constructor(e={}){super(),this.oriType=o(e,Ir,s.defaultValues(Ir)),this.oriValue=o(e,dn,s.defaultValues(dn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ir:return y;case dn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ir:return t===y;case dn:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.oriType||y}),new Fe({name:t.oriValue||y})]})}fromSchema(e){V(e,eg);const t=pe(e,e,s.schema({names:{oriType:Ir,oriValue:dn}}));de.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new F({value:[new Be({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return s.compareWithDefault(dn,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}return s.CLASS_NAME="OtherRecipientInfo",s})();const xc="variant",il="value",tg=["blockName"];let xr=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,xc,s.defaultValues(xc)),il in e&&(this.value=o(e,il,s.defaultValues(il))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xc:return-1;case il:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xc:return t===s.defaultValues(e);case il:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new pt({value:[ih.schema({names:{blockName:t.blockName||y}}),new Y({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:1},value:oh.schema().valueBlock.value}),new Y({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:2},value:lh.schema().valueBlock.value}),new Y({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:3},value:ch.schema().valueBlock.value}),new Y({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:4},value:Ff.schema().valueBlock.value})]})}fromSchema(e){V(e,tg);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));if(de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new ih({schema:t.result.blockName});else{const i=new F({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new oh({schema:i});break;case 2:this.variant=3,this.value=new lh({schema:i});break;case 3:this.variant=4,this.value=new ch({schema:i});break;case 4:this.variant=5,this.value=new Ff({schema:i});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){st.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new Fe}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="RecipientInfo",s})();const ri="hashAlgorithm",ai="maskGenAlgorithm",oi="pSourceAlgorithm",sg=[ri,ai,oi];let uh=(()=>{class s extends ge{constructor(e={}){super(),this.hashAlgorithm=o(e,ri,s.defaultValues(ri)),this.maskGenAlgorithm=o(e,ai,s.defaultValues(ai)),this.pSourceAlgorithm=o(e,oi,s.defaultValues(oi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ri:return new ie({algorithmId:"1.3.14.3.2.26",algorithmParams:new ut});case ai:return new ie({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new ie({algorithmId:"1.3.14.3.2.26",algorithmParams:new ut}).toSchema()});case oi:return new ie({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new ve({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Y({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[ie.schema(t.hashAlgorithm||{})]}),new Y({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[ie.schema(t.maskGenAlgorithm||{})]}),new Y({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[ie.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){V(e,sg);const t=pe(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:ri}},maskGenAlgorithm:{names:{blockName:ai}},pSourceAlgorithm:{names:{blockName:oi}}}}));de.assertSchema(t,this.className),ri in t.result&&(this.hashAlgorithm=new ie({schema:t.result.hashAlgorithm})),ai in t.result&&(this.maskGenAlgorithm=new ie({schema:t.result.maskGenAlgorithm})),oi in t.result&&(this.pSourceAlgorithm=new ie({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(s.defaultValues(ri))||e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(s.defaultValues(ai))||e.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(s.defaultValues(oi))||e.push(new Y({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new F({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(s.defaultValues(ri))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(s.defaultValues(ai))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(s.defaultValues(oi))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}return s.CLASS_NAME="RSAESOAEPParams",s})();const Tr="keyInfo",li="entityUInfo",Br="suppPubInfo",ig=[Tr,li,Br];let jf=(()=>{class s extends ge{constructor(e={}){super(),this.keyInfo=o(e,Tr,s.defaultValues(Tr)),li in e&&(this.entityUInfo=o(e,li,s.defaultValues(li))),this.suppPubInfo=o(e,Br,s.defaultValues(Br)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tr:return new ie;case li:case Br:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tr:case li:case Br:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.keyInfo||{}),new Y({name:t.entityUInfo||y,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new ve]}),new Y({name:t.suppPubInfo||y,idBlock:{tagClass:3,tagNumber:2},value:[new ve]})]})}fromSchema(e){V(e,ig);const t=pe(e,e,s.schema({names:{keyInfo:{names:{blockName:Tr}},entityUInfo:li,suppPubInfo:Br}}));de.assertSchema(t,this.className),this.keyInfo=new ie({schema:t.result.keyInfo}),li in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new Y({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new F({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}return s.CLASS_NAME="ECCCMSSharedInfo",s})();const Rr="version",ci="originatorInfo",Vr="recipientInfos",Or="encryptedContentInfo",ui="unprotectedAttrs",ng=[Rr,ci,Vr,Or,ui],Hf={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},rg={"P-256":256,"P-384":384,"P-521":528};let $f=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Rr,s.defaultValues(Rr)),ci in e&&(this.originatorInfo=o(e,ci,s.defaultValues(ci))),this.recipientInfos=o(e,Vr,s.defaultValues(Vr)),this.encryptedContentInfo=o(e,Or,s.defaultValues(Or)),ui in e&&(this.unprotectedAttrs=o(e,ui,s.defaultValues(ui))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Rr:return 0;case ci:return new sh;case Vr:return[];case Or:return new Dt;case ui:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Rr:return t===s.defaultValues(e);case ci:return 0===t.certs.certificates.length&&0===t.crls.crls.length;case Vr:case ui:return 0===t.length;case Or:return Dt.compareWithDefault("contentType",t.contentType)&&Dt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Dt.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||y}),new Y({name:t.originatorInfo||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:sh.schema().valueBlock.value}),new Et({value:[new Ke({name:t.recipientInfos||y,value:xr.schema()})]}),Dt.schema(t.encryptedContentInfo||{}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ke({name:t.unprotectedAttrs||y,value:it.schema()})]})]})}fromSchema(e){V(e,ng);const t=pe(e,e,s.schema({names:{version:Rr,originatorInfo:ci,recipientInfos:Vr,encryptedContentInfo:{names:{blockName:Or}},unprotectedAttrs:ui}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ci in t.result&&(this.originatorInfo=new sh({schema:new F({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,i=>new xr({schema:i})),this.encryptedContentInfo=new Dt({schema:t.result.encryptedContentInfo}),ui in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,i=>new it({schema:i})))}toSchema(){const e=[];return e.push(new te({value:this.version})),this.originatorInfo&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new Et({value:Array.from(this.recipientInfos,t=>t.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,t=>t.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}addRecipientByCertificate(e,t,i,a=Ge(!0)){const l=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Hf,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))i=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);i=2}switch(i){case 1:{let h,d;if(!0===l.useOAEP){h=a.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const T=a.getOIDByAlgorithm({name:l.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),M=new ie({algorithmId:T,algorithmParams:new ut});d=new uh({hashAlgorithm:M,maskGenAlgorithm:new ie({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:M.toSchema()})}).toSchema()}else{if(h=a.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),h===y)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");d=new ut}const g=new ih({version:0,rid:new Vt({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new ie({algorithmId:h,algorithmParams:d}),recipientCertificate:e});this.recipientInfos.push(new xr({variant:1,value:g}))}break;case 2:{const h=new sl({variant:1,value:new Vt({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(h,l,{recipientCertificate:e},a)}break;default:throw new Error(`Unknown "variant" value: ${i}`)}return!0}addRecipientByPreDefinedData(e,t={},i,a=Ge(!0)){if(ht.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const l=new ArrayBuffer(16),h=new Uint8Array(l);a.getRandomValues(h),t.keyIdentifier=l}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),void 0===t.iterationCount&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new ut),i){case 1:{const l=a.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),h=new lh({version:4,kekid:new Cc({keyIdentifier:new ve({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new ie({algorithmId:l,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new xr({variant:3,value:h}))}break;case 2:{const l=a.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),h=new ArrayBuffer(64),d=new Uint8Array(h);a.getRandomValues(d);const g=a.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),T=new Qa({salt:new ve({valueHex:h}),iterationCount:t.iterationCount,prf:new ie({algorithmId:g,algorithmParams:new ut})}),M=a.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),z=new ch({version:0,keyDerivationAlgorithm:new ie({algorithmId:l,algorithmParams:T.toSchema()}),keyEncryptionAlgorithm:new ie({algorithmId:M,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new xr({variant:4,value:z}))}break;default:throw new Error(`Unknown value for "variant": ${i}`)}}addRecipientByKeyIdentifier(e,t,i,a=Ge(!0)){const l=Object.assign({},Hf,i||{}),h=new sl({variant:2,value:new rh({subjectKeyIdentifier:new ve({valueHex:t})})});this._addKeyAgreeRecipientInfo(h,l,{recipientPublicKey:e},a)}_addKeyAgreeRecipientInfo(e,t,i,a=Ge(!0)){const l=new ah({rid:e}),h=a.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),d=new ie({algorithmId:h}),g=a.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),T=new ArrayBuffer(64),M=new Uint8Array(T);a.getRandomValues(M);const z={version:3,ukm:new ve({valueHex:T}),keyEncryptionAlgorithm:new ie({algorithmId:g,algorithmParams:d.toSchema()}),recipientEncryptedKeys:new _c({encryptedKeys:[l]})},$=new oh(Object.assign(z,i));this.recipientInfos.push(new xr({variant:2,value:$}))}encrypt(e,t,i=Ge(!0)){var a=this;return(0,_.A)(function*(){const l=new ArrayBuffer(16),h=new Uint8Array(l);i.getRandomValues(h);const d=new Uint8Array(t),g=i.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),T=yield i.generateKey(e,!0,["encrypt"]),M=yield i.encrypt({name:e.name,iv:h},T,d),z=yield i.exportKey("raw",T);a.version=2,a.encryptedContentInfo=new Dt({disableSplit:a.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new ie({algorithmId:g,algorithmParams:new ve({valueHex:l})}),encryptedContent:new ve({valueHex:M})});const $=function(){var Se=(0,_.A)(function*(ce){const me=a.recipientInfos[ce].value;let we,_e;if(me.recipientPublicKey)we=me.recipientPublicKey.algorithm.namedCurve,_e=me.recipientPublicKey;else{if(!me.recipientCertificate)throw new Error("Unsupported RecipientInfo");{const Re=me.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(Re.constructor.blockName()!==Be.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${ce}`);switch(Re.valueBlock.toString()){case"1.2.840.10045.3.1.7":we="P-256";break;case"1.3.132.0.34":we="P-384";break;case"1.3.132.0.35":we="P-521";break;default:throw new Error(`Incorrect curve OID for index ${ce}`)}_e=yield me.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:we},usages:[]}},i)}}const Ne=rg[we],Ie=yield i.generateKey({name:"ECDH",namedCurve:we},!0,["deriveBits"]),Ue=yield i.exportKey("spki",Ie.publicKey),We=yield i.deriveBits({name:"ECDH",public:_e},Ie.privateKey,Ne),_t=new ie({schema:me.keyEncryptionAlgorithm.algorithmParams}),Xe=i.getAlgorithmByOID(_t.algorithmId,!0,"aesKWAlgorithm");let dt=Xe.length;const jt=new ArrayBuffer(4),Pt=new Uint8Array(jt);for(let Re=3;Re>=0;Re--)Pt[Re]=dt,dt>>=8;const Ss=new jf({keyInfo:new ie({algorithmId:_t.algorithmId}),entityUInfo:me.ukm,suppPubInfo:new ve({valueHex:jt})}).toSchema().toBER(!1),Jt=i.getAlgorithmByOID(me.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),ft=yield kf(Jt.kdf,We,Xe.length,Ss,i),at=yield i.importKey("raw",ft,{name:"AES-KW"},!0,["wrapKey"]),De=yield i.wrapKey("raw",T,at,{name:"AES-KW"}),He=new yc;return He.variant=3,He.value=nh.fromBER(Ue),me.originator=He,me.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new ve({valueHex:De}),{ecdhPrivateKey:Ie.privateKey}});return function(me){return Se.apply(this,arguments)}}(),le=function(){var Se=(0,_.A)(function*(ce){const me=a.recipientInfos[ce].value,we=i.getAlgorithmByOID(me.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===we.name){const Ne=new uh({schema:me.keyEncryptionAlgorithm.algorithmParams});if(we.hash=i.getAlgorithmByOID(Ne.hashAlgorithm.algorithmId),!("name"in we.hash))throw new Error(`Incorrect OID for hash algorithm: ${Ne.hashAlgorithm.algorithmId}`)}try{const _e=yield me.recipientCertificate.getPublicKey({algorithm:{algorithm:we,usages:["encrypt","wrapKey"]}},i),Ne=yield i.encrypt(_e.algorithm,_e,z);me.encryptedKey=new ve({valueHex:Ne})}catch{}});return function(me){return Se.apply(this,arguments)}}(),ke=function(){var Se=(0,_.A)(function*(ce){const me=a.recipientInfos[ce].value,we=i.getAlgorithmByOID(me.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),_e=yield i.importKey("raw",new Uint8Array(me.preDefinedKEK),we,!0,["wrapKey"]),Ne=yield i.wrapKey("raw",T,_e,we);me.encryptedKey=new ve({valueHex:Ne})});return function(me){return Se.apply(this,arguments)}}(),ye=function(){var Se=(0,_.A)(function*(ce){const me=a.recipientInfos[ce].value;let we;if(!me.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!me.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{we=new Qa({schema:me.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const _e=new Uint8Array(me.password),Ne=yield i.importKey("raw",_e,"PBKDF2",!1,["deriveKey"]),Ie=i.getAlgorithmByOID(me.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let Ue="SHA-1";we.prf&&(Ue=i.getAlgorithmByOID(we.prf.algorithmId,!0,"prfAlgorithm").hash.name);const We=new Uint8Array(we.salt.valueBlock.valueHex),_t=we.iterationCount,Xe=yield i.deriveKey({name:"PBKDF2",hash:{name:Ue},salt:We,iterations:_t},Ne,Ie,!0,["wrapKey"]),dt=yield i.wrapKey("raw",T,Xe,Ie);me.encryptedKey=new ve({valueHex:dt})});return function(me){return Se.apply(this,arguments)}}(),ae=[];for(let Se=0;Se<a.recipientInfos.length;Se++)switch(a.recipientInfos[Se].variant){case 1:ae.push(yield le(Se));break;case 2:ae.push(yield $(Se));break;case 3:ae.push(yield ke(Se));break;case 4:ae.push(yield ye(Se));break;default:throw new Error(`Unknown recipient type in array with index ${Se}`)}return ae})()}decrypt(e,t,i=Ge(!0)){var a=this;return(0,_.A)(function*(){const l=t||{};if(e+1>a.recipientInfos.length)throw new Error('Maximum value for "index" is: '+(a.recipientInfos.length-1));const h=function(){var ae=(0,_.A)(function*(Se){const ce=a.recipientInfos[Se].value;let me,we,_e;const Ne=ce.originator;if(l.recipientCertificate){const ft=l.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(ft.constructor.blockName()!==Be.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${Se}`);me=ft.valueBlock.toString()}else{if(!Ne.value.algorithm.algorithmParams)throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const ft=Ne.value.algorithm.algorithmParams;if(ft.constructor.blockName()!==Be.blockName())throw new Error(`Incorrect originator for index ${Se}`);me=ft.valueBlock.toString()}}if(!l.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(me){case"1.2.840.10045.3.1.7":we="P-256",_e=256;break;case"1.3.132.0.34":we="P-384",_e=384;break;case"1.3.132.0.35":we="P-521",_e=528;break;default:throw new Error(`Incorrect curve OID for index ${Se}`)}let Ie,Ue=i;C._H.isBufferSource(l.recipientPrivateKey)?Ie=yield i.importKey("pkcs8",l.recipientPrivateKey,{name:"ECDH",namedCurve:we},!0,["deriveBits"]):(Ie=l.recipientPrivateKey,"crypto"in l&&l.crypto&&(Ue=l.crypto.subtle)),"algorithmParams"in Ne.value.algorithm||(Ne.value.algorithm.algorithmParams=new Be({value:me}));const We=Ne.value.toSchema().toBER(!1),_t=yield i.importKey("spki",We,{name:"ECDH",namedCurve:we},!0,[]),Xe=yield Ue.deriveBits({name:"ECDH",public:_t},Ie,_e);function dt(ft){return jt.apply(this,arguments)}function jt(){return(jt=(0,_.A)(function*(ft){ft=ft||!1;const at=new ie({schema:ce.keyEncryptionAlgorithm.algorithmParams}),De=i.getAlgorithmByOID(at.algorithmId,!0,"kwAlgorithm");let He=De.length;const Re=new ArrayBuffer(4),qe=new Uint8Array(Re);for(let Ye=3;Ye>=0;Ye--)qe[Ye]=He,He>>=8;const nt={algorithmId:at.algorithmId};ft&&(nt.algorithmParams=new ut);const Qt=new jf({keyInfo:new ie(nt),entityUInfo:ce.ukm,suppPubInfo:new ve({valueHex:Re})}).toSchema().toBER(!1),vt=i.getAlgorithmByOID(ce.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!vt.name)throw new Error(`Incorrect OID for key encryption algorithm: ${ce.keyEncryptionAlgorithm.algorithmId}`);return kf(vt.kdf,Xe,De.length,Qt,i)})).apply(this,arguments)}const Pt=yield dt(),Rn=function(){var ft=(0,_.A)(function*(at){return i.importKey("raw",at,{name:"AES-KW"},!0,["unwrapKey"])});return function(De){return ft.apply(this,arguments)}}(),Ss=yield Rn(Pt),Jt=function(){var ft=(0,_.A)(function*(at){const He=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm");return i.unwrapKey("raw",ce.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,at,{name:"AES-KW"},He,!0,["decrypt"])});return function(De){return ft.apply(this,arguments)}}();try{return yield Jt(Ss)}catch{const ft=yield dt(!0);return Jt(yield Rn(ft))}});return function(ce){return ae.apply(this,arguments)}}(),d=function(){var ae=(0,_.A)(function*(Se){const ce=a.recipientInfos[Se].value;if(!l.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const me=i.getAlgorithmByOID(ce.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===me.name){const _t=new uh({schema:ce.keyEncryptionAlgorithm.algorithmParams});if(me.hash=i.getAlgorithmByOID(_t.hashAlgorithm.algorithmId),!("name"in me.hash))throw new Error(`Incorrect OID for hash algorithm: ${_t.hashAlgorithm.algorithmId}`)}let we,_e=i;C._H.isBufferSource(l.recipientPrivateKey)?we=yield i.importKey("pkcs8",l.recipientPrivateKey,me,!0,["decrypt"]):(we=l.recipientPrivateKey,"crypto"in l&&l.crypto&&(_e=l.crypto.subtle));const Ne=yield _e.decrypt(we.algorithm,we,ce.encryptedKey.valueBlock.valueHexView),Ie=a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,Ue=i.getAlgorithmByOID(Ie,!0,"contentEncryptionAlgorithm");if(!("name"in Ue))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${Ie}`);return i.importKey("raw",Ne,Ue,!0,["decrypt"])});return function(ce){return ae.apply(this,arguments)}}(),g=function(){var ae=(0,_.A)(function*(Se){const ce=a.recipientInfos[Se].value;if(!l.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const me=i.getAlgorithmByOID(ce.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),we=yield i.importKey("raw",l.preDefinedData,me,!0,["unwrapKey"]),_e=a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,Ne=i.getAlgorithmByOID(_e,!0,"contentEncryptionAlgorithm");if(!Ne.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${_e}`);return i.unwrapKey("raw",ce.encryptedKey.valueBlock.valueHexView,we,me,Ne,!0,["decrypt"])});return function(ce){return ae.apply(this,arguments)}}(),T=function(){var ae=(0,_.A)(function*(Se){const ce=a.recipientInfos[Se].value;let me;if(!l.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!ce.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!ce.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{me=new Qa({schema:ce.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const we=yield i.importKey("raw",l.preDefinedData,"PBKDF2",!1,["deriveKey"]),_e=i.getAlgorithmByOID(ce.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),Ne=me.prf?i.getAlgorithmByOID(me.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",Ie=new Uint8Array(me.salt.valueBlock.valueHex),Ue=me.iterationCount,We=yield i.deriveKey({name:"PBKDF2",hash:{name:Ne},salt:Ie,iterations:Ue},we,_e,!0,["unwrapKey"]),Xe=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm");return i.unwrapKey("raw",ce.encryptedKey.valueBlock.valueHexView,We,_e,Xe,!0,["decrypt"])});return function(ce){return ae.apply(this,arguments)}}();let M;switch(a.recipientInfos[e].variant){case 1:M=yield d(e);break;case 2:M=yield h(e);break;case 3:M=yield g(e);break;case 4:M=yield T(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const $=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm"),ke=new Uint8Array(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex);if(!a.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const ye=a.encryptedContentInfo.getEncryptedContent();return i.decrypt({name:$.name,iv:ke},M,ye)})()}}return s.CLASS_NAME="EnvelopedData",s})();const Pr="safeContents",nl="parsedValue",Kf="contentInfos";let hh=(()=>{class s extends ge{constructor(e={}){super(),this.safeContents=o(e,Pr,s.defaultValues(Pr)),nl in e&&(this.parsedValue=o(e,nl,s.defaultValues(nl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pr:return[];case nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pr:return 0===t.length;case nl:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Ke({name:t.contentInfos||y,value:Ut.schema()})]})}fromSchema(e){V(e,[Kf]);const t=pe(e,e,s.schema({names:{contentInfos:Kf}}));de.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,i=>new Ut({schema:i}))}toSchema(){return new F({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}parseInternalValues(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){if(st.assert(e,Pr),ht.assert(e.safeContents,Pr,"Array"),e.safeContents.length!==i.safeContents.length)throw new ht('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');i.parsedValue={safeContents:[]};for(const[a,l]of i.safeContents.entries()){const h=e.safeContents[a],d=`parameters.safeContents[${a}]`;switch(l.contentType){case vu:{ht.assert(l.content,"this.safeContents[j].content",ve);const g=l.content.getValue();i.parsedValue.safeContents.push({privacyMode:0,value:nn.fromBER(g)})}break;case Wd:{const g=new $f({schema:l.content});st.assert(d,h,"recipientCertificate","recipientKey");const M=h.recipientCertificate,z=h.recipientKey,$=yield g.decrypt(0,{recipientCertificate:M,recipientPrivateKey:z},t);i.parsedValue.safeContents.push({privacyMode:2,value:nn.fromBER($)})}break;case Xd:{const g=new fc({schema:l.content});st.assert(d,h,"password");const T=h.password,M=yield g.decrypt({password:T},t);i.parsedValue.safeContents.push({privacyMode:1,value:nn.fromBER(M)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${l.contentType}`)}}})()}makeInternalValues(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){if(!i.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(ht.assert(i.parsedValue,"this.parsedValue","object"),ht.assert(i.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),ht.assert(e,"parameters","object"),st.assert(e,"safeContents"),ht.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==i.parsedValue.safeContents.length)throw new ht('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');i.safeContents=[];for(const[a,l]of i.parsedValue.safeContents.entries())switch(st.assert("content",l,"privacyMode","value"),ht.assert(l.value,"content.value",nn),l.privacyMode){case 0:{const h=l.value.toSchema().toBER(!1);i.safeContents.push(new Ut({contentType:"1.2.840.113549.1.7.1",content:new ve({valueHex:h})}))}break;case 1:{const h=new fc,d=e.safeContents[a];d.contentToEncrypt=l.value.toSchema().toBER(!1),yield h.encrypt(d,t),i.safeContents.push(new Ut({contentType:"1.2.840.113549.1.7.6",content:h.toSchema()}))}break;case 2:{const h=new $f,d=l.value.toSchema().toBER(!1),g=e.safeContents[a];switch(st.assert(`parameters.safeContents[${a}]`,g,"encryptingCertificate","encryptionAlgorithm"),!0){case"aes-cbc"===g.encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===g.encryptionAlgorithm.name.toLowerCase():break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${g.encryptionAlgorithm}`)}switch(!0){case 128===g.encryptionAlgorithm.length:case 192===g.encryptionAlgorithm.length:case 256===g.encryptionAlgorithm.length:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${g.encryptionAlgorithm.length}`)}const T=g.encryptionAlgorithm;h.addRecipientByCertificate(g.encryptingCertificate,{},void 0,t),yield h.encrypt(T,d,t),i.safeContents.push(new Ut({contentType:"1.2.840.113549.1.7.3",content:h.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${l.privacyMode}`)}return i})()}}return s.CLASS_NAME="AuthenticatedSafe",s})();const fn="hashAlgorithm",Dr="issuerNameHash",Ur="issuerKeyHash",mn="serialNumber",ag=[fn,Dr,Ur,mn];let hi=(()=>{class s extends ge{static create(e,t,i=Ge(!0)){return(0,_.A)(function*(){const a=new s;return yield a.createForCertificate(e,t,i),a})()}constructor(e={}){super(),this.hashAlgorithm=o(e,fn,s.defaultValues(fn)),this.issuerNameHash=o(e,Dr,s.defaultValues(Dr)),this.issuerKeyHash=o(e,Ur,s.defaultValues(Ur)),this.serialNumber=o(e,mn,s.defaultValues(mn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fn:return new ie;case Dr:case Ur:return new ve;case mn:return new te;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fn:return t.algorithmId===y&&!("algorithmParams"in t);case Dr:case Ur:case mn:return t.isEqual(s.defaultValues(mn));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||y}}),new ve({name:t.issuerNameHash||y}),new ve({name:t.issuerKeyHash||y}),new te({name:t.serialNumber||y})]})}fromSchema(e){V(e,ag);const t=pe(e,e,s.schema({names:{hashAlgorithm:fn,issuerNameHash:Dr,issuerKeyHash:Ur,serialNumber:mn}}));de.assertSchema(t,this.className),this.hashAlgorithm=new ie({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new F({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!C._H.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!C._H.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}createForCertificate(e,t,i=Ge(!0)){var a=this;return(0,_.A)(function*(){st.assert(t,fn,"issuerCertificate");const l=i.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");a.hashAlgorithm=new ie({algorithmId:l,algorithmParams:new ut});const h=t.issuerCertificate;a.serialNumber=e.serialNumber;const d=yield i.digest({name:t.hashAlgorithm},h.subject.toSchema().toBER(!1));a.issuerNameHash=new ve({valueHex:d});const g=h.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,T=yield i.digest({name:t.hashAlgorithm},g);a.issuerKeyHash=new ve({valueHex:T})})()}}return s.CLASS_NAME="CertID",s})();const Mr="certID",Lr="certStatus",Fr="thisUpdate",di="nextUpdate",pn="singleExtensions",og=[Mr,Lr,Fr,di,pn];let Gf=(()=>{class s extends ge{constructor(e={}){super(),this.certID=o(e,Mr,s.defaultValues(Mr)),this.certStatus=o(e,Lr,s.defaultValues(Lr)),this.thisUpdate=o(e,Fr,s.defaultValues(Fr)),di in e&&(this.nextUpdate=o(e,di,s.defaultValues(di))),pn in e&&(this.singleExtensions=o(e,pn,s.defaultValues(pn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mr:return new hi;case Lr:return{};case Fr:case di:return new Date(0,0,0);case pn:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mr:return hi.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&hi.compareWithDefault("issuerNameHash",t.issuerNameHash)&&hi.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&hi.compareWithDefault("serialNumber",t.serialNumber);case Lr:return 0===Object.keys(t).length;case Fr:case di:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[hi.schema(t.certID||{}),new pt({value:[new Te({name:t.certStatus||y,idBlock:{tagClass:3,tagNumber:0}}),new Y({name:t.certStatus||y,idBlock:{tagClass:3,tagNumber:1},value:[new mt,new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new oa]})]}),new Te({name:t.certStatus||y,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new mt({name:t.thisUpdate||y}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new mt({name:t.nextUpdate||y})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Bt.schema(t.singleExtensions||{})]})]})}fromSchema(e){V(e,og);const t=pe(e,e,s.schema({names:{certID:{names:{blockName:Mr}},certStatus:Lr,thisUpdate:Fr,nextUpdate:di,singleExtensions:{names:{blockName:pn}}}}));de.assertSchema(t,this.className),this.certID=new hi({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),di in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),pn in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,i=>new Di({schema:i})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new mt({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[new mt({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new F({value:Array.from(this.singleExtensions,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,t=>t.toJSON())),e}}return s.CLASS_NAME="SingleResponse",s})();const Tc="tbs",gn="version",rl="responderID",al="producedAt",ol="responses",jr="responseExtensions",vn="ResponseData",Bc=`${vn}.${gn}`,Hr=`${vn}.${rl}`,dh=`${vn}.${al}`,fh=`${vn}.${ol}`,Rc=`${vn}.${jr}`,lg=[vn,Bc,Hr,dh,fh,Rc];let fi=(()=>{class s extends ge{get tbs(){return C._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,Tc,s.defaultValues(Tc))),gn in e&&(this.version=o(e,gn,s.defaultValues(gn))),this.responderID=o(e,rl,s.defaultValues(rl)),this.producedAt=o(e,al,s.defaultValues(al)),this.responses=o(e,ol,s.defaultValues(ol)),jr in e&&(this.responseExtensions=o(e,jr,s.defaultValues(jr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gn:return 0;case Tc:return Nt;case rl:return{};case al:return new Date(0,0,0);case ol:case jr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tc:return 0===t.byteLength;case rl:return 0===Object.keys(t).length;case al:return t===s.defaultValues(e);case ol:case jr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||vn,value:[new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new te({name:t.version||Bc})]}),new pt({value:[new Y({name:t.responderID||Hr,idBlock:{tagClass:3,tagNumber:1},value:[gt.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new Y({name:t.responderID||Hr,idBlock:{tagClass:3,tagNumber:2},value:[new ve({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new mt({name:t.producedAt||dh}),new F({value:[new Ke({name:fh,value:Gf.schema(t.response||{})})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Bt.schema(t.extensions||{names:{blockName:Rc}})]})]})}fromSchema(e){V(e,lg);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Bc in t.result&&(this.version=t.result[Bc].valueBlock.valueDec),this.responderID=1===t.result[Hr].idBlock.tagNumber?new gt({schema:t.result[Hr].valueBlock.value[0]}):t.result[Hr].valueBlock.value[0],this.producedAt=t.result[dh].toDate(),this.responses=Array.from(t.result[fh],i=>new Gf({schema:i})),Rc in t.result&&(this.responseExtensions=Array.from(t.result[Rc].valueBlock.value,i=>new Di({schema:i})))}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return s.schema();const i=$e(this.tbsView);de.assert(i,"TBS Response Data"),t=i.result}else{const i=[];gn in this&&i.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[new te({value:this.version})]})),i.push(new Y(this.responderID instanceof gt?{idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]}:{idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),i.push(new mt({valueDate:this.producedAt})),i.push(new F({value:Array.from(this.responses,a=>a.toSchema())})),this.responseExtensions&&i.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:[new F({value:Array.from(this.responseExtensions,a=>a.toSchema())})]})),t=new F({value:i})}return t}toJSON(){const e={};return gn in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,t=>t.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,t=>t.toJSON())),e}}return s.CLASS_NAME="ResponseData",s})();const mh="trustedCerts",ph="certs",gh="crls",vh="ocsps",wh="checkDate",yh="findOrigin",Sh="findIssuer";var $r=function(s){return s[s.unknown=-1]="unknown",s[s.success=0]="success",s[s.noRevocation=11]="noRevocation",s[s.noPath=60]="noPath",s[s.noValidPath=97]="noValidPath",s}($r||{});let ll=(()=>{class s extends Error{constructor(e,t){super(t),this.name=s.NAME,this.code=e,this.message=t}}return s.NAME="ChainValidationError",s})();class Vc{constructor(r={}){this.trustedCerts=o(r,mh,this.defaultValues(mh)),this.certs=o(r,ph,this.defaultValues(ph)),this.crls=o(r,gh,this.defaultValues(gh)),this.ocsps=o(r,vh,this.defaultValues(vh)),this.checkDate=o(r,wh,this.defaultValues(wh)),this.findOrigin=o(r,yh,this.defaultValues(yh)),this.findIssuer=o(r,Sh,this.defaultValues(Sh))}static defaultFindOrigin(r,e){0===r.tbsView.byteLength&&(r.tbsView=new Uint8Array(r.encodeTBS().toBER()));for(const t of e.certs)if(0===t.tbsView.byteLength&&(t.tbsView=new Uint8Array(t.encodeTBS().toBER())),C._H.isEqual(r.tbsView,t.tbsView))return"Intermediate Certificates";for(const t of e.trustedCerts)if(0===t.tbsView.byteLength&&(t.tbsView=new Uint8Array(t.encodeTBS().toBER())),C._H.isEqual(r.tbsView,t.tbsView))return"Trusted Certificates";return"Unknown"}defaultFindIssuer(r,e,t=Ge(!0)){return(0,_.A)(function*(){const i=[];let a=null,l=null,h=null;if(r.subject.isEqual(r.issuer))try{if(yield r.verify(void 0,t))return[r]}catch{}if(r.extensions)for(const g of r.extensions)if(g.extnID===pu&&g.parsedValue instanceof ef){g.parsedValue.keyIdentifier?a=g.parsedValue.keyIdentifier:(g.parsedValue.authorityCertIssuer&&(l=g.parsedValue.authorityCertIssuer),g.parsedValue.authorityCertSerialNumber&&(h=g.parsedValue.authorityCertSerialNumber));break}function d(g){if(null!==a&&g.extensions){let M=!1;for(const z of g.extensions)if("2.5.29.14"===z.extnID&&z.parsedValue){M=!0,C._H.isEqual(z.parsedValue.valueBlock.valueHex,a.valueBlock.valueHexView)&&i.push(g);break}if(M)return}let T=!1;null!==h&&(T=g.serialNumber.isEqual(h)),null!==l?g.subject.isEqual(l)&&T&&i.push(g):r.issuer.isEqual(g.subject)&&i.push(g)}for(const g of e.trustedCerts)d(g);for(const g of e.certs)d(g);for(let g=i.length-1;g>=0;g--)try{!1===(yield r.verify(i[g],t))&&i.splice(g,1)}catch{i.splice(g,1)}return i})()}defaultValues(r){switch(r){case mh:case ph:case gh:case vh:return[];case wh:return new Date;case yh:return Vc.defaultFindOrigin;case Sh:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${r}`)}}sort(r=!1,e=Ge(!0)){var t=this;return(0,_.A)(function*(){const i=[],a=function(){var ye=(0,_.A)(function*(ae,Se){const ce=[];function me(_e){let Ne=!0;for(let Ie=0;Ie<_e.length;Ie++){for(let Ue=0;Ue<_e.length;Ue++)if(Ue!==Ie&&_e[Ie]===_e[Ue]){Ne=!1;break}if(!Ne)break}return Ne}if(function cg(s,r){for(let e=0;e<r.length;e++)if(C._H.isEqual(s.tbsView,r[e].tbsView))return!0;return!1}(ae,t.trustedCerts))return[[ae]];const we=yield t.findIssuer(ae,t,Se);if(0===we.length)throw new Error("No valid certificate paths found");for(let _e=0;_e<we.length;_e++){if(C._H.isEqual(we[_e].tbsView,ae.tbsView)){ce.push([we[_e]]);continue}const Ne=yield a(we[_e],Se);for(let Ie=0;Ie<Ne.length;Ie++){const Ue=Ne[Ie].slice();Ue.splice(0,0,we[_e]),me(Ue)?ce.push(Ue):ce.push(Ne[Ie])}}return ce});return function(Se,ce){return ye.apply(this,arguments)}}(),l=function(){var ye=(0,_.A)(function*(ae){const Se=[],ce=[],me=[];if(Se.push(...i.filter(we=>ae.issuer.isEqual(we.subject))),0===Se.length)return{status:1,statusMessage:"No certificate's issuers"};if(ce.push(...t.crls.filter(we=>we.issuer.isEqual(ae.issuer))),0===ce.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let we=0;we<ce.length;we++){const _e=ce[we];if(!(_e.nextUpdate&&_e.nextUpdate.value<t.checkDate))for(let Ne=0;Ne<Se.length;Ne++)try{if(yield ce[we].verify({issuerCertificate:Se[Ne]},e)){me.push({crl:ce[we],certificate:Se[Ne]});break}}catch{}}return me.length?{status:0,statusMessage:y,result:me}:{status:3,statusMessage:"No valid CRLs found"}});return function(Se){return ye.apply(this,arguments)}}(),h=function(){var ye=(0,_.A)(function*(ae,Se){const ce=e.getAlgorithmByOID(ae.signatureAlgorithm.algorithmId);if(!ce.name||!ce.hash)return 1;for(let me=0;me<t.ocsps.length;me++){const _e=yield t.ocsps[me].getCertificateStatus(ae,Se,e);if(_e.isForCertificate)return 0===_e.status?0:1}return 2});return function(Se,ce){return ye.apply(this,arguments)}}();function d(ye){return g.apply(this,arguments)}function g(){return(g=(0,_.A)(function*(ye,ae=!1){let Se=!1,ce=!1,me=!1,we=!1;if(ye.extensions){for(let _e=0;_e<ye.extensions.length;_e++){const Ne=ye.extensions[_e];if(Ne.critical&&!Ne.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${Ne.extnID}`};if("2.5.29.15"===Ne.extnID){me=!0;const Ie=new Uint8Array(Ne.parsedValue.valueBlock.valueHex);!(4&~Ie[0])&&(ce=!0),!(2&~Ie[0])&&(we=!0)}Ne.extnID===fu&&"cA"in Ne.parsedValue&&!0===Ne.parsedValue.cA&&(Se=!0)}if(!0===ce&&!1===Se)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(!0===me&&!0===Se&&!1===ce)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===Se&&!0===me&&ae&&!1===we)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===Se?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:y}})).apply(this,arguments)}const T=function(){var ye=(0,_.A)(function*(ae,Se){for(let ce=0;ce<ae.length;ce++)if(ae[ce].notBefore.value>Se||ae[ce].notAfter.value<Se)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(ae.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let ce=ae.length-2;ce>=0;ce--)if(!1===ae[ce].issuer.isEqual(ae[ce].subject)&&!1===ae[ce].issuer.isEqual(ae[ce+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==t.crls.length||0!==t.ocsps.length)for(let ce=0;ce<ae.length-1;ce++){let me=2,we={status:0,statusMessage:y};if(0!==t.ocsps.length)switch(me=yield h(ae[ce],ae[ce+1]),me){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==t.crls.length){if(we=yield l(ae[ce]),0===we.status&&we.result)for(let _e=0;_e<we.result.length;_e++){if(we.result[_e].crl.isCertificateRevoked(ae[ce]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(yield d(we.result[_e].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===r)throw new ll($r.noRevocation,`No revocation values found for one of certificates: ${we.statusMessage}`)}else if(2===me)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===me&&2===we.status&&r){const _e=ae[ce+1];let Ne=!1;if(_e.extensions)for(const Ie of _e.extensions)switch(Ie.extnID){case Kd:case mu:case gu:Ne=!0}if(Ne)throw new ll($r.noRevocation,`No revocation values found for one of certificates: ${we.statusMessage}`)}}for(const[ce,me]of ae.entries())if(ce&&!(yield d(me)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"};return{result:!0}});return function(Se,ce){return ye.apply(this,arguments)}}();i.push(...t.trustedCerts),i.push(...t.certs);for(let ye=0;ye<i.length;ye++)for(let ae=0;ae<i.length;ae++)if(ye!==ae&&C._H.isEqual(i[ye].tbsView,i[ae].tbsView)){i.splice(ae,1),ye=0;break}const M=i[i.length-1];let z;const $=[M];if(z=yield a(M,e),0===z.length)throw new ll($r.noPath,"Unable to find certificate path");for(let ye=z.length-1;ye>=0;ye--){let ae=!1;for(let Se=0;Se<z[ye].length;Se++){const ce=z[ye][Se];for(let me=0;me<t.trustedCerts.length;me++)if(C._H.isEqual(ce.tbsView,t.trustedCerts[me].tbsView)){ae=!0;break}if(ae)break}ae||z.splice(ye,1)}if(0===z.length)throw new ll($r.noValidPath,"No valid certificate paths found");let le=z[0].length,ke=0;for(let ye=0;ye<z.length;ye++)z[ye].length<le&&(le=z[ye].length,ke=ye);for(let ye=0;ye<z[ke].length;ye++)$.push(z[ke][ye]);if(z=yield T($,t.checkDate),!1===z.result)throw z;return $})()}verify(r={},e=Ge(!0)){var t=this;return(0,_.A)(function*(){function i(g,T){const M=xs(g),z=xs(T),$=M.split("."),le=z.split("."),ke=$.length,ye=le.length;if(0===ke||0===ye||ke<ye)return!1;for(let ae=0;ae<ke;ae++)if(0===$[ae].length)return!1;for(let ae=0;ae<ye;ae++)if(0===le[ae].length){if(0===ae){if(1===ye)return!1;continue}return!1}for(let ae=0;ae<ye;ae++)if(0!==le[ye-1-ae].length&&0!==$[ke-1-ae].localeCompare(le[ye-1-ae]))return!1;return!0}function a(g,T){const M=xs(g),z=xs(T),$=M.split("@"),le=z.split("@");if(0===$.length||0===le.length||$.length<le.length)return!1;if(1===le.length){if(i($[1],le[0])){const ye=$[1].split("."),ae=le[0].split(".");return 0===ae[0].length||ye.length===ae.length}return!1}return 0===M.localeCompare(z)}function l(g,T){let M=xs(g);const z=xs(T),$=M.split("/");if(z.split("/").length>1)return!1;if($.length>1)for(let ye=0;ye<$.length;ye++)if($[ye].length>0&&":"!==$[ye].charAt($[ye].length-1)){M=$[ye].split(":")[0];break}if(i(M,z)){const ye=M.split("."),ae=z.split(".");return 0===ae[0].length||ye.length===ae.length}return!1}function h(g,T){const M=g.valueBlock.valueHexView,z=T.valueBlock.valueHexView;if(4===M.length&&8===z.length){for(let $=0;$<4;$++)if((M[$]^z[$])&z[$+4])return!1;return!0}if(16===M.length&&32===z.length){for(let $=0;$<16;$++)if((M[$]^z[$])&z[$+16])return!1;return!0}return!1}function d(g,T){if(0===g.typesAndValues.length||0===T.typesAndValues.length)return!0;if(g.typesAndValues.length<T.typesAndValues.length)return!1;let M=!0,z=0;for(let $=0;$<T.typesAndValues.length;$++){let le=!1;for(let ke=z;ke<g.typesAndValues.length;ke++)if(le=g.typesAndValues[ke].isEqual(T.typesAndValues[$]),g.typesAndValues[ke].type===T.typesAndValues[$].type&&(M=M&&le),!0===le){if(0===z||z===ke){z=ke+1;break}return!1}if(!1===le)return!1}return 0!==z&&M}try{if(0===t.certs.length)throw new Error("Empty certificate array");const g=r.passedWhenNotRevValues||!1,T=r.initialPolicySet||[Kt];let ae=r.initialExplicitPolicy||!1,Se=r.initialPolicyMappingInhibit||!1,ce=r.initialInhibitPolicy||!1;const me=[!1,!1,!1];let we=0,_e=0,Ne=0,Ie=r.initialPermittedSubtreesSet||[],Ue=r.initialExcludedSubtreesSet||[];const We=r.initialRequiredNameForms||[];let _t=1;t.certs=yield t.sort(g,e);const Xe=[];Xe.push(Kt);const dt=[],jt=new Array(t.certs.length-1);for(let De=0;De<t.certs.length-1;De++)jt[De]=!0;dt.push(jt);const Pt=new Array(t.certs.length-1),Rn=new Array(t.certs.length-1);let Ss=ae?t.certs.length-1:-1;for(let De=t.certs.length-2;De>=0;De--,_t++){const He=t.certs[De];if(He.extensions){for(let Re=0;Re<He.extensions.length;Re++){const qe=He.extensions[Re];if(qe.extnID===Gd){Rn[De]=qe.parsedValue;for(let nt=0;nt<Xe.length;nt++)if(Xe[nt]===Kt){delete dt[nt][De];break}for(let nt=0;nt<qe.parsedValue.certificatePolicies.length;nt++){let Mt=-1;const Qt=qe.parsedValue.certificatePolicies[nt].policyIdentifier;for(let vt=0;vt<Xe.length;vt++)if(Qt===Xe[vt]){Mt=vt;break}if(-1===Mt){Xe.push(Qt);const vt=new Array(t.certs.length-1);vt[De]=!0,dt.push(vt)}else dt[Mt][De]=!0}}if(qe.extnID===Jd){if(Se)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};Pt[De]=qe.parsedValue}qe.extnID===zd&&!1===ae&&(0===qe.parsedValue.requireExplicitPolicy?(ae=!0,Ss=De):!1===me[0]?(me[0]=!0,we=qe.parsedValue.requireExplicitPolicy):we=we>qe.parsedValue.requireExplicitPolicy?qe.parsedValue.requireExplicitPolicy:we,0===qe.parsedValue.inhibitPolicyMapping?Se=!0:!1===me[1]?(me[1]=!0,_e=qe.parsedValue.inhibitPolicyMapping+1):_e=_e>qe.parsedValue.inhibitPolicyMapping+1?qe.parsedValue.inhibitPolicyMapping+1:_e),"2.5.29.54"===qe.extnID&&!1===ce&&(0===qe.parsedValue.valueBlock.valueDec?ce=!0:!1===me[2]?(me[2]=!0,Ne=qe.parsedValue.valueBlock.valueDec):Ne=Ne>qe.parsedValue.valueBlock.valueDec?qe.parsedValue.valueBlock.valueDec:Ne)}if(!0===ce){let Re=-1;for(let qe=0;qe<Xe.length;qe++)if(Xe[qe]===Kt){Re=qe;break}-1!==Re&&delete dt[0][De]}!1===ae&&!0===me[0]&&(we--,0===we&&(ae=!0,Ss=De,me[0]=!1)),!1===Se&&!0===me[1]&&(_e--,0===_e&&(Se=!0,me[1]=!1)),!1===ce&&!0===me[2]&&(Ne--,0===Ne&&(ce=!0,me[2]=!1))}}for(let De=0;De<t.certs.length-1;De++)if(De<t.certs.length-2&&typeof Pt[De+1]<"u")for(let He=0;He<Pt[De+1].mappings.length;He++){if(Pt[De+1].mappings[He].issuerDomainPolicy===Kt||Pt[De+1].mappings[He].subjectDomainPolicy===Kt)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let Re=-1,qe=-1;for(let nt=0;nt<Xe.length;nt++)Xe[nt]===Pt[De+1].mappings[He].issuerDomainPolicy&&(Re=nt),Xe[nt]===Pt[De+1].mappings[He].subjectDomainPolicy&&(qe=nt);typeof dt[Re][De]<"u"&&delete dt[Re][De];for(let nt=0;nt<Rn[De].certificatePolicies.length;nt++)if(Pt[De+1].mappings[He].subjectDomainPolicy===Rn[De].certificatePolicies[nt].policyIdentifier&&-1!==Re&&-1!==qe)for(let Mt=0;Mt<=De;Mt++)typeof dt[qe][Mt]<"u"&&(dt[Re][Mt]=!0,delete dt[qe][Mt])}for(let De=0;De<Xe.length;De++)if(Xe[De]===Kt)for(let He=0;He<Ss;He++)delete dt[De][He];const Jt=[];for(let De=0;De<dt.length;De++){let He=!0;for(let Re=0;Re<t.certs.length-1;Re++){let qe=!1;if(Re<Ss&&Xe[De]===Kt&&Xe.length>1){He=!1;break}if(typeof dt[De][Re]>"u"){if(Re>=Ss)for(let nt=0;nt<Xe.length;nt++)if(Xe[nt]===Kt){!0===dt[nt][Re]&&(qe=!0);break}if(!qe){He=!1;break}}}!0===He&&Jt.push(Xe[De])}let ft=[];if(1===T.length&&T[0]===Kt&&!1===ae)ft=T;else if(1===Jt.length&&Jt[0]===Kt)ft=T;else for(let De=0;De<Jt.length;De++)for(let He=0;He<T.length;He++)if(T[He]===Jt[De]||T[He]===Kt){ft.push(Jt[De]);break}const at={result:ft.length>0,resultCode:0,resultMessage:ft.length>0?y:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:Jt,userConstrPolicies:ft,explicitPolicyIndicator:ae,policyMappings:Pt,certificatePath:t.certs};if(0===ft.length||!1===at.result)return at;_t=1;for(let De=t.certs.length-2;De>=0;De--,_t++){const He=t.certs[De];let Re=[],qe=[],nt=[];if(He.extensions)for(let Ye=0;Ye<He.extensions.length;Ye++){const je=He.extensions[Ye];je.extnID===$d&&("permittedSubtrees"in je.parsedValue&&(qe=qe.concat(je.parsedValue.permittedSubtrees)),"excludedSubtrees"in je.parsedValue&&(nt=nt.concat(je.parsedValue.excludedSubtrees))),je.extnID===Ld&&(Re=Re.concat(je.parsedValue.altNames))}let Mt=We.length<=0;for(let Ye=0;Ye<We.length;Ye++)switch(We[Ye].base.type){case 4:if(We[Ye].base.value.typesAndValues.length!==He.subject.typesAndValues.length)continue;Mt=!0;for(let je=0;je<He.subject.typesAndValues.length;je++)if(He.subject.typesAndValues[je].type!==We[Ye].base.value.typesAndValues[je].type){Mt=!1;break}if(!0===Mt)break}if(!1===Mt)throw at.result=!1,at.resultCode=21,at.resultMessage="No necessary name form found",at;const Qt=[[],[],[],[],[]];for(let Ye=0;Ye<Ie.length;Ye++)switch(Ie[Ye].base.type){case 1:Qt[0].push(Ie[Ye]);break;case 2:Qt[1].push(Ie[Ye]);break;case 4:Qt[2].push(Ie[Ye]);break;case 6:Qt[3].push(Ie[Ye]);break;case 7:Qt[4].push(Ie[Ye])}for(let Ye=0;Ye<5;Ye++){let je=!1,Vn=!1;const vi=Qt[Ye];for(let wi=0;wi<vi.length;wi++){switch(Ye){case 0:if(Re.length>0)for(let wt=0;wt<Re.length;wt++)1===Re[wt].type&&(Vn=!0,je=je||a(Re[wt].value,vi[wi].base.value));else for(let wt=0;wt<He.subject.typesAndValues.length;wt++)("1.2.840.113549.1.9.1"===He.subject.typesAndValues[wt].type||"0.9.2342.19200300.100.1.3"===He.subject.typesAndValues[wt].type)&&(Vn=!0,je=je||a(He.subject.typesAndValues[wt].value.valueBlock.value,vi[wi].base.value));break;case 1:if(Re.length>0)for(let wt=0;wt<Re.length;wt++)2===Re[wt].type&&(Vn=!0,je=je||i(Re[wt].value,vi[wi].base.value));break;case 2:Vn=!0,je=d(He.subject,vi[wi].base.value);break;case 3:if(Re.length>0)for(let wt=0;wt<Re.length;wt++)6===Re[wt].type&&(Vn=!0,je=je||l(Re[wt].value,vi[wi].base.value));break;case 4:if(Re.length>0)for(let wt=0;wt<Re.length;wt++)7===Re[wt].type&&(Vn=!0,je=je||h(Re[wt].value,vi[wi].base.value))}if(je)break}if(!1===je&&vi.length>0&&Vn)throw at.result=!1,at.resultCode=41,at.resultMessage='Failed to meet "permitted sub-trees" name constraint',at}let vt=!1;for(let Ye=0;Ye<Ue.length;Ye++){switch(Ue[Ye].base.type){case 1:if(Re.length>=0)for(let je=0;je<Re.length;je++)1===Re[je].type&&(vt=vt||a(Re[je].value,Ue[Ye].base.value));else for(let je=0;je<He.subject.typesAndValues.length;je++)("1.2.840.113549.1.9.1"===He.subject.typesAndValues[je].type||"0.9.2342.19200300.100.1.3"===He.subject.typesAndValues[je].type)&&(vt=vt||a(He.subject.typesAndValues[je].value.valueBlock.value,Ue[Ye].base.value));break;case 2:if(Re.length>0)for(let je=0;je<Re.length;je++)2===Re[je].type&&(vt=vt||i(Re[je].value,Ue[Ye].base.value));break;case 4:vt=vt||d(He.subject,Ue[Ye].base.value);break;case 6:if(Re.length>0)for(let je=0;je<Re.length;je++)6===Re[je].type&&(vt=vt||l(Re[je].value,Ue[Ye].base.value));break;case 7:if(Re.length>0)for(let je=0;je<Re.length;je++)7===Re[je].type&&(vt=vt||h(Re[je].value,Ue[Ye].base.value))}if(vt)break}if(!0===vt)throw at.result=!1,at.resultCode=42,at.resultMessage='Failed to meet "excluded sub-trees" name constraint',at;Ie=Ie.concat(qe),Ue=Ue.concat(nt)}return at}catch(g){return g instanceof Error?g instanceof ll?{result:!1,resultCode:g.code,resultMessage:g.message,error:g}:{result:!1,resultCode:$r.unknown,resultMessage:g.message,error:g}:g&&"object"==typeof g&&"resultMessage"in g?g:{result:!1,resultCode:-1,resultMessage:`${g}`}}})()}}const Oc="tbsResponseData",cl="signatureAlgorithm",ul="signature",Kr="certs",hl="BasicOCSPResponse",bh=`${hl}.${Oc}`,Ah=`${hl}.${cl}`,_h=`${hl}.${ul}`,Pc=`${hl}.${Kr}`,ug=[bh,Ah,_h,Pc];let hg=(()=>{class s extends ge{constructor(e={}){super(),this.tbsResponseData=o(e,Oc,s.defaultValues(Oc)),this.signatureAlgorithm=o(e,cl,s.defaultValues(cl)),this.signature=o(e,ul,s.defaultValues(ul)),Kr in e&&(this.certs=o(e,Kr,s.defaultValues(Kr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oc:return new fi;case cl:return new ie;case ul:return new Qe;case Kr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let i=fi.compareWithDefault("tbs",t.tbs)&&fi.compareWithDefault("responderID",t.responderID)&&fi.compareWithDefault("producedAt",t.producedAt)&&fi.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(i=i&&fi.compareWithDefault("responseExtensions",t.responseExtensions)),i}case cl:return t.algorithmId===y&&!("algorithmParams"in t);case ul:return t.isEqual(s.defaultValues(e));case Kr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||hl,value:[fi.schema(t.tbsResponseData||{names:{blockName:bh}}),ie.schema(t.signatureAlgorithm||{names:{blockName:Ah}}),new Qe({name:t.signature||_h}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new F({value:[new Ke({name:Pc,value:Gt.schema(t.certs||{})})]})]})]})}fromSchema(e){V(e,ug);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsResponseData=new fi({schema:t.result[bh]}),this.signatureAlgorithm=new ie({schema:t.result[Ah]}),this.signature=t.result[_h],Pc in t.result&&(this.certs=Array.from(t.result[Pc],i=>new Gt({schema:i})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:[new F({value:Array.from(this.certs,t=>t.toSchema())})]})),new F({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}getCertificateStatus(e,t,i=Ge(!0)){var a=this;return(0,_.A)(function*(){const l={isForCertificate:!1,status:2},h={},d=[];for(const g of a.tbsResponseData.responses){const T=i.getAlgorithmByOID(g.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!h[T.name]){h[T.name]=1;const M=new hi;d.push(M),yield M.createForCertificate(e,{hashAlgorithm:T.name,issuerCertificate:t},i)}}for(const g of a.tbsResponseData.responses)for(const T of d)if(g.certID.isEqual(T)){l.isForCertificate=!0;try{switch(g.certStatus.idBlock.isConstructed){case!0:1===g.certStatus.idBlock.tagNumber&&(l.status=1);break;case!1:switch(g.certStatus.idBlock.tagNumber){case 0:l.status=0;break;case 2:l.status=2}}}catch{}return l}return l})()}sign(e,t="SHA-1",i=Ge(!0)){var a=this;return(0,_.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters.algorithm;if(!("name"in h))throw new Error("Empty algorithm");a.signatureAlgorithm=l.signatureAlgorithm,a.tbsResponseData.tbsView=new Uint8Array(a.tbsResponseData.toSchema(!0).toBER());const d=yield i.signWithPrivateKey(a.tbsResponseData.tbsView,e,{algorithm:h});a.signature=new Qe({valueHex:d})})()}verify(e={},t=Ge(!0)){var i=this;return(0,_.A)(function*(){let a=null,l=-1;const h=e.trustedCerts||[];if(!i.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case i.tbsResponseData.responderID instanceof gt:for(const[M,z]of i.certs.entries())if(z.subject.isEqual(i.tbsResponseData.responderID)){l=M;break}break;case i.tbsResponseData.responderID instanceof ve:for(const[M,z]of i.certs.entries())if(Q(yield t.digest({name:"sha-1"},z.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),i.tbsResponseData.responderID.valueBlock.valueHex)){l=M;break}break;default:throw new Error("Wrong value for responderID")}if(-1===l)throw new Error("Correct certificate was not found in OCSP response");a=i.certs[l];const d=[a];for(const M of i.certs){const z=yield Uf(M,a);z&&d.push(z)}if(!(yield new Vc({certs:d,trustedCerts:h}).verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(i.tbsResponseData.tbsView,i.signature,i.certs[l].subjectPublicKeyInfo,i.signatureAlgorithm)})()}}return s.CLASS_NAME="BasicOCSPResponse",s})();const Eh="version",Ch="subject",Nh="subjectPublicKeyInfo",Gr="attributes",dl="signatureAlgorithm",fl="signatureValue",Jr="CertificationRequestInfo",Ih=`${Jr}.version`,xh=`${Jr}.subject`,Th=`${Jr}.subjectPublicKeyInfo`,Dc=`${Jr}.attributes`,dg=[Jr,Ih,xh,Th,Dc,dl,fl];function fg(s={}){const r=o(s,"names",{});return new F({name:r.CertificationRequestInfo||Jr,value:[new te({name:r.CertificationRequestInfoVersion||Ih}),gt.schema(r.subject||{names:{blockName:xh}}),is.schema({names:{blockName:Th}}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({optional:!0,name:r.CertificationRequestInfoAttributes||Dc,value:it.schema(r.attributes||{})})]})]})}let mg=(()=>{class s extends ge{get tbs(){return C._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Eh,s.defaultValues(Eh)),this.subject=o(e,Ch,s.defaultValues(Ch)),this.subjectPublicKeyInfo=o(e,Nh,s.defaultValues(Nh)),Gr in e&&(this.attributes=o(e,Gr,s.defaultValues(Gr))),this.signatureAlgorithm=o(e,dl,s.defaultValues(dl)),this.signatureValue=o(e,fl,s.defaultValues(fl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return Nt;case Eh:return 0;case Ch:return new gt;case Nh:return new is;case Gr:return[];case dl:return new ie;case fl:return new Qe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({value:[fg(t.certificationRequestInfo||{}),new F({name:t.signatureAlgorithm||dl,value:[new Be,new Fe({optional:!0})]}),new Qe({name:t.signatureValue||fl})]})}fromSchema(e){V(e,dg);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[Ih].valueBlock.valueDec,this.subject=new gt({schema:t.result[xh]}),this.subjectPublicKeyInfo=new is({schema:t.result[Th]}),Dc in t.result&&(this.attributes=Array.from(t.result[Dc],i=>new it({schema:i}))),this.signatureAlgorithm=new ie({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new te({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return Gr in this&&e.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],t=>t.toSchema())})),new F({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbsView.byteLength)return s.schema();const i=$e(this.tbsView);de.assert(i,"PKCS#10 Certificate Request"),t=i.result}else t=this.encodeTBS();return new F({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:C.U$.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Gr in this&&(e.attributes=Array.from(this.attributes||[],t=>t.toJSON())),e}sign(e,t="SHA-1",i=Ge(!0)){var a=this;return(0,_.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters;a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Qe({valueHex:d})})()}verify(e=Ge(!0)){var t=this;return(0,_.A)(function*(){return e.verifyWithPublicKey(t.tbsView,t.signatureValue,t.subjectPublicKeyInfo,t.signatureAlgorithm)})()}getPublicKey(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){return t.getPublicKey(i.subjectPublicKeyInfo,i.signatureAlgorithm,e)})()}}return s.CLASS_NAME="CertificationRequest",s})();const wn="digestAlgorithm",yn="digest",pg=[wn,yn];let zr=(()=>{class s extends ge{constructor(e={}){super(),this.digestAlgorithm=o(e,wn,s.defaultValues(wn)),this.digest=o(e,yn,s.defaultValues(yn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wn:return new ie;case yn:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wn:return ie.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case yn:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.digestAlgorithm||{names:{blockName:wn}}),new ve({name:t.digest||yn})]})}fromSchema(e){V(e,pg);const t=pe(e,e,s.schema({names:{digestAlgorithm:{names:{blockName:wn}},digest:yn}}));de.assertSchema(t,this.className),this.digestAlgorithm=new ie({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new F({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}return s.CLASS_NAME="DigestInfo",s})();const qr="eContentType",Yt="eContent",gg=[qr,Yt];let Wr=(()=>{class s extends ge{constructor(e={}){if(super(),this.eContentType=o(e,qr,s.defaultValues(qr)),Yt in e&&(this.eContent=o(e,Yt,s.defaultValues(Yt)),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const t=new ve({idBlock:{isConstructed:!0},isConstructed:!0});let i=0;const a=this.eContent.valueBlock.valueHexView.slice().buffer;let l=a.byteLength;for(;l>0;){const h=new Uint8Array(a,i,i+65536>a.byteLength?a.byteLength-i:65536),d=new ArrayBuffer(h.length),g=new Uint8Array(d);for(let T=0;T<g.length;T++)g[T]=h[T];t.valueBlock.value.push(new ve({valueHex:d})),l-=h.length,i+=h.length}this.eContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qr:return y;case Yt:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case qr:return t===y;case Yt:return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(s.defaultValues(Yt));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new Be({name:t.eContentType||y}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.eContent||y})]})]})}fromSchema(e){V(e,gg);const t=pe(e,e,s.schema({names:{eContentType:qr,eContent:Yt}}));de.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Yt in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new Be({value:this.eContentType})),this.eContent&&!1===s.compareWithDefault(Yt,this.eContent)&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new F({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&!1===s.compareWithDefault(Yt,this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}return s.CLASS_NAME="EncapsulatedContentInfo",s})();const Sn="mac",bn="macSalt",vs="iterations",vg=[Sn,bn,vs];let An=(()=>{class s extends ge{constructor(e={}){super(),this.mac=o(e,Sn,s.defaultValues(Sn)),this.macSalt=o(e,bn,s.defaultValues(bn)),vs in e&&(this.iterations=o(e,vs,s.defaultValues(vs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sn:return new zr;case bn:return new ve;case vs:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Sn:return zr.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&zr.compareWithDefault("digest",t.digest);case bn:return t.isEqual(s.defaultValues(e));case vs:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,optional:t.optional||!0,value:[zr.schema(t.mac||{names:{blockName:Sn}}),new ve({name:t.macSalt||bn}),new te({optional:!0,name:t.iterations||vs})]})}fromSchema(e){V(e,vg);const t=pe(e,e,s.schema({names:{mac:{names:{blockName:Sn}},macSalt:bn,iterations:vs}}));de.assertSchema(t,this.className),this.mac=new zr({schema:t.result.mac}),this.macSalt=t.result.macSalt,vs in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return void 0!==this.iterations&&e.push(new te({value:this.iterations})),new F({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return void 0!==this.iterations&&(e.iterations=this.iterations),e}}return s.CLASS_NAME="MacData",s})();const _n="hashAlgorithm",kn="hashedMessage",wg=[_n,kn];let ml=(()=>{class s extends ge{static create(e,t,i=Ge(!0)){return(0,_.A)(function*(){const a=i.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),l=yield i.digest(e,t);return new s({hashAlgorithm:new ie({algorithmId:a,algorithmParams:new ut}),hashedMessage:new ve({valueHex:l})})})()}constructor(e={}){super(),this.hashAlgorithm=o(e,_n,s.defaultValues(_n)),this.hashedMessage=o(e,kn,s.defaultValues(kn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _n:return new ie;case kn:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case _n:return t.algorithmId===y&&!("algorithmParams"in t);case kn:return 0===t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[ie.schema(t.hashAlgorithm||{}),new ve({name:t.hashedMessage||y})]})}fromSchema(e){V(e,wg);const t=pe(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:_n}},hashedMessage:kn}}));de.assertSchema(t,this.className),this.hashAlgorithm=new ie({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new F({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}return s.CLASS_NAME="MessageImprint",s})();const En="type",ws="attributes",Uc="encodedValue",Cg=[ws];let Ft=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,En,s.defaultValues(En)),this.attributes=o(e,ws,s.defaultValues(ws)),this.encodedValue=o(e,Uc,s.defaultValues(Uc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case En:return-1;case ws:return[];case Uc:return Nt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case En:return t===s.defaultValues(En);case ws:return 0===t.length;case Uc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new Y({name:t.blockName||y,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new Ke({name:t.attributes||y,value:it.schema()})]})}fromSchema(e){V(e,Cg);const t=pe(e,e,s.schema({names:{tagNumber:this.type,attributes:ws}}));if(de.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=C._H.toArrayBuffer(t.result.valueBeforeDecodeView),new Uint8Array(this.encodedValue)[0]=49,ws in t.result)this.attributes=Array.from(t.result.attributes,a=>new it({schema:a}));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(s.compareWithDefault(En,this.type)||s.compareWithDefault(ws,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new Y({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(s.compareWithDefault(En,this.type)||s.compareWithDefault(ws,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}return s.CLASS_NAME="SignedAndUnsignedAttributes",s})();const Xr="version",Cn="sid",Yr="digestAlgorithm",mi="signedAttrs",Zr="signatureAlgorithm",gl="signature",pi="unsignedAttrs",gi="SignerInfo",Bh=`${gi}.${Xr}`,vl=`${gi}.${Cn}`,Rh=`${gi}.${Yr}`,Mc=`${gi}.${mi}`,Vh=`${gi}.${Zr}`,Oh=`${gi}.${gl}`,Lc=`${gi}.${pi}`,Ng=[Bh,vl,Rh,Mc,Vh,Oh,Lc];let Ph=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Xr,s.defaultValues(Xr)),this.sid=o(e,Cn,s.defaultValues(Cn)),this.digestAlgorithm=o(e,Yr,s.defaultValues(Yr)),mi in e&&(this.signedAttrs=o(e,mi,s.defaultValues(mi))),this.signatureAlgorithm=o(e,Zr,s.defaultValues(Zr)),this.signature=o(e,gl,s.defaultValues(gl)),pi in e&&(this.unsignedAttrs=o(e,pi,s.defaultValues(pi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xr:return 0;case Cn:return new Fe;case Yr:return new ie;case mi:return new Ft({type:0});case Zr:return new ie;case gl:return new ve;case pi:return new Ft({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xr:return s.defaultValues(Xr)===t;case Cn:return t instanceof Fe;case Yr:return t instanceof ie&&t.isEqual(s.defaultValues(Yr));case mi:return Ft.compareWithDefault("type",t.type)&&Ft.compareWithDefault("attributes",t.attributes)&&Ft.compareWithDefault("encodedValue",t.encodedValue);case Zr:return t instanceof ie&&t.isEqual(s.defaultValues(Zr));case gl:case pi:return Ft.compareWithDefault("type",t.type)&&Ft.compareWithDefault("attributes",t.attributes)&&Ft.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:gi,value:[new te({name:t.version||Bh}),new pt({value:[Vt.schema(t.sidSchema||{names:{blockName:vl}}),new pt({value:[new Y({optional:!0,name:t.sid||vl,idBlock:{tagClass:3,tagNumber:0},value:[new ve]}),new Te({optional:!0,name:t.sid||vl,idBlock:{tagClass:3,tagNumber:0}})]})]}),ie.schema(t.digestAlgorithm||{names:{blockName:Rh}}),Ft.schema(t.signedAttrs||{names:{blockName:Mc,tagNumber:0}}),ie.schema(t.signatureAlgorithm||{names:{blockName:Vh}}),new ve({name:t.signature||Oh}),Ft.schema(t.unsignedAttrs||{names:{blockName:Lc,tagNumber:1}})]})}fromSchema(e){V(e,Ng);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.version=t.result[Bh].valueBlock.valueDec;const i=t.result[vl];this.sid=1===i.idBlock.tagClass?new Vt({schema:i}):i,this.digestAlgorithm=new ie({schema:t.result[Rh]}),Mc in t.result&&(this.signedAttrs=new Ft({type:0,schema:t.result[Mc]})),this.signatureAlgorithm=new ie({schema:t.result[Vh]}),this.signature=t.result[Oh],Lc in t.result&&(this.unsignedAttrs=new Ft({type:1,schema:t.result[Lc]}))}toSchema(){if(s.compareWithDefault(Cn,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new te({value:this.version})),e.push(this.sid instanceof Vt?this.sid.toSchema():this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&!1===s.compareWithDefault(mi,this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&!1===s.compareWithDefault(pi,this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new F({value:e})}toJSON(){if(s.compareWithDefault(Cn,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof Fe||(e.sid=this.sid.toJSON()),this.signedAttrs&&!1===s.compareWithDefault(mi,this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&!1===s.compareWithDefault(pi,this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}return s.CLASS_NAME="SignerInfo",s})();const wl="version",yl="policy",Sl="messageImprint",bl="serialNumber",Al="genTime",Nn="ordering",In="nonce",Qr="accuracy",ea="tsa",ta="extensions",Zt="TSTInfo",Dh=`${Zt}.${wl}`,Uh=`${Zt}.${yl}`,Mh=`${Zt}.${Sl}`,Lh=`${Zt}.${bl}`,Fh=`${Zt}.${Al}`,Fc=`${Zt}.${Qr}`,jc=`${Zt}.${Nn}`,Hc=`${Zt}.${In}`,$c=`${Zt}.${ea}`,Kc=`${Zt}.${ta}`,Ig=[Dh,Uh,Mh,Lh,Fh,Fc,jc,Hc,$c,Kc];let xg=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,wl,s.defaultValues(wl)),this.policy=o(e,yl,s.defaultValues(yl)),this.messageImprint=o(e,Sl,s.defaultValues(Sl)),this.serialNumber=o(e,bl,s.defaultValues(bl)),this.genTime=o(e,Al,s.defaultValues(Al)),Qr in e&&(this.accuracy=o(e,Qr,s.defaultValues(Qr))),Nn in e&&(this.ordering=o(e,Nn,s.defaultValues(Nn))),In in e&&(this.nonce=o(e,In,s.defaultValues(In))),ea in e&&(this.tsa=o(e,ea,s.defaultValues(ea))),ta in e&&(this.extensions=o(e,ta,s.defaultValues(ta))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return 0;case yl:return y;case Sl:return new ml;case bl:return new te;case Al:return new Date(0,0,0);case Qr:return new Dn;case Nn:return!1;case In:return new te;case ea:return new At;case ta:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wl:case yl:case Al:case Nn:return t===s.defaultValues(Nn);case Sl:return ml.compareWithDefault(_n,t.hashAlgorithm)&&ml.compareWithDefault(kn,t.hashedMessage);case bl:case In:return t.isEqual(s.defaultValues(In));case Qr:return Dn.compareWithDefault(Ts,t.seconds)&&Dn.compareWithDefault(Bs,t.millis)&&Dn.compareWithDefault(Rs,t.micros);case ea:return At.compareWithDefault(fa,t.type)&&At.compareWithDefault(ma,t.value);case ta:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||Zt,value:[new te({name:t.version||Dh}),new Be({name:t.policy||Uh}),ml.schema(t.messageImprint||{names:{blockName:Mh}}),new te({name:t.serialNumber||Lh}),new mt({name:t.genTime||Fh}),Dn.schema(t.accuracy||{names:{blockName:Fc}}),new _s({name:t.ordering||jc,optional:!0}),new te({name:t.nonce||Hc,optional:!0}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[At.schema(t.tsa||{names:{blockName:$c}})]}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ke({name:t.extensions||Kc,value:Di.schema(t.extension||{})})]})]})}fromSchema(e){V(e,Ig);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.version=t.result[Dh].valueBlock.valueDec,this.policy=t.result[Uh].valueBlock.toString(),this.messageImprint=new ml({schema:t.result[Mh]}),this.serialNumber=t.result[Lh],this.genTime=t.result[Fh].toDate(),Fc in t.result&&(this.accuracy=new Dn({schema:t.result[Fc]})),jc in t.result&&(this.ordering=t.result[jc].valueBlock.value),Hc in t.result&&(this.nonce=t.result[Hc]),$c in t.result&&(this.tsa=new At({schema:t.result[$c]})),Kc in t.result&&(this.extensions=Array.from(t.result[Kc],i=>new Di({schema:i})))}toSchema(){const e=[];return e.push(new te({value:this.version})),e.push(new Be({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new mt({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),void 0!==this.ordering&&e.push(new _s({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,t=>t.toSchema())})),new F({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),void 0!==this.ordering&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}verify(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const a=e.data;if(e.notBefore&&i.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&i.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const l=t.getAlgorithmByOID(i.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),h=yield t.digest(l.name,new Uint8Array(a));return C._H.isEqual(h,i.messageImprint.hashedMessage.valueBlock.valueHexView)})()}}return s.CLASS_NAME="TSTInfo",s})();const sa="version",_l="digestAlgorithms",kl="encapContentInfo",ia="certificates",na="crls",El="signerInfos",Cl="ocsps",xn="SignedData",jh=`${xn}.${sa}`,Gc=`${xn}.${_l}`,Hh=`${xn}.${kl}`,Jc=`${xn}.${ia}`,zc=`${xn}.${na}`,qc=`${xn}.${El}`,Tg=[jh,Gc,Hh,Jc,zc,qc];class Ot extends Error{constructor({message:r,code:e=0,date:t=new Date,signatureVerified:i=null,signerCertificate:a=null,signerCertificateVerified:l=null,timestampSerial:h=null,certificatePath:d=[]}){super(r),this.name="SignedDataVerifyError",this.date=t,this.code=e,this.timestampSerial=h,this.signatureVerified=i,this.signerCertificate=a,this.signerCertificateVerified=l,this.certificatePath=d}}let Jf=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,sa,s.defaultValues(sa)),this.digestAlgorithms=o(e,_l,s.defaultValues(_l)),this.encapContentInfo=o(e,kl,s.defaultValues(kl)),ia in e&&(this.certificates=o(e,ia,s.defaultValues(ia))),na in e&&(this.crls=o(e,na,s.defaultValues(na))),Cl in e&&(this.ocsps=o(e,Cl,s.defaultValues(Cl))),this.signerInfos=o(e,El,s.defaultValues(El)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sa:return 0;case _l:return[];case kl:return new Wr;case ia:case na:case Cl:case El:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case sa:return t===s.defaultValues(sa);case kl:return Wr.compareWithDefault("eContentType",t.eContentType)&&Wr.compareWithDefault("eContent",t.eContent);case _l:case ia:case na:case Cl:case El:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return void 0===t.optional&&(t.optional=!1),new F({name:t.blockName||xn,optional:t.optional,value:[new te({name:t.version||jh}),new Et({value:[new Ke({name:t.digestAlgorithms||Gc,value:ie.schema()})]}),Wr.schema(t.encapContentInfo||{names:{blockName:Hh}}),new Y({name:t.certificates||Jc,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:ur.schema().valueBlock.value}),new Y({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pc.schema(t.crls||{names:{crls:zc}}).valueBlock.value}),new Et({value:[new Ke({name:t.signerInfos||qc,value:Ph.schema()})]})]})}fromSchema(e){V(e,Tg);const t=pe(e,e,s.schema());if(de.assertSchema(t,this.className),this.version=t.result[jh].valueBlock.valueDec,Gc in t.result&&(this.digestAlgorithms=Array.from(t.result[Gc],i=>new ie({schema:i}))),this.encapContentInfo=new Wr({schema:t.result[Hh]}),Jc in t.result){const i=new ur({schema:new Et({value:t.result[Jc].valueBlock.value})});this.certificates=i.certificates.slice(0)}zc in t.result&&(this.crls=Array.from(t.result[zc],i=>1===i.idBlock.tagClass?new dc({schema:i}):(i.idBlock.tagClass=1,i.idBlock.tagNumber=16,new mc({schema:i})))),qc in t.result&&(this.signerInfos=Array.from(t.result[qc],i=>new Ph({schema:i})))}toSchema(e=!1){const t=[];if(this.version=this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Qs)||this.crls&&this.crls.length&&this.crls.some(i=>i instanceof mc)?5:this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Yi)?4:this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Pu)||this.signerInfos.some(i=>3===i.version)||this.encapContentInfo.eContentType!==s.ID_DATA?3:1,t.push(new te({value:this.version})),t.push(new Et({value:Array.from(this.digestAlgorithms,i=>i.toSchema())})),t.push(this.encapContentInfo.toSchema()),this.certificates){const a=new ur({certificates:this.certificates}).toSchema();t.push(new Y({idBlock:{tagClass:3,tagNumber:0},value:a.valueBlock.value}))}return this.crls&&t.push(new Y({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,i=>{if(i instanceof mc){const a=i.toSchema();return a.idBlock.tagClass=3,a.idBlock.tagNumber=1,a}return i.toSchema(e)})})),t.push(new Et({value:Array.from(this.signerInfos,i=>i.toSchema())})),new F({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,t=>t.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,t=>t.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,t=>t.toJSON())),this.crls&&(e.crls=Array.from(this.crls,t=>t.toJSON())),e}verify({signer:e=-1,data:t=Nt,trustedCerts:i=[],checkDate:a=new Date,checkChain:l=!1,passedWhenNotRevValues:h=!1,extendedMode:d=!1,findOrigin:g=null,findIssuer:T=null}={},M=Ge(!0)){var z=this;return(0,_.A)(function*(){let $=null,le=null;try{let ke=Nt,ye=y,ae=[];const Se=z.signerInfos[e];if(!Se)throw new Ot({date:a,code:1,message:"Unable to get signer by supplied index"});if(!z.certificates)throw new Ot({date:a,code:2,message:"No certificates attached to this signed data"});if(Se.sid instanceof Vt){for(const _e of z.certificates)if(_e instanceof Gt&&_e.issuer.isEqual(Se.sid.issuer)&&_e.serialNumber.isEqual(Se.sid.serialNumber)){$=_e;break}}else{const _e=Se.sid,Ne=_e.idBlock.isConstructed?_e.valueBlock.value[0].valueBlock.valueHex:_e.valueBlock.valueHex;for(const Ie of z.certificates)if(Ie instanceof Gt&&Q(yield M.digest({name:"sha-1"},Ie.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),Ne)){$=Ie;break}}if(!$)throw new Ot({date:a,code:3,message:"Unable to find signer certificate"});if("1.2.840.113549.1.9.16.1.4"===z.encapContentInfo.eContentType){if(!z.encapContentInfo.eContent)throw new Ot({date:a,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:$,timestampSerial:le,signerCertificateVerified:!0});let _e;try{_e=xg.fromBER(z.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new Ot({date:a,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:$,timestampSerial:le,signerCertificateVerified:!0})}if(a=_e.genTime,le=_e.serialNumber.valueBlock.valueHexView.slice(),0===t.byteLength)throw new Ot({date:a,code:4,message:"Missed detached data input array"});if(!(yield _e.verify({data:t},M)))throw new Ot({date:a,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:$,timestampSerial:le,signerCertificateVerified:!0})}if(l){const _e=z.certificates.filter(We=>We instanceof Gt&&!!Uf(We,$)),Ne={checkDate:a,certs:_e,trustedCerts:i};T&&(Ne.findIssuer=T),g&&(Ne.findOrigin=g);const Ie=new Vc(Ne);if(Ie.certs.push($),z.crls)for(const We of z.crls)"thisUpdate"in We?Ie.crls.push(We):"1.3.6.1.5.5.7.48.1.1"===We.otherRevInfoFormat&&Ie.ocsps.push(new hg({schema:We.otherRevInfo}));z.ocsps&&Ie.ocsps.push(...z.ocsps);const Ue=yield Ie.verify({passedWhenNotRevValues:h},M).catch(We=>{throw new Ot({date:a,code:5,message:`Validation of signer's certificate failed with error: ${We instanceof Object?We.resultMessage:We}`,signerCertificate:$,signerCertificateVerified:!1})});if(Ue.certificatePath&&(ae=Ue.certificatePath),!Ue.result)throw new Ot({date:a,code:5,message:`Validation of signer's certificate failed: ${Ue.resultMessage}`,signerCertificate:$,signerCertificateVerified:!1})}const ce=M.getAlgorithmByOID(Se.digestAlgorithm.algorithmId);if(!("name"in ce))throw new Ot({date:a,code:7,message:`Unsupported signature algorithm: ${Se.digestAlgorithm.algorithmId}`,signerCertificate:$,signerCertificateVerified:!0});ye=ce.name;const me=z.encapContentInfo.eContent;if(me)t=1===me.idBlock.tagClass&&4===me.idBlock.tagNumber?me.getValue():me.valueBlock.valueBeforeDecodeView;else if(0===t.byteLength)throw new Ot({date:a,code:8,message:"Missed detached data input array",signerCertificate:$,signerCertificateVerified:!0});if(Se.signedAttrs){let _e=!1,Ne=!1;for(const Ie of Se.signedAttrs.attributes)if("1.2.840.113549.1.9.3"===Ie.type&&(_e=!0),"1.2.840.113549.1.9.4"===Ie.type&&(Ne=!0,ke=Ie.values[0].valueBlock.valueHex),_e&&Ne)break;if(!1===_e)throw new Ot({date:a,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:$,signerCertificateVerified:!0});if(!1===Ne)throw new Ot({date:a,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:$,signerCertificateVerified:!0})}if(Se.signedAttrs){if(!Q(yield M.digest(ye,new Uint8Array(t)),ke))throw new Ot({date:a,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:$,timestampSerial:le,signerCertificateVerified:!0});t=Se.signedAttrs.encodedValue}const we="1.2.840.113549.1.1.1"===Se.signatureAlgorithm.algorithmId?yield M.verifyWithPublicKey(t,Se.signature,$.subjectPublicKeyInfo,Se.signatureAlgorithm,ye):yield M.verifyWithPublicKey(t,Se.signature,$.subjectPublicKeyInfo,Se.signatureAlgorithm);return d?{date:a,code:14,message:y,signatureVerified:we,signerCertificate:$,timestampSerial:le,signerCertificateVerified:!0,certificatePath:ae}:we}catch(ke){throw ke instanceof Ot?ke:new Ot({date:a,code:15,message:`Error during verification: ${ke instanceof Error?ke.message:ke}`,signatureVerified:null,signerCertificate:$,timestampSerial:le,signerCertificateVerified:!0})}})()}sign(e,t,i="SHA-1",a=Nt,l=Ge(!0)){var h=this;return(0,_.A)(function*(){var d;if(!e)throw new Error("Need to provide a private key for signing");const g=h.signerInfos[t];if(!g)throw new RangeError("SignerInfo index is out of range");(null===(d=g.signedAttrs)||void 0===d||!d.attributes.length)&&"hash"in e.algorithm&&"hash"in e.algorithm&&e.algorithm.hash&&(i=e.algorithm.hash.name);const T=l.getOIDByAlgorithm({name:i},!0,"hashAlgorithm");0===h.digestAlgorithms.filter(le=>le.algorithmId===T).length&&h.digestAlgorithms.push(new ie({algorithmId:T,algorithmParams:new ut})),g.digestAlgorithm=new ie({algorithmId:T,algorithmParams:new ut});const M=yield l.getSignatureParameters(e,i),z=M.parameters;if(g.signatureAlgorithm=M.signatureAlgorithm,g.signedAttrs)0!==g.signedAttrs.encodedValue.byteLength?a=g.signedAttrs.encodedValue:(a=g.signedAttrs.toSchema().toBER(),C._H.toUint8Array(a)[0]=49);else{const le=h.encapContentInfo.eContent;if(le)a=1===le.idBlock.tagClass&&4===le.idBlock.tagNumber?le.getValue():le.valueBlock.valueBeforeDecodeView;else if(0===a.byteLength)throw new Error("Missed detached data input array")}const $=yield l.signWithPrivateKey(a,e,z);g.signature=new ve({valueHex:$})})()}}return s.CLASS_NAME="SignedData",s.ID_DATA=vu,s})();const Tn="version",Bn="authSafe",ys="macData",Nl="parsedValue",Bg=[Tn,Bn,ys];let Rg=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Tn,s.defaultValues(Tn)),this.authSafe=o(e,Bn,s.defaultValues(Bn)),ys in e&&(this.macData=o(e,ys,s.defaultValues(ys))),Nl in e&&(this.parsedValue=o(e,Nl,s.defaultValues(Nl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tn:return 3;case Bn:return new Ut;case ys:return new An;case Nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tn:return t===s.defaultValues(e);case Bn:return Ut.compareWithDefault("contentType",t.contentType)&&Ut.compareWithDefault("content",t.content);case ys:return An.compareWithDefault("mac",t.mac)&&An.compareWithDefault("macSalt",t.macSalt)&&An.compareWithDefault("iterations",t.iterations);case Nl:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new F({name:t.blockName||y,value:[new te({name:t.version||Tn}),Ut.schema(t.authSafe||{names:{blockName:Bn}}),An.schema(t.macData||{names:{blockName:ys,optional:!0}})]})}fromSchema(e){V(e,Bg);const t=pe(e,e,s.schema({names:{version:Tn,authSafe:{names:{blockName:Bn}},macData:{names:{blockName:ys}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new Ut({schema:t.result.authSafe}),ys in t.result&&(this.macData=new An({schema:t.result.macData}))}toSchema(){const e=[new te({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new F({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}makeInternalValues(e={},t=Ge(!0)){var i=this;return(0,_.A)(function*(){if(ht.assert(e,"parameters","object"),!i.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(st.assertEmpty(i.parsedValue.integrityMode,"integrityMode","parsedValue"),st.assertEmpty(i.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),i.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new st("iterations");st.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),st.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),st.assertEmpty(e.password,"password");const a=new ArrayBuffer(64),l=new Uint8Array(a);t.getRandomValues(l);const h=i.parsedValue.authenticatedSafe.toSchema().toBER(!1);i.authSafe=new Ut({contentType:Ut.DATA,content:new ve({valueHex:h})});const d=yield t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:a,iterationCount:e.iterations,contentToStamp:h});i.macData=new An({mac:new zr({digestAlgorithm:new ie({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new ve({valueHex:d})}),macSalt:new ve({valueHex:a}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new st("signingCertificate");st.assertEmpty(e.privateKey,"privateKey"),st.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const a=i.parsedValue.authenticatedSafe.toSchema().toBER(!1),l=new Jf({version:1,encapContentInfo:new Wr({eContentType:"1.2.840.113549.1.7.1",eContent:new ve({valueHex:a})}),certificates:[e.signingCertificate]}),h=yield t.digest({name:e.hashAlgorithm},new Uint8Array(a)),d=[];d.push(new it({type:"1.2.840.113549.1.9.3",values:[new Be({value:"1.2.840.113549.1.7.1"})]})),d.push(new it({type:"1.2.840.113549.1.9.5",values:[new Pn({valueDate:new Date})]})),d.push(new it({type:"1.2.840.113549.1.9.4",values:[new ve({valueHex:h})]})),l.signerInfos.push(new Ph({version:1,sid:new Vt({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new Ft({type:0,attributes:d})})),yield l.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),i.authSafe=new Ut({contentType:"1.2.840.113549.1.7.2",content:l.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${i.parsedValue.integrityMode}`)}})()}parseInternalValues(e,t=Ge(!0)){var i=this;return(0,_.A)(function*(){switch(ht.assert(e,"parameters","object"),void 0===e.checkIntegrity&&(e.checkIntegrity=!0),i.parsedValue={},i.authSafe.contentType){case Ut.DATA:{st.assertEmpty(e.password,"password"),i.parsedValue.integrityMode=0,ht.assert(i.authSafe.content,"authSafe.content",ve);const a=i.authSafe.content.getValue();if(i.parsedValue.authenticatedSafe=hh.fromBER(a),e.checkIntegrity){if(!i.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const l=t.getAlgorithmByOID(i.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!(yield t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:l.name,salt:C._H.toArrayBuffer(i.macData.macSalt.valueBlock.valueHexView),iterationCount:i.macData.iterations||1,contentToVerify:a,signatureToVerify:C._H.toArrayBuffer(i.macData.mac.digest.valueBlock.valueHexView)})))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Ut.SIGNED_DATA:{i.parsedValue.integrityMode=1;const a=new Jf({schema:i.authSafe.content}),l=a.encapContentInfo.eContent;st.assert(l,"eContent","cmsSigned.encapContentInfo"),ht.assert(l,"eContent",ve);const h=l.getValue();if(i.parsedValue.authenticatedSafe=hh.fromBER(h),!(yield a.verify({signer:0,checkChain:!1},t)))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${i.authSafe.contentType}`)}})()}}return s.CLASS_NAME="PFX",s})();!function Xg(){if(typeof self<"u"){if("crypto"in self){let s="webcrypto";"webkitSubtle"in self.crypto&&(s="safari"),_f(s,new Kl({name:s,crypto}))}}else if(typeof crypto<"u"&&"webcrypto"in crypto){const s="NodeJS ^15",r=crypto.webcrypto;_f(s,new Kl({name:s,crypto:r}))}}();const Yg=function(){var s=(0,_.A)(function*(r,e,t,i,a,l){try{const h={name:"ECDSA",namedCurve:"P-384",typedCurve:""},d=yield crypto.subtle.generateKey(h,!0,["sign","verify"]),g=new mg;g.subject.typesAndValues.push(new hu({type:"2.5.4.3",value:new $t({value:"Test"})})),yield g.subjectPublicKeyInfo.importKey(d.publicKey),yield g.sign(d.privateKey,"SHA-384");const T=g.toSchema().toBER(!1),M=Il(T,"CERTIFICATE REQUEST"),z=yield new Promise((ye,ae)=>{r.issueNewCertificate(M,e,t,i).subscribe(Se=>{},Se=>{201===Se.status?ye(Se.error.text):(console.error("Error when trying to issue new certificate:",Se.error.message),ae(Se))})}),$=yield crypto.subtle.exportKey("pkcs8",d.privateKey),le=yield crypto.subtle.exportKey("spki",d.publicKey),ke=new zn({schema:$e($).result});if(a){const ae=Zg(z).map(me=>new Gt({schema:$e(me).result})),Se=Qg(),ce=yield e0(ke,ae,Se);return{certificate:z,publicKey:Il(le,"PUBLIC KEY"),privateKey:Il($,"PRIVATE KEY"),pkcs12Keystore:ce,keystorePassword:Se}}return{certificate:z,publicKey:Il(le,"PUBLIC KEY"),privateKey:Il($,"PRIVATE KEY")}}catch(h){return void console.error("Error while issuing new certificate:",h)}});return function(e,t,i,a,l,h){return s.apply(this,arguments)}}(),Il=(s,r)=>{let e=C.U$.ToBase64(s),t="";for(;e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return`-----BEGIN ${r}-----\n${t}-----END ${r}-----\n`},Zg=s=>{let r=s.split(/-----END CERTIFICATE-----/);return r=r.slice(0,r.length-1),r.map(t=>t.split(/-----BEGIN CERTIFICATE-----/)[1].replace(/\n/gm,"")).map(t=>C.U$.FromBase64(t))},Qg=()=>{const r=new Uint32Array(26);crypto.getRandomValues(r);let e="";for(const t of r)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_^$#&!%"[t%70];return e},e0=function(){var s=(0,_.A)(function*(r,e,t){const i=new ArrayBuffer(4);_u(new Uint8Array(i));const l=new ArrayBuffer(4);_u(new Uint8Array(l));const d=new ArrayBuffer(4);_u(new Uint8Array(d));const T=new ArrayBuffer(1);new Uint8Array(T)[0]|=128;const z=new Qe({valueHex:T,unusedBits:7});r.attributes=[new it({type:"2.5.29.15",values:[z]})];let $="";e[0].subject.typesAndValues.forEach(ae=>{"2.5.4.3"===ae.type&&($=ae.value.valueBlock.value)});let le="";e[1].subject.typesAndValues.forEach(ae=>{"2.5.4.3"===ae.type&&(le=ae.value.valueBlock.value)});const ke=new Rg({parsedValue:{integrityMode:0,authenticatedSafe:new hh({parsedValue:{safeContents:[{privacyMode:0,value:new nn({safeBags:[new Ko({bagId:"1.2.840.113549.1.12.10.1.2",bagValue:new Mf({parsedValue:r}),bagAttributes:[new it({type:"1.2.840.113549.1.9.20",values:[new qt({value:"PKCS8ShroudedKeyBag from PKIjs"})]}),new it({type:"1.2.840.113549.1.9.21",values:[new ve({valueHex:i})]}),new it({type:"1.3.6.1.4.1.311.17.1",values:[new qt({value:"MCP using https://pkijs.org/"})]})]})]})},{privacyMode:1,value:new nn({safeBags:[new Ko({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new qu({parsedValue:e[0]}),bagAttributes:[new it({type:"1.2.840.113549.1.9.20",values:[new qt({value:$})]}),new it({type:"1.2.840.113549.1.9.21",values:[new ve({valueHex:l})]}),new it({type:"1.3.6.1.4.1.311.17.1",values:[new qt({value:"MCP using https://pkijs.org/"})]})]}),new Ko({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new qu({parsedValue:e[1]}),bagAttributes:[new it({type:"1.2.840.113549.1.9.20",values:[new qt({value:le})]}),new it({type:"1.2.840.113549.1.9.21",values:[new ve({valueHex:d})]}),new it({type:"1.3.6.1.4.1.311.17.1",values:[new qt({value:"MCP using https://pkijs.org/"})]})]})]})}]}})}}),ye=m(t);return yield ke.parsedValue.authenticatedSafe.parsedValue.safeContents[0].value.safeBags[0].bagValue.makeInternalValues({password:ye,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-1",iterationCount:1e5}),yield ke.parsedValue.authenticatedSafe.makeInternalValues({safeContents:[{},{password:ye,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-1",iterationCount:1e5}]}),yield ke.makeInternalValues({password:ye,iterations:1e5,pbkdf2HashAlgorithm:"SHA-256",hmacHashAlgorithm:"SHA-256"}),ke.toSchema().toBER(!1)});return function(e,t,i){return s.apply(this,arguments)}}();var t0=I(888),s0=I(3830),i0=I(8168),Wc=I(1066),n0=I(2537);const r0={serialNumber:{title:"Serial number",type:"string"},start:{title:"Valid from",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)},end:{title:"Valid until",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)}},a0={serialNumber:{title:"Serial number",type:"string"},revokedAt:{title:"Revoked from",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)},revokeReason:{title:"Reason",type:"string"}},o0=s=>[s];function l0(s,r){if(1&s&&n.nrm(0,"app-smart-table",0),2&s){const e=n.XpG();n.Y8G("labels",e.columnsForActive)("data",e.data)("selectedIds",n.eq3(7,o0,e.serial))("onDelete",e.revoke)("onDownload",e.download)("onAdd",e.add)("itemType",e.itemType)}}function c0(s,r){if(1&s&&n.nrm(0,"app-smart-table",1),2&s){const e=n.XpG();n.Y8G("labels",e.columnsForRevoked)("data",e.data)("itemType",e.itemType)}}function u0(s,r){if(1&s&&(n.j41(0,"h1"),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("The given context is wrong! : ",e.context,"")}}let h0=(()=>{class s{constructor(){this.context="active",this.data=[],this.onAdd=new n.bkB,this.onDownload=new n.bkB,this.onRevoke=new n.bkB,this.itemType=c.SP.Certificate,this.download=e=>{this.onDownload.emit(e)},this.add=()=>{this.onAdd.emit()},this.revoke=e=>{this.onRevoke.emit(e)},this.empty=[],this.columnsForActive=r0,this.columnsForRevoked=a0}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-cert-table"]],inputs:{context:"context",data:"data",serial:"serial"},outputs:{onAdd:"onAdd",onDownload:"onDownload",onRevoke:"onRevoke"},standalone:!0,features:[n.aNF],decls:3,vars:1,consts:[["deleteText","Revoke","placeholder","There is no issued certificate.",3,"labels","data","selectedIds","onDelete","onDownload","onAdd","itemType"],["placeholder","There is no revoked certificate.",3,"labels","data","itemType"]],template:function(t,i){1&t&&n.DNE(0,l0,1,9,"app-smart-table",0)(1,c0,1,3,"app-smart-table",1)(2,u0,2,1,"h1"),2&t&&n.vxM("active"===i.context?0:"revoked"===i.context?1:2)},dependencies:[n0.B]})}return s})();function f0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.xc7("width",400,"px"),n.R7$(),n.JRh(t.convertTimeString(t.item[e.key]))}}function m0(s,r){1&s&&(n.j41(0,"span",7),n.EFF(1,"Active"),n.k0s())}function p0(s,r){if(1&s&&(n.j41(0,"span",11),n.EFF(1),n.k0s()),2&s){const e=r.$implicit;n.R7$(),n.JRh(e)}}function g0(s,r){if(1&s&&n.Z7z(0,p0,2,1,"span",11,n.fX1),2&s){const e=n.XpG(3).$implicit,t=n.XpG();n.Dyx(t.item[e.key])}}function v0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No value assigned"),n.k0s())}function w0(s,r){if(1&s&&n.DNE(0,g0,2,0)(1,v0,2,0,"button",10),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.vxM(t.item[e.key].length>0?0:1)}}function y0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(e);const i=n.XpG(2).$implicit,a=n.XpG();return n.Njj(a.openXmlDialog(a.item[i.key]))}),n.EFF(1,"View XML"),n.k0s()}}function S0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(e);const i=n.XpG(2).$implicit,a=n.XpG();return n.Njj(a.downloadDocFile(a.item[i.key]))}),n.EFF(1,"Download file"),n.k0s()}}function b0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.organization.name," (",e.item.organization.id,")")}}function A0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.subscriptionPlan.name," (",e.item.subscriptionPlan.id,")")}}function _0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.organizationSubscription.subscriptionPlan.name," (",e.item.organizationSubscription.id,")")}}function k0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.xc7("width",400,"px"),n.R7$(),n.JRh(t.item[e.key])}}function E0(s,r){if(1&s&&n.DNE(0,f0,2,3,"span",6)(1,m0,2,0,"span",7)(2,w0,2,1)(3,y0,2,0,"button",8)(4,S0,2,0,"button",8)(5,b0,2,4,"span",6)(6,A0,2,4,"span",6)(7,_0,2,4,"span",6)(8,k0,2,3,"span",6),2&s){const e=n.XpG().$implicit,t=n.XpG();n.vxM(t.isTimestampFormat(e.key)?0:"boolean"===e.value.type?1:"serviceType"===e.key||"dataProductType"===e.key?2:"instanceAsXml"===e.key?3:"instanceAsDoc"===e.key?4:"organizationId"===e.value.type?5:"subscriptionPlanId"===e.value.type?6:"organizationSubscriptionId"===e.value.type?7:8)}}function C0(s,r){1&s&&(n.j41(0,"span",13),n.EFF(1,"Inactive"),n.k0s())}function N0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No XML data available"),n.k0s())}function I0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No document available"),n.k0s())}function x0(s,r){1&s&&n.nrm(0,"span",9),2&s&&n.xc7("width",400,"px")}function T0(s,r){if(1&s&&n.DNE(0,C0,2,0,"span",13)(1,N0,2,0,"button",10)(2,I0,2,0,"button",10)(3,x0,1,2,"span",6),2&s){const e=n.XpG().$implicit;n.vxM("boolean"===e.value.type?0:"instanceAsXml"===e.key?1:"instanceAsDoc"===e.key?2:3)}}function B0(s,r){if(1&s&&(n.j41(0,"div",2)(1,"label",3),n.EFF(2),n.k0s(),n.j41(3,"div",4)(4,"div",5),n.DNE(5,E0,9,1)(6,T0,4,1),n.k0s()()()),2&s){const e=r.$implicit,t=n.XpG();n.R7$(2),n.JRh(e.value.title),n.R7$(3),n.vxM(t.item[e.key]?5:6)}}function R0(s,r){if(1&s){const e=n.RV6();n.j41(0,"div",2)(1,"label",3),n.EFF(2,"Active certificates"),n.k0s(),n.j41(3,"div",14)(4,"app-cert-table",15),n.bIt("onAdd",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.openCertModal())})("onDownload",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickDownloadBtn(i))})("onRevoke",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickRevokeBtn(i))}),n.k0s()()(),n.j41(5,"div",2)(6,"label",3),n.EFF(7,"Revoked certificates"),n.k0s(),n.j41(8,"div",14),n.nrm(9,"app-cert-table",16),n.k0s()()}if(2&s){const e=n.XpG();n.R7$(4),n.Y8G("data",e.activeCertificates)("serial",e.serial),n.R7$(5),n.Y8G("data",e.revokedCertificates)}}let V0=(()=>{class s{constructor(){this.itemType=c.SP.None,this.item={},this.showCertTables=!1,this.activeCertificates=[],this.revokedCertificates=[],this.columnForMenu={},this.serial=void 0,this.openXmlDialogCall=new n.bkB,this.downloadDocFileCall=new n.bkB,this.clickRevokeBtnCall=new n.bkB,this.clickDownloadBtnCall=new n.bkB,this.openCertModalCall=new n.bkB,this.convertTimeString=e=>(0,Wc.YF)(e),this.sortColumnForMenu=(e,t)=>((s,r)=>s.order>r.order?-1:1)(e,t),this.openXmlDialog=e=>{this.openXmlDialogCall.emit(e)},this.downloadDocFile=e=>{this.downloadDocFileCall.emit(e)},this.openCertModal=()=>{this.openCertModalCall.emit()},this.clickRevokeBtn=e=>{this.clickRevokeBtnCall.emit(e)},this.clickDownloadBtn=e=>{this.clickDownloadBtnCall.emit(e)}}isTimestampFormat(e){return c.N3.includes(e)}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-item-table"]],inputs:{itemType:"itemType",item:"item",showCertTables:"showCertTables",activeCertificates:"activeCertificates",revokedCertificates:"revokedCertificates",columnForMenu:"columnForMenu",serial:"serial"},outputs:{openXmlDialogCall:"openXmlDialogCall",downloadDocFileCall:"downloadDocFileCall",clickRevokeBtnCall:"clickRevokeBtnCall",clickDownloadBtnCall:"clickDownloadBtnCall",openCertModalCall:"openCertModalCall"},standalone:!0,features:[n.aNF],decls:4,vars:5,consts:[[1,"clr-form","clr-form-horizontal"],["class","clr-form-horizontal clr-form-control clr-row",4,"ngFor","ngForOf"],[1,"clr-form-horizontal","clr-form-control","clr-row"],[1,"clr-control-label","clr-col-12","clr-col-md-2"],["ng-reflect-ng-class","clr-col-md-10 clr-col-12",1,"clr-control-container","clr-col-md-10","clr-col-12"],[1,"clr-input-wrapper"],["clrinput","","type","string","ng-reflect-name","mrn","ng-reflect-required","true","required","","aria-describedby","clr-form-control-1-helper",1,"clr-input","ng-untouched","ng-pristine","ng-invalid","ng-star-inserted",3,"width"],[1,"label","label-success"],[1,"btn","btn-sm"],["clrinput","","type","string","ng-reflect-name","mrn","ng-reflect-required","true","required","","aria-describedby","clr-form-control-1-helper",1,"clr-input","ng-untouched","ng-pristine","ng-invalid","ng-star-inserted"],["disabled","",1,"btn","btn-sm","btn-outline"],[1,"label","label-light-blue"],[1,"btn","btn-sm",3,"click"],[1,"label","label-danger"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],["context","active",3,"onAdd","onDownload","onRevoke","data","serial"],["context","revoked",3,"data"]],template:function(t,i){1&t&&(n.j41(0,"div",0),n.DNE(1,B0,7,2,"div",1),n.nI1(2,"keyvalue"),n.DNE(3,R0,10,3),n.k0s()),2&t&&(n.R7$(),n.Y8G("ngForOf",n.i5U(2,2,i.columnForMenu,i.sortColumnForMenu)),n.R7$(2),n.vxM(i.showCertTables?3:-1))},dependencies:[h0,N.pM,u.G,N.lG]})}return s})();var qf=I(2269);let O0=(()=>{class s{constructor(e,t){this.usersService=e,this.organizationsService=t}ngOnInit(){}formatCerts(e){let t=[];for(const i in e){const a=e[i];for(const l in a)e[i][l]=a[l];a.revoked&&(a.revokeInfo=a.revokedAt),t.push(a)}return t}splitByRevokeStatus(e){let t=[],i=[];for(const a in e){const l=e[a];l.revoked?i.push(l):t.push(l)}return t.sort((a,l)=>a.end-l.end),i.sort((a,l)=>a.end-l.end),{activeCertificates:this.formatCerts(t),revokedCertificates:this.formatCerts(i)}}issueNewCertificate(e,t,i,a){if(null==t||!i)throw new Error("Internal state lost");switch(t){case c.SP.Organization:return this.organizationsService.newOrgCertFromCsr(e,i);case c.SP.User:return this.usersService.newUserCertFromCsr(e,a,i);default:throw new Error("Unknown item type")}}revokeCertificate(e,t,i,a,l){if(null==e||!t)throw new Error("Internal state lost");throw new Error("Unknown item type")}static#e=this.\u0275fac=function(t){return new(t||s)(n.KVO(qf.Tz),n.KVO(qf.PZ))};static#t=this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Wf=I(9380),P0=I(5189),$h=I(5540),D0=I(8721);let U0=(()=>{class s{constructor(e){this.translate=e}downloadPemCertificate(e,t,i){try{const a=t.split(" ").join("_"),l=new D0;l.file("Certificate_"+a+".pem",e.certificate),e.privateKey&&l.file("PrivateKey_"+a+".pem",e.privateKey),e.publicKey&&l.file("PublicKey_"+a+".pem",e.publicKey),e.pkcs12Keystore&&l.file("Keystore_"+a+".p12",e.pkcs12Keystore),e.keystorePassword&&l.file("KeystorePassword_"+a+".txt",e.keystorePassword),l.generateAsync({type:"blob"}).then(function(h){$h.saveAs(h,"Certificate_"+a+".zip")})}catch(a){i.notify("error",this.translate.instant("error.file.downloadcert")+a)}}downloadBase64File(e,t,i,a){try{let l=this.convertBase64ToByteArray(e),h=new Blob([l],{type:t});$h.saveAs(h,i)}catch(l){a.notify("error",this.translate.instant("error.file.downloaderror")+l)}}downloadFile(e,t,i,a){try{let l=new Blob([e],{type:t});$h.saveAs(l,i)}catch(l){a.notify("error",this.translate.instant("error.file.downloaderror")+l)}}convertBase64ToByteArray(e){let t=window.atob(e),i=new Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Uint8Array(i)}static#e=this.\u0275fac=function(t){return new(t||s)(n.KVO(Wf.c$))};static#t=this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var M0=I(6482);const L0=["certModal"],F0=["revokeModal"],j0=["migrateModal"],H0=["xmlModal"];function $0(s,r){1&s&&n.EFF(0," Organization details ")}function K0(s,r){if(1&s&&n.EFF(0),2&s){const e=n.XpG();n.SpI(" ",e.capitalize(e.itemType)," details ")}}function G0(s,r){1&s&&(n.j41(0,"div",10)(1,"span",37),n.EFF(2,"Loading..."),n.k0s()())}function J0(s,r){if(1&s){const e=n.RV6();n.j41(0,"app-item-table",38),n.bIt("clickDownloadBtnCall",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickDownloadBtn(i))})("clickRevokeBtnCall",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickRevokeBtn(i))})("openCertModalCall",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.openCertModal())}),n.k0s()}if(2&s){const e=n.XpG();n.Y8G("item",e.item)("itemType",e.itemType)("showCertTables",e.showCertTables)("activeCertificates",e.activeCertificates)("revokedCertificates",e.revokedCertificates)("columnForMenu",e.columnForMenu)("serial",e.serial)}}function z0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",39),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.clickMigrateBtn())}),n.EFF(1,"Migrate"),n.k0s()}}function q0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",40),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.approve())}),n.EFF(1,"Approve"),n.k0s(),n.j41(2,"button",39),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.edit())}),n.EFF(3,"Edit"),n.k0s()}}function W0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",39),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.edit())}),n.EFF(1,"Edit"),n.k0s()}}function X0(s,r){1&s&&(n.j41(0,"div",19)(1,"p"),n.EFF(2,"Here is your certificate bundle. You can download it by clicking the button below."),n.k0s()())}function Y0(s,r){if(1&s&&(n.j41(0,"h3",16),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("Revoke ",e.selectedActiveCerts.length," certificates")}}function Z0(s,r){if(1&s&&(n.j41(0,"h3",16),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("Revoke ",e.selectedActiveCerts.length," certificate")}}function Q0(s,r){if(1&s){const e=n.RV6();n.j41(0,"clr-radio-wrapper")(1,"input",41),n.bIt("click",function(){const i=n.eBV(e).$implicit,a=n.XpG();return n.Njj(a.revokeReason=i)}),n.k0s(),n.j41(2,"label"),n.EFF(3),n.k0s()()}if(2&s){const e=r.$implicit;n.R7$(3),n.JRh(e.title)}}function ev(s,r){if(1&s&&(n.j41(0,"div")(1,"span"),n.EFF(2),n.k0s()(),n.j41(3,"div")(4,"a",42),n.EFF(5,"More info"),n.k0s()()),2&s){const e=n.XpG();n.R7$(2),n.JRh(e.revokeReason.description),n.R7$(2),n.Y8G("href",e.revokeReason.reference,n.B4B)}}function tv(s,r){1&s&&(n.j41(0,"div")(1,"span"),n.EFF(2,"Select reason name"),n.k0s()())}let sv=(()=>{class s{constructor(e,t,i,a,l,h){this.certificateService=e,this.translate=t,this.notifier=i,this.fileHelper=a,this.locale=h,this.itemType=c.SP.None,this.item={},this.orgMrn="",this.mrnPrefix="urn:mrn:",this.instanceVersion=void 0,this.serial=void 0,this.isLoading=!0,this.onEdit=new n.bkB,this.onMigrate=new n.bkB,this.onDelete=new n.bkB,this.onRefresh=new n.bkB,this.onApprove=new n.bkB,this.onDownloadCert=new n.bkB,this.viewContext="detail",this.columnForMenu={},this.itemId="",this.activeCertificates=[],this.revokedCertificates=[],this.revokeModalOpened=!1,this.certModalOpened=!1,this.fromBrowser=!0,this.revokeReason=void 0,this.revokeReasons=[],this.selectedActiveCerts=[],this.revokeAt=void 0,this.reasonTitle="",this.certificateBundle=void 0,this.migrateModalOpened=!1,this.newServiceMrn="",this.userItemType=c.SP.User,this.adminUser={permissions:i0.s},this.adminUserMrnPrefix="urn:mrn:mcp:",this.xmlModalOpened=!1,this.xmlContent="",this.showCertTables=!1,this.geometry=[],this.geometryNames=[],this.checkIfShowCertTables=()=>{this.showCertTables=this.itemType===c.SP.UserCert},this.setForm=()=>{this.itemType!==c.SP.None&&Object.entries(w.Y[this.itemType.toString()]).map(([d,g])=>{g.visibleFrom&&(g.visibleFrom&&!g.visibleFrom.includes(this.viewContext)||(this.columnForMenu[d]=g))})},this.assignCertificatesByStatus=d=>{this.activeCertificates=[],this.revokedCertificates=[],d.sort((g,T)=>g.start<T.start?1:-1),d.map(g=>{g.revoked?this.revokedCertificates.push(g):this.activeCertificates.push(g)}),this.revokedCertificates=this.updateRevokeReason(this.revokedCertificates)},this.updateRevokeReason=d=>d.map(g=>({...g,revokeReason:this.revokeReasons.filter(T=>T.value===g.revokeReason)[0].title})),this.edit=()=>{this.onEdit.emit(this.item)},this.migrate=()=>{this.onMigrate.emit(this.newServiceMrn)},this.approve=()=>{this.onApprove.emit(this.item)},this.deleteItem=()=>{this.onDelete.emit(this.item)},this.openCertModal=()=>{this.itemType===c.SP.Service&&this.instanceVersion?this.notifier.notify("error",this.translate.instant("error.form.requiremigrate")):(this.certModal?.open(),this.certModalOpened=!0,this.issue())},this.openXmlDialog=(d,g=!1)=>{this.xmlModalOpened=!0,this.xmlModal?.open(),this.xmlContent=d.content},this.downloadDocFile=d=>{this.downloadFile(d.name,d.filecontentContentType,d.filecontent)},this.issue=()=>{Yg(this.certificateService,this.itemType===c.SP.UserCert?c.SP.User:this.itemType,this.itemId,this.orgMrn,this.fromBrowser,this.instanceVersion).then(d=>{this.certificateBundle=d,this.notifier.notify("success",this.translate.instant("success.resource.create"))})},this.revokeCerts=d=>{this.revokeAt=new Date(Date.parse(this.revokeAt.toLocaleString()))},this.clickDownloadBtn=d=>{0!==d.length?d.forEach(g=>{const T=(0,N.Yq)(g.end,"yyyy-MM-ddTHH-mm-ss",this.locale);this.fileHelper.downloadPemCertificate({certificate:g.certificate},this.item.mrn+"_exp_"+T,this.notifier)}):this.notifier.notify("warning",this.translate.instant("error.selection.noSelection"))},this.clickRevokeBtn=d=>{this.itemType===c.SP.Service&&this.instanceVersion?this.notifier.notify("error",this.translate.instant("error.form.requiremigrate")):0!==d.length?(this.revokeModalOpened=!0,this.selectedActiveCerts=d):this.notifier.notify("warning",this.translate.instant("error.selection.noSelection"))},this.clickMigrateBtn=()=>{this.migrateModal?.open(),this.migrateModalOpened=!0,this.newServiceMrn=this.item.mrn+":"+this.instanceVersion},this.cancel=()=>{this.certModal?.close(),this.certModalOpened=!1,this.revokeModal?.close(),this.revokeModalOpened=!1,this.migrateModal?.close(),this.migrateModalOpened=!1,this.onRefresh.emit(),this.newServiceMrn="",this.certificateBundle=void 0},this.refreshData=()=>{this.onRefresh.emit()},this.issueFromBrowser=()=>{this.fromBrowser=!0},this.issueManualKeystore=()=>{this.fromBrowser=!1},this.capitalize=d=>d[0].toUpperCase()+d.slice(1),this.revokeReasons.sort((d,g)=>d.value.localeCompare(g.value)),l.getOrgMrn().then(d=>{this.orgMrn=d})}ngOnChanges(e){!e.item||!e.item.currentValue||(this.item=e.item.currentValue&&e.item.currentValue,this.item&&this.itemType===c.SP.Role?(this.itemId=this.item.id,this.setForm()):this.item&&(this.itemId=this.item.mrn,this.setForm(),this.item.certificates&&this.assignCertificatesByStatus(this.item.certificates)),this.itemType===c.SP.OrgCandidate&&(this.adminUserMrnPrefix=(0,s0.B)(this.item.mrn,this.itemType)),this.checkIfShowCertTables())}downloadFile(e,t,i){for(var a=atob(i.replace(/\s/g,"")),l=a.length,h=new ArrayBuffer(l),d=new Uint8Array(h),g=0;g<l;g++)d[g]=a.charCodeAt(g);var T=new Blob([d],{type:t}),M=window.document.createElement("a");M.href=window.URL.createObjectURL(T),M.download=e,document.body.appendChild(M),M.click(),document.body.removeChild(M)}download(){this.certificateBundle&&(this.fileHelper.downloadPemCertificate(this.certificateBundle,this.itemId,this.notifier),this.notifier.notify("success",this.translate.instant("success.certificate.chosen")))}static#e=this.\u0275fac=function(t){return new(t||s)(n.rXU(O0),n.rXU(Wf.c$),n.rXU(P0.iJ),n.rXU(U0),n.rXU(M0.u),n.rXU(n.xe9))};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-item-view"]],viewQuery:function(t,i){if(1&t&&(n.GBs(L0,7),n.GBs(F0,7),n.GBs(j0,7),n.GBs(H0,7),n.GBs(t0.j,5)),2&t){let a;n.mGM(a=n.lsd())&&(i.certModal=a.first),n.mGM(a=n.lsd())&&(i.revokeModal=a.first),n.mGM(a=n.lsd())&&(i.migrateModal=a.first),n.mGM(a=n.lsd())&&(i.xmlModal=a.first),n.mGM(a=n.lsd())&&(i.newAdminUserForm=a.first)}},inputs:{itemType:"itemType",item:"item",orgMrn:"orgMrn",mrnPrefix:"mrnPrefix",instanceVersion:"instanceVersion",serial:"serial",isLoading:"isLoading"},outputs:{onEdit:"onEdit",onMigrate:"onMigrate",onDelete:"onDelete",onRefresh:"onRefresh",onApprove:"onApprove",onDownloadCert:"onDownloadCert"},standalone:!0,features:[n.OA$,n.aNF],decls:121,vars:15,consts:[["certModal",""],["revokeModal",""],["migrateModal",""],["xmlModal",""],[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[1,"card"],[1,"card-header"],[1,"card-block"],[1,"card-text"],[1,"clr-row","clr-justify-content-center"],[3,"item","itemType","showCertTables","activeCertificates","revokedCertificates","columnForMenu","serial"],[1,"card-footer"],[1,"btn","btn-primary"],[1,"btn","btn-danger",3,"click"],["clrModalSize","lg",1,"modal",3,"clrModalOpenChange","clrModalOpen"],[1,"modal-title"],["aria-label","Close","type","button",1,"close",3,"click"],[1,"modal-body"],[1,"clr-col-sm-12","clr-col-md-12"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],[1,"clr-col-4"],[1,"clr-col-8"],["type","date","autocomplete","off","clrDate","","name","demo",3,"ngModelChange","ngModel"],[1,"clr-form"],[1,"clr-form-control"],["for","basic",1,"clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","basic","placeholder","Enter value here",1,"clr-input",3,"value"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"clr-subtext"],[1,"clr-textarea-wrapper"],["clrTextarea","","cols","100","rows","40"],["href","https://www.iala-aism.org/product/g1128-specification-of-e-nav-technical-service-fillable-annex-f-service-instance-description/","target","_blank"],[1,"spinner"],[3,"clickDownloadBtnCall","clickRevokeBtnCall","openCertModalCall","item","itemType","showCertTables","activeCertificates","revokedCertificates","columnForMenu","serial"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],["type","radio","clrRadio","","name","options","required","",3,"click"],["target","_blank",3,"href"]],template:function(t,i){if(1&t){const a=n.RV6();n.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),n.DNE(4,$0,1,0)(5,K0,1,1),n.k0s(),n.j41(6,"div",8)(7,"div",9)(8,"div",4),n.DNE(9,G0,3,0,"div",10)(10,J0,1,7,"app-item-table",11),n.k0s()()(),n.j41(11,"div",12),n.DNE(12,z0,2,0,"button",13)(13,q0,4,0)(14,W0,2,0,"button",13),n.j41(15,"button",14),n.bIt("click",function(){return n.eBV(a),n.Njj(i.deleteItem())}),n.EFF(16,"Delete"),n.k0s()()()()(),n.j41(17,"clr-modal",15,0),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.certModalOpened,h)||(i.certModalOpened=h),n.Njj(h)}),n.j41(19,"div",16)(20,"button",17),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.j41(21,"h3",16),n.EFF(22,"Issue a new certificate"),n.k0s()(),n.j41(23,"div",18),n.DNE(24,X0,3,0,"div",19),n.k0s(),n.j41(25,"div",20)(26,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.download())}),n.EFF(27,"Download certificate"),n.k0s(),n.j41(28,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(29,"Close"),n.k0s()()(),n.j41(30,"clr-modal",15,1),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.revokeModalOpened,h)||(i.revokeModalOpened=h),n.Njj(h)}),n.j41(32,"div",16)(33,"button",17),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.DNE(34,Y0,2,1,"h3",16)(35,Z0,2,1,"h3",16),n.k0s(),n.j41(36,"div",18)(37,"div",19)(38,"div",4)(39,"span")(40,"b"),n.EFF(41,"Warning: chosen certificates will no longer be valid when they are revoked!"),n.k0s()()(),n.j41(42,"div",4)(43,"div",23)(44,"div")(45,"h5"),n.EFF(46,"Reason name"),n.k0s()(),n.j41(47,"div"),n.Z7z(48,Q0,4,1,"clr-radio-wrapper",null,n.fX1),n.k0s()(),n.j41(50,"div",24)(51,"div")(52,"h5"),n.EFF(53,"Explanation"),n.k0s()(),n.j41(54,"div"),n.DNE(55,ev,6,2)(56,tv,3,0,"div"),n.k0s()()(),n.j41(57,"div",4)(58,"div",23)(59,"div")(60,"h5"),n.EFF(61,"Revoke at"),n.k0s()()(),n.j41(62,"div",24)(63,"clr-date-container")(64,"input",25),n.mxI("ngModelChange",function(h){return n.eBV(a),n.DH7(i.revokeAt,h)||(i.revokeAt=h),n.Njj(h)}),n.k0s()()()(),n.j41(65,"div",4)(66,"div")(67,"p"),n.EFF(68,"Choose revocation reason and date to proceed."),n.k0s()()()()(),n.j41(69,"div",20)(70,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.revokeCerts(i.selectedActiveCerts))}),n.EFF(71,"Revoke"),n.k0s(),n.j41(72,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(73,"Cancel"),n.k0s()()(),n.j41(74,"clr-modal",15,2),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.migrateModalOpened,h)||(i.migrateModalOpened=h),n.Njj(h)}),n.j41(76,"div",16)(77,"button",17),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.EFF(78," Migrate service "),n.k0s(),n.j41(79,"div",18)(80,"div",19)(81,"div",4)(82,"span"),n.EFF(83,"This migration allows you to remove the version from an existing service's MRN by assigning a new MRN that includes the version. It simplifies version management and future updates, making it easier for users to maintain and update services. The MRN below is given as an example, but you can edit it as you want."),n.k0s()(),n.j41(84,"div",4)(85,"form",26)(86,"div",27)(87,"label",28),n.EFF(88,"Recommended new MRN for your service"),n.k0s(),n.j41(89,"div",29)(90,"div",30),n.nrm(91,"input",31)(92,"cds-icon",32),n.k0s(),n.j41(93,"span",33),n.EFF(94,"New MRN can have the version of service inside."),n.k0s()()()()()()(),n.j41(95,"div",20)(96,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.migrate())}),n.EFF(97,"Migrate"),n.k0s(),n.j41(98,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(99,"Cancel"),n.k0s()()(),n.j41(100,"clr-modal",15,3),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.xmlModalOpened,h)||(i.xmlModalOpened=h),n.Njj(h)}),n.j41(102,"div",16)(103,"button",17),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.EFF(104," XML editor "),n.k0s(),n.j41(105,"div",18)(106,"div",19)(107,"div",4)(108,"div",29)(109,"div",34)(110,"textarea",35),n.EFF(111),n.k0s(),n.nrm(112,"cds-icon",32),n.k0s(),n.j41(113,"span",33)(114,"a",36),n.EFF(115,"What is G1128?"),n.k0s()()()()()(),n.j41(116,"div",20)(117,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.migrate())}),n.EFF(118,"Migrate"),n.k0s(),n.j41(119,"button",22),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(120,"Cancel"),n.k0s()()()}2&t&&(n.R7$(4),n.vxM("orgcandidate"===i.itemType?4:5),n.R7$(5),n.vxM(i.isLoading?9:10),n.R7$(3),n.vxM("service"===i.itemType&&i.instanceVersion?12:"orgcandidate"===i.itemType?13:14),n.R7$(5),n.R50("clrModalOpen",i.certModalOpened),n.R7$(7),n.vxM(i.certificateBundle?24:-1),n.R7$(6),n.R50("clrModalOpen",i.revokeModalOpened),n.R7$(4),n.vxM(i.selectedActiveCerts.length>1?34:35),n.R7$(14),n.Dyx(i.revokeReasons),n.R7$(7),n.vxM(i.revokeReason?55:56),n.R7$(9),n.R50("ngModel",i.revokeAt),n.R7$(10),n.R50("clrModalOpen",i.migrateModalOpened),n.R7$(17),n.xc7("width",400,"px"),n.Y8G("value",i.newServiceMrn),n.R7$(9),n.R50("clrModalOpen",i.xmlModalOpened),n.R7$(11),n.JRh(i.xmlContent))},dependencies:[u.G,B.z7t,B.bZN,B.zN1,B.BlU,B.jsN,B.aZZ,B.fkp,B.cIb,B.DRH,B.CxT,B.lnv,B._Qf,B.WF1,p.YN,p.qT,p.me,p.BC,p.cb,p.vS,p.cV,B.UcF,B.eJj,V0]})}return s})()},3426:(et,P,I)=>{"use strict";I.d(P,{d:()=>D});var n=I(6994),c=I(5950),w=I(6908),p=I(5166),N=I(3103),u=I(1066),B=I(9677),_=I(8745),C=I(6482);function S(J,m){if(1&J){const j=c.RV6();c.j41(0,"div")(1,"button",1),c.bIt("click",function(){c.eBV(j);const V=c.XpG();return c.Njj(V.back())}),c.EFF(2,"Back"),c.k0s()(),c.j41(3,"div",2)(4,"div",3)(5,"app-item-view",4),c.bIt("onEdit",function(){c.eBV(j);const V=c.XpG();return c.Njj(V.edit(V.selectedItem))})("onDelete",function(){c.eBV(j);const V=c.XpG();return c.Njj(V.deleteItem(V.selectedItem))})("onRefresh",function(){c.eBV(j);const V=c.XpG();return c.Njj(V.refreshData())})("onMigrate",function(V){c.eBV(j);const xe=c.XpG();return c.Njj(xe.migrate(V))})("onApprove",function(V){c.eBV(j);const xe=c.XpG();return c.Njj(xe.approve(V))}),c.k0s()()()}if(2&J){const j=c.XpG();c.R7$(5),c.Y8G("itemType",j.itemType)("item",j.selectedItem)("isLoading",!1)}}function o(J,m){if(1&J){const j=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV(j);const V=c.XpG(3);return c.Njj(V.onAdd())}),c.nrm(2,"cds-icon",11),c.EFF(3),c.k0s()()}if(2&J){const j=c.XpG(3);c.R7$(3),c.SpI(" ",j.addText," ")}}function A(J,m){if(1&J){const j=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV(j);const V=c.XpG(3);return c.Njj(V.onDelete(V.selected))}),c.nrm(2,"cds-icon",12),c.EFF(3),c.k0s(),c.j41(4,"button",10),c.bIt("click",function(){c.eBV(j);const V=c.XpG(3);return c.Njj(V.onDownload(V.selected))}),c.nrm(5,"cds-icon",13),c.EFF(6),c.k0s()()}if(2&J){const j=c.XpG(3);c.R7$(3),c.SpI(" ",j.deleteText,""),c.R7$(3),c.SpI(" ",j.downloadText,"")}}function k(J,m){if(1&J){const j=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV(j);const V=c.XpG(3);return c.Njj(V.onDelete(V.selected))}),c.nrm(2,"cds-icon",12),c.EFF(3),c.k0s()()}if(2&J){const j=c.XpG(3);c.R7$(3),c.SpI(" ",j.deleteText,"")}}function v(J,m){if(1&J&&(c.j41(0,"clr-dg-action-bar"),c.DNE(1,o,4,1,"div",9)(2,A,7,2,"div",9)(3,k,4,1,"div",9),c.k0s()),2&J){const j=c.XpG(2);c.R7$(),c.vxM(void 0!==j.onAdd&&"orgcandidate"!==j.itemType?1:-1),c.R7$(),c.vxM(void 0!==j.onDelete&&void 0!==j.onDownload?2:void 0!==j.onDelete?3:-1)}}function b(J,m){if(1&J&&(c.j41(0,"clr-dg-column"),c.EFF(1),c.k0s()),2&J){const j=m.$implicit;c.R7$(),c.JRh(j)}}function E(J,m){if(1&J){const j=c.RV6();c.j41(0,"clr-dg-cell",15),c.bIt("click",function(){c.eBV(j);const V=c.XpG(2).$implicit,xe=c.XpG(2);return c.Njj(xe.userRowSelect(V))}),c.EFF(1),c.k0s()}if(2&J){const j=c.XpG().$implicit,ue=c.XpG().$implicit,V=c.XpG(2);c.R7$(),c.JRh(V.convertTimeString(ue[j]))}}function R(J,m){if(1&J){const j=c.RV6();c.j41(0,"clr-dg-cell",15),c.bIt("click",function(){c.eBV(j);const V=c.XpG(2).$implicit,xe=c.XpG(2);return c.Njj(xe.userRowSelect(V))}),c.EFF(1),c.k0s()}if(2&J){const j=c.XpG().$implicit,ue=c.XpG().$implicit;c.R7$(),c.JRh(ue[j])}}function O(J,m){if(1&J&&c.DNE(0,E,2,1,"clr-dg-cell")(1,R,2,1,"clr-dg-cell"),2&J){const j=m.$implicit,ue=c.XpG(3);c.vxM(ue.isTimestampFormat(j)?0:1)}}function Z(J,m){if(1&J&&(c.j41(0,"clr-dg-row",14),c.Z7z(1,O,2,1,null,null,c.fX1),c.k0s()),2&J){const j=m.$implicit,ue=c.XpG(2);c.Y8G("clrDgItem",j),c.R7$(),c.Dyx(ue.labelKeys)}}function Q(J,m){if(1&J&&(c.j41(0,"clr-dg-detail")(1,"clr-dg-detail-header"),c.EFF(2),c.k0s(),c.j41(3,"clr-dg-detail-body"),c.nrm(4,"app-item-view",17),c.k0s()()),2&J){const j=m.$implicit,ue=c.XpG(3);c.R7$(2),c.JRh(j.mrn),c.R7$(2),c.Y8G("itemType",ue.itemType)("item",j)}}function fe(J,m){1&J&&c.DNE(0,Q,5,3,"clr-dg-detail",16)}function re(J,m){if(1&J){const j=c.RV6();c.j41(0,"button",20),c.bIt("click",function(){const V=c.eBV(j).$implicit,xe=c.XpG(3);return c.Njj(xe.loadData(V))}),c.EFF(1),c.k0s()}if(2&J){const j=m.$implicit,ue=c.XpG(3);c.Y8G("disabled",j==ue.currentPageNumber),c.R7$(),c.JRh(j+1)}}function Ae(J,m){if(1&J&&(c.j41(0,"div",8)(1,"div",18),c.Z7z(2,re,2,2,"button",19,c.fX1),c.k0s()()),2&J){const j=c.XpG(2);c.R7$(2),c.Dyx(j.pageNumbers)}}function Oe(J,m){if(1&J){const j=c.RV6();c.j41(0,"clr-datagrid",5),c.mxI("clrDgSelectedChange",function(V){c.eBV(j);const xe=c.XpG();return c.DH7(xe.selected,V)||(xe.selected=V),c.Njj(V)}),c.bIt("clrDgRefresh",function(V){c.eBV(j);const xe=c.XpG();return c.Njj(xe.refresh(V))}),c.DNE(1,v,4,2,"clr-dg-action-bar"),c.Z7z(2,b,2,1,"clr-dg-column",null,c.fX1),c.j41(4,"clr-dg-placeholder",6),c.EFF(5),c.k0s(),c.DNE(6,Z,3,1,"clr-dg-row",7)(7,fe,1,0,"clr-dg-detail"),c.j41(8,"clr-dg-footer"),c.DNE(9,Ae,4,0,"div",8),c.k0s()()}if(2&J){const j=c.XpG();c.R50("clrDgSelected",j.selected),c.Y8G("clrDgLoading",j.isLoading),c.R7$(),c.vxM(j.onAdd||j.onDelete||j.onDownload?1:-1),c.R7$(),c.Dyx(j.labelTitles),c.R7$(3),c.JRh(j.placeholder),c.R7$(),c.Y8G("clrDgItemsOf",j.data),c.R7$(),c.vxM(j.detailView?7:-1),c.R7$(2),c.vxM(j.totalPages>1?9:-1)}}let D=(()=>{class J{constructor(j,ue){this.router=j,this.authService=ue,this.itemType=p.SP.Subscription,this.labels=void 0,this.placeholder="We couldn't find any data!",this.deleteText="Delete",this.downloadText="Download",this.addText="Add",this.totalPages=0,this.totalElements=0,this.getData=V=>new Promise((xe,be)=>xe([])),this.onRowSelect=new c.bkB,this.onRevokeCerts=new c.bkB,this.onDownloadCerts=new c.bkB,this.onEdit=new c.bkB,this.onMigrate=new c.bkB,this.onRefresh=new c.bkB,this.onApprove=new c.bkB,this.data=void 0,this.selected=[],this.detail={},this.selectedItem={},this.expanded=!1,this.detailView=!1,this.labelKeys=[],this.labelTitles=[],this.isLoading=!1,this.pageNumbers=[],this.currentPageNumber=0,this.elementsPerPage=10,this.roles=[],this.userRowSelect=V=>{this.expanded=!0,this.selectedItem=(0,B.C)(V),this.onRowSelect.emit(V)},this.back=()=>{this.expanded=!1,this.selectedItem={}},this.edit=V=>{this.expanded=!0,this.selectedItem=V,this.onEdit.emit(V)},this.approve=V=>{this.onApprove.emit(V)},this.migrate=V=>{this.onMigrate.emit({...this.selectedItem,newServiceMrn:V})},this.deleteItem=V=>{this.onDelete?.call(this,[V])},this.convertTimeString=V=>(0,u.YF)(V),this.refreshData=()=>{this.loadData().then(()=>{if(this.selectedItem&&this.selectedItem.mrn){const V=this.data?.find(xe=>this.itemType===p.SP.Service?xe.mrn===this.selectedItem.mrn&&xe.instanceVersion===this.selectedItem.instanceVersion:this.itemType===p.SP.Role?xe.id===this.selectedItem.id:xe.mrn===this.selectedItem.mrn);V&&(this.selectedItem=V)}})},this.isLoading=!0}ngOnInit(){this.authService.getOrgMrn().then(j=>{})}ngOnChanges(j){j.labels&&(this.labelKeys=Object.keys(this.labels),this.labelTitles=Object.values(this.labels).map(ue=>ue.title)),j.totalPages&&(this.pageNumbers=Array(this.totalPages).fill(0).map((ue,V)=>V))}loadData(j=this.currentPageNumber){var ue=this;return(0,n.A)(function*(){ue.data=(yield ue.getData(ue.itemType,j,ue.elementsPerPage))||[],j!==ue.currentPageNumber&&(ue.currentPageNumber=j),ue.isLoading=!1})()}refresh(j){var ue=this;return(0,n.A)(function*(){ue.data||ue.loadData()})()}isTimestampFormat(j){return p.N3.includes(j)}static#e=this.\u0275fac=function(ue){return new(ue||J)(c.rXU(_.Ix),c.rXU(C.u))};static#t=this.\u0275cmp=c.VBU({type:J,selectors:[["app-smart-expandable-table"]],inputs:{itemType:"itemType",labels:"labels",placeholder:"placeholder",onDownload:"onDownload",onDelete:"onDelete",onAdd:"onAdd",deleteText:"deleteText",downloadText:"downloadText",addText:"addText",totalPages:"totalPages",totalElements:"totalElements",getData:"getData"},outputs:{onRowSelect:"onRowSelect",onRevokeCerts:"onRevokeCerts",onDownloadCerts:"onDownloadCerts",onEdit:"onEdit",onMigrate:"onMigrate",onRefresh:"onRefresh",onApprove:"onApprove"},standalone:!0,features:[c.OA$,c.aNF],decls:2,vars:1,consts:[[3,"clrDgSelected","clrDgLoading"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[3,"onEdit","onDelete","onRefresh","onMigrate","onApprove","itemType","item","isLoading"],[3,"clrDgSelectedChange","clrDgRefresh","clrDgSelected","clrDgLoading"],[1,"datagrid-empty"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[1,"clr-row","clr-justify-content-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["shape","times"],["shape","download"],[3,"clrDgItem"],[3,"click"],[4,"clrIfDetail"],[3,"itemType","item"],[1,"btn-group","btn-outline-primary","btn-sm"],[1,"btn",3,"disabled"],[1,"btn",3,"click","disabled"]],template:function(ue,V){1&ue&&c.DNE(0,S,6,3)(1,Oe,10,7,"clr-datagrid",0),2&ue&&c.vxM(V.expanded?0:1)},dependencies:[w.PuD,w.ghA,w.fQA,w.slD,w.scM,w.f1O,w.PNO,w.ig6,w.Lwm,w.AtP,w.XTg,w.E1i,w.aFj,w.NTI,w.cIg,w.qDI,w.v0q,w.Aup,w.rpC,w.mCo,w.BlU,w.oFi,N.Y]})}return J})()},2537:(et,P,I)=>{"use strict";I.d(P,{B:()=>Oe});var n=I(5950),c=I(6908),w=I(1232),p=I(5930);const u=["download",(0,p.s)({outline:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>',outlineAlerted:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>',outlineBadged:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>'})];var B=I(673);const C=["plus",(0,p.s)({outline:'<path d="M30,17H19V6a1,1,0,1,0-2,0V17H6a1,1,0,0,0-1,1,.91.91,0,0,0,1,.94H17V30a1,1,0,1,0,2,0V19H30a1,1,0,0,0,1-1A1,1,0,0,0,30,17Z"/>'})];var S=I(5166),o=I(1066);const A=()=>[10,20,50,100];function k(D,J){1&D&&(n.j41(0,"clr-spinner"),n.EFF(1,"Loading"),n.k0s())}function v(D,J){if(1&D){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onAdd())}),n.nrm(2,"cds-icon",9),n.EFF(3),n.k0s()()}if(2&D){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.addText," ")}}function b(D,J){if(1&D){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onDelete(ue.selected))}),n.nrm(2,"cds-icon",10),n.EFF(3),n.k0s(),n.j41(4,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onDownload(ue.selected))}),n.nrm(5,"cds-icon",11),n.EFF(6),n.k0s()()}if(2&D){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.deleteText,""),n.R7$(3),n.SpI(" ",m.downloadText,"")}}function E(D,J){if(1&D){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onDelete(ue.selected))}),n.nrm(2,"cds-icon",10),n.EFF(3),n.k0s()()}if(2&D){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.deleteText,"")}}function R(D,J){if(1&D&&(n.j41(0,"clr-dg-action-bar"),n.DNE(1,v,4,1,"div",7)(2,b,7,2,"div",7)(3,E,4,1,"div",7),n.k0s()),2&D){const m=n.XpG(2);n.R7$(),n.vxM(void 0!==m.onAdd?1:-1),n.R7$(),n.vxM(void 0!==m.onDelete&&void 0!==m.onDownload?2:void 0!==m.onDelete?3:-1)}}function O(D,J){if(1&D&&(n.j41(0,"clr-dg-column"),n.EFF(1),n.k0s()),2&D){const m=J.$implicit;n.R7$(),n.JRh(m)}}function Z(D,J){if(1&D){const m=n.RV6();n.j41(0,"clr-dg-cell",13),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(2).$implicit,V=n.XpG(2);return n.Njj(V.userRowSelect(ue))}),n.EFF(1),n.k0s()}if(2&D){const m=n.XpG().$implicit,j=n.XpG().$implicit,ue=n.XpG(2);n.R7$(),n.JRh(ue.convertTimeString(j[m]))}}function Q(D,J){if(1&D){const m=n.RV6();n.j41(0,"clr-dg-cell",13),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(2).$implicit,V=n.XpG(2);return n.Njj(V.userRowSelect(ue))}),n.EFF(1),n.k0s()}if(2&D){const m=n.XpG().$implicit,j=n.XpG().$implicit;n.R7$(),n.JRh(j[m])}}function fe(D,J){if(1&D&&n.DNE(0,Z,2,1,"clr-dg-cell")(1,Q,2,1,"clr-dg-cell"),2&D){const m=J.$implicit,j=n.XpG(3);n.vxM(j.isTimestampFormat(m)?0:1)}}function re(D,J){if(1&D&&(n.j41(0,"clr-dg-row",12),n.Z7z(1,fe,2,1,null,null,n.fX1),n.k0s()),2&D){const m=J.$implicit,j=n.XpG(2);n.Y8G("clrDgItem",m),n.R7$(),n.Dyx(j.labelKeys)}}function Ae(D,J){if(1&D){const m=n.RV6();n.j41(0,"clr-datagrid",2),n.mxI("clrDgSelectedChange",function(ue){n.eBV(m);const V=n.XpG();return n.DH7(V.selected,ue)||(V.selected=ue),n.Njj(ue)}),n.DNE(1,R,4,2,"clr-dg-action-bar"),n.Z7z(2,O,2,1,"clr-dg-column",null,n.fX1),n.j41(4,"clr-dg-placeholder",3),n.EFF(5),n.k0s(),n.DNE(6,re,3,1,"clr-dg-row",4),n.j41(7,"clr-dg-footer")(8,"clr-dg-pagination",5,0)(10,"clr-dg-page-size",6),n.EFF(11," items per page"),n.k0s(),n.EFF(12),n.k0s()()()}if(2&D){const m=n.sdS(9),j=n.XpG();n.R50("clrDgSelected",j.selected),n.R7$(),n.vxM(j.onAdd||j.onDelete||j.onDownload?1:-1),n.R7$(),n.Dyx(j.labelTitles),n.R7$(3),n.JRh(j.placeholder),n.R7$(),n.Y8G("clrDgItemsOf",j.data),n.R7$(2),n.Y8G("clrDgPageSize",10),n.R7$(2),n.Y8G("clrPageSizeOptions",n.lJ4(9,A)),n.R7$(2),n.E5c(" ",m.firstItem+1," - ",m.lastItem+1," of ",m.totalItems," certificates ")}}w.h.addIcons(u,B.a,C);let Oe=(()=>{class D{constructor(){this.data=[],this.itemType=S.SP.Subscription,this.labels={},this.placeholder="We couldn't find any data!",this.deleteText="Delete",this.downloadText="Download",this.addText="Add",this.selectedIds=[],this.onRowSelect=new n.bkB,this.selected=[],this.detail={},this.isLoading=!1,this.labelKeys=[],this.labelTitles=[],this.userRowSelect=m=>{console.log(m),this.onRowSelect&&this.onRowSelect.emit(m)},this.convertTimeString=m=>(0,o.t)(m),this.isLoading=!0}ngOnChanges(m){m.data.currentValue.length>0&&(this.labelKeys=Object.keys(this.labels),this.labelTitles=Object.values(this.labels).map(j=>j.title)),this.isLoading=!1,this.data.length>0&&this.selectedIds.length>0&&(this.selected=this.data.filter(j=>this.selectedIds[0]===j.serialNumber))}isTimestampFormat(m){return S.N3.includes(m)}static#e=this.\u0275fac=function(j){return new(j||D)};static#t=this.\u0275cmp=n.VBU({type:D,selectors:[["app-smart-table"]],inputs:{data:"data",itemType:"itemType",labels:"labels",placeholder:"placeholder",onDownload:"onDownload",onDelete:"onDelete",onAdd:"onAdd",deleteText:"deleteText",downloadText:"downloadText",addText:"addText",selectedIds:"selectedIds"},outputs:{onRowSelect:"onRowSelect"},standalone:!0,features:[n.OA$,n.aNF],decls:2,vars:1,consts:[["pagination",""],[3,"clrDgSelected"],[3,"clrDgSelectedChange","clrDgSelected"],[1,"datagrid-empty"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize"],[3,"clrPageSizeOptions"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["shape","times"],["shape","download"],[3,"clrDgItem"],[3,"click"]],template:function(j,ue){1&j&&n.DNE(0,k,2,0,"clr-spinner")(1,Ae,13,10,"clr-datagrid",1),2&j&&n.vxM(ue.isLoading?0:1)},dependencies:[c.PuD,c.ghA,c.fQA,c.slD,c.scM,c.Lwm,c.AtP,c.oip,c.o3y,c.XTg,c.E1i,c.NTI,c.cIg,c.qDI,c.v0q,c.Aup,c.rpC,c.mCo,c.BlU,c.BkK,c.oFi]})}return D})()},3562:(et,P,I)=>{"use strict";I.d(P,{q:()=>S});var n=I(5950);const c=(o,A)=>A.id;function w(o,A){if(1&o&&(n.j41(0,"li"),n.EFF(1),n.k0s()),2&o){const k=n.XpG().$implicit;n.R7$(),n.SpI("",k.name,": Free")}}function p(o,A){if(1&o&&(n.j41(0,"li"),n.EFF(1),n.k0s()),2&o){const k=n.XpG().$implicit,v=n.XpG(2);n.R7$(),n.LHq("",k.name,": ",k.unitPrice," ",v.currency," per ",k.unit,"")}}function N(o,A){1&o&&n.DNE(0,w,2,1,"li")(1,p,2,4,"li"),2&o&&n.vxM(0===A.$implicit.unitPrice?0:1)}function u(o,A){1&o&&(n.j41(0,"button",5),n.EFF(1,"Selected"),n.k0s())}function B(o,A){if(1&o){const k=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){n.eBV(k);const b=n.XpG(2);return n.Njj(b.onClick(b.plan.id))}),n.EFF(1),n.k0s()}if(2&o){const k=n.XpG(2);n.R7$(),n.JRh(k.btnText)}}function _(o,A){if(1&o&&(n.j41(0,"div",0)(1,"h3"),n.EFF(2),n.nrm(3,"br"),n.EFF(4),n.k0s(),n.j41(5,"p",1),n.EFF(6),n.k0s(),n.j41(7,"p",2),n.EFF(8),n.k0s()(),n.j41(9,"div",3)(10,"p")(11,"strong"),n.EFF(12,"All the goodness of MCP, and:"),n.k0s()(),n.j41(13,"ul")(14,"li"),n.EFF(15,"Access to MCP identity"),n.k0s(),n.j41(16,"li"),n.EFF(17,"Access to issue/revoke MCP certificates"),n.k0s(),n.j41(18,"li"),n.EFF(19,"Access to the MMS network"),n.k0s(),n.j41(20,"li"),n.EFF(21,"Unlimited receiving of S124 Navigational Warning messages"),n.k0s(),n.j41(22,"li"),n.EFF(23,"Access to MMS chat service"),n.k0s(),n.j41(24,"li"),n.EFF(25,"Access to Automatic Route Planning service"),n.k0s()(),n.j41(26,"p")(27,"strong"),n.EFF(28,"Service costs:"),n.k0s()(),n.j41(29,"ul"),n.Z7z(30,N,2,1,null,null,c),n.k0s()(),n.j41(32,"div",4),n.DNE(33,u,2,0,"button",5)(34,B,2,1,"button",6),n.k0s()),2&o){const k=n.XpG();n.R7$(2),n.SpI("",k.plan.name," "),n.R7$(2),n.SpI(" (~ ",k.plan.maxUsers," users)"),n.R7$(2),n.Lme("",k.plan.monthlyCost," ",k.plan.currency,""),n.R7$(2),n.JRh(k.plan.description),n.R7$(22),n.Dyx(k.services),n.R7$(3),n.vxM(k.selected?33:34)}}function C(o,A){1&o&&(n.j41(0,"h1"),n.EFF(1,"Plan is not available"),n.k0s())}let S=(()=>{class o{constructor(){this.plan=void 0,this.selected=!1,this.currency="",this.btnText="",this.services=[],this.onBtnClick=new n.bkB}onClick(k){this.onBtnClick.emit(k)}static#e=this.\u0275fac=function(v){return new(v||o)};static#t=this.\u0275cmp=n.VBU({type:o,selectors:[["app-subscription-plan"]],inputs:{plan:"plan",selected:"selected",currency:"currency",btnText:"btnText",services:"services"},outputs:{onBtnClick:"onBtnClick"},standalone:!0,features:[n.aNF],decls:2,vars:1,consts:[[1,"card-header"],[1,"price"],[1,"monthly-price"],[1,"card-body"],[1,"card-footer"],[1,"btn","btn-outline","btn-block"],[1,"btn","btn-primary","btn-block"],[1,"btn","btn-primary","btn-block",3,"click"]],template:function(v,b){1&v&&n.DNE(0,_,35,6)(1,C,2,0,"h1"),2&v&&n.vxM(void 0!==b.plan?0:1)},styles:[".card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #ddd;padding:1rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700}.price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#563d7c}.billing-info[_ngcontent-%COMP%], .monthly-price[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.card-body[_ngcontent-%COMP%]{padding:1rem;text-align:left}.card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.card-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #ddd;padding:1rem;text-align:center}.btn[_ngcontent-%COMP%]{margin-top:1rem}.addon[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.card.selected[_ngcontent-%COMP%]{border:2px solid #007bff;background-color:#e9f7ff}"]})}return o})()},2478:(et,P,I)=>{"use strict";I.d(P,{R:()=>N});var n=I(6908),c=I(58),w=I(7882),p=I(5950);let N=(()=>{class u{static#e=this.\u0275fac=function(C){return new(C||u)};static#t=this.\u0275mod=p.$C({type:u});static#s=this.\u0275inj=p.G2t({imports:[c.G,n.PuD,w.YN]})}return u})()},723:(et,P,I)=>{"use strict";I.d(P,{C:()=>he}),I(8959);var c=I(1232),w=I(5930);const N=["user",(0,w.s)({outline:'<path d="M18,17a7,7,0,1,0-7-7A7,7,0,0,0,18,17ZM18,5a5,5,0,1,1-5,5A5,5,0,0,1,18,5Z"/><path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/>',outlineAlerted:'<path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/><path d="M18,17a7,7,0,0,0,4.45-1.6h-.22A3.68,3.68,0,0,1,20,14.6a5,5,0,1,1,1.24-8.42l1-1.76A7,7,0,1,0,18,17Z"/>',outlineBadged:'<path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/><path d="M18,17a7,7,0,0,0,6.85-5.56,7.4,7.4,0,0,1-2.24-6.69A7,7,0,1,0,18,17ZM18,5a5,5,0,1,1-5,5A5,5,0,0,1,18,5Z"/>',solid:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><circle cx="18" cy="10" r="7"/>',solidAlerted:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><path d="M18,17a7,7,0,0,0,4.45-1.6h-.22A3.68,3.68,0,0,1,19,9.89l3.16-5.47A7,7,0,1,0,18,17Z"/>',solidBadged:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><path d="M18,17a7,7,0,0,0,6.85-5.56,7.4,7.4,0,0,1-2.24-6.69A7,7,0,1,0,18,17Z"/>'})];var u=I(5950),B=I(6908),_=I(6994);const S=["crown",(0,w.s)({outline:'<path d="M4,13.33A1.39,1.39,0,1,0,2.6,14.72,1.39,1.39,0,0,0,4,13.33Z"/><path d="M31.81,15.84a20.35,20.35,0,0,0-4.58,1.43,22.7,22.7,0,0,0-3.48,2.1A17.69,17.69,0,0,1,22,16.57a47.65,47.65,0,0,1-2.8-7.69,1,1,0,0,0-1-.74,1,1,0,0,0-1,.74,46.71,46.71,0,0,1-2.8,7.69,17,17,0,0,1-1.76,2.8,22.7,22.7,0,0,0-3.48-2.1,20.66,20.66,0,0,0-4.58-1.43,1,1,0,0,0-1,.39,1,1,0,0,0-.09,1.05A50.13,50.13,0,0,1,7.82,31.17a1,1,0,0,0,1,.83H27.62a1,1,0,0,0,1-.83,50.15,50.15,0,0,1,4.26-13.89,1,1,0,0,0-.09-1.05A1,1,0,0,0,31.81,15.84ZM26.79,30H9.64a55.66,55.66,0,0,0-3.4-11.71,15.75,15.75,0,0,1,2.09.78,20,20,0,0,1,3.85,2.45,1,1,0,0,0,1.39-.09,19.28,19.28,0,0,0,2.67-4,43.46,43.46,0,0,0,2-4.89,41.74,41.74,0,0,0,2,4.89,19.92,19.92,0,0,0,2.66,4,1,1,0,0,0,1.4.09,19.21,19.21,0,0,1,3.85-2.45,14.77,14.77,0,0,1,2.09-.78A55.07,55.07,0,0,0,26.79,30Z"/><ellipse cx="33.83" cy="13.33" rx="1.39" ry="1.39"/><path d="M18.22,6.39A1.39,1.39,0,1,0,16.84,5,1.39,1.39,0,0,0,18.22,6.39Z"/><path d="M18.23,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,18.23,26.34Z"/><path d="M12.58,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,12.58,26.34Z"/><path d="M23.89,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,23.89,26.34Z"/>',solid:'<path d="M2.6,11.93A1.4,1.4,0,1,0,4,13.33,1.4,1.4,0,0,0,2.6,11.93Z"/><ellipse cx="33.83" cy="13.33" rx="1.39" ry="1.39"/><path d="M18.22,6.39A1.39,1.39,0,1,0,16.84,5,1.39,1.39,0,0,0,18.22,6.39Z"/><path d="M31.63,16.1A18.61,18.61,0,0,0,28,17.34a21.57,21.57,0,0,0-4,2.49,19.2,19.2,0,0,1-2.26-3.49,48.92,48.92,0,0,1-2.52-6.58,1,1,0,0,0-1-.71h0a1,1,0,0,0-1,.71,48.42,48.42,0,0,1-2.52,6.58,18.69,18.69,0,0,1-2.26,3.48,22.81,22.81,0,0,0-4-2.48A18.83,18.83,0,0,0,4.9,16.1a1,1,0,0,0-1,.33,1,1,0,0,0-.13,1.07,55.9,55.9,0,0,1,4,13.5,1,1,0,0,0,1,.83h19a1,1,0,0,0,1-.83,55.9,55.9,0,0,1,4-13.5,1,1,0,0,0-.13-1.07A1,1,0,0,0,31.63,16.1ZM11.08,28.55a1.11,1.11,0,1,1,1.1-1.11A1.11,1.11,0,0,1,11.08,28.55Zm7.15,0a1.11,1.11,0,0,1,0-2.21,1.11,1.11,0,0,1,0,2.21Zm7.16,0a1.11,1.11,0,1,1,1.1-1.11A1.11,1.11,0,0,1,25.39,28.55Z"/>'})],A=["sun",(0,w.s)({outline:'<path d="M18,6.31a1,1,0,0,0,1-1V1.91a1,1,0,0,0-2,0v3.4A1,1,0,0,0,18,6.31Z"/><path d="M18,29.69a1,1,0,0,0-1,1v3.4a1,1,0,0,0,2,0v-3.4A1,1,0,0,0,18,29.69Z"/><path d="M8.32,9.74A1,1,0,0,0,9,10a1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42L7.33,5.92A1,1,0,0,0,5.92,7.33Z"/><path d="M27.68,26.26a1,1,0,1,0-1.42,1.42l2.41,2.4a1,1,0,0,0,.71.3,1,1,0,0,0,.7-.3,1,1,0,0,0,0-1.41Z"/><path d="M6.31,18a1,1,0,0,0-1-1H1.91a1,1,0,0,0,0,2h3.4A1,1,0,0,0,6.31,18Z"/><path d="M34.09,17h-3.4a1,1,0,1,0,0,2h3.4a1,1,0,0,0,0-2Z"/><path d="M8.32,26.26l-2.4,2.41a1,1,0,0,0,.7,1.71,1,1,0,0,0,.71-.3l2.41-2.4a1,1,0,1,0-1.42-1.42Z"/><path d="M27,10a1,1,0,0,0,.71-.29l2.4-2.41a1,1,0,0,0,0-1.41,1,1,0,0,0-1.41,0l-2.41,2.4a1,1,0,0,0,0,1.42A1,1,0,0,0,27,10Z"/><path d="M18.13,7.75a10.13,10.13,0,1,0,10,10.13A10.08,10.08,0,0,0,18.13,7.75Zm0,18.25a8.13,8.13,0,1,1,8-8.12A8.08,8.08,0,0,1,18.13,26Z"/>',solid:'<path d="M18,6.42a1,1,0,0,0,1-1V1.91a1,1,0,0,0-2,0V5.42A1,1,0,0,0,18,6.42Z"/><path d="M18,29.58a1,1,0,0,0-1,1v3.51a1,1,0,0,0,2,0V30.58A1,1,0,0,0,18,29.58Z"/><path d="M8.4,9.81A1,1,0,0,0,9.81,8.4L7.33,5.92A1,1,0,0,0,5.92,7.33Z"/><path d="M27.6,26.19a1,1,0,0,0-1.41,1.41l2.48,2.48a1,1,0,0,0,1.41-1.41Z"/><path d="M6.42,18a1,1,0,0,0-1-1H1.91a1,1,0,0,0,0,2H5.42A1,1,0,0,0,6.42,18Z"/><path d="M34.09,17H30.58a1,1,0,0,0,0,2h3.51a1,1,0,0,0,0-2Z"/><path d="M8.4,26.19,5.92,28.67a1,1,0,0,0,1.41,1.41L9.81,27.6A1,1,0,0,0,8.4,26.19Z"/><path d="M27.6,9.81l2.48-2.48a1,1,0,0,0-1.41-1.41L26.19,8.4A1,1,0,0,0,27.6,9.81Z"/><circle cx="18" cy="18" r="10"/>'})],v=["moon",(0,w.s)({outline:'<path d="M31,27.19a1,1,0,0,0-1-.56c-.28,0-.56,0-.85,0A11,11,0,0,1,24.92,5.61a1,1,0,0,0,.61-1,1,1,0,0,0-.67-.91,14.7,14.7,0,0,0-5-.87,15.12,15.12,0,0,0,0,30.24,14.78,14.78,0,0,0,11-4.81A1,1,0,0,0,31,27.19ZM19.89,31.12a13.12,13.12,0,0,1,0-26.24,11.81,11.81,0,0,1,2,.16,13,13,0,0,0,5.72,23.53A12.75,12.75,0,0,1,19.89,31.12Z"/>',solid:'<path d="M29.2,26.72A12.07,12.07,0,0,1,22.9,4.44,13.68,13.68,0,0,0,19.49,4a14,14,0,0,0,0,28,13.82,13.82,0,0,0,10.9-5.34A11.71,11.71,0,0,1,29.2,26.72Z"/>'})];var b=I(2170),O=I(3987),Z=I(6482),Q=I(9380),fe=I(8745);const re=(W,G)=>G.code;function Ae(W,G){if(1&W){const X=u.RV6();u.j41(0,"div",11),u.bIt("click",function(){const L=u.eBV(X).$implicit,K=u.XpG(2);return u.Njj(K.changeLang(L.code))}),u.EFF(1),u.k0s()}if(2&W){const X=G.$implicit;u.R7$(),u.JRh(X.name)}}function Oe(W,G){if(1&W){const X=u.RV6();u.j41(0,"clr-dropdown-menu",12)(1,"button",13),u.bIt("click",function(){u.eBV(X);const L=u.XpG(2);return u.Njj(L.toggleTheme())}),u.EFF(2),u.k0s(),u.j41(3,"button",13),u.bIt("click",function(){u.eBV(X);const L=u.XpG(2);return u.Njj(L.goMyPage())}),u.EFF(4,"personal page"),u.k0s(),u.j41(5,"button",13),u.bIt("click",function(){u.eBV(X);const L=u.XpG(2);return u.Njj(L.logOut())}),u.EFF(6,"log out"),u.k0s()()}if(2&W){const X=u.XpG(2);u.R7$(2),u.SpI("switch to ",X.counterTheme,"")}}function D(W,G){if(1&W){const X=u.RV6();u.j41(0,"div",1)(1,"a",2),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goHome())}),u.nrm(2,"cds-icon",3),u.j41(3,"span",4),u.EFF(4,"MCP as a Service Portal"),u.k0s()()(),u.nrm(5,"div",5),u.j41(6,"div",6)(7,"clr-dropdown")(8,"button",7),u.EFF(9),u.nrm(10,"cds-icon",8),u.k0s(),u.j41(11,"clr-dropdown-menu"),u.Z7z(12,Ae,2,1,"div",9,re),u.k0s()(),u.j41(14,"clr-dropdown")(15,"button",7),u.EFF(16),u.nrm(17,"cds-icon",8),u.k0s(),u.DNE(18,Oe,7,1,"clr-dropdown-menu",10),u.k0s()()}if(2&W){const X=u.XpG();u.R7$(5),u.Y8G("clr-nav-level",2),u.R7$(4),u.SpI(" ",X.currentLangName," "),u.R7$(3),u.Dyx(X.langs),u.R7$(4),u.SpI(" ",X.userName," ")}}function J(W,G){if(1&W){const X=u.RV6();u.j41(0,"div",1)(1,"a",14),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goFront())}),u.nrm(2,"clr-icon",15),u.j41(3,"span",4),u.EFF(4,"MCP as a Service"),u.k0s()()(),u.j41(5,"div",16)(6,"clr-dropdown")(7,"button",17),u.EFF(8," Service "),u.nrm(9,"clr-icon",18),u.k0s(),u.j41(10,"clr-dropdown-menu",19)(11,"a",20),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goMCP())}),u.EFF(12,"Maritime Connectivity Platform"),u.k0s(),u.j41(13,"a",20),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goS124())}),u.EFF(14,"S124 Navigational Warning service"),u.k0s(),u.j41(15,"a",20),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goChat())}),u.EFF(16,"MMS Chat service"),u.k0s(),u.j41(17,"a",20),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goARP())}),u.EFF(18,"Automatic Route Planning service"),u.k0s()()(),u.j41(19,"button",21),u.bIt("click",function(){u.eBV(X);const L=u.XpG();return u.Njj(L.goPrice())}),u.EFF(20," Price "),u.k0s()()}}c.h.addIcons(S,A,v);let m=(()=>{class W{constructor(X,H,L){this.authService=X,this.translate=H,this.router=L,this.role="admin",this.userName="admin",this.theme="light",this.counterTheme="dark",this.currentLang="en-GB",this.currentLangName="English",this.myMrn="",this.langs=b.e,this.loggedIn=!1,this.authService.isAuthenticated$.subscribe(K=>{this.loggedIn=K}),this.authService.getUserName().then(K=>{this.userName=K}),this.authService.getUserMrn().then(K=>{this.myMrn=K}),this.theme=localStorage.getItem("theme")||"light",this.counterTheme="dark"===this.theme?"light":"dark",document.body.setAttribute("cds-theme",this.theme),this.loadLang()}loadLang(){this.currentLang=(0,O.rR)(this.translate),this.currentLangName=(0,O.Xo)(this.currentLang)}logOut(){var X=this;return(0,_.A)(function*(){X.authService.logout()})()}changeLang(X){var H=this;return(0,_.A)(function*(){(0,O.lk)(H.translate,X),H.loadLang()})()}goHome(){this.router.navigateByUrl("/pages")}goMyPage(){this.router.navigateByUrl("/pages/ir/user/"+this.myMrn)}toggleTheme(){this.theme="light"===this.theme?"dark":"light",document.body.setAttribute("cds-theme",this.theme),(()=>{localStorage.setItem("theme",this.theme)})(),this.counterTheme="dark"===this.theme?"light":"dark"}goMCP(){this.router.navigateByUrl("/mcp")}goS124(){this.router.navigateByUrl("/s124")}goARP(){this.router.navigateByUrl("/arp")}goChat(){this.router.navigateByUrl("/chat")}goFront(){this.router.navigateByUrl("/")}goPrice(){this.router.navigateByUrl("/pricing")}static#e=this.\u0275fac=function(H){return new(H||W)(u.rXU(Z.u),u.rXU(Q.c$),u.rXU(fe.Ix))};static#t=this.\u0275cmp=u.VBU({type:W,selectors:[["mp-header"]],decls:3,vars:3,consts:[[3,"role","clr-nav-level"],[1,"branding"],[1,"nav-link",3,"click"],["shape","crown"],[1,"title"],[1,"header-nav",3,"clr-nav-level"],[1,"header-actions"],["clrDropdownTrigger","","aria-label","open user profile",1,"nav-text"],["shape","angle","direction","down"],["aria-label","option.code","clrDropdownItem",""],["clrPosition","bottom-right",4,"clrIfOpen"],["aria-label","option.code","clrDropdownItem","",3,"click"],["clrPosition","bottom-right"],[1,"btn","btn-link",3,"click"],["routerLinkActive","active",1,"nav-link",3,"click"],["shape","applications"],[1,"header-nav"],["clrDropdownTrigger","",1,"btn","btn-link","nav-link"],["shape","caret down"],["clrPosition","bottom-left"],["clrDropdownItem","","routerLinkActive","active",3,"click"],["routerLinkActive","active",1,"btn","btn-link","nav-link",3,"click"]],template:function(H,L){1&H&&(u.j41(0,"clr-header",0),u.DNE(1,D,19,3)(2,J,21,0),u.k0s()),2&H&&(u.Y8G("role",L.role)("clr-nav-level",1),u.R7$(),u.vxM(L.loggedIn?1:2))},dependencies:[B.U4n,B.BlU,B.vEc,B.Z2Z,B.ndX,B.ZNj,B.TZW,B.e3J,B.jWx,B.wIE,fe.wQ]})}return W})();const j=[{title:"MaaS Management",icon:"lock",children:[{title:"Organization Management",link:"/pages/maas/organization",group:"supermgmt"},{title:"Service Management",link:"/pages/maas/service",group:"supermgmt"},{title:"Subscription Plan Management",link:"/pages/maas/plan",group:"supermgmt"},{title:"Org-Sub Management",link:"/pages/maas/orgsubscription",group:"supermgmt"},{title:"Invoice Management",link:"/pages/maas/invoice",group:"supermgmt"},{title:"Organization Approval",link:"/pages/maas/orgcandidate",group:"supermgmt"}],permissions:["SuperAdmin"]},{title:"My Organization Management",icon:"layers",children:[{title:"Subscription plans",link:"/pages/org/subscription",group:"myorg"},{title:"Service Usage Report",link:"/pages/org/orgsvcusage",group:"myorg"},{title:"Invoice Management",link:"/pages/org/invoice",group:"myorg"}],permissions:["SuperAdmin","OrgAdmin"]},{title:"User Management",icon:"user",children:[{title:"User Management",link:"/pages/user/user",group:"usermgmt"},{title:"Cert Management",link:"/pages/user/usercert",group:"usermgmt"},{title:"User Service Subscription",link:"/pages/user/usersvcsubscription",group:"usermgmt"},{title:"User Service Usage Overview",link:"/pages/user/usersvcusageoverview",group:"usermgmt"},{title:"User Service Usage",link:"/pages/user/usersvcusage",group:"usermgmt"}],permissions:["SuperAdmin","OrgAdmin","UserAdmin"]},{title:"Service Access",icon:"network-globe",link:"https://chatsea.aivn.kr",permissions:["SuperAdmin","OrgAdmin","UserAdmin","User"]},{title:"Knowledge Base",icon:"help",children:[{title:"Documentation",link:"/pages/documentation",group:"myorg"},{title:"FAQ",link:"/pages/faq",group:"myorg"}],permissions:["SuperAdmin","OrgAdmin","UserAdmin","User"]}];var ue=I(8214),V=I(357),xe=I(6156),be=I(7949),Pe=I(7537),se=I(2047);function ee(W,G){1&W&&u.nrm(0,"div",6)}function Me(W,G){if(1&W&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&W){const X=u.XpG(2).$implicit;u.Y8G("routerLink",X.link),u.R7$(),u.SpI(" ",u.bMT(2,2,X.title)," ")}}function Ce(W,G){if(1&W&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&W){const X=u.XpG(2).$implicit;u.Y8G("routerLink",X.link),u.R7$(),u.SpI(" ",u.bMT(2,2,X.title)," ")}}function Ee(W,G){if(1&W&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&W){const X=u.XpG(2).$implicit;u.Y8G("routerLink",X.link),u.R7$(),u.SpI(" ",u.bMT(2,2,X.title)," ")}}function ot(W,G){if(1&W&&(u.j41(0,"a",8),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&W){const X=u.XpG(2).$implicit;u.Y8G("routerLink",X.link),u.R7$(),u.SpI(" ",u.bMT(2,2,X.title)," ")}}function kt(W,G){if(1&W&&u.DNE(0,Me,3,4,"a",8)(1,Ce,3,4,"a",8)(2,Ee,3,4,"a",8)(3,ot,3,4,"a",8),2&W){const X=u.XpG().$implicit,H=u.XpG(3);u.vxM(X.forSuperAdmin&&"SuperAdmin"==H.role?0:-1),u.R7$(),u.vxM(X.forOrgAdmin&&"OrgAdmin"==H.role?1:-1),u.R7$(),u.vxM(X.forUserAdmin&&"UserAdmin"==H.role?2:3)}}function Je(W,G){if(1&W&&(u.j41(0,"div",7),u.EFF(1),u.k0s()),2&W){const X=u.XpG().$implicit;u.R7$(),u.JRh(X.title)}}function Ze(W,G){if(1&W&&u.DNE(0,ee,1,0,"div",6)(1,kt,4,3)(2,Je,2,1,"div",7),2&W){const X=G.$implicit;u.vxM("separator"===X.title?0:X.link?1:2)}}function yt(W,G){if(1&W&&(u.j41(0,"clr-vertical-nav-group",4),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.j41(4,"clr-vertical-nav-group-children"),u.Z7z(5,Ze,3,1,null,null,u.fX1),u.nrm(7,"div",6),u.k0s()()),2&W){const X=u.XpG().$implicit;u.R7$(),u.BMQ("shape",X.icon),u.R7$(),u.SpI(" ",u.bMT(3,2,X.title)," "),u.R7$(3),u.Dyx(X.children)}}function lt(W,G){if(1&W&&(u.j41(0,"a",9),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.k0s()),2&W){const X=u.XpG(2).$implicit;u.Y8G("href",X.link,u.B4B),u.R7$(),u.BMQ("shape",X.icon),u.R7$(),u.SpI(" ",u.bMT(3,3,X.title)," ")}}function xt(W,G){if(1&W&&(u.j41(0,"a",8),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.k0s()),2&W){const X=u.XpG(2).$implicit;u.Y8G("routerLink",X.link),u.R7$(),u.BMQ("shape",X.icon),u.R7$(),u.SpI(" ",u.bMT(3,3,X.title)," ")}}function It(W,G){if(1&W&&u.DNE(0,lt,4,5,"a",9)(1,xt,4,5,"a",8),2&W){const X=u.XpG().$implicit;u.vxM(X.link.includes("http")?0:1)}}function f(W,G){if(1&W&&(u.qex(0),u.DNE(1,yt,8,4,"clr-vertical-nav-group",3)(2,It,2,1,"ng-template",null,0,u.C5r),u.bVm()),2&W){const X=G.$implicit,H=u.sdS(3);u.R7$(),u.Y8G("ngIf",X.children)("ngIfElse",H)}}c.h.addIcons(V.V,xe.h,be.Q,Pe.t);let oe=(()=>{class W{constructor(X,H){this.authService=H,this.navGroups=j,this.role="",this.hasServiceRegistry=ue.o.HAS_SERVICE_REGISTRY,X.setDefaultLang("en-GB"),X.use("en-GB")}ngOnInit(){this.navGroups=j.filter(X=>X.permissions.includes("User")),this.authService.user$.subscribe(X=>{X&&(this.navGroups=j.filter(H=>H.permissions.includes(X.role)))})}static#e=this.\u0275fac=function(H){return new(H||W)(u.rXU(Q.c$),u.rXU(Z.u))};static#t=this.\u0275cmp=u.VBU({type:W,selectors:[["mp-sidebar"]],decls:2,vars:2,consts:[["singleLink",""],[3,"clrVerticalNavCollapsible"],[4,"ngFor","ngForOf"],["routerLinkActive","active",4,"ngIf","ngIfElse"],["routerLinkActive","active"],["clrVerticalNavIcon",""],[1,"nav-divider"],[1,"nav-header"],["clrVerticalNavLink","","routerLinkActive","active",3,"routerLink"],["clrVerticalNavLink","","target","_blank",3,"href"]],template:function(H,L){1&H&&(u.j41(0,"clr-vertical-nav",1),u.DNE(1,f,4,2,"ng-container",2),u.k0s()),2&H&&(u.Y8G("clrVerticalNavCollapsible",!1),u.R7$(),u.Y8G("ngForOf",L.navGroups))},dependencies:[se.Sq,se.bT,B.BlU,B.D2I,B.VTg,B.wqM,B.zLy,B.Wfw,fe.Wk,fe.wQ,Q.D9]})}return W})();const ne=["*"];function U(W,G){1&W&&u.nrm(0,"mp-sidebar",1)}let x=(()=>{class W{constructor(){this.hasSidebar=!0}static#e=this.\u0275fac=function(H){return new(H||W)};static#t=this.\u0275cmp=u.VBU({type:W,selectors:[["mp-main"]],inputs:{hasSidebar:"hasSidebar"},ngContentSelectors:ne,decls:4,vars:1,consts:[[1,"content-container"],[1,"sidenav"],[1,"content-area"]],template:function(H,L){1&H&&(u.NAR(),u.j41(0,"div",0),u.DNE(1,U,1,0,"mp-sidebar",1),u.j41(2,"div",2),u.SdG(3),u.k0s()()),2&H&&(u.R7$(),u.vxM(L.hasSidebar?1:-1))},dependencies:[oe]})}return W})();const q=["*"];c.h.addIcons(N);let he=(()=>{class W{constructor(){this.hasSidebar=!0}static#e=this.\u0275fac=function(H){return new(H||W)};static#t=this.\u0275cmp=u.VBU({type:W,selectors:[["mp-layout"]],inputs:{hasSidebar:"hasSidebar"},ngContentSelectors:q,decls:4,vars:1,consts:[[3,"hasSidebar"]],template:function(H,L){1&H&&(u.NAR(),u.j41(0,"clr-main-container"),u.nrm(1,"mp-header"),u.j41(2,"mp-main",0),u.SdG(3),u.k0s()()),2&H&&(u.R7$(2),u.Y8G("hasSidebar",L.hasSidebar))},dependencies:[B.ohH,B.y1j,m,x]})}return W})()},897:(et,P,I)=>{"use strict";I.d(P,{B:()=>n});var n=function(c){return c.SuperAdmin="maas",c.OrgAdmin="org",c.UserAdmin="user",c.User="my",c}(n||{})},5540:function(et,P){var I,c;void 0!==(c="function"==typeof(I=function(){"use strict";function p(S,o,A){var k=new XMLHttpRequest;k.open("GET",S),k.responseType="blob",k.onload=function(){C(k.response,o,A)},k.onerror=function(){console.error("could not download file")},k.send()}function N(S){var o=new XMLHttpRequest;o.open("HEAD",S,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function u(S){try{S.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),S.dispatchEvent(o)}}var B="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=B.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),C=B.saveAs||("object"!=typeof window||window!==B?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(S,o,A){var k=B.URL||B.webkitURL,v=document.createElement("a");v.download=o=o||S.name||"download",v.rel="noopener","string"==typeof S?(v.href=S,v.origin===location.origin?u(v):N(v.href)?p(S,o,A):u(v,v.target="_blank")):(v.href=k.createObjectURL(S),setTimeout(function(){k.revokeObjectURL(v.href)},4e4),setTimeout(function(){u(v)},0))}:"msSaveOrOpenBlob"in navigator?function(S,o,A){if(o=o||S.name||"download","string"!=typeof S)navigator.msSaveOrOpenBlob(function w(S,o){return typeof o>"u"?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(S.type)?new Blob(["\ufeff",S],{type:S.type}):S}(S,A),o);else if(N(S))p(S,o,A);else{var k=document.createElement("a");k.href=S,k.target="_blank",setTimeout(function(){u(k)})}}:function(S,o,A,k){if((k=k||open("","_blank"))&&(k.document.title=k.document.body.innerText="downloading..."),"string"==typeof S)return p(S,o,A);var v="application/octet-stream"===S.type,b=/constructor/i.test(B.HTMLElement)||B.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||v&&b||_)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var Q=R.result;Q=E?Q:Q.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=Q:location=Q,k=null},R.readAsDataURL(S)}else{var O=B.URL||B.webkitURL,Z=O.createObjectURL(S);k?k.location=Z:location.href=Z,k=null,setTimeout(function(){O.revokeObjectURL(Z)},4e4)}});B.saveAs=C.saveAs=C,et.exports=C})?I.apply(P,[]):I)&&(et.exports=c)},8721:et=>{et.exports=function P(I,n,c){function w(u,B){if(!n[u]){if(!I[u]){if(p)return p(u,!0);var C=new Error("Cannot find module '"+u+"'");throw C.code="MODULE_NOT_FOUND",C}var S=n[u]={exports:{}};I[u][0].call(S.exports,function(o){return w(I[u][1][o]||o)},S,S.exports,P,I,n,c)}return n[u].exports}for(var p=void 0,N=0;N<c.length;N++)w(c[N]);return w}({1:[function(P,I,n){"use strict";var c=P("./utils"),w=P("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(N){for(var u,B,_,S,o,A,k=[],v=0,b=N.length,E=b,R="string"!==c.getTypeOf(N);v<N.length;)E=b-v,_=R?(u=N[v++],B=v<b?N[v++]:0,v<b?N[v++]:0):(u=N.charCodeAt(v++),B=v<b?N.charCodeAt(v++):0,v<b?N.charCodeAt(v++):0),S=(3&u)<<4|B>>4,o=1<E?(15&B)<<2|_>>6:64,A=2<E?63&_:64,k.push(p.charAt(u>>2)+p.charAt(S)+p.charAt(o)+p.charAt(A));return k.join("")},n.decode=function(N){var u,B,_,C,S,o,A=0,k=0,v="data:";if(N.substr(0,5)===v)throw new Error("Invalid base64 input, it looks like a data url.");var b,E=3*(N=N.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(N.charAt(N.length-1)===p.charAt(64)&&E--,N.charAt(N.length-2)===p.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=w.uint8array?new Uint8Array(0|E):new Array(0|E);A<N.length;)u=p.indexOf(N.charAt(A++))<<2|(C=p.indexOf(N.charAt(A++)))>>4,B=(15&C)<<4|(S=p.indexOf(N.charAt(A++)))>>2,_=(3&S)<<6|(o=p.indexOf(N.charAt(A++))),b[k++]=u,64!==S&&(b[k++]=B),64!==o&&(b[k++]=_);return b}},{"./support":30,"./utils":32}],2:[function(P,I,n){"use strict";var c=P("./external"),w=P("./stream/DataWorker"),p=P("./stream/Crc32Probe"),N=P("./stream/DataLengthProbe");function u(B,_,C,S,o){this.compressedSize=B,this.uncompressedSize=_,this.crc32=C,this.compression=S,this.compressedContent=o}u.prototype={getContentWorker:function(){var B=new w(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new N("data_length")),_=this;return B.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),B},getCompressedWorker:function(){return new w(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(B,_,C){return B.pipe(new p).pipe(new N("uncompressedSize")).pipe(_.compressWorker(C)).pipe(new N("compressedSize")).withStreamInfo("compression",_)},I.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(P,I,n){"use strict";var c=P("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},n.DEFLATE=P("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(P,I,n){"use strict";var c=P("./utils"),w=function(){for(var p,N=[],u=0;u<256;u++){p=u;for(var B=0;B<8;B++)p=1&p?3988292384^p>>>1:p>>>1;N[u]=p}return N}();I.exports=function(p,N){return void 0!==p&&p.length?"string"!==c.getTypeOf(p)?function(u,B,_){var S=w,o=0+_;u^=-1;for(var A=0;A<o;A++)u=u>>>8^S[255&(u^B[A])];return~u}(0|N,p,p.length):function(u,B,_){var S=w,o=0+_;u^=-1;for(var A=0;A<o;A++)u=u>>>8^S[255&(u^B.charCodeAt(A))];return~u}(0|N,p,p.length):0}},{"./utils":32}],5:[function(P,I,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(P,I,n){"use strict";var c;c=typeof Promise<"u"?Promise:P("lie"),I.exports={Promise:c}},{lie:37}],7:[function(P,I,n){"use strict";var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",w=P("pako"),p=P("./utils"),N=P("./stream/GenericWorker"),u=c?"uint8array":"array";function B(_,C){N.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=C,this.meta={}}n.magic="\b\0",p.inherits(B,N),B.prototype.processChunk=function(_){this.meta=_.meta,null===this._pako&&this._createPako(),this._pako.push(p.transformTo(u,_.data),!1)},B.prototype.flush=function(){N.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},B.prototype.cleanUp=function(){N.prototype.cleanUp.call(this),this._pako=null},B.prototype._createPako=function(){this._pako=new w[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(C){_.push({data:C,meta:_.meta})}},n.compressWorker=function(_){return new B("Deflate",_)},n.uncompressWorker=function(){return new B("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(P,I,n){"use strict";function c(S,o){var A,k="";for(A=0;A<o;A++)k+=String.fromCharCode(255&S),S>>>=8;return k}function w(S,o,A,k,v,b){var E,R,O=S.file,Z=S.compression,Q=b!==u.utf8encode,fe=p.transformTo("string",b(O.name)),re=p.transformTo("string",u.utf8encode(O.name)),Ae=O.comment,Oe=p.transformTo("string",b(Ae)),D=p.transformTo("string",u.utf8encode(Ae)),J=re.length!==O.name.length,m=D.length!==Ae.length,j="",ue="",V="",xe=O.dir,be=O.date,Pe={crc32:0,compressedSize:0,uncompressedSize:0};o&&!A||(Pe.crc32=S.crc32,Pe.compressedSize=S.compressedSize,Pe.uncompressedSize=S.uncompressedSize);var se=0;o&&(se|=8),Q||!J&&!m||(se|=2048);var Ee,kt,ee=0,Me=0;xe&&(ee|=16),"UNIX"===v?(Me=798,ee|=(kt=Ee=O.unixPermissions,Ee||(kt=xe?16893:33204),(65535&kt)<<16)):(Me=20,ee|=function(Ee){return 63&(Ee||0)}(O.dosPermissions)),E=be.getUTCHours(),E<<=6,E|=be.getUTCMinutes(),E<<=5,E|=be.getUTCSeconds()/2,R=be.getUTCFullYear()-1980,R<<=4,R|=be.getUTCMonth()+1,R<<=5,R|=be.getUTCDate(),J&&(ue=c(1,1)+c(B(fe),4)+re,j+="up"+c(ue.length,2)+ue),m&&(V=c(1,1)+c(B(Oe),4)+D,j+="uc"+c(V.length,2)+V);var Ce="";return Ce+="\n\0",Ce+=c(se,2),Ce+=Z.magic,Ce+=c(E,2),Ce+=c(R,2),Ce+=c(Pe.crc32,4),Ce+=c(Pe.compressedSize,4),Ce+=c(Pe.uncompressedSize,4),Ce+=c(fe.length,2),Ce+=c(j.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Ce+fe+j,dirRecord:_.CENTRAL_FILE_HEADER+c(Me,2)+Ce+c(Oe.length,2)+"\0\0\0\0"+c(ee,4)+c(k,4)+fe+j+Oe}}var p=P("../utils"),N=P("../stream/GenericWorker"),u=P("../utf8"),B=P("../crc32"),_=P("../signature");function C(S,o,A,k){N.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=o,this.zipPlatform=A,this.encodeFileName=k,this.streamFiles=S,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(C,N),C.prototype.push=function(S){var o=S.meta.percent||0,A=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(S):(this.bytesWritten+=S.data.length,N.prototype.push.call(this,{data:S.data,meta:{currentFile:this.currentFile,percent:A?(o+100*(A-k-1))/A:100}}))},C.prototype.openedSource=function(S){this.currentSourceOffset=this.bytesWritten,this.currentFile=S.file.name;var o=this.streamFiles&&!S.file.dir;if(o){var A=w(S,o,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:A.fileRecord,meta:{percent:0}})}else this.accumulate=!0},C.prototype.closedSource=function(S){this.accumulate=!1;var k,o=this.streamFiles&&!S.file.dir,A=w(S,o,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(A.dirRecord),o)this.push({data:(k=S,_.DATA_DESCRIPTOR+c(k.crc32,4)+c(k.compressedSize,4)+c(k.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:A.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},C.prototype.flush=function(){for(var S=this.bytesWritten,o=0;o<this.dirRecords.length;o++)this.push({data:this.dirRecords[o],meta:{percent:100}});var v,b,E,Z,k=(v=this.dirRecords.length,b=this.bytesWritten-S,E=S,Z=p.transformTo("string",(0,this.encodeFileName)(this.zipComment)),_.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(v,2)+c(v,2)+c(b,4)+c(E,4)+c(Z.length,2)+Z);this.push({data:k,meta:{percent:100}})},C.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},C.prototype.registerPrevious=function(S){this._sources.push(S);var o=this;return S.on("data",function(A){o.processChunk(A)}),S.on("end",function(){o.closedSource(o.previous.streamInfo),o._sources.length?o.prepareNextSource():o.end()}),S.on("error",function(A){o.error(A)}),this},C.prototype.resume=function(){return!!N.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},C.prototype.error=function(S){var o=this._sources;if(!N.prototype.error.call(this,S))return!1;for(var A=0;A<o.length;A++)try{o[A].error(S)}catch{}return!0},C.prototype.lock=function(){N.prototype.lock.call(this);for(var S=this._sources,o=0;o<S.length;o++)S[o].lock()},I.exports=C},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(P,I,n){"use strict";var c=P("../compressions"),w=P("./ZipFileWorker");n.generateWorker=function(p,N,u){var B=new w(N.streamFiles,u,N.platform,N.encodeFileName),_=0;try{p.forEach(function(C,S){_++;var o=function(b,E){var R=b||E,O=c[R];if(!O)throw new Error(R+" is not a valid compression method !");return O}(S.options.compression,N.compression),k=S.dir,v=S.date;S._compressWorker(o,S.options.compressionOptions||N.compressionOptions||{}).withStreamInfo("file",{name:C,dir:k,date:v,comment:S.comment||"",unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions}).pipe(B)}),B.entriesCount=_}catch(C){B.error(C)}return B}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(P,I,n){"use strict";function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var w=new c;for(var p in this)"function"!=typeof this[p]&&(w[p]=this[p]);return w}}(c.prototype=P("./object")).loadAsync=P("./load"),c.support=P("./support"),c.defaults=P("./defaults"),c.version="3.10.1",c.loadAsync=function(w,p){return(new c).loadAsync(w,p)},c.external=P("./external"),I.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(P,I,n){"use strict";var c=P("./utils"),w=P("./external"),p=P("./utf8"),N=P("./zipEntries"),u=P("./stream/Crc32Probe"),B=P("./nodejsUtils");function _(C){return new w.Promise(function(S,o){var A=C.decompressed.getContentWorker().pipe(new u);A.on("error",function(k){o(k)}).on("end",function(){A.streamInfo.crc32!==C.decompressed.crc32?o(new Error("Corrupted zip : CRC32 mismatch")):S()}).resume()})}I.exports=function(C,S){var o=this;return S=c.extend(S||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),B.isNode&&B.isStream(C)?w.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",C,!0,S.optimizedBinaryString,S.base64).then(function(A){var k=new N(S);return k.load(A),k}).then(function(A){var k=[w.Promise.resolve(A)],v=A.files;if(S.checkCRC32)for(var b=0;b<v.length;b++)k.push(_(v[b]));return w.Promise.all(k)}).then(function(A){for(var k=A.shift(),v=k.files,b=0;b<v.length;b++){var E=v[b],R=E.fileNameStr,O=c.resolve(E.fileNameStr);o.file(O,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:S.createFolders}),E.dir||(o.file(O).unsafeOriginalName=R)}return k.zipComment.length&&(o.comment=k.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(P,I,n){"use strict";var c=P("../utils"),w=P("../stream/GenericWorker");function p(N,u){w.call(this,"Nodejs stream input adapter for "+N),this._upstreamEnded=!1,this._bindStream(u)}c.inherits(p,w),p.prototype._bindStream=function(N){var u=this;(this._stream=N).pause(),N.on("data",function(B){u.push({data:B,meta:{percent:0}})}).on("error",function(B){u.isPaused?this.generatedError=B:u.error(B)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},p.prototype.pause=function(){return!!w.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},I.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(P,I,n){"use strict";var c=P("readable-stream").Readable;function w(p,N,u){c.call(this,N),this._helper=p;var B=this;p.on("data",function(_,C){B.push(_)||B._helper.pause(),u&&u(C)}).on("error",function(_){B.emit("error",_)}).on("end",function(){B.push(null)})}P("../utils").inherits(w,c),w.prototype._read=function(){this._helper.resume()},I.exports=w},{"../utils":32,"readable-stream":16}],14:[function(P,I,n){"use strict";I.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,w){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,w);if("number"==typeof c)throw new Error('The "data" argument must not be a number');return new Buffer(c,w)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var w=new Buffer(c);return w.fill(0),w},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&"function"==typeof c.on&&"function"==typeof c.pause&&"function"==typeof c.resume}}},{}],15:[function(P,I,n){"use strict";function c(O,Z,Q){var fe,re=p.getTypeOf(Z),Ae=p.extend(Q||{},B);Ae.date=Ae.date||new Date,null!==Ae.compression&&(Ae.compression=Ae.compression.toUpperCase()),"string"==typeof Ae.unixPermissions&&(Ae.unixPermissions=parseInt(Ae.unixPermissions,8)),Ae.unixPermissions&&16384&Ae.unixPermissions&&(Ae.dir=!0),Ae.dosPermissions&&16&Ae.dosPermissions&&(Ae.dir=!0),Ae.dir&&(O=v(O)),Ae.createFolders&&(fe=k(O))&&b.call(this,fe,!0),Q&&void 0!==Q.binary||(Ae.binary=!("string"===re&&!1===Ae.binary&&!1===Ae.base64)),(Z instanceof _&&0===Z.uncompressedSize||Ae.dir||!Z||0===Z.length)&&(Ae.base64=!1,Ae.binary=!0,Z="",Ae.compression="STORE",re="string");var D;D=Z instanceof _||Z instanceof N?Z:o.isNode&&o.isStream(Z)?new A(O,Z):p.prepareContent(O,Z,Ae.binary,Ae.optimizedBinaryString,Ae.base64);var J=new C(O,D,Ae);this.files[O]=J}var w=P("./utf8"),p=P("./utils"),N=P("./stream/GenericWorker"),u=P("./stream/StreamHelper"),B=P("./defaults"),_=P("./compressedObject"),C=P("./zipObject"),S=P("./generate"),o=P("./nodejsUtils"),A=P("./nodejs/NodejsStreamInputAdapter"),k=function(O){"/"===O.slice(-1)&&(O=O.substring(0,O.length-1));var Z=O.lastIndexOf("/");return 0<Z?O.substring(0,Z):""},v=function(O){return"/"!==O.slice(-1)&&(O+="/"),O},b=function(O,Z){return Z=void 0!==Z?Z:B.createFolders,O=v(O),this.files[O]||c.call(this,O,null,{dir:!0,createFolders:Z}),this.files[O]};function E(O){return"[object RegExp]"===Object.prototype.toString.call(O)}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var Z,Q,fe;for(Z in this.files)fe=this.files[Z],(Q=Z.slice(this.root.length,Z.length))&&Z.slice(0,this.root.length)===this.root&&O(Q,fe)},filter:function(O){var Z=[];return this.forEach(function(Q,fe){O(Q,fe)&&Z.push(fe)}),Z},file:function(O,Z,Q){if(1!==arguments.length)return c.call(this,O=this.root+O,Z,Q),this;if(E(O)){var fe=O;return this.filter(function(Ae,Oe){return!Oe.dir&&fe.test(Ae)})}var re=this.files[this.root+O];return re&&!re.dir?re:null},folder:function(O){if(!O)return this;if(E(O))return this.filter(function(re,Ae){return Ae.dir&&O.test(re)});var Q=b.call(this,this.root+O),fe=this.clone();return fe.root=Q.name,fe},remove:function(O){var Z=this.files[O=this.root+O];if(Z||("/"!==O.slice(-1)&&(O+="/"),Z=this.files[O]),Z&&!Z.dir)delete this.files[O];else for(var Q=this.filter(function(re,Ae){return Ae.name.slice(0,O.length)===O}),fe=0;fe<Q.length;fe++)delete this.files[Q[fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var Z,Q={};try{if((Q=p.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:w.utf8encode})).type=Q.type.toLowerCase(),Q.compression=Q.compression.toUpperCase(),"binarystring"===Q.type&&(Q.type="string"),!Q.type)throw new Error("No output type specified.");p.checkSupport(Q.type),"darwin"!==Q.platform&&"freebsd"!==Q.platform&&"linux"!==Q.platform&&"sunos"!==Q.platform||(Q.platform="UNIX"),"win32"===Q.platform&&(Q.platform="DOS"),Z=S.generateWorker(this,Q,Q.comment||this.comment||"")}catch(re){(Z=new N("error")).error(re)}return new u(Z,Q.type||"string",Q.mimeType)},generateAsync:function(O,Z){return this.generateInternalStream(O).accumulate(Z)},generateNodeStream:function(O,Z){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(Z)}};I.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(P,I,n){"use strict";I.exports=P("stream")},{stream:void 0}],17:[function(P,I,n){"use strict";var c=P("./DataReader");function w(p){c.call(this,p);for(var N=0;N<this.data.length;N++)p[N]=255&p[N]}P("../utils").inherits(w,c),w.prototype.byteAt=function(p){return this.data[this.zero+p]},w.prototype.lastIndexOfSignature=function(p){for(var N=p.charCodeAt(0),u=p.charCodeAt(1),B=p.charCodeAt(2),_=p.charCodeAt(3),C=this.length-4;0<=C;--C)if(this.data[C]===N&&this.data[C+1]===u&&this.data[C+2]===B&&this.data[C+3]===_)return C-this.zero;return-1},w.prototype.readAndCheckSignature=function(p){var N=p.charCodeAt(0),u=p.charCodeAt(1),B=p.charCodeAt(2),_=p.charCodeAt(3),C=this.readData(4);return N===C[0]&&u===C[1]&&B===C[2]&&_===C[3]},w.prototype.readData=function(p){if(this.checkOffset(p),0===p)return[];var N=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,N},I.exports=w},{"../utils":32,"./DataReader":18}],18:[function(P,I,n){"use strict";var c=P("../utils");function w(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}w.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var N,u=0;for(this.checkOffset(p),N=this.index+p-1;N>=this.index;N--)u=(u<<8)+this.byteAt(N);return this.index+=p,u},readString:function(p){return c.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},I.exports=w},{"../utils":32}],19:[function(P,I,n){"use strict";var c=P("./Uint8ArrayReader");function w(p){c.call(this,p)}P("../utils").inherits(w,c),w.prototype.readData=function(p){this.checkOffset(p);var N=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,N},I.exports=w},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(P,I,n){"use strict";var c=P("./DataReader");function w(p){c.call(this,p)}P("../utils").inherits(w,c),w.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},w.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},w.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},w.prototype.readData=function(p){this.checkOffset(p);var N=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,N},I.exports=w},{"../utils":32,"./DataReader":18}],21:[function(P,I,n){"use strict";var c=P("./ArrayReader");function w(p){c.call(this,p)}P("../utils").inherits(w,c),w.prototype.readData=function(p){if(this.checkOffset(p),0===p)return new Uint8Array(0);var N=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,N},I.exports=w},{"../utils":32,"./ArrayReader":17}],22:[function(P,I,n){"use strict";var c=P("../utils"),w=P("../support"),p=P("./ArrayReader"),N=P("./StringReader"),u=P("./NodeBufferReader"),B=P("./Uint8ArrayReader");I.exports=function(_){var C=c.getTypeOf(_);return c.checkSupport(C),"string"!==C||w.uint8array?"nodebuffer"===C?new u(_):w.uint8array?new B(c.transformTo("uint8array",_)):new p(c.transformTo("array",_)):new N(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(P,I,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(P,I,n){"use strict";var c=P("./GenericWorker"),w=P("../utils");function p(N){c.call(this,"ConvertWorker to "+N),this.destType=N}w.inherits(p,c),p.prototype.processChunk=function(N){this.push({data:w.transformTo(this.destType,N.data),meta:N.meta})},I.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(P,I,n){"use strict";var c=P("./GenericWorker"),w=P("../crc32");function p(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}P("../utils").inherits(p,c),p.prototype.processChunk=function(N){this.streamInfo.crc32=w(N.data,this.streamInfo.crc32||0),this.push(N)},I.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(P,I,n){"use strict";var c=P("../utils"),w=P("./GenericWorker");function p(N){w.call(this,"DataLengthProbe for "+N),this.propName=N,this.withStreamInfo(N,0)}c.inherits(p,w),p.prototype.processChunk=function(N){N&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+N.data.length),w.prototype.processChunk.call(this,N)},I.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(P,I,n){"use strict";var c=P("../utils"),w=P("./GenericWorker");function p(N){w.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,N.then(function(B){u.dataIsReady=!0,u.data=B,u.max=B&&B.length||0,u.type=c.getTypeOf(B),u.isPaused||u._tickAndRepeat()},function(B){u.error(B)})}c.inherits(p,w),p.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var N=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":N=this.data.substring(this.index,u);break;case"uint8array":N=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":N=this.data.slice(this.index,u)}return this.index=u,this.push({data:N,meta:{percent:this.max?this.index/this.max*100:0}})},I.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(P,I,n){"use strict";function c(w){this.name=w||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(w){this.emit("data",w)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(w){this.emit("error",w)}return!0},error:function(w){return!this.isFinished&&(this.isPaused?this.generatedError=w:(this.isFinished=!0,this.emit("error",w),this.previous&&this.previous.error(w),this.cleanUp()),!0)},on:function(w,p){return this._listeners[w].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(w,p){if(this._listeners[w])for(var N=0;N<this._listeners[w].length;N++)this._listeners[w][N].call(this,p)},pipe:function(w){return w.registerPrevious(this)},registerPrevious:function(w){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=w.streamInfo,this.mergeStreamInfo(),this.previous=w;var p=this;return w.on("data",function(N){p.processChunk(N)}),w.on("end",function(){p.end()}),w.on("error",function(N){p.error(N)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var w=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),w=!0),this.previous&&this.previous.resume(),!w},flush:function(){},processChunk:function(w){this.push(w)},withStreamInfo:function(w,p){return this.extraStreamInfo[w]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var w in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,w)&&(this.streamInfo[w]=this.extraStreamInfo[w])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var w="Worker "+this.name;return this.previous?this.previous+" -> "+w:w}},I.exports=c},{}],29:[function(P,I,n){"use strict";var c=P("../utils"),w=P("./ConvertWorker"),p=P("./GenericWorker"),N=P("../base64"),u=P("../support"),B=P("../external"),_=null;if(u.nodestream)try{_=P("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(o,A,k){var v=A;switch(A){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=A,this._mimeType=k,c.checkSupport(v),this._worker=o.pipe(new w(v)),o.lock()}catch(b){this._worker=new p("error"),this._worker.error(b)}}S.prototype={accumulate:function(o){return function C(o,A){return new B.Promise(function(k,v){var b=[],E=o._internalType,R=o._outputType,O=o._mimeType;o.on("data",function(Z,Q){b.push(Z),A&&A(Q)}).on("error",function(Z){b=[],v(Z)}).on("end",function(){try{var Z=function(Q,fe,re){switch(Q){case"blob":return c.newBlob(c.transformTo("arraybuffer",fe),re);case"base64":return N.encode(fe);default:return c.transformTo(Q,fe)}}(R,function(Q,fe){var re,Ae=0,Oe=null,D=0;for(re=0;re<fe.length;re++)D+=fe[re].length;switch(Q){case"string":return fe.join("");case"array":return Array.prototype.concat.apply([],fe);case"uint8array":for(Oe=new Uint8Array(D),re=0;re<fe.length;re++)Oe.set(fe[re],Ae),Ae+=fe[re].length;return Oe;case"nodebuffer":return Buffer.concat(fe);default:throw new Error("concat : unsupported type '"+Q+"'")}}(E,b),O);k(Z)}catch(Q){v(Q)}b=[]}).resume()})}(this,o)},on:function(o,A){var k=this;return this._worker.on(o,"data"===o?function(v){A.call(k,v.data,v.meta)}:function(){c.delay(A,arguments,k)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(o){if(c.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:"nodebuffer"!==this._outputType},o)}},I.exports=S},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(P,I,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var c=new ArrayBuffer(0);try{n.blob=0===new Blob([c],{type:"application/zip"}).size}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);w.append(c),n.blob=0===w.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!P("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(P,I,n){"use strict";for(var c=P("./utils"),w=P("./support"),p=P("./nodejsUtils"),N=P("./stream/GenericWorker"),u=new Array(256),B=0;B<256;B++)u[B]=252<=B?6:248<=B?5:240<=B?4:224<=B?3:192<=B?2:1;function _(){N.call(this,"utf-8 decode"),this.leftOver=null}function C(){N.call(this,"utf-8 encode")}u[254]=u[254]=1,n.utf8encode=function(S){return w.nodebuffer?p.newBufferFrom(S,"utf-8"):function(o){var A,k,v,b,E,R=o.length,O=0;for(b=0;b<R;b++)55296==(64512&(k=o.charCodeAt(b)))&&b+1<R&&56320==(64512&(v=o.charCodeAt(b+1)))&&(k=65536+(k-55296<<10)+(v-56320),b++),O+=k<128?1:k<2048?2:k<65536?3:4;for(A=w.uint8array?new Uint8Array(O):new Array(O),b=E=0;E<O;b++)55296==(64512&(k=o.charCodeAt(b)))&&b+1<R&&56320==(64512&(v=o.charCodeAt(b+1)))&&(k=65536+(k-55296<<10)+(v-56320),b++),k<128?A[E++]=k:(k<2048?A[E++]=192|k>>>6:(k<65536?A[E++]=224|k>>>12:(A[E++]=240|k>>>18,A[E++]=128|k>>>12&63),A[E++]=128|k>>>6&63),A[E++]=128|63&k);return A}(S)},n.utf8decode=function(S){return w.nodebuffer?c.transformTo("nodebuffer",S).toString("utf-8"):function(o){var A,k,v,b,E=o.length,R=new Array(2*E);for(A=k=0;A<E;)if((v=o[A++])<128)R[k++]=v;else if(4<(b=u[v]))R[k++]=65533,A+=b-1;else{for(v&=2===b?31:3===b?15:7;1<b&&A<E;)v=v<<6|63&o[A++],b--;1<b?R[k++]=65533:v<65536?R[k++]=v:(R[k++]=55296|(v-=65536)>>10&1023,R[k++]=56320|1023&v)}return R.length!==k&&(R.subarray?R=R.subarray(0,k):R.length=k),c.applyFromCharCode(R)}(S=c.transformTo(w.uint8array?"uint8array":"array",S))},c.inherits(_,N),_.prototype.processChunk=function(S){var o=c.transformTo(w.uint8array?"uint8array":"array",S.data);if(this.leftOver&&this.leftOver.length){if(w.uint8array){var A=o;(o=new Uint8Array(A.length+this.leftOver.length)).set(this.leftOver,0),o.set(A,this.leftOver.length)}else o=this.leftOver.concat(o);this.leftOver=null}var k=function(b,E){var R;for((E=E||b.length)>b.length&&(E=b.length),R=E-1;0<=R&&128==(192&b[R]);)R--;return R<0||0===R?E:R+u[b[R]]>E?R:E}(o),v=o;k!==o.length&&(w.uint8array?(v=o.subarray(0,k),this.leftOver=o.subarray(k,o.length)):(v=o.slice(0,k),this.leftOver=o.slice(k,o.length))),this.push({data:n.utf8decode(v),meta:S.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=_,c.inherits(C,N),C.prototype.processChunk=function(S){this.push({data:n.utf8encode(S.data),meta:S.meta})},n.Utf8EncodeWorker=C},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(P,I,n){"use strict";var c=P("./support"),w=P("./base64"),p=P("./nodejsUtils"),N=P("./external");function u(A){return A}function B(A,k){for(var v=0;v<A.length;++v)k[v]=255&A.charCodeAt(v);return k}P("setimmediate"),n.newBlob=function(A,k){n.checkSupport("blob");try{return new Blob([A],{type:k})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(A),v.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(A,k,v){var b=[],E=0,R=A.length;if(R<=v)return String.fromCharCode.apply(null,A);for(;E<R;)b.push(String.fromCharCode.apply(null,"array"===k||"nodebuffer"===k?A.slice(E,Math.min(E+v,R)):A.subarray(E,Math.min(E+v,R)))),E+=v;return b.join("")},stringifyByChar:function(A){for(var k="",v=0;v<A.length;v++)k+=String.fromCharCode(A[v]);return k},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&1===String.fromCharCode.apply(null,p.allocBuffer(1)).length}catch{return!1}}()}};function C(A){var k=65536,v=n.getTypeOf(A),b=!0;if("uint8array"===v?b=_.applyCanBeUsed.uint8array:"nodebuffer"===v&&(b=_.applyCanBeUsed.nodebuffer),b)for(;1<k;)try{return _.stringifyByChunk(A,v,k)}catch{k=Math.floor(k/2)}return _.stringifyByChar(A)}function S(A,k){for(var v=0;v<A.length;v++)k[v]=A[v];return k}n.applyFromCharCode=C;var o={};o.string={string:u,array:function(A){return B(A,new Array(A.length))},arraybuffer:function(A){return o.string.uint8array(A).buffer},uint8array:function(A){return B(A,new Uint8Array(A.length))},nodebuffer:function(A){return B(A,p.allocBuffer(A.length))}},o.array={string:C,array:u,arraybuffer:function(A){return new Uint8Array(A).buffer},uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return p.newBufferFrom(A)}},o.arraybuffer={string:function(A){return C(new Uint8Array(A))},array:function(A){return S(new Uint8Array(A),new Array(A.byteLength))},arraybuffer:u,uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return p.newBufferFrom(new Uint8Array(A))}},o.uint8array={string:C,array:function(A){return S(A,new Array(A.length))},arraybuffer:function(A){return A.buffer},uint8array:u,nodebuffer:function(A){return p.newBufferFrom(A)}},o.nodebuffer={string:C,array:function(A){return S(A,new Array(A.length))},arraybuffer:function(A){return o.nodebuffer.uint8array(A).buffer},uint8array:function(A){return S(A,new Uint8Array(A.length))},nodebuffer:u},n.transformTo=function(A,k){if(k=k||"",!A)return k;n.checkSupport(A);var v=n.getTypeOf(k);return o[v][A](k)},n.resolve=function(A){for(var k=A.split("/"),v=[],b=0;b<k.length;b++){var E=k[b];"."===E||""===E&&0!==b&&b!==k.length-1||(".."===E?v.pop():v.push(E))}return v.join("/")},n.getTypeOf=function(A){return"string"==typeof A?"string":"[object Array]"===Object.prototype.toString.call(A)?"array":c.nodebuffer&&p.isBuffer(A)?"nodebuffer":c.uint8array&&A instanceof Uint8Array?"uint8array":c.arraybuffer&&A instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(A){if(!c[A.toLowerCase()])throw new Error(A+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(A){var k,v,b="";for(v=0;v<(A||"").length;v++)b+="\\x"+((k=A.charCodeAt(v))<16?"0":"")+k.toString(16).toUpperCase();return b},n.delay=function(A,k,v){setImmediate(function(){A.apply(v||null,k||[])})},n.inherits=function(A,k){function v(){}v.prototype=k.prototype,A.prototype=new v},n.extend=function(){var A,k,v={};for(A=0;A<arguments.length;A++)for(k in arguments[A])Object.prototype.hasOwnProperty.call(arguments[A],k)&&void 0===v[k]&&(v[k]=arguments[A][k]);return v},n.prepareContent=function(A,k,v,b,E){return N.Promise.resolve(k).then(function(R){return c.blob&&(R instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R)))&&typeof FileReader<"u"?new N.Promise(function(O,Z){var Q=new FileReader;Q.onload=function(fe){O(fe.target.result)},Q.onerror=function(fe){Z(fe.target.error)},Q.readAsArrayBuffer(R)}):R}).then(function(R){var Z,O=n.getTypeOf(R);return O?("arraybuffer"===O?R=n.transformTo("uint8array",R):"string"===O&&(E?R=w.decode(R):v&&!0!==b&&(R=B(Z=R,c.uint8array?new Uint8Array(Z.length):new Array(Z.length)))),R):N.Promise.reject(new Error("Can't read the data of '"+A+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(P,I,n){"use strict";var c=P("./reader/readerFor"),w=P("./utils"),p=P("./signature"),N=P("./zipEntry"),u=P("./support");function B(_){this.files=[],this.loadOptions=_}B.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var C=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+w.pretty(C)+", expected "+w.pretty(_)+")")}},isSignature:function(_,C){var S=this.reader.index;this.reader.setIndex(_);var o=this.reader.readString(4)===C;return this.reader.setIndex(S),o},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),S=w.transformTo(u.uint8array?"uint8array":"array",_);this.zipComment=this.loadOptions.decodeFileName(S)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,C,S,o=this.zip64EndOfCentralSize-44;0<o;)_=this.reader.readInt(2),C=this.reader.readInt(4),S=this.reader.readData(C),this.zip64ExtensibleData[_]={id:_,length:C,value:S}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,C;for(_=0;_<this.files.length;_++)this.reader.setIndex((C=this.files[_]).localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),C.readLocalPart(this.reader),C.handleUTF8(),C.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(_=new N({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var C=_;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===w.MAX_VALUE_16BITS||this.diskWithCentralDirStart===w.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===w.MAX_VALUE_16BITS||this.centralDirRecords===w.MAX_VALUE_16BITS||this.centralDirSize===w.MAX_VALUE_32BITS||this.centralDirOffset===w.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var S=this.centralDirOffset+this.centralDirSize;this.zip64&&(S+=20,S+=12+this.zip64EndOfCentralSize);var o=C-S;if(0<o)this.isSignature(C,p.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(o<0)throw new Error("Corrupted zip: missing "+Math.abs(o)+" bytes.")},prepareReader:function(_){this.reader=c(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=B},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(P,I,n){"use strict";var c=P("./reader/readerFor"),w=P("./utils"),p=P("./compressedObject"),N=P("./crc32"),u=P("./utf8"),B=P("./compressions"),_=P("./support");function C(S,o){this.options=S,this.loadOptions=o}C.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(S){var o,A;if(S.skip(22),this.fileNameLength=S.readInt(2),A=S.readInt(2),this.fileName=S.readData(this.fileNameLength),S.skip(A),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(o=function(k){for(var v in B)if(Object.prototype.hasOwnProperty.call(B,v)&&B[v].magic===k)return B[v];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+w.pretty(this.compressionMethod)+" unknown (inner file : "+w.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,o,S.readData(this.compressedSize))},readCentralPart:function(S){this.versionMadeBy=S.readInt(2),S.skip(2),this.bitFlag=S.readInt(2),this.compressionMethod=S.readString(2),this.date=S.readDate(),this.crc32=S.readInt(4),this.compressedSize=S.readInt(4),this.uncompressedSize=S.readInt(4);var o=S.readInt(2);if(this.extraFieldsLength=S.readInt(2),this.fileCommentLength=S.readInt(2),this.diskNumberStart=S.readInt(2),this.internalFileAttributes=S.readInt(2),this.externalFileAttributes=S.readInt(4),this.localHeaderOffset=S.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");S.skip(o),this.readExtraFields(S),this.parseZIP64ExtraField(S),this.fileComment=S.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var S=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==S&&(this.dosPermissions=63&this.externalFileAttributes),3==S&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var S=c(this.extraFields[1].value);this.uncompressedSize===w.MAX_VALUE_32BITS&&(this.uncompressedSize=S.readInt(8)),this.compressedSize===w.MAX_VALUE_32BITS&&(this.compressedSize=S.readInt(8)),this.localHeaderOffset===w.MAX_VALUE_32BITS&&(this.localHeaderOffset=S.readInt(8)),this.diskNumberStart===w.MAX_VALUE_32BITS&&(this.diskNumberStart=S.readInt(4))}},readExtraFields:function(S){var o,A,k,v=S.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});S.index+4<v;)o=S.readInt(2),A=S.readInt(2),k=S.readData(A),this.extraFields[o]={id:o,length:A,value:k};S.setIndex(v)},handleUTF8:function(){var S=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var o=this.findExtraFieldUnicodePath();if(null!==o)this.fileNameStr=o;else{var A=w.transformTo(S,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(A)}var k=this.findExtraFieldUnicodeComment();if(null!==k)this.fileCommentStr=k;else{var v=w.transformTo(S,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var S=this.extraFields[28789];if(S){var o=c(S.value);return 1!==o.readInt(1)||N(this.fileName)!==o.readInt(4)?null:u.utf8decode(o.readData(S.length-5))}return null},findExtraFieldUnicodeComment:function(){var S=this.extraFields[25461];if(S){var o=c(S.value);return 1!==o.readInt(1)||N(this.fileComment)!==o.readInt(4)?null:u.utf8decode(o.readData(S.length-5))}return null}},I.exports=C},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(P,I,n){"use strict";function c(o,A,k){this.name=o,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=A,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var w=P("./stream/StreamHelper"),p=P("./stream/DataWorker"),N=P("./utf8"),u=P("./compressedObject"),B=P("./stream/GenericWorker");c.prototype={internalStream:function(o){var A=null,k="string";try{if(!o)throw new Error("No output type specified.");var v="string"===(k=o.toLowerCase())||"text"===k;"binarystring"!==k&&"text"!==k||(k="string"),A=this._decompressWorker();var b=!this._dataBinary;b&&!v&&(A=A.pipe(new N.Utf8EncodeWorker)),!b&&v&&(A=A.pipe(new N.Utf8DecodeWorker))}catch(E){(A=new B("error")).error(E)}return new w(A,k,"")},async:function(o,A){return this.internalStream(o).accumulate(A)},nodeStream:function(o,A){return this.internalStream(o||"nodebuffer").toNodejsStream(A)},_compressWorker:function(o,A){if(this._data instanceof u&&this._data.compression.magic===o.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new N.Utf8EncodeWorker)),u.createWorkerFrom(k,o,A)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof B?this._data:new p(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],C=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},S=0;S<_.length;S++)c.prototype[_[S]]=C;I.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(P,I,n){(function(c){"use strict";var w,p,N=c.MutationObserver||c.WebKitMutationObserver;if(N){var u=0,B=new N(o),_=c.document.createTextNode("");B.observe(_,{characterData:!0}),w=function(){_.data=u=++u%2}}else if(c.setImmediate||void 0===c.MessageChannel)w="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var A=c.document.createElement("script");A.onreadystatechange=function(){o(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},c.document.documentElement.appendChild(A)}:function(){setTimeout(o,0)};else{var C=new c.MessageChannel;C.port1.onmessage=o,w=function(){C.port2.postMessage(0)}}var S=[];function o(){var A,k;p=!0;for(var v=S.length;v;){for(k=S,S=[],A=-1;++A<v;)k[A]();v=S.length}p=!1}I.exports=function(A){1!==S.push(A)||p||w()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(P,I,n){"use strict";var c=P("immediate");function w(){}var p={},N=["REJECTED"],u=["FULFILLED"],B=["PENDING"];function _(v){if("function"!=typeof v)throw new TypeError("resolver must be a function");this.state=B,this.queue=[],this.outcome=void 0,v!==w&&A(this,v)}function C(v,b,E){this.promise=v,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof E&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function S(v,b,E){c(function(){var R;try{R=b(E)}catch(O){return p.reject(v,O)}R===v?p.reject(v,new TypeError("Cannot resolve promise with itself")):p.resolve(v,R)})}function o(v){var b=v&&v.then;if(v&&("object"==typeof v||"function"==typeof v)&&"function"==typeof b)return function(){b.apply(v,arguments)}}function A(v,b){var E=!1;function R(Q){E||(E=!0,p.reject(v,Q))}function O(Q){E||(E=!0,p.resolve(v,Q))}var Z=k(function(){b(O,R)});"error"===Z.status&&R(Z.value)}function k(v,b){var E={};try{E.value=v(b),E.status="success"}catch(R){E.status="error",E.value=R}return E}(I.exports=_).prototype.finally=function(v){if("function"!=typeof v)return this;var b=this.constructor;return this.then(function(E){return b.resolve(v()).then(function(){return E})},function(E){return b.resolve(v()).then(function(){throw E})})},_.prototype.catch=function(v){return this.then(null,v)},_.prototype.then=function(v,b){if("function"!=typeof v&&this.state===u||"function"!=typeof b&&this.state===N)return this;var E=new this.constructor(w);return this.state!==B?S(E,this.state===u?v:b,this.outcome):this.queue.push(new C(E,v,b)),E},C.prototype.callFulfilled=function(v){p.resolve(this.promise,v)},C.prototype.otherCallFulfilled=function(v){S(this.promise,this.onFulfilled,v)},C.prototype.callRejected=function(v){p.reject(this.promise,v)},C.prototype.otherCallRejected=function(v){S(this.promise,this.onRejected,v)},p.resolve=function(v,b){var E=k(o,b);if("error"===E.status)return p.reject(v,E.value);var R=E.value;if(R)A(v,R);else{v.state=u,v.outcome=b;for(var O=-1,Z=v.queue.length;++O<Z;)v.queue[O].callFulfilled(b)}return v},p.reject=function(v,b){v.state=N,v.outcome=b;for(var E=-1,R=v.queue.length;++E<R;)v.queue[E].callRejected(b);return v},_.resolve=function(v){return v instanceof this?v:p.resolve(new this(w),v)},_.reject=function(v){var b=new this(w);return p.reject(b,v)},_.all=function(v){var b=this;if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var E=v.length,R=!1;if(!E)return this.resolve([]);for(var O=new Array(E),Z=0,Q=-1,fe=new this(w);++Q<E;)re(v[Q],Q);return fe;function re(Ae,Oe){b.resolve(Ae).then(function(D){O[Oe]=D,++Z!==E||R||(R=!0,p.resolve(fe,O))},function(D){R||(R=!0,p.reject(fe,D))})}},_.race=function(v){if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var E=v.length,R=!1;if(!E)return this.resolve([]);for(var O=-1,Z=new this(w);++O<E;)this.resolve(v[O]).then(function(fe){R||(R=!0,p.resolve(Z,fe))},function(fe){R||(R=!0,p.reject(Z,fe))});return Z}},{immediate:36}],38:[function(P,I,n){"use strict";var c={};(0,P("./lib/utils/common").assign)(c,P("./lib/deflate"),P("./lib/inflate"),P("./lib/zlib/constants")),I.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(P,I,n){"use strict";var c=P("./zlib/deflate"),w=P("./utils/common"),p=P("./utils/strings"),N=P("./zlib/messages"),u=P("./zlib/zstream"),B=Object.prototype.toString,_=0,C=-1,S=0,o=8;function A(v){if(!(this instanceof A))return new A(v);this.options=w.assign({level:C,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:S,to:""},v||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=c.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(E!==_)throw new Error(N[E]);if(b.header&&c.deflateSetHeader(this.strm,b.header),b.dictionary){var R;if(R="string"==typeof b.dictionary?p.string2buf(b.dictionary):"[object ArrayBuffer]"===B.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,(E=c.deflateSetDictionary(this.strm,R))!==_)throw new Error(N[E]);this._dict_set=!0}}function k(v,b){var E=new A(b);if(E.push(v,!0),E.err)throw E.msg||N[E.err];return E.result}A.prototype.push=function(v,b){var E,R,O=this.strm,Z=this.options.chunkSize;if(this.ended)return!1;R=b===~~b?b:!0===b?4:0,O.input="string"==typeof v?p.string2buf(v):"[object ArrayBuffer]"===B.call(v)?new Uint8Array(v):v,O.next_in=0,O.avail_in=O.input.length;do{if(0===O.avail_out&&(O.output=new w.Buf8(Z),O.next_out=0,O.avail_out=Z),1!==(E=c.deflate(O,R))&&E!==_)return this.onEnd(E),!(this.ended=!0);0!==O.avail_out&&(0!==O.avail_in||4!==R&&2!==R)||this.onData("string"===this.options.to?p.buf2binstring(w.shrinkBuf(O.output,O.next_out)):w.shrinkBuf(O.output,O.next_out))}while((0<O.avail_in||0===O.avail_out)&&1!==E);return 4===R?(E=c.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===_):2!==R||(this.onEnd(_),!(O.avail_out=0))},A.prototype.onData=function(v){this.chunks.push(v)},A.prototype.onEnd=function(v){v===_&&(this.result="string"===this.options.to?this.chunks.join(""):w.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},n.Deflate=A,n.deflate=k,n.deflateRaw=function(v,b){return(b=b||{}).raw=!0,k(v,b)},n.gzip=function(v,b){return(b=b||{}).gzip=!0,k(v,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(P,I,n){"use strict";var c=P("./zlib/inflate"),w=P("./utils/common"),p=P("./utils/strings"),N=P("./zlib/constants"),u=P("./zlib/messages"),B=P("./zlib/zstream"),_=P("./zlib/gzheader"),C=Object.prototype.toString;function S(A){if(!(this instanceof S))return new S(A);this.options=w.assign({chunkSize:16384,windowBits:0,to:""},A||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,0===k.windowBits&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||A&&A.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new B,this.strm.avail_out=0;var v=c.inflateInit2(this.strm,k.windowBits);if(v!==N.Z_OK)throw new Error(u[v]);this.header=new _,c.inflateGetHeader(this.strm,this.header)}function o(A,k){var v=new S(k);if(v.push(A,!0),v.err)throw v.msg||u[v.err];return v.result}S.prototype.push=function(A,k){var v,b,E,R,O,Z,Q=this.strm,fe=this.options.chunkSize,re=this.options.dictionary,Ae=!1;if(this.ended)return!1;b=k===~~k?k:!0===k?N.Z_FINISH:N.Z_NO_FLUSH,Q.input="string"==typeof A?p.binstring2buf(A):"[object ArrayBuffer]"===C.call(A)?new Uint8Array(A):A,Q.next_in=0,Q.avail_in=Q.input.length;do{if(0===Q.avail_out&&(Q.output=new w.Buf8(fe),Q.next_out=0,Q.avail_out=fe),(v=c.inflate(Q,N.Z_NO_FLUSH))===N.Z_NEED_DICT&&re&&(Z="string"==typeof re?p.string2buf(re):"[object ArrayBuffer]"===C.call(re)?new Uint8Array(re):re,v=c.inflateSetDictionary(this.strm,Z)),v===N.Z_BUF_ERROR&&!0===Ae&&(v=N.Z_OK,Ae=!1),v!==N.Z_STREAM_END&&v!==N.Z_OK)return this.onEnd(v),!(this.ended=!0);Q.next_out&&(0!==Q.avail_out&&v!==N.Z_STREAM_END&&(0!==Q.avail_in||b!==N.Z_FINISH&&b!==N.Z_SYNC_FLUSH)||("string"===this.options.to?(E=p.utf8border(Q.output,Q.next_out),R=Q.next_out-E,O=p.buf2string(Q.output,E),Q.next_out=R,Q.avail_out=fe-R,R&&w.arraySet(Q.output,Q.output,E,R,0),this.onData(O)):this.onData(w.shrinkBuf(Q.output,Q.next_out)))),0===Q.avail_in&&0===Q.avail_out&&(Ae=!0)}while((0<Q.avail_in||0===Q.avail_out)&&v!==N.Z_STREAM_END);return v===N.Z_STREAM_END&&(b=N.Z_FINISH),b===N.Z_FINISH?(v=c.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===N.Z_OK):b!==N.Z_SYNC_FLUSH||(this.onEnd(N.Z_OK),!(Q.avail_out=0))},S.prototype.onData=function(A){this.chunks.push(A)},S.prototype.onEnd=function(A){A===N.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):w.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},n.Inflate=S,n.inflate=o,n.inflateRaw=function(A,k){return(k=k||{}).raw=!0,o(A,k)},n.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(P,I,n){"use strict";var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(N){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var B=u.shift();if(B){if("object"!=typeof B)throw new TypeError(B+"must be non-object");for(var _ in B)B.hasOwnProperty(_)&&(N[_]=B[_])}}return N},n.shrinkBuf=function(N,u){return N.length===u?N:N.subarray?N.subarray(0,u):(N.length=u,N)};var w={arraySet:function(N,u,B,_,C){if(u.subarray&&N.subarray)N.set(u.subarray(B,B+_),C);else for(var S=0;S<_;S++)N[C+S]=u[B+S]},flattenChunks:function(N){var u,B,_,C,S,o;for(u=_=0,B=N.length;u<B;u++)_+=N[u].length;for(o=new Uint8Array(_),u=C=0,B=N.length;u<B;u++)o.set(S=N[u],C),C+=S.length;return o}},p={arraySet:function(N,u,B,_,C){for(var S=0;S<_;S++)N[C+S]=u[B+S]},flattenChunks:function(N){return[].concat.apply([],N)}};n.setTyped=function(N){N?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,w)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,p))},n.setTyped(c)},{}],42:[function(P,I,n){"use strict";var c=P("./common"),w=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{w=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var N=new c.Buf8(256),u=0;u<256;u++)N[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function B(_,C){if(C<65537&&(_.subarray&&p||!_.subarray&&w))return String.fromCharCode.apply(null,c.shrinkBuf(_,C));for(var S="",o=0;o<C;o++)S+=String.fromCharCode(_[o]);return S}N[254]=N[254]=1,n.string2buf=function(_){var C,S,o,A,k,v=_.length,b=0;for(A=0;A<v;A++)55296==(64512&(S=_.charCodeAt(A)))&&A+1<v&&56320==(64512&(o=_.charCodeAt(A+1)))&&(S=65536+(S-55296<<10)+(o-56320),A++),b+=S<128?1:S<2048?2:S<65536?3:4;for(C=new c.Buf8(b),A=k=0;k<b;A++)55296==(64512&(S=_.charCodeAt(A)))&&A+1<v&&56320==(64512&(o=_.charCodeAt(A+1)))&&(S=65536+(S-55296<<10)+(o-56320),A++),S<128?C[k++]=S:(S<2048?C[k++]=192|S>>>6:(S<65536?C[k++]=224|S>>>12:(C[k++]=240|S>>>18,C[k++]=128|S>>>12&63),C[k++]=128|S>>>6&63),C[k++]=128|63&S);return C},n.buf2binstring=function(_){return B(_,_.length)},n.binstring2buf=function(_){for(var C=new c.Buf8(_.length),S=0,o=C.length;S<o;S++)C[S]=_.charCodeAt(S);return C},n.buf2string=function(_,C){var S,o,A,k,v=C||_.length,b=new Array(2*v);for(S=o=0;S<v;)if((A=_[S++])<128)b[o++]=A;else if(4<(k=N[A]))b[o++]=65533,S+=k-1;else{for(A&=2===k?31:3===k?15:7;1<k&&S<v;)A=A<<6|63&_[S++],k--;1<k?b[o++]=65533:A<65536?b[o++]=A:(b[o++]=55296|(A-=65536)>>10&1023,b[o++]=56320|1023&A)}return B(b,o)},n.utf8border=function(_,C){var S;for((C=C||_.length)>_.length&&(C=_.length),S=C-1;0<=S&&128==(192&_[S]);)S--;return S<0||0===S?C:S+N[_[S]]>C?S:C}},{"./common":41}],43:[function(P,I,n){"use strict";I.exports=function(c,w,p,N){for(var u=65535&c,B=c>>>16&65535,_=0;0!==p;){for(p-=_=2e3<p?2e3:p;B=B+(u=u+w[N++]|0)|0,--_;);u%=65521,B%=65521}return u|B<<16}},{}],44:[function(P,I,n){"use strict";I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(P,I,n){"use strict";var c=function(){for(var w,p=[],N=0;N<256;N++){w=N;for(var u=0;u<8;u++)w=1&w?3988292384^w>>>1:w>>>1;p[N]=w}return p}();I.exports=function(w,p,N,u){var B=c,_=u+N;w^=-1;for(var C=u;C<_;C++)w=w>>>8^B[255&(w^p[C])];return~w}},{}],46:[function(P,I,n){"use strict";var c,w=P("../utils/common"),p=P("./trees"),N=P("./adler32"),u=P("./crc32"),B=P("./messages"),_=0,S=0,o=-2,v=2,b=8,R=286,O=30,Z=19,Q=2*R+1,fe=15,re=3,Ae=258,Oe=Ae+re+1,D=42,J=113;function xe(f,oe){return f.msg=B[oe],oe}function be(f){return(f<<1)-(4<f?9:0)}function Pe(f){for(var oe=f.length;0<=--oe;)f[oe]=0}function se(f){var oe=f.state,ne=oe.pending;ne>f.avail_out&&(ne=f.avail_out),0!==ne&&(w.arraySet(f.output,oe.pending_buf,oe.pending_out,ne,f.next_out),f.next_out+=ne,oe.pending_out+=ne,f.total_out+=ne,f.avail_out-=ne,oe.pending-=ne,0===oe.pending&&(oe.pending_out=0))}function ee(f,oe){p._tr_flush_block(f,0<=f.block_start?f.block_start:-1,f.strstart-f.block_start,oe),f.block_start=f.strstart,se(f.strm)}function Me(f,oe){f.pending_buf[f.pending++]=oe}function Ce(f,oe){f.pending_buf[f.pending++]=oe>>>8&255,f.pending_buf[f.pending++]=255&oe}function Ee(f,oe){var ne,U,x=f.max_chain_length,q=f.strstart,he=f.prev_length,W=f.nice_match,G=f.strstart>f.w_size-Oe?f.strstart-(f.w_size-Oe):0,X=f.window,H=f.w_mask,L=f.prev,K=f.strstart+Ae,Ve=X[q+he-1],Le=X[q+he];f.prev_length>=f.good_match&&(x>>=2),W>f.lookahead&&(W=f.lookahead);do{if(X[(ne=oe)+he]===Le&&X[ne+he-1]===Ve&&X[ne]===X[q]&&X[++ne]===X[q+1]){q+=2,ne++;do{}while(X[++q]===X[++ne]&&X[++q]===X[++ne]&&X[++q]===X[++ne]&&X[++q]===X[++ne]&&X[++q]===X[++ne]&&X[++q]===X[++ne]&&X[++q]===X[++ne]&&X[++q]===X[++ne]&&q<K);if(U=Ae-(K-q),q=K-Ae,he<U){if(f.match_start=oe,W<=(he=U))break;Ve=X[q+he-1],Le=X[q+he]}}}while((oe=L[oe&H])>G&&0!=--x);return he<=f.lookahead?he:f.lookahead}function ot(f){var oe,ne,U,x,q,he,W,G,X,H,L=f.w_size;do{if(x=f.window_size-f.lookahead-f.strstart,f.strstart>=L+(L-Oe)){for(w.arraySet(f.window,f.window,L,L,0),f.match_start-=L,f.strstart-=L,f.block_start-=L,oe=ne=f.hash_size;U=f.head[--oe],f.head[oe]=L<=U?U-L:0,--ne;);for(oe=ne=L;U=f.prev[--oe],f.prev[oe]=L<=U?U-L:0,--ne;);x+=L}if(0===f.strm.avail_in)break;if(W=f.window,G=f.strstart+f.lookahead,H=void 0,(X=x)<(H=(he=f.strm).avail_in)&&(H=X),ne=0===H?0:(he.avail_in-=H,w.arraySet(W,he.input,he.next_in,H,G),1===he.state.wrap?he.adler=N(he.adler,W,H,G):2===he.state.wrap&&(he.adler=u(he.adler,W,H,G)),he.next_in+=H,he.total_in+=H,H),f.lookahead+=ne,f.lookahead+f.insert>=re)for(f.ins_h=f.window[q=f.strstart-f.insert],f.ins_h=(f.ins_h<<f.hash_shift^f.window[q+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[q+re-1])&f.hash_mask,f.prev[q&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=q,q++,f.insert--,!(f.lookahead+f.insert<re)););}while(f.lookahead<Oe&&0!==f.strm.avail_in)}function kt(f,oe){for(var ne,U;;){if(f.lookahead<Oe){if(ot(f),f.lookahead<Oe&&oe===_)return 1;if(0===f.lookahead)break}if(ne=0,f.lookahead>=re&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+re-1])&f.hash_mask,ne=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),0!==ne&&f.strstart-ne<=f.w_size-Oe&&(f.match_length=Ee(f,ne)),f.match_length>=re)if(U=p._tr_tally(f,f.strstart-f.match_start,f.match_length-re),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=re){for(f.match_length--;f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+re-1])&f.hash_mask,ne=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart,0!=--f.match_length;);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else U=p._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(U&&(ee(f,!1),0===f.strm.avail_out))return 1}return f.insert=f.strstart<re-1?f.strstart:re-1,4===oe?(ee(f,!0),0===f.strm.avail_out?3:4):f.last_lit&&(ee(f,!1),0===f.strm.avail_out)?1:2}function Je(f,oe){for(var ne,U,x;;){if(f.lookahead<Oe){if(ot(f),f.lookahead<Oe&&oe===_)return 1;if(0===f.lookahead)break}if(ne=0,f.lookahead>=re&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+re-1])&f.hash_mask,ne=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=re-1,0!==ne&&f.prev_length<f.max_lazy_match&&f.strstart-ne<=f.w_size-Oe&&(f.match_length=Ee(f,ne),f.match_length<=5&&(1===f.strategy||f.match_length===re&&4096<f.strstart-f.match_start)&&(f.match_length=re-1)),f.prev_length>=re&&f.match_length<=f.prev_length){for(x=f.strstart+f.lookahead-re,U=p._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-re),f.lookahead-=f.prev_length-1,f.prev_length-=2;++f.strstart<=x&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+re-1])&f.hash_mask,ne=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),0!=--f.prev_length;);if(f.match_available=0,f.match_length=re-1,f.strstart++,U&&(ee(f,!1),0===f.strm.avail_out))return 1}else if(f.match_available){if((U=p._tr_tally(f,0,f.window[f.strstart-1]))&&ee(f,!1),f.strstart++,f.lookahead--,0===f.strm.avail_out)return 1}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(U=p._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<re-1?f.strstart:re-1,4===oe?(ee(f,!0),0===f.strm.avail_out?3:4):f.last_lit&&(ee(f,!1),0===f.strm.avail_out)?1:2}function Ze(f,oe,ne,U,x){this.good_length=f,this.max_lazy=oe,this.nice_length=ne,this.max_chain=U,this.func=x}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*Q),this.dyn_dtree=new w.Buf16(2*(2*O+1)),this.bl_tree=new w.Buf16(2*(2*Z+1)),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(fe+1),this.heap=new w.Buf16(2*R+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*R+1),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(f){var oe;return f&&f.state?(f.total_in=f.total_out=0,f.data_type=v,(oe=f.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?D:J,f.adler=2===oe.wrap?0:1,oe.last_flush=_,p._tr_init(oe),S):xe(f,o)}function xt(f){var ne,oe=lt(f);return oe===S&&((ne=f.state).window_size=2*ne.w_size,Pe(ne.head),ne.max_lazy_match=c[ne.level].max_lazy,ne.good_match=c[ne.level].good_length,ne.nice_match=c[ne.level].nice_length,ne.max_chain_length=c[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=re-1,ne.match_available=0,ne.ins_h=0),oe}function It(f,oe,ne,U,x,q){if(!f)return o;var he=1;if(-1===oe&&(oe=6),U<0?(he=0,U=-U):15<U&&(he=2,U-=16),x<1||9<x||ne!==b||U<8||15<U||oe<0||9<oe||q<0||4<q)return xe(f,o);8===U&&(U=9);var W=new yt;return(f.state=W).strm=f,W.wrap=he,W.gzhead=null,W.w_bits=U,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=x+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+re-1)/re),W.window=new w.Buf8(2*W.w_size),W.head=new w.Buf16(W.hash_size),W.prev=new w.Buf16(W.w_size),W.lit_bufsize=1<<x+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new w.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=oe,W.strategy=q,W.method=ne,xt(f)}c=[new Ze(0,0,0,0,function(f,oe){var ne=65535;for(ne>f.pending_buf_size-5&&(ne=f.pending_buf_size-5);;){if(f.lookahead<=1){if(ot(f),0===f.lookahead&&oe===_)return 1;if(0===f.lookahead)break}f.strstart+=f.lookahead,f.lookahead=0;var U=f.block_start+ne;if((0===f.strstart||f.strstart>=U)&&(f.lookahead=f.strstart-U,f.strstart=U,ee(f,!1),0===f.strm.avail_out)||f.strstart-f.block_start>=f.w_size-Oe&&(ee(f,!1),0===f.strm.avail_out))return 1}return f.insert=0,4===oe?(ee(f,!0),0===f.strm.avail_out?3:4):(f.strstart>f.block_start&&ee(f,!1),1)}),new Ze(4,4,8,4,kt),new Ze(4,5,16,8,kt),new Ze(4,6,32,32,kt),new Ze(4,4,16,16,Je),new Ze(8,16,32,32,Je),new Ze(8,16,128,128,Je),new Ze(8,32,128,256,Je),new Ze(32,128,258,1024,Je),new Ze(32,258,258,4096,Je)],n.deflateInit=function(f,oe){return It(f,oe,b,15,8,0)},n.deflateInit2=It,n.deflateReset=xt,n.deflateResetKeep=lt,n.deflateSetHeader=function(f,oe){return f&&f.state?2!==f.state.wrap?o:(f.state.gzhead=oe,S):o},n.deflate=function(f,oe){var ne,U,x,q;if(!f||!f.state||5<oe||oe<0)return f?xe(f,o):o;if(U=f.state,!f.output||!f.input&&0!==f.avail_in||666===U.status&&4!==oe)return xe(f,0===f.avail_out?-5:o);if(U.strm=f,ne=U.last_flush,U.last_flush=oe,U.status===D)if(2===U.wrap)f.adler=0,Me(U,31),Me(U,139),Me(U,8),U.gzhead?(Me(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),Me(U,255&U.gzhead.time),Me(U,U.gzhead.time>>8&255),Me(U,U.gzhead.time>>16&255),Me(U,U.gzhead.time>>24&255),Me(U,9===U.level?2:2<=U.strategy||U.level<2?4:0),Me(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(Me(U,255&U.gzhead.extra.length),Me(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(f.adler=u(f.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(Me(U,0),Me(U,0),Me(U,0),Me(U,0),Me(U,0),Me(U,9===U.level?2:2<=U.strategy||U.level<2?4:0),Me(U,3),U.status=J);else{var he=b+(U.w_bits-8<<4)<<8;he|=(2<=U.strategy||U.level<2?0:U.level<6?1:6===U.level?2:3)<<6,0!==U.strstart&&(he|=32),he+=31-he%31,U.status=J,Ce(U,he),0!==U.strstart&&(Ce(U,f.adler>>>16),Ce(U,65535&f.adler)),f.adler=1}if(69===U.status)if(U.gzhead.extra){for(x=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>x&&(f.adler=u(f.adler,U.pending_buf,U.pending-x,x)),se(f),x=U.pending,U.pending!==U.pending_buf_size));)Me(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>x&&(f.adler=u(f.adler,U.pending_buf,U.pending-x,x)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(73===U.status)if(U.gzhead.name){x=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>x&&(f.adler=u(f.adler,U.pending_buf,U.pending-x,x)),se(f),x=U.pending,U.pending===U.pending_buf_size)){q=1;break}q=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,Me(U,q)}while(0!==q);U.gzhead.hcrc&&U.pending>x&&(f.adler=u(f.adler,U.pending_buf,U.pending-x,x)),0===q&&(U.gzindex=0,U.status=91)}else U.status=91;if(91===U.status)if(U.gzhead.comment){x=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>x&&(f.adler=u(f.adler,U.pending_buf,U.pending-x,x)),se(f),x=U.pending,U.pending===U.pending_buf_size)){q=1;break}q=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,Me(U,q)}while(0!==q);U.gzhead.hcrc&&U.pending>x&&(f.adler=u(f.adler,U.pending_buf,U.pending-x,x)),0===q&&(U.status=103)}else U.status=103;if(103===U.status&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&se(f),U.pending+2<=U.pending_buf_size&&(Me(U,255&f.adler),Me(U,f.adler>>8&255),f.adler=0,U.status=J)):U.status=J),0!==U.pending){if(se(f),0===f.avail_out)return U.last_flush=-1,S}else if(0===f.avail_in&&be(oe)<=be(ne)&&4!==oe)return xe(f,-5);if(666===U.status&&0!==f.avail_in)return xe(f,-5);if(0!==f.avail_in||0!==U.lookahead||oe!==_&&666!==U.status){var W=2===U.strategy?function(G,X){for(var H;;){if(0===G.lookahead&&(ot(G),0===G.lookahead)){if(X===_)return 1;break}if(G.match_length=0,H=p._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,H&&(ee(G,!1),0===G.strm.avail_out))return 1}return G.insert=0,4===X?(ee(G,!0),0===G.strm.avail_out?3:4):G.last_lit&&(ee(G,!1),0===G.strm.avail_out)?1:2}(U,oe):3===U.strategy?function(G,X){for(var H,L,K,Ve,Le=G.window;;){if(G.lookahead<=Ae){if(ot(G),G.lookahead<=Ae&&X===_)return 1;if(0===G.lookahead)break}if(G.match_length=0,G.lookahead>=re&&0<G.strstart&&(L=Le[K=G.strstart-1])===Le[++K]&&L===Le[++K]&&L===Le[++K]){Ve=G.strstart+Ae;do{}while(L===Le[++K]&&L===Le[++K]&&L===Le[++K]&&L===Le[++K]&&L===Le[++K]&&L===Le[++K]&&L===Le[++K]&&L===Le[++K]&&K<Ve);G.match_length=Ae-(Ve-K),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=re?(H=p._tr_tally(G,1,G.match_length-re),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):(H=p._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),H&&(ee(G,!1),0===G.strm.avail_out))return 1}return G.insert=0,4===X?(ee(G,!0),0===G.strm.avail_out?3:4):G.last_lit&&(ee(G,!1),0===G.strm.avail_out)?1:2}(U,oe):c[U.level].func(U,oe);if(3!==W&&4!==W||(U.status=666),1===W||3===W)return 0===f.avail_out&&(U.last_flush=-1),S;if(2===W&&(1===oe?p._tr_align(U):5!==oe&&(p._tr_stored_block(U,0,0,!1),3===oe&&(Pe(U.head),0===U.lookahead&&(U.strstart=0,U.block_start=0,U.insert=0))),se(f),0===f.avail_out))return U.last_flush=-1,S}return 4!==oe?S:U.wrap<=0?1:(2===U.wrap?(Me(U,255&f.adler),Me(U,f.adler>>8&255),Me(U,f.adler>>16&255),Me(U,f.adler>>24&255),Me(U,255&f.total_in),Me(U,f.total_in>>8&255),Me(U,f.total_in>>16&255),Me(U,f.total_in>>24&255)):(Ce(U,f.adler>>>16),Ce(U,65535&f.adler)),se(f),0<U.wrap&&(U.wrap=-U.wrap),0!==U.pending?S:1)},n.deflateEnd=function(f){var oe;return f&&f.state?(oe=f.state.status)!==D&&69!==oe&&73!==oe&&91!==oe&&103!==oe&&oe!==J&&666!==oe?xe(f,o):(f.state=null,oe===J?xe(f,-3):S):o},n.deflateSetDictionary=function(f,oe){var ne,U,x,q,he,W,G,X,H=oe.length;if(!f||!f.state||2===(q=(ne=f.state).wrap)||1===q&&ne.status!==D||ne.lookahead)return o;for(1===q&&(f.adler=N(f.adler,oe,H,0)),ne.wrap=0,H>=ne.w_size&&(0===q&&(Pe(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),X=new w.Buf8(ne.w_size),w.arraySet(X,oe,H-ne.w_size,ne.w_size,0),oe=X,H=ne.w_size),he=f.avail_in,W=f.next_in,G=f.input,f.avail_in=H,f.next_in=0,f.input=oe,ot(ne);ne.lookahead>=re;){for(U=ne.strstart,x=ne.lookahead-(re-1);ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[U+re-1])&ne.hash_mask,ne.prev[U&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=U,U++,--x;);ne.strstart=U,ne.lookahead=re-1,ot(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=re-1,ne.match_available=0,f.next_in=W,f.input=G,f.avail_in=he,ne.wrap=q,S},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(P,I,n){"use strict";I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(P,I,n){"use strict";I.exports=function(c,w){var p,N,u,B,_,C,S,o,A,k,v,b,E,R,O,Z,Q,fe,re,Ae,Oe,D,J,m,j;m=c.input,u=(N=c.next_in)+(c.avail_in-5),j=c.output,_=(B=c.next_out)-(w-c.avail_out),C=B+(c.avail_out-257),S=(p=c.state).dmax,o=p.wsize,A=p.whave,k=p.wnext,v=p.window,b=p.hold,E=p.bits,R=p.lencode,O=p.distcode,Z=(1<<p.lenbits)-1,Q=(1<<p.distbits)-1;e:do{E<15&&(b+=m[N++]<<E,b+=m[N++]<<(E+=8),E+=8),fe=R[b&Z];t:for(;;){if(b>>>=re=fe>>>24,E-=re,0==(re=fe>>>16&255))j[B++]=65535&fe;else{if(!(16&re)){if(!(64&re)){fe=R[(65535&fe)+(b&(1<<re)-1)];continue t}if(32&re){p.mode=12;break e}c.msg="invalid literal/length code",p.mode=30;break e}Ae=65535&fe,(re&=15)&&(E<re&&(b+=m[N++]<<E,E+=8),Ae+=b&(1<<re)-1,b>>>=re,E-=re),E<15&&(b+=m[N++]<<E,b+=m[N++]<<(E+=8),E+=8),fe=O[b&Q];s:for(;;){if(b>>>=re=fe>>>24,E-=re,!(16&(re=fe>>>16&255))){if(!(64&re)){fe=O[(65535&fe)+(b&(1<<re)-1)];continue s}c.msg="invalid distance code",p.mode=30;break e}if(Oe=65535&fe,E<(re&=15)&&(b+=m[N++]<<E,(E+=8)<re&&(b+=m[N++]<<E,E+=8)),S<(Oe+=b&(1<<re)-1)){c.msg="invalid distance too far back",p.mode=30;break e}if(b>>>=re,E-=re,(re=B-_)<Oe){if(A<(re=Oe-re)&&p.sane){c.msg="invalid distance too far back",p.mode=30;break e}if(J=v,(D=0)===k){if(D+=o-re,re<Ae){for(Ae-=re;j[B++]=v[D++],--re;);D=B-Oe,J=j}}else if(k<re){if(D+=o+k-re,(re-=k)<Ae){for(Ae-=re;j[B++]=v[D++],--re;);if(D=0,k<Ae){for(Ae-=re=k;j[B++]=v[D++],--re;);D=B-Oe,J=j}}}else if(D+=k-re,re<Ae){for(Ae-=re;j[B++]=v[D++],--re;);D=B-Oe,J=j}for(;2<Ae;)j[B++]=J[D++],j[B++]=J[D++],j[B++]=J[D++],Ae-=3;Ae&&(j[B++]=J[D++],1<Ae&&(j[B++]=J[D++]))}else{for(D=B-Oe;j[B++]=j[D++],j[B++]=j[D++],j[B++]=j[D++],2<(Ae-=3););Ae&&(j[B++]=j[D++],1<Ae&&(j[B++]=j[D++]))}break}}break}}while(N<u&&B<C);N-=Ae=E>>3,b&=(1<<(E-=Ae<<3))-1,c.next_in=N,c.next_out=B,c.avail_in=N<u?u-N+5:5-(N-u),c.avail_out=B<C?C-B+257:257-(B-C),p.hold=b,p.bits=E}},{}],49:[function(P,I,n){"use strict";var c=P("../utils/common"),w=P("./adler32"),p=P("./crc32"),N=P("./inffast"),u=P("./inftrees"),C=0,S=-2,o=1,A=852,k=592;function v(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(D){var J;return D&&D.state?(D.total_in=D.total_out=(J=D.state).total=0,D.msg="",J.wrap&&(D.adler=1&J.wrap),J.mode=o,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new c.Buf32(A),J.distcode=J.distdyn=new c.Buf32(k),J.sane=1,J.back=-1,C):S}function R(D){var J;return D&&D.state?((J=D.state).wsize=0,J.whave=0,J.wnext=0,E(D)):S}function O(D,J){var m,j;return D&&D.state?(j=D.state,J<0?(m=0,J=-J):(m=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?S:(null!==j.window&&j.wbits!==J&&(j.window=null),j.wrap=m,j.wbits=J,R(D))):S}function Z(D,J){var m,j;return D?(j=new b,(D.state=j).window=null,(m=O(D,J))!==C&&(D.state=null),m):S}var Q,fe,re=!0;function Ae(D){if(re){var J;for(Q=new c.Buf32(512),fe=new c.Buf32(32),J=0;J<144;)D.lens[J++]=8;for(;J<256;)D.lens[J++]=9;for(;J<280;)D.lens[J++]=7;for(;J<288;)D.lens[J++]=8;for(u(1,D.lens,0,288,Q,0,D.work,{bits:9}),J=0;J<32;)D.lens[J++]=5;u(2,D.lens,0,32,fe,0,D.work,{bits:5}),re=!1}D.lencode=Q,D.lenbits=9,D.distcode=fe,D.distbits=5}function Oe(D,J,m,j){var ue,V=D.state;return null===V.window&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new c.Buf8(V.wsize)),j>=V.wsize?(c.arraySet(V.window,J,m-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(j<(ue=V.wsize-V.wnext)&&(ue=j),c.arraySet(V.window,J,m-j,ue,V.wnext),(j-=ue)?(c.arraySet(V.window,J,m-j,j,0),V.wnext=j,V.whave=V.wsize):(V.wnext+=ue,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=ue))),0}n.inflateReset=R,n.inflateReset2=O,n.inflateResetKeep=E,n.inflateInit=function(D){return Z(D,15)},n.inflateInit2=Z,n.inflate=function(D,J){var m,j,ue,V,xe,be,Pe,se,ee,Me,Ce,Ee,ot,kt,Je,Ze,yt,lt,xt,It,f,oe,ne,U,x=0,q=new c.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&0!==D.avail_in)return S;12===(m=D.state).mode&&(m.mode=13),xe=D.next_out,ue=D.output,V=D.next_in,j=D.input,se=m.hold,ee=m.bits,Me=be=D.avail_in,Ce=Pe=D.avail_out,oe=C;e:for(;;)switch(m.mode){case o:if(0===m.wrap){m.mode=13;break}for(;ee<16;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(2&m.wrap&&35615===se){q[m.check=0]=255&se,q[1]=se>>>8&255,m.check=p(m.check,q,2,0),ee=se=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&se)<<8)+(se>>8))%31){D.msg="incorrect header check",m.mode=30;break}if(8!=(15&se)){D.msg="unknown compression method",m.mode=30;break}if(ee-=4,f=8+(15&(se>>>=4)),0===m.wbits)m.wbits=f;else if(f>m.wbits){D.msg="invalid window size",m.mode=30;break}m.dmax=1<<f,D.adler=m.check=1,m.mode=512&se?10:12,ee=se=0;break;case 2:for(;ee<16;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(m.flags=se,8!=(255&m.flags)){D.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){D.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=se>>8&1),512&m.flags&&(q[0]=255&se,q[1]=se>>>8&255,m.check=p(m.check,q,2,0)),ee=se=0,m.mode=3;case 3:for(;ee<32;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}m.head&&(m.head.time=se),512&m.flags&&(q[0]=255&se,q[1]=se>>>8&255,q[2]=se>>>16&255,q[3]=se>>>24&255,m.check=p(m.check,q,4,0)),ee=se=0,m.mode=4;case 4:for(;ee<16;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}m.head&&(m.head.xflags=255&se,m.head.os=se>>8),512&m.flags&&(q[0]=255&se,q[1]=se>>>8&255,m.check=p(m.check,q,2,0)),ee=se=0,m.mode=5;case 5:if(1024&m.flags){for(;ee<16;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}m.length=se,m.head&&(m.head.extra_len=se),512&m.flags&&(q[0]=255&se,q[1]=se>>>8&255,m.check=p(m.check,q,2,0)),ee=se=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(be<(Ee=m.length)&&(Ee=be),Ee&&(m.head&&(f=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),c.arraySet(m.head.extra,j,V,Ee,f)),512&m.flags&&(m.check=p(m.check,j,Ee,V)),be-=Ee,V+=Ee,m.length-=Ee),m.length))break e;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(0===be)break e;for(Ee=0;f=j[V+Ee++],m.head&&f&&m.length<65536&&(m.head.name+=String.fromCharCode(f)),f&&Ee<be;);if(512&m.flags&&(m.check=p(m.check,j,Ee,V)),be-=Ee,V+=Ee,f)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(0===be)break e;for(Ee=0;f=j[V+Ee++],m.head&&f&&m.length<65536&&(m.head.comment+=String.fromCharCode(f)),f&&Ee<be;);if(512&m.flags&&(m.check=p(m.check,j,Ee,V)),be-=Ee,V+=Ee,f)break e}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;ee<16;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(se!==(65535&m.check)){D.msg="header crc mismatch",m.mode=30;break}ee=se=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),D.adler=m.check=0,m.mode=12;break;case 10:for(;ee<32;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}D.adler=m.check=v(se),ee=se=0,m.mode=11;case 11:if(0===m.havedict)return D.next_out=xe,D.avail_out=Pe,D.next_in=V,D.avail_in=be,m.hold=se,m.bits=ee,2;D.adler=m.check=1,m.mode=12;case 12:if(5===J||6===J)break e;case 13:if(m.last){se>>>=7&ee,ee-=7&ee,m.mode=27;break}for(;ee<3;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}switch(m.last=1&se,ee-=1,3&(se>>>=1)){case 0:m.mode=14;break;case 1:if(Ae(m),m.mode=20,6!==J)break;se>>>=2,ee-=2;break e;case 2:m.mode=17;break;case 3:D.msg="invalid block type",m.mode=30}se>>>=2,ee-=2;break;case 14:for(se>>>=7&ee,ee-=7&ee;ee<32;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if((65535&se)!=(se>>>16^65535)){D.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&se,ee=se=0,m.mode=15,6===J)break e;case 15:m.mode=16;case 16:if(Ee=m.length){if(be<Ee&&(Ee=be),Pe<Ee&&(Ee=Pe),0===Ee)break e;c.arraySet(ue,j,V,Ee,xe),be-=Ee,V+=Ee,Pe-=Ee,xe+=Ee,m.length-=Ee;break}m.mode=12;break;case 17:for(;ee<14;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(m.nlen=257+(31&se),ee-=5,m.ndist=1+(31&(se>>>=5)),ee-=5,m.ncode=4+(15&(se>>>=5)),se>>>=4,ee-=4,286<m.nlen||30<m.ndist){D.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;ee<3;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}m.lens[he[m.have++]]=7&se,se>>>=3,ee-=3}for(;m.have<19;)m.lens[he[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,oe=u(0,m.lens,0,19,m.lencode,0,m.work,ne={bits:m.lenbits}),m.lenbits=ne.bits,oe){D.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;Ze=(x=m.lencode[se&(1<<m.lenbits)-1])>>>16&255,yt=65535&x,!((Je=x>>>24)<=ee);){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(yt<16)se>>>=Je,ee-=Je,m.lens[m.have++]=yt;else{if(16===yt){for(U=Je+2;ee<U;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(se>>>=Je,ee-=Je,0===m.have){D.msg="invalid bit length repeat",m.mode=30;break}f=m.lens[m.have-1],Ee=3+(3&se),se>>>=2,ee-=2}else if(17===yt){for(U=Je+3;ee<U;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}ee-=Je,f=0,Ee=3+(7&(se>>>=Je)),se>>>=3,ee-=3}else{for(U=Je+7;ee<U;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}ee-=Je,f=0,Ee=11+(127&(se>>>=Je)),se>>>=7,ee-=7}if(m.have+Ee>m.nlen+m.ndist){D.msg="invalid bit length repeat",m.mode=30;break}for(;Ee--;)m.lens[m.have++]=f}}if(30===m.mode)break;if(0===m.lens[256]){D.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,oe=u(1,m.lens,0,m.nlen,m.lencode,0,m.work,ne={bits:m.lenbits}),m.lenbits=ne.bits,oe){D.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,oe=u(2,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,ne={bits:m.distbits}),m.distbits=ne.bits,oe){D.msg="invalid distances set",m.mode=30;break}if(m.mode=20,6===J)break e;case 20:m.mode=21;case 21:if(6<=be&&258<=Pe){D.next_out=xe,D.avail_out=Pe,D.next_in=V,D.avail_in=be,m.hold=se,m.bits=ee,N(D,Ce),xe=D.next_out,ue=D.output,Pe=D.avail_out,V=D.next_in,j=D.input,be=D.avail_in,se=m.hold,ee=m.bits,12===m.mode&&(m.back=-1);break}for(m.back=0;Ze=(x=m.lencode[se&(1<<m.lenbits)-1])>>>16&255,yt=65535&x,!((Je=x>>>24)<=ee);){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(Ze&&!(240&Ze)){for(lt=Je,xt=Ze,It=yt;Ze=(x=m.lencode[It+((se&(1<<lt+xt)-1)>>lt)])>>>16&255,yt=65535&x,!(lt+(Je=x>>>24)<=ee);){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}se>>>=lt,ee-=lt,m.back+=lt}if(se>>>=Je,ee-=Je,m.back+=Je,m.length=yt,0===Ze){m.mode=26;break}if(32&Ze){m.back=-1,m.mode=12;break}if(64&Ze){D.msg="invalid literal/length code",m.mode=30;break}m.extra=15&Ze,m.mode=22;case 22:if(m.extra){for(U=m.extra;ee<U;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}m.length+=se&(1<<m.extra)-1,se>>>=m.extra,ee-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;Ze=(x=m.distcode[se&(1<<m.distbits)-1])>>>16&255,yt=65535&x,!((Je=x>>>24)<=ee);){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(!(240&Ze)){for(lt=Je,xt=Ze,It=yt;Ze=(x=m.distcode[It+((se&(1<<lt+xt)-1)>>lt)])>>>16&255,yt=65535&x,!(lt+(Je=x>>>24)<=ee);){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}se>>>=lt,ee-=lt,m.back+=lt}if(se>>>=Je,ee-=Je,m.back+=Je,64&Ze){D.msg="invalid distance code",m.mode=30;break}m.offset=yt,m.extra=15&Ze,m.mode=24;case 24:if(m.extra){for(U=m.extra;ee<U;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}m.offset+=se&(1<<m.extra)-1,se>>>=m.extra,ee-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){D.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(0===Pe)break e;if(m.offset>(Ee=Ce-Pe)){if((Ee=m.offset-Ee)>m.whave&&m.sane){D.msg="invalid distance too far back",m.mode=30;break}ot=Ee>m.wnext?m.wsize-(Ee-=m.wnext):m.wnext-Ee,Ee>m.length&&(Ee=m.length),kt=m.window}else kt=ue,ot=xe-m.offset,Ee=m.length;for(Pe<Ee&&(Ee=Pe),Pe-=Ee,m.length-=Ee;ue[xe++]=kt[ot++],--Ee;);0===m.length&&(m.mode=21);break;case 26:if(0===Pe)break e;ue[xe++]=m.length,Pe--,m.mode=21;break;case 27:if(m.wrap){for(;ee<32;){if(0===be)break e;be--,se|=j[V++]<<ee,ee+=8}if(D.total_out+=Ce-=Pe,m.total+=Ce,Ce&&(D.adler=m.check=m.flags?p(m.check,ue,Ce,xe-Ce):w(m.check,ue,Ce,xe-Ce)),Ce=Pe,(m.flags?se:v(se))!==m.check){D.msg="incorrect data check",m.mode=30;break}ee=se=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;ee<32;){if(0===be)break e;be--,se+=j[V++]<<ee,ee+=8}if(se!==(4294967295&m.total)){D.msg="incorrect length check",m.mode=30;break}ee=se=0}m.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;default:return S}return D.next_out=xe,D.avail_out=Pe,D.next_in=V,D.avail_in=be,m.hold=se,m.bits=ee,(m.wsize||Ce!==D.avail_out&&m.mode<30&&(m.mode<27||4!==J))&&Oe(D,D.output,D.next_out,Ce-D.avail_out)?(m.mode=31,-4):(Ce-=D.avail_out,D.total_in+=Me-=D.avail_in,D.total_out+=Ce,m.total+=Ce,m.wrap&&Ce&&(D.adler=m.check=m.flags?p(m.check,ue,Ce,D.next_out-Ce):w(m.check,ue,Ce,D.next_out-Ce)),D.data_type=m.bits+(m.last?64:0)+(12===m.mode?128:0)+(20===m.mode||15===m.mode?256:0),(0==Me&&0===Ce||4===J)&&oe===C&&(oe=-5),oe)},n.inflateEnd=function(D){if(!D||!D.state)return S;var J=D.state;return J.window&&(J.window=null),D.state=null,C},n.inflateGetHeader=function(D,J){var m;return D&&D.state&&2&(m=D.state).wrap?((m.head=J).done=!1,C):S},n.inflateSetDictionary=function(D,J){var m,j=J.length;return D&&D.state?0!==(m=D.state).wrap&&11!==m.mode?S:11===m.mode&&w(1,J,j,0)!==m.check?-3:Oe(D,J,j,j)?(m.mode=31,-4):(m.havedict=1,C):S},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(P,I,n){"use strict";var c=P("../utils/common"),w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(B,_,C,S,o,A,k,v){var b,E,R,O,Z,Q,fe,re,Ae,Oe=v.bits,D=0,J=0,m=0,j=0,ue=0,V=0,xe=0,be=0,Pe=0,se=0,ee=null,Me=0,Ce=new c.Buf16(16),Ee=new c.Buf16(16),ot=null,kt=0;for(D=0;D<=15;D++)Ce[D]=0;for(J=0;J<S;J++)Ce[_[C+J]]++;for(ue=Oe,j=15;1<=j&&0===Ce[j];j--);if(j<ue&&(ue=j),0===j)return o[A++]=20971520,o[A++]=20971520,v.bits=1,0;for(m=1;m<j&&0===Ce[m];m++);for(ue<m&&(ue=m),D=be=1;D<=15;D++)if(be<<=1,(be-=Ce[D])<0)return-1;if(0<be&&(0===B||1!==j))return-1;for(Ee[1]=0,D=1;D<15;D++)Ee[D+1]=Ee[D]+Ce[D];for(J=0;J<S;J++)0!==_[C+J]&&(k[Ee[_[C+J]]++]=J);if(Q=0===B?(ee=ot=k,19):1===B?(ee=w,Me-=257,ot=p,kt-=257,256):(ee=N,ot=u,-1),D=m,Z=A,xe=J=se=0,R=-1,O=(Pe=1<<(V=ue))-1,1===B&&852<Pe||2===B&&592<Pe)return 1;for(;;){for(fe=D-xe,Ae=k[J]<Q?(re=0,k[J]):k[J]>Q?(re=ot[kt+k[J]],ee[Me+k[J]]):(re=96,0),b=1<<D-xe,m=E=1<<V;o[Z+(se>>xe)+(E-=b)]=fe<<24|re<<16|Ae,0!==E;);for(b=1<<D-1;se&b;)b>>=1;if(0!==b?(se&=b-1,se+=b):se=0,J++,0==--Ce[D]){if(D===j)break;D=_[C+k[J]]}if(ue<D&&(se&O)!==R){for(0===xe&&(xe=ue),Z+=m,be=1<<(V=D-xe);V+xe<j&&!((be-=Ce[V+xe])<=0);)V++,be<<=1;if(Pe+=1<<V,1===B&&852<Pe||2===B&&592<Pe)return 1;o[R=se&O]=ue<<24|V<<16|Z-A}}return 0!==se&&(o[Z+se]=D-xe<<24|64<<16),v.bits=ue,0}},{"../utils/common":41}],51:[function(P,I,n){"use strict";I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(P,I,n){"use strict";var c=P("../utils/common");function N(x){for(var q=x.length;0<=--q;)x[q]=0}var _=256,C=286,S=30,k=15,v=16,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Oe=new Array(576);N(Oe);var D=new Array(60);N(D);var J=new Array(512);N(J);var m=new Array(256);N(m);var j=new Array(29);N(j);var ue,V,xe,be=new Array(S);function Pe(x,q,he,W,G){this.static_tree=x,this.extra_bits=q,this.extra_base=he,this.elems=W,this.max_length=G,this.has_stree=x&&x.length}function se(x,q){this.dyn_tree=x,this.max_code=0,this.stat_desc=q}function ee(x){return x<256?J[x]:J[256+(x>>>7)]}function Me(x,q){x.pending_buf[x.pending++]=255&q,x.pending_buf[x.pending++]=q>>>8&255}function Ce(x,q,he){x.bi_valid>v-he?(x.bi_buf|=q<<x.bi_valid&65535,Me(x,x.bi_buf),x.bi_buf=q>>v-x.bi_valid,x.bi_valid+=he-v):(x.bi_buf|=q<<x.bi_valid&65535,x.bi_valid+=he)}function Ee(x,q,he){Ce(x,he[2*q],he[2*q+1])}function ot(x,q){for(var he=0;he|=1&x,x>>>=1,he<<=1,0<--q;);return he>>>1}function kt(x,q,he){var W,G,X=new Array(k+1),H=0;for(W=1;W<=k;W++)X[W]=H=H+he[W-1]<<1;for(G=0;G<=q;G++){var L=x[2*G+1];0!==L&&(x[2*G]=ot(X[L]++,L))}}function Je(x){var q;for(q=0;q<C;q++)x.dyn_ltree[2*q]=0;for(q=0;q<S;q++)x.dyn_dtree[2*q]=0;for(q=0;q<19;q++)x.bl_tree[2*q]=0;x.dyn_ltree[512]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Ze(x){8<x.bi_valid?Me(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function yt(x,q,he,W){var G=2*q,X=2*he;return x[G]<x[X]||x[G]===x[X]&&W[q]<=W[he]}function lt(x,q,he){for(var W=x.heap[he],G=he<<1;G<=x.heap_len&&(G<x.heap_len&&yt(q,x.heap[G+1],x.heap[G],x.depth)&&G++,!yt(q,W,x.heap[G],x.depth));)x.heap[he]=x.heap[G],he=G,G<<=1;x.heap[he]=W}function xt(x,q,he){var W,G,X,H,L=0;if(0!==x.last_lit)for(;W=x.pending_buf[x.d_buf+2*L]<<8|x.pending_buf[x.d_buf+2*L+1],G=x.pending_buf[x.l_buf+L],L++,0===W?Ee(x,G,q):(Ee(x,(X=m[G])+_+1,q),0!==(H=Q[X])&&Ce(x,G-=j[X],H),Ee(x,X=ee(--W),he),0!==(H=fe[X])&&Ce(x,W-=be[X],H)),L<x.last_lit;);Ee(x,256,q)}function It(x,q){var he,W,G,X=q.dyn_tree,H=q.stat_desc.static_tree,L=q.stat_desc.has_stree,K=q.stat_desc.elems,Ve=-1;for(x.heap_len=0,x.heap_max=573,he=0;he<K;he++)0!==X[2*he]?(x.heap[++x.heap_len]=Ve=he,x.depth[he]=0):X[2*he+1]=0;for(;x.heap_len<2;)X[2*(G=x.heap[++x.heap_len]=Ve<2?++Ve:0)]=1,x.depth[G]=0,x.opt_len--,L&&(x.static_len-=H[2*G+1]);for(q.max_code=Ve,he=x.heap_len>>1;1<=he;he--)lt(x,X,he);for(G=K;he=x.heap[1],x.heap[1]=x.heap[x.heap_len--],lt(x,X,1),W=x.heap[1],x.heap[--x.heap_max]=he,x.heap[--x.heap_max]=W,X[2*G]=X[2*he]+X[2*W],x.depth[G]=(x.depth[he]>=x.depth[W]?x.depth[he]:x.depth[W])+1,X[2*he+1]=X[2*W+1]=G,x.heap[1]=G++,lt(x,X,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(Le,ct){var es,Te,rs,rt,$e,Ct,tt=ct.dyn_tree,zt=ct.max_code,Y=ct.stat_desc.static_tree,Xc=ct.stat_desc.has_stree,xl=ct.stat_desc.extra_bits,aa=ct.stat_desc.extra_base,As=ct.stat_desc.max_length,ut=0;for(rt=0;rt<=k;rt++)Le.bl_count[rt]=0;for(tt[2*Le.heap[Le.heap_max]+1]=0,es=Le.heap_max+1;es<573;es++)As<(rt=tt[2*tt[2*(Te=Le.heap[es])+1]+1]+1)&&(rt=As,ut++),tt[2*Te+1]=rt,zt<Te||(Le.bl_count[rt]++,$e=0,aa<=Te&&($e=xl[Te-aa]),Le.opt_len+=(Ct=tt[2*Te])*(rt+$e),Xc&&(Le.static_len+=Ct*(Y[2*Te+1]+$e)));if(0!==ut){do{for(rt=As-1;0===Le.bl_count[rt];)rt--;Le.bl_count[rt]--,Le.bl_count[rt+1]+=2,Le.bl_count[As]--,ut-=2}while(0<ut);for(rt=As;0!==rt;rt--)for(Te=Le.bl_count[rt];0!==Te;)zt<(rs=Le.heap[--es])||(tt[2*rs+1]!==rt&&(Le.opt_len+=(rt-tt[2*rs+1])*tt[2*rs],tt[2*rs+1]=rt),Te--)}}(x,q),kt(X,Ve,x.bl_count)}function f(x,q,he){var W,G,X=-1,H=q[1],L=0,K=7,Ve=4;for(0===H&&(K=138,Ve=3),q[2*(he+1)+1]=65535,W=0;W<=he;W++)G=H,H=q[2*(W+1)+1],++L<K&&G===H||(L<Ve?x.bl_tree[2*G]+=L:0!==G?(G!==X&&x.bl_tree[2*G]++,x.bl_tree[32]++):L<=10?x.bl_tree[34]++:x.bl_tree[36]++,X=G,Ve=(L=0)===H?(K=138,3):G===H?(K=6,3):(K=7,4))}function oe(x,q,he){var W,G,X=-1,H=q[1],L=0,K=7,Ve=4;for(0===H&&(K=138,Ve=3),W=0;W<=he;W++)if(G=H,H=q[2*(W+1)+1],!(++L<K&&G===H)){if(L<Ve)for(;Ee(x,G,x.bl_tree),0!=--L;);else 0!==G?(G!==X&&(Ee(x,G,x.bl_tree),L--),Ee(x,16,x.bl_tree),Ce(x,L-3,2)):L<=10?(Ee(x,17,x.bl_tree),Ce(x,L-3,3)):(Ee(x,18,x.bl_tree),Ce(x,L-11,7));X=G,Ve=(L=0)===H?(K=138,3):G===H?(K=6,3):(K=7,4)}}N(be);var ne=!1;function U(x,q,he,W){var G,X,H;Ce(x,0+(W?1:0),3),X=q,H=he,Ze(G=x),Me(G,H),Me(G,~H),c.arraySet(G.pending_buf,G.window,X,H,G.pending),G.pending+=H}n._tr_init=function(x){ne||(function(){var q,he,W,G,X,H=new Array(k+1);for(G=W=0;G<28;G++)for(j[G]=W,q=0;q<1<<Q[G];q++)m[W++]=G;for(m[W-1]=G,G=X=0;G<16;G++)for(be[G]=X,q=0;q<1<<fe[G];q++)J[X++]=G;for(X>>=7;G<S;G++)for(be[G]=X<<7,q=0;q<1<<fe[G]-7;q++)J[256+X++]=G;for(he=0;he<=k;he++)H[he]=0;for(q=0;q<=143;)Oe[2*q+1]=8,q++,H[8]++;for(;q<=255;)Oe[2*q+1]=9,q++,H[9]++;for(;q<=279;)Oe[2*q+1]=7,q++,H[7]++;for(;q<=287;)Oe[2*q+1]=8,q++,H[8]++;for(kt(Oe,287,H),q=0;q<S;q++)D[2*q+1]=5,D[2*q]=ot(q,5);ue=new Pe(Oe,Q,257,C,k),V=new Pe(D,fe,0,S,k),xe=new Pe(new Array(0),re,0,19,7)}(),ne=!0),x.l_desc=new se(x.dyn_ltree,ue),x.d_desc=new se(x.dyn_dtree,V),x.bl_desc=new se(x.bl_tree,xe),x.bi_buf=0,x.bi_valid=0,Je(x)},n._tr_stored_block=U,n._tr_flush_block=function(x,q,he,W){var G,X,H=0;0<x.level?(2===x.strm.data_type&&(x.strm.data_type=function(L){var K,Ve=4093624447;for(K=0;K<=31;K++,Ve>>>=1)if(1&Ve&&0!==L.dyn_ltree[2*K])return 0;if(0!==L.dyn_ltree[18]||0!==L.dyn_ltree[20]||0!==L.dyn_ltree[26])return 1;for(K=32;K<_;K++)if(0!==L.dyn_ltree[2*K])return 1;return 0}(x)),It(x,x.l_desc),It(x,x.d_desc),H=function(L){var K;for(f(L,L.dyn_ltree,L.l_desc.max_code),f(L,L.dyn_dtree,L.d_desc.max_code),It(L,L.bl_desc),K=18;3<=K&&0===L.bl_tree[2*Ae[K]+1];K--);return L.opt_len+=3*(K+1)+5+5+4,K}(x),(X=x.static_len+3+7>>>3)<=(G=x.opt_len+3+7>>>3)&&(G=X)):G=X=he+5,he+4<=G&&-1!==q?U(x,q,he,W):4===x.strategy||X===G?(Ce(x,2+(W?1:0),3),xt(x,Oe,D)):(Ce(x,4+(W?1:0),3),function(L,K,Ve,Le){var ct;for(Ce(L,K-257,5),Ce(L,Ve-1,5),Ce(L,Le-4,4),ct=0;ct<Le;ct++)Ce(L,L.bl_tree[2*Ae[ct]+1],3);oe(L,L.dyn_ltree,K-1),oe(L,L.dyn_dtree,Ve-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,H+1),xt(x,x.dyn_ltree,x.dyn_dtree)),Je(x),W&&Ze(x)},n._tr_tally=function(x,q,he){return x.pending_buf[x.d_buf+2*x.last_lit]=q>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&q,x.pending_buf[x.l_buf+x.last_lit]=255&he,x.last_lit++,0===q?x.dyn_ltree[2*he]++:(x.matches++,q--,x.dyn_ltree[2*(m[he]+_+1)]++,x.dyn_dtree[2*ee(q)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){var q;Ce(x,2,3),Ee(x,256,Oe),16===(q=x).bi_valid?(Me(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)}},{"../utils/common":41}],53:[function(P,I,n){"use strict";I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(P,I,n){(function(c){!function(w,p){"use strict";if(!w.setImmediate){var N,u,B,_,C=1,S={},o=!1,A=w.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(w);k=k&&k.setTimeout?k:w,N="[object process]"==={}.toString.call(w.process)?function(R){process.nextTick(function(){b(R)})}:function(){if(w.postMessage&&!w.importScripts){var R=!0,O=w.onmessage;return w.onmessage=function(){R=!1},w.postMessage("","*"),w.onmessage=O,R}}()?(_="setImmediate$"+Math.random()+"$",w.addEventListener?w.addEventListener("message",E,!1):w.attachEvent("onmessage",E),function(R){w.postMessage(_+R,"*")}):w.MessageChannel?((B=new MessageChannel).port1.onmessage=function(R){b(R.data)},function(R){B.port2.postMessage(R)}):A&&"onreadystatechange"in A.createElement("script")?(u=A.documentElement,function(R){var O=A.createElement("script");O.onreadystatechange=function(){b(R),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):function(R){setTimeout(b,0,R)},k.setImmediate=function(R){"function"!=typeof R&&(R=new Function(""+R));for(var O=new Array(arguments.length-1),Z=0;Z<O.length;Z++)O[Z]=arguments[Z+1];return S[C]={callback:R,args:O},N(C),C++},k.clearImmediate=v}function v(R){delete S[R]}function b(R){if(o)setTimeout(b,0,R);else{var O=S[R];if(O){o=!0;try{!function(Z){var Q=Z.callback,fe=Z.args;switch(fe.length){case 0:Q();break;case 1:Q(fe[0]);break;case 2:Q(fe[0],fe[1]);break;case 3:Q(fe[0],fe[1],fe[2]);break;default:Q.apply(p,fe)}}(O)}finally{v(R),o=!1}}}}function E(R){R.source===w&&"string"==typeof R.data&&0===R.data.indexOf(_)&&b(+R.data.slice(_.length))}}(typeof self>"u"?void 0===c?this:c:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)},153:(et,P)=>{"use strict";class c{static isArrayBuffer(v){return"[object ArrayBuffer]"===Object.prototype.toString.call(v)}static toArrayBuffer(v){return this.isArrayBuffer(v)?v:v.byteLength===v.buffer.byteLength||0===v.byteOffset&&v.byteLength===v.buffer.byteLength?v.buffer:this.toUint8Array(v.buffer).slice(v.byteOffset,v.byteOffset+v.byteLength).buffer}static toUint8Array(v){return this.toView(v,Uint8Array)}static toView(v,b){if(v.constructor===b)return v;if(this.isArrayBuffer(v))return new b(v);if(this.isArrayBufferView(v))return new b(v.buffer,v.byteOffset,v.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(v){return this.isArrayBufferView(v)||this.isArrayBuffer(v)}static isArrayBufferView(v){return ArrayBuffer.isView(v)||v&&this.isArrayBuffer(v.buffer)}static isEqual(v,b){const E=c.toUint8Array(v),R=c.toUint8Array(b);if(E.length!==R.byteLength)return!1;for(let O=0;O<E.length;O++)if(E[O]!==R[O])return!1;return!0}static concat(...v){let b;b=Array.isArray(v[0])&&!(v[1]instanceof Function)||Array.isArray(v[0])&&v[1]instanceof Function?v[0]:v[v.length-1]instanceof Function?v.slice(0,v.length-1):v;let E=0;for(const Z of b)E+=Z.byteLength;const R=new Uint8Array(E);let O=0;for(const Z of b){const Q=this.toUint8Array(Z);R.set(Q,O),O+=Q.length}return v[v.length-1]instanceof Function?this.toView(R,v[v.length-1]):R.buffer}}const w="string",p=/^[0-9a-f]+$/i,N=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,u=/^[a-zA-Z0-9-_]+$/;class B{static fromString(v){const b=unescape(encodeURIComponent(v)),E=new Uint8Array(b.length);for(let R=0;R<b.length;R++)E[R]=b.charCodeAt(R);return E.buffer}static toString(v){const b=c.toUint8Array(v);let E="";for(let O=0;O<b.length;O++)E+=String.fromCharCode(b[O]);return decodeURIComponent(escape(E))}}class _{static toString(v,b=!1){const E=c.toArrayBuffer(v),R=new DataView(E);let O="";for(let Z=0;Z<E.byteLength;Z+=2){const Q=R.getUint16(Z,b);O+=String.fromCharCode(Q)}return O}static fromString(v,b=!1){const E=new ArrayBuffer(2*v.length),R=new DataView(E);for(let O=0;O<v.length;O++)R.setUint16(2*O,v.charCodeAt(O),b);return E}}let C=(()=>{class k{static isHex(b){return typeof b===w&&p.test(b)}static isBase64(b){return typeof b===w&&N.test(b)}static isBase64Url(b){return typeof b===w&&u.test(b)}static ToString(b,E="utf8"){const R=c.toUint8Array(b);switch(E.toLowerCase()){case"utf8":return this.ToUtf8String(R);case"binary":return this.ToBinary(R);case"hex":return this.ToHex(R);case"base64":return this.ToBase64(R);case"base64url":return this.ToBase64Url(R);case"utf16le":return _.toString(R,!0);case"utf16":case"utf16be":return _.toString(R);default:throw new Error(`Unknown type of encoding '${E}'`)}}static FromString(b,E="utf8"){if(!b)return new ArrayBuffer(0);switch(E.toLowerCase()){case"utf8":return this.FromUtf8String(b);case"binary":return this.FromBinary(b);case"hex":return this.FromHex(b);case"base64":return this.FromBase64(b);case"base64url":return this.FromBase64Url(b);case"utf16le":return _.fromString(b,!0);case"utf16":case"utf16be":return _.fromString(b);default:throw new Error(`Unknown type of encoding '${E}'`)}}static ToBase64(b){const E=c.toUint8Array(b);if(typeof btoa<"u"){const R=this.ToString(E,"binary");return btoa(R)}return Buffer.from(E).toString("base64")}static FromBase64(b){const E=this.formatString(b);if(!E)return new ArrayBuffer(0);if(!k.isBase64(E))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(E)):new Uint8Array(Buffer.from(E,"base64")).buffer}static FromBase64Url(b){const E=this.formatString(b);if(!E)return new ArrayBuffer(0);if(!k.isBase64Url(E))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(E.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(b){return this.ToBase64(b).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(b,E=k.DEFAULT_UTF8_ENCODING){switch(E){case"ascii":return this.FromBinary(b);case"utf8":return B.fromString(b);case"utf16":case"utf16be":return _.fromString(b);case"utf16le":case"usc2":return _.fromString(b,!0);default:throw new Error(`Unknown type of encoding '${E}'`)}}static ToUtf8String(b,E=k.DEFAULT_UTF8_ENCODING){switch(E){case"ascii":return this.ToBinary(b);case"utf8":return B.toString(b);case"utf16":case"utf16be":return _.toString(b);case"utf16le":case"usc2":return _.toString(b,!0);default:throw new Error(`Unknown type of encoding '${E}'`)}}static FromBinary(b){const E=b.length,R=new Uint8Array(E);for(let O=0;O<E;O++)R[O]=b.charCodeAt(O);return R.buffer}static ToBinary(b){const E=c.toUint8Array(b);let R="";for(let O=0;O<E.length;O++)R+=String.fromCharCode(E[O]);return R}static ToHex(b){const E=c.toUint8Array(b);let R="";const O=E.length;for(let Z=0;Z<O;Z++){const Q=E[Z];Q<16&&(R+="0"),R+=Q.toString(16)}return R}static FromHex(b){let E=this.formatString(b);if(!E)return new ArrayBuffer(0);if(!k.isHex(E))throw new TypeError("Argument 'hexString' is not HEX encoded");E.length%2&&(E=`0${E}`);const R=new Uint8Array(E.length/2);for(let O=0;O<E.length;O+=2){const Z=E.slice(O,O+2);R[O/2]=parseInt(Z,16)}return R.buffer}static ToUtf16String(b,E=!1){return _.toString(b,E)}static FromUtf16String(b,E=!1){return _.fromString(b,E)}static Base64Padding(b){const E=4-b.length%4;if(E<4)for(let R=0;R<E;R++)b+="=";return b}static formatString(b){return b?.replace(/[\n\r\t ]/g,"")||""}}return k.DEFAULT_UTF8_ENCODING="utf8",k})();P._H=c,P.U$=C},3205:(et,P,I)=>{"use strict";I.d(P,{_:()=>w});var n=I(2500),c=I(9301);function w(p,N){const u="object"==typeof N;return new Promise((B,_)=>{const C=new c.Ms({next:S=>{B(S),C.unsubscribe()},error:_,complete:()=>{u?B(N.defaultValue):_(new n.G)}});p.subscribe(C)})}},4623:(et,P,I)=>{"use strict";I.d(P,{o:()=>w});const w=["check",(0,I(5930).s)({outline:'<path d="M13.72,27.69,3.29,17.27a1,1,0,0,1,1.41-1.41l9,9L31.29,7.29a1,1,0,0,1,1.41,1.41Z"/>'})]},357:(et,P,I)=>{"use strict";I.d(P,{V:()=>w});const w=["help-info",(0,I(5930).s)({outline:'<path d="M25.39,25.45a1,1,0,0,0-1.38.29c-1.41,2.16-4,4.81-6.31,5.7s-4.12.57-4.84,0c-.31-.27-1.12-1-.43-3.49.46-1.66,3.32-9.48,4-11.38l-2.18.28c-.69,1.86-3.29,8.84-3.76,10.58-.68,2.49-.34,4.3,1.09,5.56A5.59,5.59,0,0,0,15,34a9.53,9.53,0,0,0,3.45-.7c2.79-1.09,5.72-4.12,7.26-6.47A1,1,0,0,0,25.39,25.45Z"/><path d="M19.3,11a4.5,4.5,0,1,0-4.5-4.5A4.5,4.5,0,0,0,19.3,11Zm0-7a2.5,2.5,0,1,1-2.5,2.5A2.5,2.5,0,0,1,19.3,4Z"/><path d="M11.81,15c.06,0,6.27-.82,7.73-1,.65-.1,1.14,0,1.3.15s.21.8-.07,1.68c-.61,1.86-3.69,11-4.59,13.71a8,8,0,0,0,1.29-.38,7.32,7.32,0,0,0,1.15-.6C19.85,25,22.15,18.1,22.67,16.52s.39-2.78-.3-3.6a3.16,3.16,0,0,0-3.08-.83c-1.43.15-7.47.94-7.73,1a1,1,0,0,0,.26,2Z"/>',solid:'<circle cx="20.75" cy="6" r="4"/><path d="M24.84,26.23a1,1,0,0,0-1.4.29,16.6,16.6,0,0,1-3.51,3.77c-.33.25-1.56,1.2-2.08,1-.36-.11-.15-.82-.08-1.12l.53-1.57c.22-.64,4.05-12,4.47-13.3.62-1.9.35-3.77-2.48-3.32-.77.08-8.58,1.09-8.72,1.1a1,1,0,0,0,.13,2s3-.39,3.33-.42a.88.88,0,0,1,.85.44,2.47,2.47,0,0,1-.07,1.71c-.26,1-4.37,12.58-4.5,13.25a2.78,2.78,0,0,0,1.18,3,5,5,0,0,0,3.08.83h0a8.53,8.53,0,0,0,3.09-.62c2.49-1,5.09-3.66,6.46-5.75A1,1,0,0,0,24.84,26.23Z"/>'})]},7949:(et,P,I)=>{"use strict";I.d(P,{Q:()=>w});const w=["layers",(0,I(5930).s)({outline:'<path d="M18,20.25a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,0-1.81l15-7.09a1,1,0,0,1,.85,0l15,7.09a1,1,0,0,1,0,1.81l-15,7.09A1,1,0,0,1,18,20.25ZM5.34,12.16l12.66,6,12.66-6L18,6.18Z"/><path d="M18,26.16a1,1,0,0,1-.43-.1L2.57,19a1,1,0,1,1,.85-1.81L18,24.06l14.57-6.89A1,1,0,1,1,33.43,19l-15,7.09A1,1,0,0,1,18,26.16Z"/><path d="M18,32.07a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,.85-1.81L18,30l14.57-6.89a1,1,0,1,1,.85,1.81L18.43,32A1,1,0,0,1,18,32.07Z"/>',solid:'<path d="M18,20.25a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,0-1.81l15-7.09a1,1,0,0,1,.85,0l15,7.09a1,1,0,0,1,0,1.81l-15,7.09A1,1,0,0,1,18,20.25Z"/><path d="M18,26.16a1,1,0,0,1-.43-.1L2.57,19a1,1,0,1,1,.85-1.81L18,24.06l14.57-6.89A1,1,0,1,1,33.43,19l-15,7.09A1,1,0,0,1,18,26.16Z"/><path d="M18,32.07a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,.85-1.81L18,30l14.57-6.89a1,1,0,1,1,.85,1.81L18.43,32A1,1,0,0,1,18,32.07Z"/>'})]},6156:(et,P,I)=>{"use strict";I.d(P,{h:()=>w});const w=["lock",(0,I(5930).s)({outline:'<path d="M18.09,20.59A2.41,2.41,0,0,0,17,25.14V28h2V25.23a2.41,2.41,0,0,0-.91-4.64Z"/><path d="M26,15V10.72a8.2,8.2,0,0,0-8-8.36,8.2,8.2,0,0,0-8,8.36V15H7V32a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V15ZM12,10.72a6.2,6.2,0,0,1,6-6.36,6.2,6.2,0,0,1,6,6.36V15H12ZM9,32V17H27V32Z"/>',solid:'<path d="M26,15V10.72a8.2,8.2,0,0,0-8-8.36,8.2,8.2,0,0,0-8,8.36V15H7V32a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V15ZM19,25.23V28H17V25.14a2.4,2.4,0,1,1,2,.09ZM24,15H12V10.72a6.2,6.2,0,0,1,6-6.36,6.2,6.2,0,0,1,6,6.36Z"/>'})]},7537:(et,P,I)=>{"use strict";I.d(P,{t:()=>w});const w=["network-globe",(0,I(5930).s)({outline:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M17.75,2a14,14,0,0,0-14,14c0,.45,0,.89.07,1.33l0,0h0A14,14,0,1,0,17.75,2Zm0,2a12,12,0,0,1,8.44,3.48c0,.33,0,.66,0,1A18.51,18.51,0,0,0,14,8.53a2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92,11.92,0,0,1,17.75,4Zm-3,5.87A17,17,0,0,1,25.92,10a16.9,16.9,0,0,1-3.11,7,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77Zm-4-3.6c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Zm6.51-8.9a2.33,2.33,0,0,0-.33-1.19,18.4,18.4,0,0,0,3.39-7.37q.75.35,1.48.78a12,12,0,0,1,.42,8.2A16,16,0,0,1,24.27,19.11Z"/>',outlineAlerted:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.73,15.4h-2c0,.2,0,.4,0,.61a12,12,0,0,1-.53,3.52,16,16,0,0,1-5-.41,2.33,2.33,0,0,0-.33-1.19,18.87,18.87,0,0,0,1.62-2.52H23.83a17.29,17.29,0,0,1-1,1.54,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77A17.08,17.08,0,0,1,19.56,9l.87-1.51a18.59,18.59,0,0,0-6.39,1,2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.88,11.88,0,0,1,22,4.79L23,3A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0A14,14,0,0,0,31.76,16C31.76,15.8,31.74,15.6,31.73,15.4Zm-21-9.13c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Z"/>',outlineBadged:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.5,13.35a7.54,7.54,0,0,1-1.5.15l-.51,0a11.91,11.91,0,0,1-.25,6,16,16,0,0,1-5-.41,2.33,2.33,0,0,0-.33-1.19,18.59,18.59,0,0,0,2.78-5.18,7.49,7.49,0,0,1-1.31-.82,17,17,0,0,1-2.61,5,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77,17,17,0,0,1,8.53-.62,7.43,7.43,0,0,1-.56-1.59A18.56,18.56,0,0,0,14,8.53a2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92,11.92,0,0,1,22.57,5a7.45,7.45,0,0,1,.53-2A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0a14,14,0,1,0,27.68-4ZM10.76,6.27c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Z"/>',solid:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M14.72,9.87a2.25,2.25,0,0,1-.47,1.77,16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,16.9,16.9,0,0,0,3.11-7A17,17,0,0,0,14.72,9.87Z"/><path d="M17.75,2a14,14,0,0,0-14,14c0,.45,0,.89.07,1.33l0,0h0A14,14,0,1,0,17.75,2ZM28.1,21.09a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.51,18.51,0,0,1,12.11-.07c0-.32,0-.65,0-1h0a12,12,0,0,1,2.62,3.85h0q-.73-.43-1.48-.78a18.4,18.4,0,0,1-3.39,7.37,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53Z"/>',solidAlerted:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.73,15.4H25.56a18.87,18.87,0,0,1-1.62,2.52,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53H28.1a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.59,18.59,0,0,1,6.39-1L23,3A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0A14,14,0,0,0,31.76,16C31.76,15.8,31.74,15.6,31.73,15.4Z"/><path d="M14.26,11.64a16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,17.29,17.29,0,0,0,1-1.54h-1.6A3.68,3.68,0,0,1,19,9.89L19.56,9a17.08,17.08,0,0,0-4.84.88,2.25,2.25,0,0,1-.47,1.77Z"/>',solidBadged:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.5,13.35a7.54,7.54,0,0,1-1.5.15,7.46,7.46,0,0,1-3.28-.76,18.59,18.59,0,0,1-2.78,5.18,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53H28.1a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.56,18.56,0,0,1,8.65-.87,7.45,7.45,0,0,1,.41-4.59A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0a14,14,0,1,0,27.68-4Z"/><path d="M14.72,9.87a2.25,2.25,0,0,1-.47,1.77,16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,17,17,0,0,0,2.61-5,7.52,7.52,0,0,1-2.16-2.67A17,17,0,0,0,14.72,9.87Z"/>'})]}}]);