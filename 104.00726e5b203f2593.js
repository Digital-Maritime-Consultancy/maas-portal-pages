(self.webpackChunkmaas_portal_clr=self.webpackChunkmaas_portal_clr||[]).push([[104],{1748:(nt,U,L)=>{"use strict";L.d(U,{Y:()=>w});const n=[{value:"AF",code3:"AFG",title:"Afghanistan",valueText:"Afghanistan"},{value:"AL",code3:"ALB",title:"Albania",valueText:"Albania"},{value:"DZ",code3:"DZA",title:"Algeria",valueText:"Algeria"},{value:"AS",code3:"ASM",title:"American Samoa",valueText:"American Samoa"},{value:"AD",code3:"AND",title:"Andorra",valueText:"Andorra"},{value:"AO",code3:"AGO",title:"Angola",valueText:"Angola"},{value:"AI",code3:"AIA",title:"Anguilla",valueText:"Anguilla"},{value:"AQ",code3:"ATA",title:"Antarctica",valueText:"Antarctica"},{value:"AG",code3:"ATG",title:"Antigua and Barbuda",valueText:"Antigua and Barbuda"},{value:"AR",code3:"ARG",title:"Argentina",valueText:"Argentina"},{value:"AM",code3:"ARM",title:"Armenia",valueText:"Armenia"},{value:"AW",code3:"ABW",title:"Aruba",valueText:"Aruba"},{value:"AU",code3:"AUS",title:"Australia",valueText:"Australia"},{value:"AT",code3:"AUT",title:"Austria",valueText:"Austria"},{value:"AZ",code3:"AZE",title:"Azerbaijan",valueText:"Azerbaijan"},{value:"BS",code3:"BHS",title:"Bahamas (the)",valueText:"Bahamas (the)"},{value:"BH",code3:"BHR",title:"Bahrain",valueText:"Bahrain"},{value:"BD",code3:"BGD",title:"Bangladesh",valueText:"Bangladesh"},{value:"BB",code3:"BRB",title:"Barbados",valueText:"Barbados"},{value:"BY",code3:"BLR",title:"Belarus",valueText:"Belarus"},{value:"BE",code3:"BEL",title:"Belgium",valueText:"Belgium"},{value:"BZ",code3:"BLZ",title:"Belize",valueText:"Belize"},{value:"BJ",code3:"BEN",title:"Benin",valueText:"Benin"},{value:"BM",code3:"BMU",title:"Bermuda",valueText:"Bermuda"},{value:"BT",code3:"BTN",title:"Bhutan",valueText:"Bhutan"},{value:"BO",code3:"BOL",title:"Bolivia (Plurinational State of)",valueText:"Bolivia (Plurinational State of)"},{value:"BQ",code3:"BES",title:"Bonaire, Sint Eustatius and Saba",valueText:"Bonaire, Sint Eustatius and Saba"},{value:"BA",code3:"BIH",title:"Bosnia and Herzegovina",valueText:"Bosnia and Herzegovina"},{value:"BW",code3:"BWA",title:"Botswana",valueText:"Botswana"},{value:"BV",code3:"BVT",title:"Bouvet Island",valueText:"Bouvet Island"},{value:"BR",code3:"BRA",title:"Brazil",valueText:"Brazil"},{value:"IO",code3:"IOT",title:"British Indian Ocean Territory (the)",valueText:"British Indian Ocean Territory (the)"},{value:"BN",code3:"BRN",title:"Brunei Darussalam",valueText:"Brunei Darussalam"},{value:"BG",code3:"BGR",title:"Bulgaria",valueText:"Bulgaria"},{value:"BF",code3:"BFA",title:"Burkina Faso",valueText:"Burkina Faso"},{value:"BI",code3:"BDI",title:"Burundi",valueText:"Burundi"},{value:"CV",code3:"CPV",title:"Cabo Verde",valueText:"Cabo Verde"},{value:"KH",code3:"KHM",title:"Cambodia",valueText:"Cambodia"},{value:"CM",code3:"CMR",title:"Cameroon",valueText:"Cameroon"},{value:"CA",code3:"CAN",title:"Canada",valueText:"Canada"},{value:"KY",code3:"CYM",title:"Cayman Islands (the)",valueText:"Cayman Islands (the)"},{value:"CF",code3:"CAF",title:"Central African Republic (the)",valueText:"Central African Republic (the)"},{value:"TD",code3:"TCD",title:"Chad",valueText:"Chad"},{value:"CL",code3:"CHL",title:"Chile",valueText:"Chile"},{value:"CN",code3:"CHN",title:"China",valueText:"China"},{value:"CX",code3:"CXR",title:"Christmas Island",valueText:"Christmas Island"},{value:"CC",code3:"CCK",title:"Cocos (Keeling) Islands (the)",valueText:"Cocos (Keeling) Islands (the)"},{value:"CO",code3:"COL",title:"Colombia",valueText:"Colombia"},{value:"KM",code3:"COM",title:"Comoros (the)",valueText:"Comoros (the)"},{value:"CD",code3:"COD",title:"Congo (the Democratic Republic of the)",valueText:"Congo (the Democratic Republic of the)"},{value:"CG",code3:"COG",title:"Congo (the)",valueText:"Congo (the)"},{value:"CK",code3:"COK",title:"Cook Islands (the)",valueText:"Cook Islands (the)"},{value:"CR",code3:"CRI",title:"Costa Rica",valueText:"Costa Rica"},{value:"HR",code3:"HRV",title:"Croatia",valueText:"Croatia"},{value:"CU",code3:"CUB",title:"Cuba",valueText:"Cuba"},{value:"CW",code3:"CUW",title:"Cura\xe7ao",valueText:"Cura\xe7ao"},{value:"CY",code3:"CYP",title:"Cyprus",valueText:"Cyprus"},{value:"CZ",code3:"CZE",title:"Czechia",valueText:"Czechia"},{value:"CI",code3:"CIV",title:"C\xf4te d'Ivoire",valueText:"C\xf4te d'Ivoire"},{value:"DK",code3:"DNK",title:"Denmark",valueText:"Denmark"},{value:"DJ",code3:"DJI",title:"Djibouti",valueText:"Djibouti"},{value:"DM",code3:"DMA",title:"Dominica",valueText:"Dominica"},{value:"DO",code3:"DOM",title:"Dominican Republic (the)",valueText:"Dominican Republic (the)"},{value:"EC",code3:"ECU",title:"Ecuador",valueText:"Ecuador"},{value:"EG",code3:"EGY",title:"Egypt",valueText:"Egypt"},{value:"SV",code3:"SLV",title:"El Salvador",valueText:"El Salvador"},{value:"GQ",code3:"GNQ",title:"Equatorial Guinea",valueText:"Equatorial Guinea"},{value:"ER",code3:"ERI",title:"Eritrea",valueText:"Eritrea"},{value:"EE",code3:"EST",title:"Estonia",valueText:"Estonia"},{value:"SZ",code3:"SWZ",title:"Eswatini",valueText:"Eswatini"},{value:"ET",code3:"ETH",title:"Ethiopia",valueText:"Ethiopia"},{value:"FK",code3:"FLK",title:"Falkland Islands (the) [Malvinas]",valueText:"Falkland Islands (the) [Malvinas]"},{value:"FO",code3:"FRO",title:"Faroe Islands (the)",valueText:"Faroe Islands (the)"},{value:"FJ",code3:"FJI",title:"Fiji",valueText:"Fiji"},{value:"FI",code3:"FIN",title:"Finland",valueText:"Finland"},{value:"FR",code3:"FRA",title:"France",valueText:"France"},{value:"GF",code3:"GUF",title:"French Guiana",valueText:"French Guiana"},{value:"PF",code3:"PYF",title:"French Polynesia",valueText:"French Polynesia"},{value:"TF",code3:"ATF",title:"French Southern Territories (the)",valueText:"French Southern Territories (the)"},{value:"GA",code3:"GAB",title:"Gabon",valueText:"Gabon"},{value:"GM",code3:"GMB",title:"Gambia (the)",valueText:"Gambia (the)"},{value:"GE",code3:"GEO",title:"Georgia",valueText:"Georgia"},{value:"DE",code3:"DEU",title:"Germany",valueText:"Germany"},{value:"GH",code3:"GHA",title:"Ghana",valueText:"Ghana"},{value:"GI",code3:"GIB",title:"Gibraltar",valueText:"Gibraltar"},{value:"GR",code3:"GRC",title:"Greece",valueText:"Greece"},{value:"GL",code3:"GRL",title:"Greenland",valueText:"Greenland"},{value:"GD",code3:"GRD",title:"Grenada",valueText:"Grenada"},{value:"GP",code3:"GLP",title:"Guadeloupe",valueText:"Guadeloupe"},{value:"GU",code3:"GUM",title:"Guam",valueText:"Guam"},{value:"GT",code3:"GTM",title:"Guatemala",valueText:"Guatemala"},{value:"GG",code3:"GGY",title:"Guernsey",valueText:"Guernsey"},{value:"GN",code3:"GIN",title:"Guinea",valueText:"Guinea"},{value:"GW",code3:"GNB",title:"Guinea-Bissau",valueText:"Guinea-Bissau"},{value:"GY",code3:"GUY",title:"Guyana",valueText:"Guyana"},{value:"HT",code3:"HTI",title:"Haiti",valueText:"Haiti"},{value:"HM",code3:"HMD",title:"Heard Island and McDonald Islands",valueText:"Heard Island and McDonald Islands"},{value:"VA",code3:"VAT",title:"Holy See (the)",valueText:"Holy See (the)"},{value:"HN",code3:"HND",title:"Honduras",valueText:"Honduras"},{value:"HK",code3:"HKG",title:"Hong Kong",valueText:"Hong Kong"},{value:"HU",code3:"HUN",title:"Hungary",valueText:"Hungary"},{value:"IS",code3:"ISL",title:"Iceland",valueText:"Iceland"},{value:"IN",code3:"IND",title:"India",valueText:"India"},{value:"ID",code3:"IDN",title:"Indonesia",valueText:"Indonesia"},{value:"IR",code3:"IRN",title:"Iran (Islamic Republic of)",valueText:"Iran (Islamic Republic of)"},{value:"IQ",code3:"IRQ",title:"Iraq",valueText:"Iraq"},{value:"IE",code3:"IRL",title:"Ireland",valueText:"Ireland"},{value:"IM",code3:"IMN",title:"Isle of Man",valueText:"Isle of Man"},{value:"IL",code3:"ISR",title:"Israel",valueText:"Israel"},{value:"IT",code3:"ITA",title:"Italy",valueText:"Italy"},{value:"JM",code3:"JAM",title:"Jamaica",valueText:"Jamaica"},{value:"JP",code3:"JPN",title:"Japan",valueText:"Japan"},{value:"JE",code3:"JEY",title:"Jersey",valueText:"Jersey"},{value:"JO",code3:"JOR",title:"Jordan",valueText:"Jordan"},{value:"KZ",code3:"KAZ",title:"Kazakhstan",valueText:"Kazakhstan"},{value:"KE",code3:"KEN",title:"Kenya",valueText:"Kenya"},{value:"KI",code3:"KIR",title:"Kiribati",valueText:"Kiribati"},{value:"KP",code3:"PRK",title:"Korea (the Democratic People's Republic of)",valueText:"Korea (the Democratic People's Republic of)"},{value:"KR",code3:"KOR",title:"Korea (the Republic of)",valueText:"Korea (the Republic of)"},{value:"KW",code3:"KWT",title:"Kuwait",valueText:"Kuwait"},{value:"KG",code3:"KGZ",title:"Kyrgyzstan",valueText:"Kyrgyzstan"},{value:"LA",code3:"LAO",title:"Lao People's Democratic Republic (the)",valueText:"Lao People's Democratic Republic (the)"},{value:"LV",code3:"LVA",title:"Latvia",valueText:"Latvia"},{value:"LB",code3:"LBN",title:"Lebanon",valueText:"Lebanon"},{value:"LS",code3:"LSO",title:"Lesotho",valueText:"Lesotho"},{value:"LR",code3:"LBR",title:"Liberia",valueText:"Liberia"},{value:"LY",code3:"LBY",title:"Libya",valueText:"Libya"},{value:"LI",code3:"LIE",title:"Liechtenstein",valueText:"Liechtenstein"},{value:"LT",code3:"LTU",title:"Lithuania",valueText:"Lithuania"},{value:"LU",code3:"LUX",title:"Luxembourg",valueText:"Luxembourg"},{value:"MO",code3:"MAC",title:"Macao",valueText:"Macao"},{value:"MG",code3:"MDG",title:"Madagascar",valueText:"Madagascar"},{value:"MW",code3:"MWI",title:"Malawi",valueText:"Malawi"},{value:"MY",code3:"MYS",title:"Malaysia",valueText:"Malaysia"},{value:"MV",code3:"MDV",title:"Maldives",valueText:"Maldives"},{value:"ML",code3:"MLI",title:"Mali",valueText:"Mali"},{value:"MT",code3:"MLT",title:"Malta",valueText:"Malta"},{value:"MH",code3:"MHL",title:"Marshall Islands (the)",valueText:"Marshall Islands (the)"},{value:"MQ",code3:"MTQ",title:"Martinique",valueText:"Martinique"},{value:"MR",code3:"MRT",title:"Mauritania",valueText:"Mauritania"},{value:"MU",code3:"MUS",title:"Mauritius",valueText:"Mauritius"},{value:"YT",code3:"MYT",title:"Mayotte",valueText:"Mayotte"},{value:"MX",code3:"MEX",title:"Mexico",valueText:"Mexico"},{value:"FM",code3:"FSM",title:"Micronesia (Federated States of)",valueText:"Micronesia (Federated States of)"},{value:"MD",code3:"MDA",title:"Moldova (the Republic of)",valueText:"Moldova (the Republic of)"},{value:"MC",code3:"MCO",title:"Monaco",valueText:"Monaco"},{value:"MN",code3:"MNG",title:"Mongolia",valueText:"Mongolia"},{value:"ME",code3:"MNE",title:"Montenegro",valueText:"Montenegro"},{value:"MS",code3:"MSR",title:"Montserrat",valueText:"Montserrat"},{value:"MA",code3:"MAR",title:"Morocco",valueText:"Morocco"},{value:"MZ",code3:"MOZ",title:"Mozambique",valueText:"Mozambique"},{value:"MM",code3:"MMR",title:"Myanmar",valueText:"Myanmar"},{value:"NA",code3:"NAM",title:"Namibia",valueText:"Namibia"},{value:"NR",code3:"NRU",title:"Nauru",valueText:"Nauru"},{value:"NP",code3:"NPL",title:"Nepal",valueText:"Nepal"},{value:"NL",code3:"NLD",title:"Netherlands (the)",valueText:"Netherlands (the)"},{value:"NC",code3:"NCL",title:"New Caledonia",valueText:"New Caledonia"},{value:"NZ",code3:"NZL",title:"New Zealand",valueText:"New Zealand"},{value:"NI",code3:"NIC",title:"Nicaragua",valueText:"Nicaragua"},{value:"NE",code3:"NER",title:"Niger (the)",valueText:"Niger (the)"},{value:"NG",code3:"NGA",title:"Nigeria",valueText:"Nigeria"},{value:"NU",code3:"NIU",title:"Niue",valueText:"Niue"},{value:"NF",code3:"NFK",title:"Norfolk Island",valueText:"Norfolk Island"},{value:"MP",code3:"MNP",title:"Northern Mariana Islands (the)",valueText:"Northern Mariana Islands (the)"},{value:"NO",code3:"NOR",title:"Norway",valueText:"Norway"},{value:"OM",code3:"OMN",title:"Oman",valueText:"Oman"},{value:"PK",code3:"PAK",title:"Pakistan",valueText:"Pakistan"},{value:"PW",code3:"PLW",title:"Palau",valueText:"Palau"},{value:"PS",code3:"PSE",title:"Palestine, State of",valueText:"Palestine, State of"},{value:"PA",code3:"PAN",title:"Panama",valueText:"Panama"},{value:"PG",code3:"PNG",title:"Papua New Guinea",valueText:"Papua New Guinea"},{value:"PY",code3:"PRY",title:"Paraguay",valueText:"Paraguay"},{value:"PE",code3:"PER",title:"Peru",valueText:"Peru"},{value:"PH",code3:"PHL",title:"Philippines (the)",valueText:"Philippines (the)"},{value:"PN",code3:"PCN",title:"Pitcairn",valueText:"Pitcairn"},{value:"PL",code3:"POL",title:"Poland",valueText:"Poland"},{value:"PT",code3:"PRT",title:"Portugal",valueText:"Portugal"},{value:"PR",code3:"PRI",title:"Puerto Rico",valueText:"Puerto Rico"},{value:"QA",code3:"QAT",title:"Qatar",valueText:"Qatar"},{value:"MK",code3:"MKD",title:"Republic of North Macedonia",valueText:"Republic of North Macedonia"},{value:"RO",code3:"ROU",title:"Romania",valueText:"Romania"},{value:"RU",code3:"RUS",title:"Russian Federation (the)",valueText:"Russian Federation (the)"},{value:"RW",code3:"RWA",title:"Rwanda",valueText:"Rwanda"},{value:"RE",code3:"REU",title:"R\xe9union",valueText:"R\xe9union"},{value:"BL",code3:"BLM",title:"Saint Barth\xe9lemy",valueText:"Saint Barth\xe9lemy"},{value:"SH",code3:"SHN",title:"Saint Helena, Ascension and Tristan da Cunha",valueText:"Saint Helena, Ascension and Tristan da Cunha"},{value:"KN",code3:"KNA",title:"Saint Kitts and Nevis",valueText:"Saint Kitts and Nevis"},{value:"LC",code3:"LCA",title:"Saint Lucia",valueText:"Saint Lucia"},{value:"MF",code3:"MAF",title:"Saint Martin (French part)",valueText:"Saint Martin (French part)"},{value:"PM",code3:"SPM",title:"Saint Pierre and Miquelon",valueText:"Saint Pierre and Miquelon"},{value:"VC",code3:"VCT",title:"Saint Vincent and the Grenadines",valueText:"Saint Vincent and the Grenadines"},{value:"WS",code3:"WSM",title:"Samoa",valueText:"Samoa"},{value:"SM",code3:"SMR",title:"San Marino",valueText:"San Marino"},{value:"ST",code3:"STP",title:"Sao Tome and Principe",valueText:"Sao Tome and Principe"},{value:"SA",code3:"SAU",title:"Saudi Arabia",valueText:"Saudi Arabia"},{value:"SN",code3:"SEN",title:"Senegal",valueText:"Senegal"},{value:"RS",code3:"SRB",title:"Serbia",valueText:"Serbia"},{value:"SC",code3:"SYC",title:"Seychelles",valueText:"Seychelles"},{value:"SL",code3:"SLE",title:"Sierra Leone",valueText:"Sierra Leone"},{value:"SG",code3:"SGP",title:"Singapore",valueText:"Singapore"},{value:"SX",code3:"SXM",title:"Sint Maarten (Dutch part)",valueText:"Sint Maarten (Dutch part)"},{value:"SK",code3:"SVK",title:"Slovakia",valueText:"Slovakia"},{value:"SI",code3:"SVN",title:"Slovenia",valueText:"Slovenia"},{value:"SB",code3:"SLB",title:"Solomon Islands",valueText:"Solomon Islands"},{value:"SO",code3:"SOM",title:"Somalia",valueText:"Somalia"},{value:"ZA",code3:"ZAF",title:"South Africa",valueText:"South Africa"},{value:"GS",code3:"SGS",title:"South Georgia and the South Sandwich Islands",valueText:"South Georgia and the South Sandwich Islands"},{value:"SS",code3:"SSD",title:"South Sudan",valueText:"South Sudan"},{value:"ES",code3:"ESP",title:"Spain",valueText:"Spain"},{value:"LK",code3:"LKA",title:"Sri Lanka",valueText:"Sri Lanka"},{value:"SD",code3:"SDN",title:"Sudan (the)",valueText:"Sudan (the)"},{value:"SR",code3:"SUR",title:"Surititle",valueText:"Surititle"},{value:"SJ",code3:"SJM",title:"Svalbard and Jan Mayen",valueText:"Svalbard and Jan Mayen"},{value:"SE",code3:"SWE",title:"Sweden",valueText:"Sweden"},{value:"CH",code3:"CHE",title:"Switzerland",valueText:"Switzerland"},{value:"SY",code3:"SYR",title:"Syrian Arab Republic",valueText:"Syrian Arab Republic"},{value:"TW",code3:"TWN",title:"Taiwan",valueText:"Taiwan"},{value:"TJ",code3:"TJK",title:"Tajikistan",valueText:"Tajikistan"},{value:"TZ",code3:"TZA",title:"Tanzania, United Republic of",valueText:"Tanzania, United Republic of"},{value:"TH",code3:"THA",title:"Thailand",valueText:"Thailand"},{value:"TL",code3:"TLS",title:"Timor-Leste",valueText:"Timor-Leste"},{value:"TG",code3:"TGO",title:"Togo",valueText:"Togo"},{value:"TK",code3:"TKL",title:"Tokelau",valueText:"Tokelau"},{value:"TO",code3:"TON",title:"Tonga",valueText:"Tonga"},{value:"TT",code3:"TTO",title:"Trinidad and Tobago",valueText:"Trinidad and Tobago"},{value:"TN",code3:"TUN",title:"Tunisia",valueText:"Tunisia"},{value:"TR",code3:"TUR",title:"Turkey",valueText:"Turkey"},{value:"TM",code3:"TKM",title:"Turkmenistan",valueText:"Turkmenistan"},{value:"TC",code3:"TCA",title:"Turks and Caicos Islands (the)",valueText:"Turks and Caicos Islands (the)"},{value:"TV",code3:"TUV",title:"Tuvalu",valueText:"Tuvalu"},{value:"UG",code3:"UGA",title:"Uganda",valueText:"Uganda"},{value:"UA",code3:"UKR",title:"Ukraine",valueText:"Ukraine"},{value:"AE",code3:"ARE",title:"United Arab Emirates (the)",valueText:"United Arab Emirates (the)"},{value:"GB",code3:"GBR",title:"United Kingdom of Great Britain and Northern Ireland (the)",valueText:"United Kingdom of Great Britain and Northern Ireland (the)"},{value:"UM",code3:"UMI",title:"United States Minor Outlying Islands (the)",valueText:"United States Minor Outlying Islands (the)"},{value:"US",code3:"USA",title:"United States of America (the)",valueText:"United States of America (the)"},{value:"UY",code3:"URY",title:"Uruguay",valueText:"Uruguay"},{value:"UZ",code3:"UZB",title:"Uzbekistan",valueText:"Uzbekistan"},{value:"VU",code3:"VUT",title:"Vanuatu",valueText:"Vanuatu"},{value:"VE",code3:"VEN",title:"Venezuela (Bolivarian Republic of)",valueText:"Venezuela (Bolivarian Republic of)"},{value:"VN",code3:"VNM",title:"Viet Nam",valueText:"Viet Nam"},{value:"VG",code3:"VGB",title:"Virgin Islands (British)",valueText:"Virgin Islands (British)"},{value:"VI",code3:"VIR",title:"Virgin Islands (U.S.)",valueText:"Virgin Islands (U.S.)"},{value:"WF",code3:"WLF",title:"Wallis and Futuna",valueText:"Wallis and Futuna"},{value:"EH",code3:"ESH",title:"Western Sahara",valueText:"Western Sahara"},{value:"YE",code3:"YEM",title:"Yemen",valueText:"Yemen"},{value:"ZM",code3:"ZMB",title:"Zambia",valueText:"Zambia"},{value:"ZW",code3:"ZWE",title:"Zimbabwe",valueText:"Zimbabwe"},{value:"AX",code3:"ALA",title:"\xc5land Islands",valueText:"\xc5land Islands"}];var c=L(1066);const w={organization:{id:{title:"ID",type:"string",description:"Unique identifier for the organization",visibleFrom:["detail"],immutable:!0},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifier",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,shortIdType:"organization",error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>'"},name:{title:"Name",type:"string",description:"Name of the organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},email:{title:"Email",type:"string",description:"Contact email of the organization",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},phone:{title:"Phone",type:"string",description:"Contact phone number of the organization",visibleFrom:["detail","edit"]},country:{title:"Country",type:"string",description:"Country that the organization belongs to",visibleFrom:["detail","list","edit","edit-new"],options:n,required:!0},address:{title:"Address",type:"string",description:"Physical address of the organization",visibleFrom:["detail","edit","edit-new"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["edit-new"],required:!0,error:"Please enter a valid URL"},createdAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]},status:{title:"Status",type:"string",description:"Approval status of the organization",visibleFrom:["detail","list","edit"],options:[{title:"Pending",value:"pending"},{title:"Approved",value:"approved"},{title:"Disapproved",value:"disapproved"},{title:"Suspended",value:"suspended"}],required:!0},currentBalance:{title:"Current Balance",type:"number",description:"Current account balance of the organization",visibleFrom:["detail","edit"],defaultValue:0}},service:{id:{title:"ID",type:"number",description:"Unique identifier for the service",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization owning the service",visibleFrom:["detail","edit","edit-new"],options:[],required:!0},name:{title:"Name",type:"string",description:"Name of the service",visibleFrom:["detail","list","edit","edit-new"],required:!0},description:{title:"Description",type:"string",description:"Brief details about the service",visibleFrom:["detail","edit","edit-new"]},orgContributionWeight:{title:"Organization Contribution Weight",type:"number",description:"Weight percentage of the organization's contribution",visibleFrom:["detail","edit"]},unitPrice:{title:"Unit Price",type:"number",description:"Price per unit of the service",visibleFrom:["detail","list","edit","edit-new"]},unit:{title:"Unit",type:"string",description:"Unit of the service cost",visibleFrom:["detail","edit","edit-new"]},isActive:{title:"Active Status",type:"boolean",description:"Whether the service is currently active",visibleFrom:["detail","list","edit"]},createdAt:{title:"Created At",type:"string",description:"Time of service creation",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the service",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},plan:{id:{title:"ID",type:"number",description:"Unique identifier for the plan",visibleFrom:["detail"],required:!0},name:{title:"Name",type:"string",description:"Name of the plan",visibleFrom:["detail","list","edit","edit-new"],required:!0},description:{title:"Description",type:"string",description:"Brief details about the plan",visibleFrom:["detail","edit","edit-new"],required:!1},monthlyCost:{title:"Monthly Cost",type:"number",description:"Monthly subscription cost for the plan",visibleFrom:["detail","edit","list","edit-new"],required:!0},annualCost:{title:"Annual Cost",type:"number",description:"Annual subscription cost for the plan",visibleFrom:["detail","edit","edit-new"],required:!1},usageLimit:{title:"Usage Limit",type:"number",description:"Service usage limit for the plan",visibleFrom:["detail","list","edit","edit-new"],required:!1},currency:{title:"Currency",type:"string",description:"Currency used for the plan costs (e.g., USD, EUR)",visibleFrom:["detail","edit","edit-new"],required:!0},maxUsers:{title:"Maximum Users",type:"number",description:"Maximum number of users allowed in this plan",visibleFrom:["detail","edit","edit-new"],required:!0},maxStorageGb:{title:"Maximum Storage (GB)",type:"number",description:"Maximum storage in GB allowed for the plan",visibleFrom:["detail","edit","edit-new"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Whether the plan is currently active",visibleFrom:["detail","list","edit"],required:!1},createdAt:{title:"Created At",type:"string",description:"Time of plan creation",filter:!1,valuePrepareFunction:g=>new Date(g).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the plan",filter:!1,valuePrepareFunction:g=>new Date(g).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgpayment:{id:{title:"ID",type:"number",description:"Unique identifier for the payment record",visibleFrom:["detail","edit","edit-new"],required:!0},organizationId:{title:"Organization ID",type:"string",description:"UUID of the organization linked to this payment",visibleFrom:["detail","edit"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"number",description:"Optional ID of the associated subscription plan",visibleFrom:["detail","edit"],required:!1},transactionId:{title:"Transaction ID",type:"string",description:"Unique identifier for the payment transaction",visibleFrom:["detail","list","edit","edit-new"],required:!0},amount:{title:"Amount",type:"number",description:"Payment amount in the specified currency",visibleFrom:["detail","list","edit"],required:!0},status:{title:"Payment Status",type:"string",description:"Current status of the payment (e.g., completed, pending)",visibleFrom:["detail","list","edit"],options:[{title:"Completed",value:"completed"},{title:"Pending",value:"pending"},{title:"Failed",value:"failed"},{title:"Refunded",value:"refunded"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the payment record was created",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the payment record",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsubscription:{id:{title:"ID",type:"number",description:"Unique identifier for the organization subscription",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization associated with the subscription",visibleFrom:["edit","edit-new"],required:!0},organizationName:{title:"Organization Name",type:"organizationName",description:"Name of the organization associated with the subscription",visibleFrom:["detail","list"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"subscriptionPlanId",description:"ID of the subscription plan linked to the organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},startDate:{title:"Start Date",type:"date",description:"Date when the subscription started",visibleFrom:["detail","list","edit","edit-new"],required:!0},endDate:{title:"End Date",type:"date",description:"Date when the subscription ends",visibleFrom:["detail","list","edit","edit-new"],required:!0},status:{title:"Subscription Status",type:"string",description:"Current status of the subscription",visibleFrom:["detail","list","edit"],options:[{title:"Active",value:"active"},{title:"Canceled",value:"canceled"},{title:"Expired",value:"expired"},{title:"Pending",value:"pending"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time of subscription creation",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the subscription",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},user:{id:{title:"ID",type:"string",description:"Unique identifier for the user (UUID)",visibleFrom:["detail"],required:!1},organizationId:{title:"Organization ID",type:"organizationId",description:"UUID of the organization the user belongs to",visibleFrom:["detail"],required:!0},mrn:{title:"MRN",type:"string",description:"Unique Maritime Resource Name of the user",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid MRN following the format 'urn:mrn:mcp:<entity_type>:<org_id>:<user_id>'"},email:{title:"Email",type:"string",description:"Contact email address of the user",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},username:{title:"Username",type:"string",description:"Unique username of the user",visibleFrom:["detail","list","edit","edit-new"],required:!0},passwordHash:{title:"Password Hash",type:"string",description:"Hashed password of the user",visibleFrom:[]},role:{title:"Role",type:"string",description:"Role assigned to the user",visibleFrom:["detail","edit","edit-new"],options:[{title:"User",value:"User"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the user was created",filter:!1,valuePrepareFunction:g=>new Date(g).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update made to the user",filter:!1,valuePrepareFunction:g=>new Date(g).toLocaleString(),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usersvcsubscription:{id:{title:"ID",type:"number",description:"Unique identifier for the service subscription",visibleFrom:["detail"],required:!0},userMrn:{title:"User MRN",type:"userMrn",description:"MRN of the user subscribing to the service",visibleFrom:["edit","edit-new"],required:!0},userName:{title:"User Name",type:"string",description:"Name of the user subscribing to the service",visibleFrom:["detail","list"]},serviceSubscriptionId:{title:"Service Subscription ID",type:"serviceSubscriptionId",description:"ID of the service being subscribed to",visibleFrom:["detail","edit","edit-new"],required:!0},serviceName:{title:"Service Name",type:"string",description:"Name of the service being subscribed to",visibleFrom:["list"]},startDate:{title:"Start Date",type:"date",description:"Date when the subscription started",visibleFrom:["detail","list","edit","edit-new"],required:!0},endDate:{title:"End Date",type:"date",description:"Date when the subscription ended (if applicable)",visibleFrom:["detail","list","edit","edit-new"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Indicates whether the subscription is active",visibleFrom:["detail","list","edit","edit-new"]},pricingModel:{title:"Pricing Model",type:"string",description:"Model used for pricing (usage-based or flat-rate)",visibleFrom:[],options:[{title:"Usage-Based",value:"usage-based"},{title:"Flat-Rate",value:"flat-rate"}],required:!0},createdAt:{title:"Created At",type:"string",description:"Timestamp when the subscription was created",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Timestamp of the last update to the subscription",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsvcusage:{id:{title:"ID",type:"number",description:"Unique identifier for the organization service usage",visibleFrom:["detail","edit"],required:!0},userName:{title:"User Name",type:"string",description:"User associated with the usage record",visibleFrom:["detail","list"]},serviceId:{title:"Service ID",type:"number",description:"Unique identifier for the service",visibleFrom:["detail","edit"],required:!0},serviceName:{title:"Service Name",type:"string",description:"Service name",visibleFrom:["detail","list","edit"],required:!0},usageMetricId:{title:"Usage Metric ID",type:"number",description:"Identifier for the usage metric",visibleFrom:["detail","edit"],required:!0},usageAmount:{title:"Usage Amount",type:"number",description:"Amount of the service used",visibleFrom:["detail","list","edit"],required:!0},usageDate:{title:"Usage Date",type:"string",description:"Date when the usage was recorded",valuePrepareFunction:g=>(0,c.YF)(g),visibleFrom:["detail","list"],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the usage record was created",valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time when the usage record was last updated",valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},invoice:{id:{title:"ID",type:"number",description:"Unique identifier for the invoice",visibleFrom:["detail","list"],required:!0},organizationSubscriptionId:{title:"Organization Subscription ID",type:"organizationSubscriptionId",description:"ID of the associated organization subscription",visibleFrom:["detail","edit","edit-new"],required:!0},invoiceDate:{title:"Invoice Date",type:"date",description:"Date when the invoice was generated",valuePrepareFunction:g=>(0,c.YF)(g),visibleFrom:["detail","list","edit","edit-new"]},dueDate:{title:"Due Date",type:"date",description:"Date by which the invoice needs to be paid",valuePrepareFunction:g=>(0,c.YF)(g),visibleFrom:["detail","list","edit","edit-new"],required:!0},amountDue:{title:"Amount Due",type:"number",description:"Total amount due on the invoice",visibleFrom:["detail","list","edit","edit-new"],required:!0},amountPaid:{title:"Amount Paid",type:"number",description:"Amount that has been paid for the invoice",visibleFrom:["detail","list","edit"]},status:{title:"Status",type:"string",description:"Current status of the invoice",options:[{title:"Unpaid",value:"unpaid"},{title:"Paid",value:"paid"},{title:"Overdue",value:"overdue"},{title:"Canceled",value:"canceled"}],visibleFrom:["detail","list","edit"],required:!0},createdAt:{title:"Created At",type:"string",description:"Time when the invoice was created",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time when the invoice was last updated",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usercert:{id:{title:"ID",type:"number"},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,shortIdType:"user",error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>:<unique_id>'"},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list","edit","edit-new"],immutable:!0,required:!0,error:"Please enter a valid email address"}},orgcandidate:{id:{title:"ID",type:"number"},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list","edit","edit-new"],shortIdType:"organization",immutable:!0,required:!0,error:"Please enter a valid MCP MRN, respecting the format 'urn:mrn:mcp:<entity_type>:<id_provider_id>:<org_id>'"},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list","edit","edit-new"],required:!0},phone:{title:"Phone",type:"string",description:"Contact phone number of the organization",visibleFrom:["detail","edit","edit-new"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid email address"},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list","edit","edit-new"],required:!0,error:"Please enter a valid URL"},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail","edit","edit-new"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list","edit","edit-new"],options:n,required:!0},adminUserEmail:{title:"Admin User e-mail",type:"string",description:"Contact organization admin user e-mail",visibleFrom:["detail","edit","edit-new"],required:!0,error:"Please enter a valid email address"},adminUserName:{title:"Admin User Name",type:"string",description:"Name of organization admin user",visibleFrom:["detail","edit","edit-new"],required:!0},subscriptionPlanId:{title:"Subscription Plan ID",type:"number",description:"Name of organization",visibleFrom:["detail","list","edit"],required:!0},status:{title:"Status",type:"string",description:"Organization status",visibleFrom:["detail","list","edit"]},createdAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},usersvcusage:{id:{title:"ID",type:"number",description:"Unique identifier for the user service usage",visibleFrom:["detail"]},user:{title:"User",type:"User",description:"User associated with the usage record",visibleFrom:[]},userName:{title:"User Name",type:"string",description:"User associated with the usage record",visibleFrom:["detail","list"]},service:{title:"Service",type:"Service",description:"Service being used",visibleFrom:[]},serviceName:{title:"Service Name",type:"string",description:"Service being used",visibleFrom:["detail","list"]},serviceId:{title:"Service ID",type:"serviceId",description:"Service being used",visibleFrom:["edit","edit-new"],required:!0},usageMetric:{title:"Usage Metric",type:"string",description:"Optional metric for tracking service usage",visibleFrom:[],required:!1},usageAmount:{title:"Usage Amount",type:"number",description:"Amount of usage for the service",visibleFrom:["detail","list","edit","edit-new"],required:!0},usageDate:{title:"Usage Date",type:"string",description:"Date of the usage event in ISO format",visibleFrom:["detail","list"]},createdAt:{title:"Created At",type:"string",description:"Time of record creation",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the record",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},orgsvcsub:{id:{title:"ID",type:"number",description:"Unique identifier for the service subscription",visibleFrom:["detail"]},serviceId:{title:"Service",type:"serviceId",description:"Service associated with the subscription",visibleFrom:["edit","edit-new"],required:!0},serviceName:{title:"Service Name",type:"string",description:"Name of the service associated with the subscription",visibleFrom:["detail","list"]},organizationName:{title:"Organization Name",type:"string",description:"Organization associated with the subscription",visibleFrom:["detail"],required:!0},startDate:{title:"Start Date",type:"date",description:"Start date of the subscription in ISO format",visibleFrom:["detail","edit","edit-new"],required:!0},endDate:{title:"End Date",type:"date",description:"Optional end date of the subscription in ISO format",visibleFrom:["detail","edit","edit-new"],required:!1},isActive:{title:"Active Status",type:"boolean",description:"Whether the subscription is currently active",visibleFrom:["detail","list","edit","edit-new"]},pricingModel:{title:"Pricing Model",type:"string",description:"Pricing model for the subscription (e.g., usage-based, flat-rate)",visibleFrom:[],required:!0},userServiceSubscriptions:{title:"User Service Subscriptions",type:"Array<UserServiceSubscription>",description:"List of user service subscriptions associated with this subscription",visibleFrom:[]},createdAt:{title:"Created At",type:"string",description:"Time of subscription creation",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated At",type:"string",description:"Time of the last update to the subscription",filter:!1,valuePrepareFunction:g=>(0,c.YF)(g),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},instance:{id:{title:"ID",type:"number"},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list","edit","edit-new"],required:!0},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["detail","list","edit","edit-new"],required:!0},serviceType:{title:"Service type",type:"stringArray",options:[{title:"MS 1 - VTS Information service (INS)",value:"VTSInformationService"},{title:"MS 2 - VTS Navigational assistance service (NAS)",value:"VTSNavigationalAssistanceService"},{title:"MS 3 - Traffic organization service (TOS)",value:"TrafficOrganizationService"},{title:"MS 4 - Port support service (PSS)",value:"PortSupportService"},{title:"MS 5 - Maritime safety information (MSI) service",value:"MaritimeSafetyInformationService"},{title:"MS 6 - Pilotage service",value:"PilotageService"},{title:"MS 7 - Tug service",value:"TugService"},{title:"MS 8 - Vessel shore reporting",value:"VesselShoreReporting"},{title:"MS 9 - Telemedical assistance service (TMAS)",value:"TelemedicalAssistanceService"},{title:"MS 10 - Maritime assistance service (MAS)",value:"MaritimeAssistanceService"},{title:"MS 11 - Nautical chart service",value:"NauticalChartService"},{title:"MS 12 - Nautical publications service",value:"NauticalPublicationsService"},{title:"MS 13 - Ice navigation service",value:"IceNavigationService"},{title:"MS 14 - Meteorological information service",value:"MeteorologicalInformationService"},{title:"MS 15 - Real-time hydrographic and environmental information services",value:"RealTimeHydrographicAndEnvironmentalInformationServices"},{title:"MS 16 - Search and rescue (SAR) service",value:"SearchAndRescueService"},{title:"Other",value:"other:etc"}],description:"The service type shall reflect the associated operational service type provided according to defined types",visibleFrom:["detail","list","edit","edit-new"]},dataProductType:{title:"Data product type",type:"stringArray",options:[{title:"S-57 Electronic Navigational Chart (ENC)",value:"S57"},{title:"S-101 Electronic Navigational Chart (ENC)",value:"S101"},{title:"S-102 Bathymetric Surface",value:"S102"},{title:"S-104 Water Level Information for Surface Navigation",value:"S104"},{title:"S-111 Surface Currents",value:"S111"},{title:"S-122 Marine Protected Areas (MPAs)",value:"S122"},{title:"S-123 Marine Radio Services",value:"S123"},{title:"S-124 Navigational Warnings",value:"S124"},{title:"S-125 Marine Navigational Services",value:"S125"},{title:"S-126 Marine Physical Environment",value:"S126"},{title:"S-127 Marine Traffic Management",value:"S127"},{title:"S-128 Catalogue of Nautical Products",value:"S128"},{title:"S-129 Under Keel Clearance Management (UKCM)",value:"S129"},{title:"S-131 Marine Harbour Infrastructure",value:"S131"},{title:"S-210 Inter-VTS Exchange Format",value:"S210"},{title:"S-211 Port Call Message Format",value:"S211"},{title:"S-212 VTS Digital Information Service",value:"S212"},{title:"S-401 Inland ENC",value:"S401"},{title:"S-402 Bathymetric Contour Overlay for Inland ENC",value:"S402"},{title:"S-411 Sea Ice Information",value:"S411"},{title:"S-412 Weather Overlay",value:"S412"},{title:"S-413 Marine Weather Conditions",value:"S413"},{title:"S-414 Marine Weather Observations",value:"S414"},{title:"S-421 Route Plan",value:"S421"},{title:"Route Plan",value:"RTZ"},{title:"Electronic Port Clearance",value:"EPC"},{title:"Other data types not covered in this table",value:"OTHER"}],description:"Data product type defined in IEC 63173-2 SECOM standard",visibleFrom:["detail","list","edit","edit-new"]},status:{title:"Status",type:"string",options:[{title:"Provisional",value:"PROVISIONAL"},{title:"Released",value:"RELEASED"},{title:"Deprecated",value:"DEPRECATED"},{title:"Deleted",value:"DELETED"}],visibleFrom:["detail","list","edit","edit-new"],required:!0},endpointUri:{title:"Endpoint URI",type:"string",visibleFrom:["detail","edit","edit-new"],required:!0},endpointType:{title:"Endpoint type",type:"string",visibleFrom:[]},organizationId:{title:"Organization ID",type:"string",visibleFrom:["detail","edit","edit-new"],required:!0},keywords:{title:"Keywords",type:"stringArray",placeholder:"Please enter keyword",visibleFrom:["detail","list","edit","edit-new"]},instanceId:{title:"Instance ID",type:"string",description:"MCP MRN as unique identifer",placeholder:"urn:mrn:",visibleFrom:["detail","edit","edit-new"]},implementsServiceDesign:{title:"Technical design ID",type:"string",description:"MCP MRN as unique identifer",placeholder:"urn:mrn:",visibleFrom:["detail","edit","edit-new"]},implementsServiceDesignVersion:{title:"Technical design version",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","edit","edit-new"]},comment:{title:"Comment",type:"string",visibleFrom:["detail","edit","edit-new"]},geometryContentType:{title:"Geometry content type",type:"string",visibleFrom:[]},geometry:{title:"Geometry",type:"object",visibleFrom:[]},unlocode:{title:"Unlocode",type:"stringArray",placeholder:"Please enter UN/LOCODE",visibleFrom:[]},mmsi:{title:"MMSI",type:"string",visibleFrom:[]},imo:{title:"IMO number",type:"string",visibleFrom:[]},instanceAsXml:{title:"Instance as XML",type:"file",notShowOnEdit:!0,visibleFrom:["detail","edit","edit-new"]},instanceAsDocId:{title:"Instance as DocId",type:"number"},instanceAsDoc:{title:"Instance as document",type:"file",visibleFrom:["detail","edit","edit-new"]},ledgerRequestId:{title:"Ledger Request ID",type:"number"},ledgerRequestStatus:{title:"Ledger Request status",type:"string",options:[{title:"Inactive",value:"INACTIVE"},{title:"Created",value:"CREATED"},{title:"Vetting",value:"VETTING"},{title:"Vetted",value:"VETTED"},{title:"Requesting",value:"REQUESTING"},{title:"Succeeded",value:"SUCCEEDED"},{title:"Failed",value:"FAILED"},{title:"Rejected",value:"REJECTED"}],visibleFrom:[]},docIds:{title:"Related documents",type:"fileArray",filter:!1,visibleFrom:[]},publishedAt:{title:"Created at",type:"string",description:"Time of creation",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:[]},lastUpdatedAt:{title:"Updated at",type:"string",description:"Time of last update",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]}},newOrganization:{orgMrn:{title:"Maritime Resource Name (MRN) for organization",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","edit","edit-new"],required:!0,shortIdType:"organization"},orgName:{title:"Organization name",type:"string",description:"Name of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgEmail:{title:"Organization contact e-mail",type:"string",description:"Contact e-mail",placeholder:"non-personal email, e.g., info@example.org",visibleFrom:["detail","edit","edit-new"],required:!0},orgUrl:{title:"URL of organization",type:"string",description:"URL of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgAddress:{title:"Address of organization",type:"string",description:"Address of organization",visibleFrom:["detail","edit","edit-new"],required:!0},orgCountry:{title:"Country of organization",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","edit","edit-new"],options:n,required:!0}},ledgerInstance:{name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["list"]},mrn:{title:"MRN",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"]},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["list"]},keywords:{title:"Keywords",type:"string",visibleFrom:["list"]},coverageArea:{title:"Coverage ",type:"string"},status:{title:"Status",type:"string",options:[{title:"Provisional",value:"PROVISIONAL"},{title:"Released",value:"RELEASED"},{title:"Deprecated",value:"DEPRECATED"},{title:"Deleted",value:"DELETED"}],visibleFrom:["list"]},implementsDesignMRN:{title:"Technical design ID",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"],shortIdType:"design",immutable:!0},implementsDesignVersion:{title:"Technical design version",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["list"]},msrName:{title:"MSR Name of register",type:"string",visibleFrom:["list"]},msrUrl:{title:"MSR URL of register",type:"string",visibleFrom:["list"]}}}},9677:(nt,U,L)=>{"use strict";L.d(U,{C:()=>n});const n=c=>(Object.keys(c).forEach(w=>{"organization"===w&&(c.organizationId=c[w].id,c.organizationName=c[w].name),"subscriptionPlan"===w&&(c.subscriptionPlanId=c[w].id),"organizationSubscription"===w&&(c.organizationSubscriptionId=c[w].id),"serviceSubscription"===w&&(c.serviceSubscriptionId=c[w].id,c.serviceName=c[w].service.name),"service"===w&&(c.serviceId=c[w].id,c.serviceName=c[w].name),"user"===w&&(c.userName=c[w].username,c.userMrn=c[w].mrn),"startDate"===w&&Array.isArray(c[w])&&(c.startDate=c[w].reverse().join("/")),"endDate"===w&&Array.isArray(c[w])&&(c.endDate=c[w].reverse().join("/"))}),c)},2170:(nt,U,L)=>{"use strict";L.d(U,{c:()=>n,e:()=>c});const n=["en-GB","ko-KR"],c=[{code:"en-GB",name:"English"},{code:"ko-KR",name:"\ud55c\uad6d\uc5b4"}]},5166:(nt,U,L)=>{"use strict";L.d(U,{N3:()=>c,SP:()=>n,X:()=>A,xV:()=>k});var n=function(o){return o.None="none",o.Subscription="subscription",o.Organization="organization",o.Service="service",o.User="user",o.OrgSub="orgsub",o.Invoice="invoice",o.Plan="plan",o.Payment="payment",o.OrgPayment="orgpayment",o.OrgSubscription="orgsubscription",o.Usage="usage",o.Role="role",o.UserSvcSubscription="usersvcsubscription",o.DashboardElement="dashboardelement",o.OrgCandidate="orgcandidate",o.OrgSvcUsage="orgsvcusage",o.Certificate="certificate",o.UserSvcUsage="usersvcusage",o.UserCert="usercert",o.OrgSvcSub="orgsvcsub",o.OrgCostLimit="orgcostlimit",o.Device="device",o.MMS="mms",o.Vessel="vessel",o.Instance="instance",o}(n||{});const c=["start","end","revokedAt","createdAt","updatedAt"];var A=function(o){return o.Approved="approved",o.Disapproved="disapproved",o.Pending="pending",o.Suspended="suspended",o}(A||{}),k=function(o){return o.Active="active",o.Canceled="canceled",o.Expired="expired",o.Pending="pending",o}(k||{})},3830:(nt,U,L)=>{"use strict";L.d(U,{B:()=>c});var n=L(5166);const c=(w,g)=>{const N=w.split(":");return g===n.SP.Organization?N.slice(0,3).join(":")+":org:"+N.slice(4,5).join(":")+":":N.slice(0,3).join(":")+":"+g+":"+N.slice(4,6).join(":")+":"}},58:(nt,U,L)=>{"use strict";L.d(U,{G:()=>g});var n=L(2047),c=L(9380),w=L(5950);let g=(()=>{class N{static#e=this.\u0275fac=function(A){return new(A||N)};static#t=this.\u0275mod=w.$C({type:N});static#s=this.\u0275inj=w.G2t({imports:[n.MD,n.MD,c.h]})}return N})()},1066:(nt,U,L)=>{"use strict";L.d(U,{Qj:()=>w,YF:()=>c,t:()=>n});const n=g=>new Date(g).toLocaleString(),c=g=>new Date(1e3*g).toLocaleString(),w=g=>{const N=new Date(g);return`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`}},3987:(nt,U,L)=>{"use strict";L.d(U,{Xo:()=>N,lk:()=>g,rR:()=>w,xs:()=>c});var n=L(2170);const c=u=>{u.addLangs(n.c)},w=u=>{const V=localStorage.getItem("locale"),A=V&&n.c.includes(V)?localStorage.getItem("locale"):"en-GB";if(null!==A)return u.setDefaultLang(A),u.use(A),A;throw new Error("Locale not found")},g=(u,V)=>{u.use(V),u.setDefaultLang(V),localStorage.setItem("locale",V)},N=u=>n.e.find(V=>V.code===u)?.name||"English"},8168:(nt,U,L)=>{"use strict";L.d(U,{K:()=>c,s:()=>n});const n="ORGADMIN",c="user_create"},9850:(nt,U,L)=>{"use strict";L.d(U,{h:()=>k});var n=L(2047),c=L(58),w=L(6908),g=L(888),N=L(3103),u=L(2537),V=L(3426),A=L(5950);let k=(()=>{class _{static#e=this.\u0275fac=function(E){return new(E||_)};static#t=this.\u0275mod=A.$C({type:_});static#s=this.\u0275inj=A.G2t({imports:[n.MD,c.G,w.PuD,g.j,N.Y,u.B,V.d]})}return _})()},888:(nt,U,L)=>{"use strict";L.d(U,{j:()=>x});var n=L(5950),c=L(7882),w=L(6908),g=L(1748);const N=C=>Object.fromEntries(Object.entries(C).filter(([W,F])=>void 0!==F&&F.toString().length>0));var A=L(5166),_=L(58);var v=L(6482),S=L(5189),I=L(9380),H=L(2047);function K(C,W){1&C&&(n.j41(0,"div",3)(1,"span",4),n.EFF(2,"Loading..."),n.k0s()())}function ie(C,W){if(1&C&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(),n.JRh(F.value.error)}}function Z(C,W){1&C&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function me(C,W){if(1&C){const F=n.RV6();n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"input",11),n.bIt("ngModelChange",function(re){n.eBV(F);const z=n.XpG(3);return n.Njj(z.onMrnChange(re))})("keydown",function(re){n.eBV(F);const z=n.XpG(3);return n.Njj(z.onMrnKeyDown(re))}),n.k0s(),n.j41(4,"clr-control-helper"),n.EFF(5),n.k0s(),n.DNE(6,ie,2,1,"clr-control-error")(7,Z,2,0,"clr-control-error"),n.k0s()}if(2&C){const F=n.XpG().$implicit,T=n.XpG(2);n.R7$(2),n.JRh(F.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",F.value.type)("formControlName",F.key)("required",!0===F.value.required)("placeholder",T.mrnPrefix),n.R7$(2),n.JRh(F.value.description),n.R7$(),n.vxM(F.value.error?6:7)}}function ne(C,W){if(1&C&&(n.j41(0,"span",13),n.EFF(1),n.k0s()),2&C){const F=W.$implicit;n.R7$(),n.JRh(F)}}function _e(C,W){if(1&C&&n.Z7z(0,ne,2,1,"span",13,n.fX1),2&C){const F=n.XpG(2).$implicit,T=n.XpG(2);n.Dyx(T.item[F.key])}}function Ve(C,W){1&C&&(n.j41(0,"button",12),n.EFF(1,"No value assigned"),n.k0s())}function O(C,W){if(1&C&&(n.j41(0,"option",16),n.EFF(1),n.k0s()),2&C){const F=W.$implicit;n.Y8G("value",F.value),n.R7$(),n.JRh(F.title)}}function J(C,W){if(1&C&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&C){const F=n.XpG(3).$implicit;n.R7$(),n.JRh(F.value.error)}}function m(C,W){1&C&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function M(C,W){if(1&C&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",14),n.DNE(4,O,2,2,"option",15),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,J,2,1,"clr-control-error")(8,m,2,0,"clr-control-error"),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(2),n.JRh(F.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",F.key)("required",!0===F.value.required),n.R7$(),n.Y8G("ngForOf",F.value.options),n.R7$(2),n.JRh(F.value.description),n.R7$(),n.vxM(F.value.error?7:8)}}function ue(C,W){if(1&C&&(n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",17),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(2),n.JRh(F.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",F.value.type)("formControlName",F.key)("required",!0===F.value.required)}}function R(C,W){if(1&C&&n.DNE(0,_e,2,0)(1,Ve,2,0,"button",12)(2,M,9,8,"clr-select-container")(3,ue,4,6,"clr-input-container"),2&C){const F=n.XpG().$implicit,T=n.XpG(2);n.vxM(T.item[F.key].length>0?0:1),n.R7$(2),n.vxM(F.value.options?2:3)}}function Ie(C,W){if(1&C&&(n.j41(0,"p"),n.EFF(1),n.k0s()),2&C){const F=W.$implicit;n.R7$(),n.JRh(F)}}function Se(C,W){if(1&C&&(n.j41(0,"option",16),n.EFF(1),n.k0s()),2&C){const F=W.$implicit;n.Y8G("value",F.value),n.R7$(),n.JRh(F.title)}}function Oe(C,W){if(1&C&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(),n.JRh(F.value.error)}}function ee(C,W){1&C&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function Y(C,W){if(1&C){const F=n.RV6();n.j41(0,"clr-select-container",18),n.bIt("click",function(){n.eBV(F);const re=n.XpG().$implicit,z=n.XpG(2);return n.Njj(z.reloadIfEmpty(re.key))}),n.j41(1,"label"),n.EFF(2),n.k0s(),n.Z7z(3,Ie,2,1,"p",null,n.fX1),n.j41(5,"select",14),n.DNE(6,Se,2,2,"option",15),n.k0s(),n.j41(7,"clr-control-helper"),n.EFF(8),n.k0s(),n.DNE(9,Oe,2,1,"clr-control-error")(10,ee,2,0,"clr-control-error"),n.k0s()}if(2&C){const F=n.XpG().$implicit;n.R7$(2),n.JRh(F.value.title),n.R7$(),n.Dyx(F.value.options),n.R7$(2),n.xc7("width",400,"px"),n.Y8G("formControlName",F.key)("required",!0===F.value.required),n.R7$(),n.Y8G("ngForOf",F.value.options),n.R7$(2),n.JRh(F.value.description),n.R7$(),n.vxM(F.value.error?9:10)}}function Ue(C,W){if(1&C&&(n.j41(0,"option",16),n.EFF(1),n.k0s()),2&C){const F=W.$implicit;n.Y8G("value",F),n.R7$(),n.JRh(F)}}function Ce(C,W){if(1&C&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(),n.JRh(F.value.error)}}function Ee(C,W){1&C&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function rt(C,W){if(1&C&&(n.j41(0,"clr-select-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"select",14),n.DNE(4,Ue,2,2,"option",15),n.k0s(),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,Ce,2,1,"clr-control-error")(8,Ee,2,0,"clr-control-error"),n.k0s()),2&C){const F=n.XpG().$implicit,T=n.XpG(2);n.R7$(2),n.JRh(F.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("formControlName",F.key)("required",!0===F.value.required),n.R7$(),n.Y8G("ngForOf",T.roles),n.R7$(2),n.JRh(F.value.description),n.R7$(),n.vxM(F.value.error?7:8)}}function _t(C,W){if(1&C&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(),n.JRh(F.value.error)}}function Ge(C,W){1&C&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function Ye(C,W){if(1&C&&(n.j41(0,"clr-checkbox-container")(1,"label"),n.EFF(2),n.k0s(),n.j41(3,"clr-checkbox-wrapper"),n.nrm(4,"input",19),n.j41(5,"clr-control-helper"),n.EFF(6),n.k0s(),n.DNE(7,_t,2,1,"clr-control-error")(8,Ge,2,0,"clr-control-error"),n.k0s()()),2&C){const F=n.XpG().$implicit;n.R7$(2),n.JRh(F.value.title),n.R7$(2),n.xc7("width",400,"px"),n.Y8G("formControlName",F.key)("required",!0===F.value.required),n.R7$(2),n.JRh(F.value.description),n.R7$(),n.vxM(F.value.error?7:8)}}function vt(C,W){if(1&C&&(n.j41(0,"clr-date-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",20),n.k0s()),2&C){const F=n.XpG().$implicit;n.R7$(2),n.JRh(F.value.title),n.R7$(),n.xc7("width",366,"px"),n.Y8G("formControlName",F.key)}}function at(C,W){if(1&C&&(n.j41(0,"clr-control-error"),n.EFF(1),n.k0s()),2&C){const F=n.XpG(2).$implicit;n.R7$(),n.JRh(F.value.error)}}function Nt(C,W){1&C&&(n.j41(0,"clr-control-error"),n.EFF(1,"Please enter a value"),n.k0s())}function Et(C,W){if(1&C&&(n.j41(0,"clr-input-container")(1,"label"),n.EFF(2),n.k0s(),n.nrm(3,"input",17),n.j41(4,"clr-control-helper"),n.EFF(5),n.k0s(),n.DNE(6,at,2,1,"clr-control-error")(7,Nt,2,0,"clr-control-error"),n.k0s()),2&C){const F=n.XpG().$implicit;n.R7$(2),n.JRh(F.value.title),n.R7$(),n.xc7("width",400,"px"),n.Y8G("type",F.value.type)("formControlName",F.key)("required",!0===F.value.required),n.R7$(2),n.JRh(F.value.description),n.R7$(),n.vxM(F.value.error?6:7)}}function f(C,W){if(1&C&&(n.j41(0,"div"),n.DNE(1,me,8,9,"clr-input-container")(2,R,4,2)(3,Y,11,8,"clr-select-container")(4,rt,9,8,"clr-select-container")(5,Ye,9,7,"clr-checkbox-container")(6,vt,4,4,"clr-date-container")(7,Et,8,8,"clr-input-container"),n.k0s()),2&C){const F=W.$implicit;n.R7$(),n.vxM("mrn"===F.key?1:"stringArray"===F.value.type?2:F.value.options?3:"permissions"===F.key?4:"boolean"===F.value.type?5:"date"===F.value.type?6:7)}}function oe(C,W){if(1&C){const F=n.RV6();n.j41(0,"button",24),n.bIt("click",function(){n.eBV(F);const re=n.XpG(3);return n.Njj(re.cancel())}),n.EFF(1,"Cancel"),n.k0s()}}function se(C,W){if(1&C){const F=n.RV6();n.j41(0,"div",10)(1,"button",21),n.bIt("click",function(){n.eBV(F);const re=n.XpG(2);return n.Njj(re.submit())}),n.EFF(2,"Submit"),n.k0s(),n.j41(3,"button",22),n.bIt("click",function(){n.eBV(F);const re=n.XpG(2);return n.Njj(re.resetForm())}),n.EFF(4,"Reset"),n.k0s(),n.DNE(5,oe,2,0,"button",23),n.k0s()}if(2&C){const F=n.XpG(2);n.R7$(5),n.vxM(F.isForNew?-1:5)}}function P(C,W){if(1&C&&(n.j41(0,"div",5),n.EFF(1),n.k0s(),n.j41(2,"div",6)(3,"div",7)(4,"form",8),n.DNE(5,f,8,1,"div",9),n.nI1(6,"keyvalue"),n.k0s()()(),n.DNE(7,se,6,1,"div",10)),2&C){const F=n.XpG();n.R7$(),n.SpI(" ",F.title," "),n.R7$(3),n.Y8G("formGroup",F.itemForm),n.R7$(),n.Y8G("ngForOf",n.i5U(6,4,F.columnForMenu,F.sortColumnForMenu)),n.R7$(2),n.vxM(F.onSubmitIsGiven?7:-1)}}let x=(()=>{class C{constructor(F,T,re,z){this.formBuilder=F,this.authService=T,this.notifierService=re,this.translate=z,this.itemType=A.SP.None,this.isForNew=!1,this.item={},this.mrnPrefix="urn:mrn:",this.title="",this.organizations=[],this.plans=[],this.orgsubs=[],this.services=[],this.users=[],this.orgSvcSubs=[],this.roles=[],this.onCancel=new n.bkB,this.onSubmit=new n.bkB,this.onLoadOptions=new n.bkB,this.viewContext="edit",this.itemForm=new c.gE({}),this.columnForMenu={},this.isEditing=!1,this.id="",this.onSubmitIsGiven=!0,this.myInfo=null,this.isLoading=!0,this.isSelectOptionReady=!1,this.submit=()=>{if(this.isValid()){const $=N(this.itemForm.value),ce=((C,W)=>(Object.entries(W).map(([F,T])=>{((C,W)=>!!C[W]&&"date"===C[W].type)(C,F)?W[F]=new Date(T).toISOString().split("T")[0]:((C,W)=>!!C[W]&&"number"===C[W].type)(C,F)&&(W[F]=parseFloat(T))}),W))(this.columnForMenu,$);if(this.isForNew)this.onSubmit.emit(ce);else{const Pe=((C,W)=>({...this.item,...W}))(0,ce);this.onSubmit.emit(Pe)}}},this.isValid=()=>this.itemForm.valid?this.itemForm.value.mrn!==this.mrnPrefix||(this.notifierService.notify("error",this.translate.instant("error.form.invalidmrn")),!1):(this.itemForm.markAllAsTouched(),this.clrForm?.markAsTouched(),this.notifierService.notify("error",this.translate.instant("error.form.invalid")),!1),this.getFormValue=()=>{if(this.isValid())return N(this.itemForm.value)},this.resetForm=()=>{this.setForm(),0===this.title.length&&this.itemType!==A.SP.None&&(this.title=this.isForNew?"New "+this.capitalize(this.itemType):"Edit "+this.capitalize(this.itemType)),this.onSubmitIsGiven=0!==this.onSubmit.observers.length,this.isForNew?(this.item={mrn:this.mrnPrefix},this.itemForm.patchValue(this.item),this.isLoading=!1):(this.itemForm.patchValue(this.item),this.isLoading=!1)},this.cancel=()=>{this.onCancel.emit()},this.setForm=()=>{if(this.itemType===A.SP.None)return;let $={};Object.entries(g.Y[this.itemType.toString()]).map(([ce,Pe])=>{if(Pe.visibleFrom&&(!Pe.visibleFrom||Pe.visibleFrom.includes(this.viewContext))){if("mrn"===ce){const Ke=new RegExp("urn:mrn:mcp:(entity|mir|mms|msr|device|org|user|vessel|service|mms):([a-z0-9]([a-z0-9]|-){0,20}[a-z0-9]):((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$");$[ce]=["",[c.k0.required,c.k0.pattern(Ke)]]}else $[ce]="email"===ce?["",[c.k0.required,c.k0.email]]:"url"===ce?["",[c.k0.required,c.k0.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]]:["",Pe.required?c.k0.required:void 0];"organizationId"===Pe.type&&(Pe.options=this.organizations),"subscriptionPlanId"===Pe.type&&(Pe.options=this.plans),"organizationSubscriptionId"===Pe.type&&(Pe.options=this.orgsubs),"serviceId"===Pe.type&&(Pe.options=this.services),"userMrn"===Pe.type&&(Pe.options=this.users),"serviceSubscriptionId"===Pe.type&&(Pe.options=this.orgSvcSubs),"role"===ce&&(Pe.options=this.roles),this.columnForMenu[ce]=Pe}}),this.itemForm=this.formBuilder.group($)},this.needShortId=$=>void 0!==this.getShortIdType($),this.getShortIdType=$=>this.columnForMenu[$]?this.columnForMenu[$].shortIdType:void 0,this.sortColumnForMenu=($,ce)=>$.order>ce.order?-1:1,this.capitalize=$=>$[0].toUpperCase()+$.slice(1),this.reloadIfEmpty=$=>{0===this.columnForMenu[$].options.length&&(this.isLoading=!0,this.onLoadOptions.emit())}}ngOnInit(){this.itemType!==A.SP.OrgCandidate?this.authService.user$.subscribe(F=>{this.myInfo=F,this.resetForm(),this.isSelectOptionReady=!0}):(this.resetForm(),this.isSelectOptionReady=!0)}ngOnChanges(F){this.isForNew&&(this.viewContext="edit-new"),this.itemType!==A.SP.None&&this.item&&0!==Object.keys(this.item).length&&(this.itemForm.patchValue(this.item),this.isLoading=!1)}onMrnKeyDown(F){const T=F.target.value;T.includes(this.mrnPrefix)?this.item.mrn=T:F.target.value=this.mrnPrefix}onMrnChange(F){this.item.mrn=F.startsWith(this.mrnPrefix)?F:this.mrnPrefix}static#e=this.\u0275fac=function(T){return new(T||C)(n.rXU(c.ok),n.rXU(v.u),n.rXU(S.iJ),n.rXU(I.c$))};static#t=this.\u0275cmp=n.VBU({type:C,selectors:[["app-item-form"]],viewQuery:function(T,re){if(1&T&&n.GBs(w.mDd,7),2&T){let z;n.mGM(z=n.lsd())&&(re.clrForm=z.first)}},inputs:{itemType:"itemType",isForNew:"isForNew",item:"item",mrnPrefix:"mrnPrefix",title:"title",organizations:"organizations",plans:"plans",orgsubs:"orgsubs",services:"services",users:"users",orgSvcSubs:"orgSvcSubs",roles:"roles"},outputs:{onCancel:"onCancel",onSubmit:"onSubmit",onLoadOptions:"onLoadOptions"},standalone:!0,features:[n.OA$,n.aNF],decls:5,vars:1,consts:[[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[1,"card"],[1,"clr-row","clr-justify-content-center"],[1,"spinner"],[1,"card-header"],[1,"card-block"],[1,"card-text"],["clrForm","",1,"ng-untouched",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"card-footer"],["clrInput","",3,"ngModelChange","keydown","type","formControlName","required","placeholder"],["disabled","",1,"btn","btn-sm","btn-outline"],[1,"label","label-light-blue"],["clrSelect","",3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["clrInput","",3,"type","formControlName","required"],[3,"click"],["clrCheckbox","","type","checkbox",3,"formControlName","required"],["clrDate","","type","date","autocomplete","off",3,"formControlName"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"]],template:function(T,re){1&T&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.DNE(3,K,3,0,"div",3)(4,P,8,7),n.k0s()()()),2&T&&(n.R7$(3),n.vxM(re.isLoading?3:4))},dependencies:[_.G,H.Sq,H.lG,w.t5G,w.aZZ,w.Hpg,w.bnk,w.mDd,w.Jej,w.EjB,w.eAx,w.lnv,w._Qf,w.WF1,w.icl,w.Xu5,w.Yf6,w.hTQ,c.YN,c.qT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.cb,c.YS,c.xq,w.Nsh,w.CxT,c.X1,c.j4,c.JD]})}return C})()},3103:(nt,U,L)=>{"use strict";L.d(U,{Y:()=>ev});var n=L(5950),c=L(5166),w=L(1748),g=L(7882),N=L(2047),u=L(58),V=L(6908),A=L(6994),k=L(153);function o(s,r,e){var t;return s instanceof Object&&null!==(t=s[r])&&void 0!==t?t:e}function b(s,r=0,e=s.byteLength-r,t=!1){let i="";for(const a of new Uint8Array(s,r,e)){const l=a.toString(16).toUpperCase();1===l.length&&(i+="0"),i+=l,t&&(i+=" ")}return i.trim()}function v(s,r){let e=0;if(1===s.length)return s[0];for(let t=s.length-1;t>=0;t--)e+=s[s.length-1-t]*Math.pow(2,r*t);return e}function S(s,r,e=-1){const t=e;let i=s,a=0,l=Math.pow(2,r);for(let h=1;h<8;h++){if(s<l){let d;if(t<0)d=new ArrayBuffer(h),a=h;else{if(t<h)return new ArrayBuffer(0);d=new ArrayBuffer(t),a=t}const p=new Uint8Array(d);for(let B=h-1;B>=0;B--){const D=Math.pow(2,B*r);p[a-B-1]=Math.floor(i/D),i-=p[a-B-1]*D}return d}l*=Math.pow(2,r)}return new ArrayBuffer(0)}function I(...s){let r=0,e=0;for(const a of s)r+=a.byteLength;const t=new ArrayBuffer(r),i=new Uint8Array(t);for(const a of s)i.set(new Uint8Array(a),e),e+=a.byteLength;return t}function H(...s){let r=0,e=0;for(const a of s)r+=a.length;const t=new ArrayBuffer(r),i=new Uint8Array(t);for(const a of s)i.set(a,e),e+=a.length;return i}function K(){const s=new Uint8Array(this.valueHex);this.valueHex.byteLength>=2&&(255===s[0]&&128&s[1]||0===s[0]&&!(128&s[1]))&&this.warnings.push("Needlessly long format");const r=new ArrayBuffer(this.valueHex.byteLength),e=new Uint8Array(r);for(let h=0;h<this.valueHex.byteLength;h++)e[h]=0;e[0]=128&s[0];const t=v(e,8),i=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(i);for(let h=0;h<this.valueHex.byteLength;h++)a[h]=s[h];return a[0]&=127,v(a,8)-t}function Z(s,r){if(s.byteLength!==r.byteLength)return!1;const e=new Uint8Array(s),t=new Uint8Array(r);for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function me(s,r){const e=s.toString(10);if(r<e.length)return"";const t=r-e.length,i=new Array(t);for(let l=0;l<t;l++)i[l]="0";return i.join("").concat(e)}const ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Ve(s,r=!1,e=!1,t=!1){let i=0,a=0,l=0,h="";const d=r?_e:ne;if(t){let p=0;for(let B=0;B<s.length;B++)if(0!==s.charCodeAt(B)){p=B;break}s=s.slice(p)}for(;i<s.length;){const p=s.charCodeAt(i++);i>=s.length&&(a=1);const B=s.charCodeAt(i++);i>=s.length&&(l=1);const D=s.charCodeAt(i++),q=p>>2,G=(3&p)<<4|B>>4;let le=(15&B)<<2|D>>6,ke=63&D;1===a?le=ke=64:1===l&&(ke=64),h+=e?64===le?`${d.charAt(q)}${d.charAt(G)}`:64===ke?`${d.charAt(q)}${d.charAt(G)}${d.charAt(le)}`:`${d.charAt(q)}${d.charAt(G)}${d.charAt(le)}${d.charAt(ke)}`:`${d.charAt(q)}${d.charAt(G)}${d.charAt(le)}${d.charAt(ke)}`}return h}function O(s,r=!1,e=!1){const t=r?_e:ne;function i(d){for(let p=0;p<64;p++)if(t.charAt(p)===d)return p;return 64}function a(d){return 64===d?0:d}let l=0,h="";for(;l<s.length;){const d=i(s.charAt(l++)),p=l>=s.length?0:i(s.charAt(l++)),B=l>=s.length?0:i(s.charAt(l++)),D=l>=s.length?0:i(s.charAt(l++)),q=a(d)<<2|a(p)>>4,G=(15&a(p))<<4|a(B)>>2,le=(3&a(B))<<6|a(D);h+=String.fromCharCode(q),64!==B&&(h+=String.fromCharCode(G)),64!==D&&(h+=String.fromCharCode(le))}if(e){let p=-1;for(let B=h.length-1;B>=0;B--)if(0!==h.charCodeAt(B)){p=B;break}h=-1!==p?h.slice(0,p+1):""}return h}function J(s){let r="";const e=new Uint8Array(s);for(const t of e)r+=String.fromCharCode(t);return r}function m(s){const r=s.length,e=new ArrayBuffer(r),t=new Uint8Array(e);for(let i=0;i<r;i++)t[i]=s.charCodeAt(i);return e}const M=Math.log(2);function ue(s){const r=Math.log(s)/M,e=Math.floor(r),t=Math.round(r);return e===t?e:t}function R(s,r){for(const e of r)delete s[e]}function Ie(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Se(s){let r=0,e=0;for(let i=0;i<s.length;i++)r+=s[i].byteLength;const t=new Uint8Array(r);for(let i=0;i<s.length;i++){const a=s[i];t.set(new Uint8Array(a),e),e+=a.byteLength}return t.buffer}function Oe(s,r,e,t){return r instanceof Uint8Array?r.byteLength?e<0?(s.error="Wrong parameter: inputOffset less than zero",!1):t<0?(s.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-e-t<0&&(s.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(s.error="Wrong parameter: inputBuffer has zero length",!1):(s.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ee{constructor(){this.items=[]}write(r){this.items.push(r)}final(){return Se(this.items)}}const Y=[new Uint8Array([1])],Ue="0123456789",Ce="name",Ee="valueHexView",f="",oe=new ArrayBuffer(0),se=new Uint8Array(0),P="EndOfContent",x="OCTET STRING",C="BIT STRING";function W(s){var r;return(r=class extends s{constructor(...t){var i;super(...t);const a=t[0]||{};this.isHexOnly=null!==(i=a.isHexOnly)&&void 0!==i&&i,this.valueHexView=a.valueHex?k._H.toUint8Array(a.valueHex):se}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,i,a){const l=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!Oe(this,l,i,a))return-1;const h=i+a;return this.valueHexView=l.subarray(i,h),this.valueHexView.length?(this.blockLength=a,h):(this.warnings.push("Zero buffer length"),i)}toBER(t=!1){return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",oe)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:k.U$.ToHex(this.valueHexView)}}}).NAME="hexBlock",r}let F=(()=>{class s{constructor({blockLength:e=0,error:t=f,warnings:i=[],valueBeforeDecode:a=se}={}){this.blockLength=e,this.error=t,this.warnings=i,this.valueBeforeDecodeView=k._H.toUint8Array(a)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:k.U$.ToHex(this.valueBeforeDecodeView)}}}return s.NAME="baseBlock",s})(),T=(()=>{class s extends F{fromBER(e,t,i){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}return s.NAME="valueBlock",s})(),re=(()=>{class s extends(W(F)){constructor({idBlock:e={}}={}){var t,i,a,l;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?k._H.toUint8Array(e.valueHex):se,this.tagClass=null!==(i=e.tagClass)&&void 0!==i?i:-1,this.tagNumber=null!==(a=e.tagNumber)&&void 0!==a?a:-1,this.isConstructed=null!==(l=e.isConstructed)&&void 0!==l&&l):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",oe}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const a=new Uint8Array(1);if(!e){let l=this.tagNumber;l&=31,t|=l,a[0]=t}return a.buffer}if(!this.isHexOnly){const a=S(this.tagNumber,7),l=new Uint8Array(a),h=a.byteLength,d=new Uint8Array(h+1);if(d[0]=31|t,!e){for(let p=0;p<h-1;p++)d[p+1]=128|l[p];d[h]=l[h-1]}return d.buffer}const i=new Uint8Array(this.valueHexView.byteLength+1);if(i[0]=31|t,!e){const a=this.valueHexView;for(let l=0;l<a.length-1;l++)i[l+1]=128|a[l];i[this.valueHexView.byteLength]=a[a.length-1]}return i.buffer}fromBER(e,t,i){const a=k._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);if(0===l.length)return this.error="Zero buffer length",-1;switch(192&l[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=!(32&~l[0]),this.isHexOnly=!1;const d=31&l[0];if(31!==d)this.tagNumber=d,this.blockLength=1;else{let p=1,B=this.valueHexView=new Uint8Array(255),D=255;for(;128&l[p];){if(B[p-1]=127&l[p],p++,p>=l.length)return this.error="End of input reached before message was fully decoded",-1;if(p===D){D+=255;const G=new Uint8Array(D);for(let le=0;le<B.length;le++)G[le]=B[le];B=this.valueHexView=new Uint8Array(D)}}this.blockLength=p+1,B[p-1]=127&l[p];const q=new Uint8Array(p);for(let G=0;G<p;G++)q[G]=B[G];B=this.valueHexView=new Uint8Array(p),B.set(q),this.blockLength<=9?this.tagNumber=v(B,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}return s.NAME="identificationBlock",s})(),z=(()=>{class s extends F{constructor({lenBlock:e={}}={}){var t,i,a;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(i=e.longFormUsed)&&void 0!==i&&i,this.length=null!==(a=e.length)&&void 0!==a?a:0}fromBER(e,t,i){const a=k._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);if(0===l.length)return this.error="Zero buffer length",-1;if(255===l[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===l[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&l[0]),!1===this.longFormUsed)return this.length=l[0],this.blockLength=1,t+this.blockLength;const h=127&l[0];if(h>8)return this.error="Too big integer",-1;if(h+1>l.length)return this.error="End of input reached before message was fully decoded",-1;const d=t+1,p=a.subarray(d,d+h);return 0===p[h-1]&&this.warnings.push("Needlessly long encoded length"),this.length=v(p,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=h+1,t+this.blockLength}toBER(e=!1){let t,i;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(i=new Uint8Array(t),i[0]=128),t;if(this.longFormUsed){const a=S(this.length,8);if(a.byteLength>127)return this.error="Too big length",oe;if(t=new ArrayBuffer(a.byteLength+1),e)return t;const l=new Uint8Array(a);i=new Uint8Array(t),i[0]=128|a.byteLength;for(let h=0;h<a.byteLength;h++)i[h+1]=l[h];return t}return t=new ArrayBuffer(1),!1===e&&(i=new Uint8Array(t),i[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}return s.NAME="lengthBlock",s})();const $={};let ce=(()=>{class s extends F{constructor({name:e=f,optional:t=!1,primitiveSchema:i,...a}={},l){super(a),this.name=e,this.optional=t,i&&(this.primitiveSchema=i),this.idBlock=new re(a),this.lenBlock=new z(a),this.valueBlock=l?new l(a):new T(a)}fromBER(e,t,i){const a=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),a)}toBER(e,t){const i=t||new ee;t||Pe(this);const a=this.idBlock.toBER(e);if(i.write(a),this.lenBlock.isIndefiniteForm)i.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,i),i.write(new ArrayBuffer(2));else{const l=this.valueBlock.toBER(e);this.lenBlock.length=l.byteLength;const h=this.lenBlock.toBER(e);i.write(h),i.write(l)}return t?oe:i.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():k.U$.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${k.U$.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){return this===e||e instanceof this.constructor&&Z(this.toBER(),e.toBER())}}return s.NAME="BaseBlock",s})();function Pe(s){if(s instanceof $.Constructed)for(const r of s.valueBlock.value)Pe(r)&&(s.lenBlock.isIndefiniteForm=!0);return!!s.lenBlock.isIndefiniteForm}let Ke=(()=>{class s extends ce{constructor({value:e=f,...t}={},i){super(t,i),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,i){const a=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),a)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}return s.NAME="BaseStringBlock",s})(),Mt=(()=>{class s extends(W(T)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}return s.NAME="PrimitiveValueBlock",s})();class Be extends ce{constructor(r={}){super(r,Mt),this.idBlock.isConstructed=!1}}function it(s,r=0,e=s.length){const t=r;let i=new ce({},T);const a=new F;if(!Oe(a,s,r,e))return i.error=a.error,{offset:-1,result:i};if(!s.subarray(r,r+e).length)return i.error="Zero buffer length",{offset:-1,result:i};let h=i.idBlock.fromBER(s,r,e);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===h)return i.error=i.idBlock.error,{offset:-1,result:i};if(h=i.lenBlock.fromBER(s,r=h,e-=i.idBlock.blockLength),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===h)return i.error=i.lenBlock.error,{offset:-1,result:i};if(r=h,e-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let d=ce;if(1===i.idBlock.tagClass){if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};d=$.EndOfContent;break;case 1:d=$.Boolean;break;case 2:d=$.Integer;break;case 3:d=$.BitString;break;case 4:d=$.OctetString;break;case 5:d=$.Null;break;case 6:d=$.ObjectIdentifier;break;case 10:d=$.Enumerated;break;case 12:d=$.Utf8String;break;case 13:d=$.RelativeObjectIdentifier;break;case 14:d=$.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:d=$.Sequence;break;case 17:d=$.Set;break;case 18:d=$.NumericString;break;case 19:d=$.PrintableString;break;case 20:d=$.TeletexString;break;case 21:d=$.VideotexString;break;case 22:d=$.IA5String;break;case 23:d=$.UTCTime;break;case 24:d=$.GeneralizedTime;break;case 25:d=$.GraphicString;break;case 26:d=$.VisibleString;break;case 27:d=$.GeneralString;break;case 28:d=$.UniversalString;break;case 29:d=$.CharacterString;break;case 30:d=$.BmpString;break;case 31:d=$.DATE;break;case 32:d=$.TimeOfDay;break;case 33:d=$.DateTime;break;case 34:d=$.Duration;break;default:{const p=i.idBlock.isConstructed?new $.Constructed:new $.Primitive;p.idBlock=i.idBlock,p.lenBlock=i.lenBlock,p.warnings=i.warnings,i=p}}}else d=i.idBlock.isConstructed?$.Constructed:$.Primitive;return i=function gi(s,r){if(s instanceof r)return s;const e=new r;return e.idBlock=s.idBlock,e.lenBlock=s.lenBlock,e.warnings=s.warnings,e.valueBeforeDecodeView=s.valueBeforeDecodeView,e}(i,d),h=i.fromBER(s,r,i.lenBlock.isIndefiniteForm?e:i.lenBlock.length),i.valueBeforeDecodeView=s.subarray(t,t+i.blockLength),{offset:h,result:i}}function ut(s){if(!s.byteLength){const r=new ce({},T);return r.error="Input buffer has zero length",{offset:-1,result:r}}return it(k._H.toUint8Array(s).slice(),0,s.byteLength)}function na(s,r){return s?1:r}$.Primitive=Be,Be.NAME="PRIMITIVE";let Ct=(()=>{class s extends T{constructor({value:e=[],isIndefiniteForm:t=!1,...i}={}){super(i),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,i){const a=k._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;if(this.valueBeforeDecodeView=a.subarray(t,t+i),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let l=t;for(;na(this.isIndefiniteForm,i)>0;){const h=it(a,l,i);if(-1===h.offset)return this.error=h.result.error,this.warnings.concat(h.result.warnings),-1;if(l=h.offset,this.blockLength+=h.result.blockLength,i-=h.result.blockLength,this.value.push(h.result),this.isIndefiniteForm&&h.result.constructor.NAME===P)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===P?this.value.pop():this.warnings.push("No EndOfContent block encoded")),l}toBER(e,t){const i=t||new ee;for(let a=0;a<this.value.length;a++)this.value[a].toBER(e,i);return t?oe:i.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}return s.NAME="ConstructedValueBlock",s})();class X extends ce{constructor(r={}){super(r,Ct),this.idBlock.isConstructed=!0}fromBER(r,e,t){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(r,e,this.lenBlock.isIndefiniteForm?t:this.lenBlock.length);return-1===i?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const r=[];for(const t of this.valueBlock.value)r.push(t.toString("ascii").split("\n").map(i=>`  ${i}`).join("\n"));const e=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return r.length?`${e} :\n${r.join("\n")}`:`${e} :`}}$.Constructed=X,X.NAME="CONSTRUCTED";let Xc=(()=>{class s extends T{fromBER(e,t,i){return t}toBER(e){return oe}}return s.override="EndOfContentValueBlock",s})();class aa extends ce{constructor(r={}){super(r,Xc),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}$.EndOfContent=aa,aa.NAME=P;class ot extends ce{constructor(r={}){super(r,T),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(r,e,t){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=t,e+t>r.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):e+t}toBER(r,e){const t=new ArrayBuffer(2);if(!r){const i=new Uint8Array(t);i[0]=5,i[1]=0}return e&&e.write(t),t}onAsciiEncoding(){return`${this.constructor.NAME}`}}$.Null=ot,ot.NAME="NULL";let Xf=(()=>{class s extends(W(T)){constructor({value:e,...t}={}){super(t),this.valueHexView=t.valueHex?k._H.toUint8Array(t.valueHex):new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,i){const a=k._H.toUint8Array(e);return Oe(this,a,t,i)?(this.valueHexView=a.subarray(t,t+i),i>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,K.call(this),this.blockLength=i,t+i):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}return s.NAME="BooleanValueBlock",s})();class ys extends ce{constructor(r={}){super(r,Xf),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(r){this.valueBlock.value=r}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}$.Boolean=ys,ys.NAME="BOOLEAN";let Yf=(()=>{class s extends(W(Ct)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,i){let a=0;if(this.isConstructed){if(this.isHexOnly=!1,a=Ct.prototype.fromBER.call(this,e,t,i),-1===a)return a;for(let l=0;l<this.value.length;l++){const h=this.value[l].constructor.NAME;if(h===P){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(h!==x)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=super.fromBER(e,t,i),this.blockLength=i;return a}toBER(e,t){return this.isConstructed?Ct.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}return s.NAME="OctetStringValueBlock",s})();class ve extends ce{constructor({idBlock:r={},lenBlock:e={},...t}={}){var i,a;null!==(i=t.isConstructed)&&void 0!==i||(t.isConstructed=!(null===(a=t.value)||void 0===a||!a.length)),super({idBlock:{isConstructed:t.isConstructed,...r},lenBlock:{...e,isIndefiniteForm:!!t.isIndefiniteForm},...t},Yf),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(r,e,t){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===t)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),e;if(!this.valueBlock.isConstructed){const a=(r instanceof ArrayBuffer?new Uint8Array(r):r).subarray(e,e+t);try{if(a.byteLength){const l=it(a,0,a.byteLength);-1!==l.offset&&l.offset===t&&(this.valueBlock.value=[l.result])}}catch{}}return super.fromBER(r,e,t)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?X.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${k.U$.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const r=[];for(const e of this.valueBlock.value)e instanceof ve&&r.push(e.valueBlock.valueHexView);return k._H.concat(r)}}$.OctetString=ve,ve.NAME=x;let Zf=(()=>{class s extends(W(Ct)){constructor({unusedBits:e=0,isConstructed:t=!1,...i}={}){super(i),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,i){if(!i)return t;let a=-1;if(this.isConstructed){if(a=Ct.prototype.fromBER.call(this,e,t,i),-1===a)return a;for(const d of this.value){const p=d.constructor.NAME;if(p===P){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(p!==C)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const B=d.valueBlock;if(this.unusedBits>0&&B.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=B.unusedBits}return a}const l=k._H.toUint8Array(e);if(!Oe(this,l,t,i))return-1;const h=l.subarray(t,t+i);if(this.unusedBits=h[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const d=h.subarray(1);try{if(d.byteLength){const p=it(d,0,d.byteLength);-1!==p.offset&&p.offset===i-1&&(this.value=[p.result])}}catch{}}return this.valueHexView=h.subarray(1),this.blockLength=h.length,t+i}toBER(e,t){if(this.isConstructed)return Ct.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return oe;const i=new Uint8Array(this.valueHexView.length+1);return i[0]=this.unusedBits,i.set(this.valueHexView,1),i.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}return s.NAME="BitStringValueBlock",s})();var qh;class Ze extends ce{constructor({idBlock:r={},lenBlock:e={},...t}={}){var i,a;null!==(i=t.isConstructed)&&void 0!==i||(t.isConstructed=!(null===(a=t.value)||void 0===a||!a.length)),super({idBlock:{isConstructed:t.isConstructed,...r},lenBlock:{...e,isIndefiniteForm:!!t.isIndefiniteForm},...t},Zf),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(r,e,t){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(r,e,t)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return X.prototype.onAsciiEncoding.call(this);{const r=[],e=this.valueBlock.valueHexView;for(const i of e)r.push(i.toString(2).padStart(8,"0"));const t=r.join("");return`${this.constructor.NAME} : ${t.substring(0,t.length-this.valueBlock.unusedBits)}`}}}function Qf(s,r){const e=new Uint8Array([0]),t=new Uint8Array(s),i=new Uint8Array(r);let a=t.slice(0);const l=a.length-1,h=i.slice(0),d=h.length-1;let p=0,D=0;for(let q=d<l?l:d;q>=0;q--,D++)p=1==D<h.length?a[l-D]+h[d-D]+e[0]:a[l-D]+e[0],e[0]=p/10,1==D>=a.length?a=H(new Uint8Array([p%10]),a):a[l-D]=p%10;return e[0]>0&&(a=H(e,a)),a}function zh(s){if(s>=Y.length)for(let r=Y.length;r<=s;r++){const e=new Uint8Array([0]);let t=Y[r-1].slice(0);for(let i=t.length-1;i>=0;i--){const a=new Uint8Array([(t[i]<<1)+e[0]]);e[0]=a[0]/10,t[i]=a[0]%10}e[0]>0&&(t=H(e,t)),Y.push(t)}return Y[s]}function em(s,r){let e=0;const t=new Uint8Array(s),i=new Uint8Array(r),a=t.slice(0),l=a.length-1,h=i.slice(0),d=h.length-1;let p,B=0;for(let D=d;D>=0;D--,B++)p=a[l-B]-h[d-B]-e,1==p<0?(e=1,a[l-B]=p+10):(e=0,a[l-B]=p);if(e>0)for(let D=l-d+1;D>=0;D--,B++){if(p=a[l-B]-e,!(p<0)){e=0,a[l-B]=p;break}e=1,a[l-B]=p+10}return a.slice()}$.BitString=Ze,Ze.NAME=C;class Yc extends(W(T)){constructor({value:r,...e}={}){super(e),this._valueDec=0,e.valueHex&&this.setValueHex(),void 0!==r&&(this.valueDec=r)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=K.call(this)))}set valueDec(r){this._valueDec=r,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function ie(s){const r=s<0?-1*s:s;let e=128;for(let t=1;t<8;t++){if(r<=e){if(s<0){const h=S(e-r,8,t);return new Uint8Array(h)[0]|=128,h}let i=S(r,8,t),a=new Uint8Array(i);if(128&a[0]){const l=i.slice(0),h=new Uint8Array(l);i=new ArrayBuffer(i.byteLength+1),a=new Uint8Array(i);for(let d=0;d<l.byteLength;d++)a[d+1]=h[d];a[0]=0}return i}e*=Math.pow(2,8)}return new ArrayBuffer(0)}(r))}get valueDec(){return this._valueDec}fromDER(r,e,t,i=0){const a=this.fromBER(r,e,t);if(-1===a)return a;const l=this.valueHexView;return 0===l[0]&&128&l[1]?this.valueHexView=l.subarray(1):0!==i&&l.length<i&&(i-l.length>1&&(i=l.length+1),this.valueHexView=l.subarray(i-l.length)),a}toDER(r=!1){const e=this.valueHexView;switch(!0){case!!(128&e[0]):{const t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(e,1),this.valueHexView=t}break;case 0===e[0]&&!(128&e[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(r)}fromBER(r,e,t){const i=super.fromBER(r,e,t);return-1===i||this.setValueHex(),i}toBER(r){return r?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const r=8*this.valueHexView.length-1;let i,e=new Uint8Array(8*this.valueHexView.length/3),t=0;const a=this.valueHexView;let l="",h=!1;for(let d=a.byteLength-1;d>=0;d--){i=a[d];for(let p=0;p<8;p++)1&~i||(t===r?(e=em(zh(t),e),l="-"):e=Qf(e,zh(t))),t++,i>>=1}for(let d=0;d<e.length;d++)e[d]&&(h=!0),h&&(l+=Ue.charAt(e[d]));return!1===h&&(l+=Ue.charAt(0)),l}}qh=Yc,Yc.NAME="IntegerValueBlock",Object.defineProperty(qh.prototype,"valueHex",{set:function(s){this.valueHexView=new Uint8Array(s),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Q extends ce{constructor(r={}){super(r,Yc),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Ie(),BigInt(this.valueBlock.toString())}static fromBigInt(r){Ie();const e=BigInt(r),t=new ee,i=e.toString(16).replace(/^-/,""),a=new Uint8Array(k.U$.FromHex(i));if(e<0){const h=new Uint8Array(a.length+(128&a[0]?1:0));h[0]|=128;const p=BigInt(`0x${k.U$.ToHex(h)}`)+e,B=k._H.toUint8Array(k.U$.FromHex(p.toString(16)));B[0]|=128,t.write(B)}else 128&a[0]&&t.write(new Uint8Array([0])),t.write(a);return new Q({valueHex:t.final()})}convertToDER(){const r=new Q({valueHex:this.valueBlock.valueHexView});return r.valueBlock.toDER(),r}convertFromDER(){return new Q({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}$.Integer=Q,Q.NAME="INTEGER";class oa extends Q{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}$.Enumerated=oa,oa.NAME="ENUMERATED";let Yh=(()=>{class s extends(W(T)){constructor({valueDec:e=-1,isFirstSid:t=!1,...i}={}){super(i),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,i){if(!i)return t;const a=k._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);this.valueHexView=new Uint8Array(i);for(let d=0;d<i&&(this.valueHexView[d]=127&l[d],this.blockLength++,128&l[d]);d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,128&l[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=v(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){Ie();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const i=new Uint8Array(t.length/7);for(let a=0;a<i.length;a++)i[a]=parseInt(t.slice(7*a,7*a+7),2)+(a+1<i.length?128:0);this.fromBER(i.buffer,0,i.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const a=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=128|a[h];return l[this.blockLength-1]=a[this.blockLength-1],l.buffer}const t=S(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",oe;const i=new Uint8Array(t.byteLength);if(!e){const a=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)i[h]=128|a[h];i[l]=a[l]}return i}toString(){let e="";if(this.isHexOnly)e=k.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}return s.NAME="sidBlock",s})(),tm=(()=>{class s extends T{constructor({value:e=f,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,i){let a=t;for(;i>0;){const l=new Yh;if(a=l.fromBER(e,a,i),-1===a)return this.blockLength=0,this.error=l.error,a;0===this.value.length&&(l.isFirstSid=!0),this.blockLength+=l.blockLength,i-=l.blockLength,this.value.push(l)}return a}toBER(e){const t=[];for(let i=0;i<this.value.length;i++){const a=this.value[i].toBER(e);if(0===a.byteLength)return this.error=this.value[i].error,oe;t.push(a)}return Se(t)}fromString(e){this.value=[];let t=0,i=0,a="",l=!1;do{if(i=e.indexOf(".",t),a=-1===i?e.substring(t):e.substring(t,i),t=i+1,l){const h=this.value[0];let d=0;switch(h.valueDec){case 0:break;case 1:d=40;break;case 2:d=80;break;default:return void(this.value=[])}const p=parseInt(a,10);if(isNaN(p))return;h.valueDec=p+d,l=!1}else{const h=new Yh;if(a>Number.MAX_SAFE_INTEGER){Ie();const d=BigInt(a);h.valueBigInt=d}else if(h.valueDec=parseInt(a,10),isNaN(h.valueDec))return;this.value.length||(h.isFirstSid=!0,l=!0),this.value.push(h)}}while(-1!==i)}toString(){let e="",t=!1;for(let i=0;i<this.value.length;i++){t=this.value[i].isHexOnly;let a=this.value[i].toString();0!==i&&(e=`${e}.`),t?(a=`{${a}}`,this.value[i].isFirstSid?e=`2.{${a} - 80}`:e+=a):e+=a}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}return s.NAME="ObjectIdentifierValueBlock",s})();class xe extends ce{constructor(r={}){super(r,tm),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}$.ObjectIdentifier=xe,xe.NAME="OBJECT IDENTIFIER";let Qh=(()=>{class s extends(W(F)){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,i){if(0===i)return t;const a=k._H.toUint8Array(e);if(!Oe(this,a,t,i))return-1;const l=a.subarray(t,t+i);this.valueHexView=new Uint8Array(i);for(let d=0;d<i&&(this.valueHexView[d]=127&l[d],this.blockLength++,128&l[d]);d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,128&l[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=v(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const a=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=128|a[h];return l[this.blockLength-1]=a[this.blockLength-1],l.buffer}const t=S(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",oe;const i=new Uint8Array(t.byteLength);if(!e){const a=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)i[h]=128|a[h];i[l]=a[l]}return i.buffer}toString(){let e="";return e=this.isHexOnly?k.U$.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}return s.NAME="relativeSidBlock",s})(),sm=(()=>{class s extends T{constructor({value:e=f,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,i){let a=t;for(;i>0;){const l=new Qh;if(a=l.fromBER(e,a,i),-1===a)return this.blockLength=0,this.error=l.error,a;this.blockLength+=l.blockLength,i-=l.blockLength,this.value.push(l)}return a}toBER(e,t){const i=[];for(let a=0;a<this.value.length;a++){const l=this.value[a].toBER(e);if(0===l.byteLength)return this.error=this.value[a].error,oe;i.push(l)}return Se(i)}fromString(e){this.value=[];let t=0,i=0,a="";do{i=e.indexOf(".",t),a=-1===i?e.substring(t):e.substring(t,i),t=i+1;const l=new Qh;if(l.valueDec=parseInt(a,10),isNaN(l.valueDec))return!0;this.value.push(l)}while(-1!==i);return!0}toString(){let e="",t=!1;for(let i=0;i<this.value.length;i++){t=this.value[i].isHexOnly;let a=this.value[i].toString();0!==i&&(e=`${e}.`),t&&(a=`{${a}}`),e+=a}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}return s.NAME="RelativeObjectIdentifierValueBlock",s})();class td extends ce{constructor(r={}){super(r,sm),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}$.RelativeObjectIdentifier=td,td.NAME="RelativeObjectIdentifier";class j extends X{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}$.Sequence=j,j.NAME="SEQUENCE";class At extends X{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}$.Set=At,At.NAME="SET";let im=(()=>{class s extends(W(T)){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=f}toJSON(){return{...super.toJSON(),value:this.value}}}return s.NAME="StringValueBlock",s})(),nm=(()=>{class s extends im{}return s.NAME="SimpleStringValueBlock",s})(),jt=(()=>{class s extends Ke{constructor({...e}={}){super(e,nm)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,k._H.toUint8Array(e))}fromString(e){const t=e.length,i=this.valueBlock.valueHexView=new Uint8Array(t);for(let a=0;a<t;a++)i[a]=e.charCodeAt(a);this.valueBlock.value=e}}return s.NAME="SIMPLE STRING",s})(),rm=(()=>{class s extends jt{fromBuffer(e){this.valueBlock.valueHexView=k._H.toUint8Array(e);try{this.valueBlock.value=k.U$.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=k.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(k.U$.FromUtf8String(e)),this.valueBlock.value=e}}return s.NAME="Utf8StringValueBlock",s})();class Zt extends rm{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}$.Utf8String=Zt,Zt.NAME="UTF8String";let am=(()=>{class s extends jt{fromBuffer(e){this.valueBlock.value=k.U$.ToUtf16String(e),this.valueBlock.valueHexView=k._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(k.U$.FromUtf16String(e))}}return s.NAME="BmpStringValueBlock",s})();class Jt extends am{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}$.BmpString=Jt,Jt.NAME="BMPString";let om=(()=>{class s extends jt{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),i=new Uint8Array(t);for(let a=0;a<i.length;a+=4)i[a]=i[a+3],i[a+1]=i[a+2],i[a+2]=0,i[a+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,i=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let a=0;a<t;a++){const l=S(e.charCodeAt(a),8),h=new Uint8Array(l);if(h.length>4)continue;const d=4-h.length;for(let p=h.length-1;p>=0;p--)i[4*a+p+d]=h[p]}this.valueBlock.value=e}}return s.NAME="UniversalStringValueBlock",s})();class la extends om{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}$.UniversalString=la,la.NAME="UniversalString";class Rn extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}$.NumericString=Rn,Rn.NAME="NumericString";class Ht extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}$.PrintableString=Ht,Ht.NAME="PrintableString";class ca extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}$.TeletexString=ca,ca.NAME="TeletexString";class Zc extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}$.VideotexString=Zc,Zc.NAME="VideotexString";class xl extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}$.IA5String=xl,xl.NAME="IA5String";class Qc extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}$.GraphicString=Qc,Qc.NAME="GraphicString";class Bl extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}$.VisibleString=Bl,Bl.NAME="VisibleString";class eu extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}$.GeneralString=eu,eu.NAME="GeneralString";class tu extends jt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}$.CharacterString=tu,tu.NAME="CharacterString";class Vn extends Bl{constructor({value:r,valueDate:e,...t}={}){if(super(t),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,r){this.fromString(r),this.valueBlock.valueHexView=new Uint8Array(r.length);for(let i=0;i<r.length;i++)this.valueBlock.valueHexView[i]=r.charCodeAt(i)}e&&(this.fromDate(e),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(r){this.fromString(String.fromCharCode.apply(null,k._H.toUint8Array(r)))}toBuffer(){const r=this.toString(),e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return e}fromDate(r){this.year=r.getUTCFullYear(),this.month=r.getUTCMonth()+1,this.day=r.getUTCDate(),this.hour=r.getUTCHours(),this.minute=r.getUTCMinutes(),this.second=r.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(r){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(r);if(null===t)return void(this.error="Wrong input string for conversion");const i=parseInt(t[1],10);this.year=i>=50?1900+i:2e3+i,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(r="iso"){if("iso"===r){const e=new Array(7);return e[0]=me(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=me(this.month,2),e[2]=me(this.day,2),e[3]=me(this.hour,2),e[4]=me(this.minute,2),e[5]=me(this.second,2),e[6]="Z",e.join("")}return super.toString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}$.UTCTime=Vn,Vn.NAME="UTCTime";class dt extends Vn{constructor(r={}){var e;super(r),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(r){super.fromDate(r),this.millisecond=r.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(r){let l,e=!1,t="",i="",a=0,h=0,d=0;if("Z"===r[r.length-1])t=r.substring(0,r.length-1),e=!0;else{const D=new Number(r[r.length-1]);if(isNaN(D.valueOf()))throw new Error("Wrong input string for conversion");t=r}if(e){if(-1!==t.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==t.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let D=1,q=t.indexOf("+"),G="";if(-1===q&&(q=t.indexOf("-"),D=-1),-1!==q){if(G=t.substring(q+1),t=t.substring(0,q),2!==G.length&&4!==G.length)throw new Error("Wrong input string for conversion");let le=parseInt(G.substring(0,2),10);if(isNaN(le.valueOf()))throw new Error("Wrong input string for conversion");if(h=D*le,4===G.length){if(le=parseInt(G.substring(2,4),10),isNaN(le.valueOf()))throw new Error("Wrong input string for conversion");d=D*le}}}let p=t.indexOf(".");if(-1===p&&(p=t.indexOf(",")),-1!==p){const D=new Number(`0${t.substring(p)}`);if(isNaN(D.valueOf()))throw new Error("Wrong input string for conversion");a=D.valueOf(),i=t.substring(0,p)}else i=t;switch(!0){case 8===i.length:if(l=/(\d{4})(\d{2})(\d{2})/gi,-1!==p)throw new Error("Wrong input string for conversion");break;case 10===i.length:if(l=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==p){let D=60*a;this.minute=Math.floor(D),D=60*(D-this.minute),this.second=Math.floor(D),D=1e3*(D-this.second),this.millisecond=Math.floor(D)}break;case 12===i.length:if(l=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==p){let D=60*a;this.second=Math.floor(D),D=1e3*(D-this.second),this.millisecond=Math.floor(D)}break;case 14===i.length:l=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==p&&(this.millisecond=Math.floor(1e3*a));break;default:throw new Error("Wrong input string for conversion")}const B=l.exec(i);if(null===B)throw new Error("Wrong input string for conversion");for(let D=1;D<B.length;D++)switch(D){case 1:this.year=parseInt(B[D],10);break;case 2:this.month=parseInt(B[D],10);break;case 3:this.day=parseInt(B[D],10);break;case 4:this.hour=parseInt(B[D],10)+h;break;case 5:this.minute=parseInt(B[D],10)+d;break;case 6:this.second=parseInt(B[D],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===e){const D=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=D.getUTCFullYear(),this.month=D.getUTCMonth(),this.day=D.getUTCDay(),this.hour=D.getUTCHours(),this.minute=D.getUTCMinutes(),this.second=D.getUTCSeconds(),this.millisecond=D.getUTCMilliseconds()}}toString(r="iso"){if("iso"===r){const e=[];return e.push(me(this.year,4)),e.push(me(this.month,2)),e.push(me(this.day,2)),e.push(me(this.hour,2)),e.push(me(this.minute,2)),e.push(me(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(me(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(r)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}$.GeneralizedTime=dt,dt.NAME="GeneralizedTime";class yd extends Zt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}$.DATE=yd,yd.NAME="DATE";class Sd extends Zt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}$.TimeOfDay=Sd,Sd.NAME="TimeOfDay";class Ad extends Zt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}$.DateTime=Ad,Ad.NAME="DateTime";class Ed extends Zt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}$.Duration=Ed,Ed.NAME="Duration";class Nd extends Zt{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}$.TIME=Nd,Nd.NAME="TIME";class Fe{constructor({name:r=f,optional:e=!1}={}){this.name=r,this.optional=e}}class ft extends Fe{constructor({value:r=[],...e}={}){super(e),this.value=r}}class He extends Fe{constructor({value:r=new Fe,local:e=!1,...t}={}){super(t),this.value=r,this.local=e}}class Rl{constructor({data:r=se}={}){this.dataView=k._H.toUint8Array(r)}get data(){return this.dataView.slice().buffer}set data(r){this.dataView=k._H.toUint8Array(r)}fromBER(r,e,t){const i=e+t;return this.dataView=k._H.toUint8Array(r).subarray(e,i),i}toBER(r){return this.dataView.slice().buffer}}function pe(s,r,e){if(e instanceof ft){for(let a=0;a<e.value.length;a++)if(pe(s,r,e.value[a]).verified)return{verified:!0,result:s};{const a={verified:!1,result:{error:"Wrong values for Choice type"}};return e.hasOwnProperty(Ce)&&(a.name=e.name),a}}if(e instanceof Fe)return e.hasOwnProperty(Ce)&&(s[e.name]=r),{verified:!0,result:s};if(!(s instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("idBlock"in e))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("fromBER"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("toBER"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const t=e.idBlock.toBER(!1);if(0===t.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===e.idBlock.fromBER(t,0,t.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===e.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.tagClass!==r.idBlock.tagClass)return{verified:!1,result:s};if(!1===e.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.tagNumber!==r.idBlock.tagNumber)return{verified:!1,result:s};if(!1===e.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.isConstructed!==r.idBlock.isConstructed)return{verified:!1,result:s};if(!("isHexOnly"in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(e.idBlock.isHexOnly!==r.idBlock.isHexOnly)return{verified:!1,result:s};if(e.idBlock.isHexOnly){if(!(Ee in e.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const a=e.idBlock.valueHexView,l=r.idBlock.valueHexView;if(a.length!==l.length)return{verified:!1,result:s};for(let h=0;h<a.length;h++)if(a[h]!==l[1])return{verified:!1,result:s}}if(e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(s[e.name]=r)),e instanceof $.Constructed){let a=0,l={verified:!1,result:{error:"Unknown error"}},h=e.valueBlock.value.length;if(h>0&&e.valueBlock.value[0]instanceof He&&(h=r.valueBlock.value.length),0===h)return{verified:!0,result:s};if(0===r.valueBlock.value.length&&0!==e.valueBlock.value.length){let d=!0;for(let p=0;p<e.valueBlock.value.length;p++)d=d&&(e.valueBlock.value[p].optional||!1);return d?{verified:!0,result:s}:(e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),s.error="Inconsistent object length",{verified:!1,result:s})}for(let d=0;d<h;d++)if(d-a>=r.valueBlock.value.length){if(!1===e.valueBlock.value[d].optional){const p={verified:!1,result:s};return s.error="Inconsistent length between ASN.1 data and schema",e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],p.name=e.name)),p}}else if(e.valueBlock.value[0]instanceof He){if(l=pe(s,r.valueBlock.value[d],e.valueBlock.value[0].value),!1===l.verified){if(!e.valueBlock.value[0].optional)return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),l;a++}if(Ce in e.valueBlock.value[0]&&e.valueBlock.value[0].name.length>0){let p={};p="local"in e.valueBlock.value[0]&&e.valueBlock.value[0].local?r:s,typeof p[e.valueBlock.value[0].name]>"u"&&(p[e.valueBlock.value[0].name]=[]),p[e.valueBlock.value[0].name].push(r.valueBlock.value[d])}}else if(l=pe(s,r.valueBlock.value[d-a],e.valueBlock.value[d]),!1===l.verified){if(!e.valueBlock.value[d].optional)return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&delete s[e.name]),l;a++}if(!1===l.verified){const d={verified:!1,result:s};return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],d.name=e.name)),d}return{verified:!0,result:s}}if(e.primitiveSchema&&Ee in r.valueBlock){const a=it(r.valueBlock.valueHexView);if(-1===a.offset){const l={verified:!1,result:a.result};return e.name&&(e.name=e.name.replace(/^\s+|\s+$/g,f),e.name&&(delete s[e.name],l.name=e.name)),l}return pe(s,a.result,e.primitiveSchema)}return{verified:!0,result:s}}class wt{constructor(r={}){if("view"in r)this.fromUint8Array(r.view);else if("buffer"in r)this.fromArrayBuffer(r.buffer);else if("string"in r)this.fromString(r.string);else if("hexstring"in r)this.fromHexString(r.hexstring);else if("length"in r&&r.length>0){if(this.length=r.length,r.stub)for(let e=0;e<this._view.length;e++)this._view[e]=r.stub}else this.length=0}set buffer(r){this._buffer=r,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(r){this._buffer=new ArrayBuffer(r.length),this._view=new Uint8Array(this._buffer),this._view.set(r)}get view(){return this._view}get length(){return this.view.byteLength}set length(r){this._buffer=new ArrayBuffer(r),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(r){this._buffer=r,this._view=new Uint8Array(this._buffer)}fromUint8Array(r){this.fromArrayBuffer(new Uint8Array(r).buffer)}fromString(r){const e=r.length;this.length=e;for(let t=0;t<e;t++)this.view[t]=r.charCodeAt(t)}toString(r=0,e=this.view.length-r){let t="";(r>=this.view.length||r<0)&&(r=0),(e>=this.view.length||e<0)&&(e=this.view.length-r);for(let i=r;i<r+e;i++)t+=String.fromCharCode(this.view[i]);return t}fromHexString(r){const e=r.length;this.buffer=new ArrayBuffer(e>>1),this.view=new Uint8Array(this.buffer);const t=new Map;t.set("0",0),t.set("1",1),t.set("2",2),t.set("3",3),t.set("4",4),t.set("5",5),t.set("6",6),t.set("7",7),t.set("8",8),t.set("9",9),t.set("A",10),t.set("a",10),t.set("B",11),t.set("b",11),t.set("C",12),t.set("c",12),t.set("D",13),t.set("d",13),t.set("E",14),t.set("e",14),t.set("F",15),t.set("f",15);let i=0,a=0;for(let l=0;l<e;l++)l%2?(a|=t.get(r.charAt(l)),this.view[i]=a,i++):a=t.get(r.charAt(l))<<4}toHexString(r=0,e=this.view.length-r){let t="";(r>=this.view.length||r<0)&&(r=0),(e>=this.view.length||e<0)&&(e=this.view.length-r);for(let i=r;i<r+e;i++){const a=this.view[i].toString(16).toUpperCase();t=t+(1==a.length?"0":"")+a}return t}copy(r=0,e=this.length-r){if(!r&&!this.length)return new wt;if(r<0||r>this.length-1)throw new Error(`Wrong start position: ${r}`);return new wt({buffer:this._buffer.slice(r,r+e)})}slice(r=0,e=this.length){if(!r&&!this.length)return new wt;if(r<0||r>this.length-1)throw new Error(`Wrong start position: ${r}`);return new wt({buffer:this._buffer.slice(r,e)})}realloc(r){const e=new ArrayBuffer(r);new Uint8Array(e).set(r>this._view.length?this._view:new Uint8Array(this._buffer,0,r)),this._buffer=e,this._view=new Uint8Array(this._buffer)}append(r){const e=this.length,t=r.length,i=r._view.subarray();this.realloc(e+t),this._view.set(i,e)}insert(r,e=0,t=this.length-e){return!(e>this.length-1||(t>this.length-e&&(t=this.length-e),t>r.length&&(t=r.length),this._view.set(t==r.length?r._view:r._view.subarray(0,t),e),0))}isEqual(r){if(this.length!=r.length)return!1;for(let e=0;e<r.length;e++)if(this.view[e]!=r.view[e])return!1;return!0}isEqualView(r){if(r.length!=this.view.length)return!1;for(let e=0;e<r.length;e++)if(this.view[e]!=r[e])return!1;return!0}findPattern(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i),d=r.length;if(d>l)return-1;const p=[];for(let B=0;B<d;B++)p.push(r.view[B]);for(let B=0;B<=l-d;B++){let D=!0;const q=h?a-d-B:a+B;for(let G=0;G<d;G++)if(this.view[G+q]!=p[G]){D=!1;break}if(D)return h?a-d-B:a+d+B}return-1}findFirstIn(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i),d={id:-1,position:h?0:a+l,length:0};for(let p=0;p<r.length;p++){const B=this.findPattern(r[p],a,l,h);if(-1!=B){let D=!1;const q=r[p].length;h?B-q>=d.position-d.length&&(D=!0):B-q<=d.position-d.length&&(D=!0),D&&(d.position=B,d.id=p,d.length=q)}}return d}findAllIn(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={id:-1,position:i};for(;;){const d=h.position;if(h=this.findFirstIn(r,h.position,a),-1==h.id)break;a-=h.position-d,l.push({id:h.id,position:h.position})}return l}findAllPatternIn(r,e,t){const{start:i,length:a}=this.prepareFindParameters(e,t),l=[],h=r.length;if(h>a)return-1;const d=Array.from(r.view);for(let p=0;p<=a-h;p++){let B=!0;const D=i+p;for(let q=0;q<h;q++)if(this.view[q+D]!=d[q]){B=!1;break}B&&(l.push(i+h+p),p+=h-1)}return l}findFirstNotIn(r,e,t,i){let{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);const d={left:{id:-1,position:a},right:{id:-1,position:0},value:new wt};let p=l;for(;p>0;){if(d.right=this.findFirstIn(r,h?a-l+p:a+l-p,p,h),-1==d.right.id){l=p,h?a-=l:a=d.left.position,d.value=new wt({buffer:this._buffer.slice(a,a+l)});break}if(d.right.position!=(h?d.left.position-r[d.right.id].length:d.left.position+r[d.right.id].length)){h?(a=d.right.position+r[d.right.id].length,l=d.left.position-d.right.position-r[d.right.id].length):(a=d.left.position,l=d.right.position-d.left.position-r[d.right.id].length),d.value=new wt({buffer:this._buffer.slice(a,a+l)});break}d.left=d.right,p-=r[d.right.id].length}if(h){const B=d.right;d.right=d.left,d.left=B}return d}findAllNotIn(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={left:{id:-1,position:i},right:{id:-1,position:i},value:new wt};do{const d=h.right.position;h=this.findFirstNotIn(r,h.right.position,a),a-=h.right.position-d,l.push({left:{id:h.left.id,position:h.left.position},right:{id:h.right.id,position:h.right.position},value:h.value})}while(-1!=h.right.id);return l}findFirstSequence(r,e,t,i){let{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);const d=this.skipNotPatterns(r,a,l,h);if(-1==d)return{position:-1,value:new wt};const p=this.skipPatterns(r,d,l-(h?a-d:d-a),h);return h?(a=p,l=d-p):(a=d,l=p-d),{position:p,value:new wt({buffer:this._buffer.slice(a,a+l)})}}findAllSequences(r,e,t){let{start:i,length:a}=this.prepareFindParameters(e,t);const l=[];let h={position:i,value:new wt};do{const d=h.position;h=this.findFirstSequence(r,h.position,a),-1!=h.position&&(a-=h.position-d,l.push({position:h.position,value:h.value}))}while(-1!=h.position);return l}findPairedPatterns(r,e,t,i){const a=[];if(r.isEqual(e))return a;const{start:l,length:h}=this.prepareFindParameters(t,i);let d=0;const p=this.findAllPatternIn(r,l,h);if(!Array.isArray(p)||0==p.length)return a;const B=this.findAllPatternIn(e,l,h);if(!Array.isArray(B)||0==B.length)return a;for(;d<p.length&&0!=B.length;)if(p[0]!=B[0]){if(p[d]>B[0])break;for(;p[d]<B[0]&&(d++,!(d>=p.length)););a.push({left:p[d-1],right:B[0]}),p.splice(d-1,1),B.splice(0,1),d=0}else a.push({left:p[0],right:B[0]}),p.splice(0,1),B.splice(0,1);return a.sort((D,q)=>D.left-q.left),a}findPairedArrays(r,e,t,i){const{start:a,length:l}=this.prepareFindParameters(t,i),h=[];let d=0;const p=this.findAllIn(r,a,l);if(0==p.length)return h;const B=this.findAllIn(e,a,l);if(0==B.length)return h;for(;d<p.length&&0!=B.length;)if(p[0].position!=B[0].position){if(p[d].position>B[0].position)break;for(;p[d].position<B[0].position&&(d++,!(d>=p.length)););h.push({left:p[d-1],right:B[0]}),p.splice(d-1,1),B.splice(0,1),d=0}else h.push({left:p[0],right:B[0]}),p.splice(0,1),B.splice(0,1);return h.sort((D,q)=>D.left.position-q.left.position),h}replacePattern(r,e,t,i,a=null){let h,l=[];const d={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:p,length:B}=this.prepareFindParameters(t,i);if(null==a){if(l=this.findAllIn([r],p,B),0==l.length)return d}else l=a;d.searchPatternPositions.push(...Array.from(l,le=>le.position));const D=r.length-e.length,q=new ArrayBuffer(this.view.length-l.length*D),G=new Uint8Array(q);for(G.set(new Uint8Array(this.buffer,0,p)),h=0;h<l.length;h++){const le=0==h?p:l[h-1].position;G.set(new Uint8Array(this.buffer,le,l[h].position-r.length-le),le-h*D),G.set(e.view,l[h].position-r.length-h*D),d.replacePatternPositions.push(l[h].position-r.length-h*D)}return h--,G.set(new Uint8Array(this.buffer,l[h].position,this.length-l[h].position),l[h].position-r.length+e.length-h*D),this.buffer=q,this.view=new Uint8Array(this.buffer),d.status=1,d}skipPatterns(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);let d=a;for(let p=0;p<r.length;p++){const B=r[p].length,D=h?d-B:d;let q=!0;for(let G=0;G<B;G++)if(this.view[G+D]!=r[p].view[G]){q=!1;break}if(q)if(p=-1,h){if(d-=B,d<=0)return d}else if(d+=B,d>=a+l)return d}return d}skipNotPatterns(r,e,t,i){const{start:a,length:l,backward:h}=this.prepareFindParameters(e,t,i);let d=-1;for(let p=0;p<l;p++){for(let B=0;B<r.length;B++){const D=r[B].length,q=h?a-p-D:a+p;let G=!0;for(let le=0;le<D;le++)if(this.view[le+q]!=r[B].view[le]){G=!1;break}if(G){d=h?a-p:a+p;break}}if(-1!=d)break}return d}prepareFindParameters(r=null,e=null,t=!1){return null===r&&(r=t?this.length:0),r>this.length&&(r=this.length),t?(null===e&&(e=r),e>r&&(e=r)):(null===e&&(e=this.length-r),e>this.length-r&&(e=this.length-r)),{start:r,length:e,backward:t}}}let ua=(()=>{class s{constructor(e={}){this._stream=new wt,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new wt({view:e.view}):"buffer"in e?new wt({buffer:e.buffer}):"string"in e?new wt({string:e.string}):"hexstring"in e?new wt({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new wt,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(null==t||t>this.length)&&(t=this.length);const i=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==i)return i;if(this.backward){if(i<this.start-e.length-t)return-1}else if(i>this.start+e.length+t)return-1;return this.start=i,i}findFirstIn(e,t=null){(null==t||t>this.length)&&(t=this.length);const i=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==i.id)return i;if(this.backward){if(i.position<this.start-e[i.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(i.position>this.start+e[i.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=i.position,i}findAllIn(e){return this.stream.findAllIn(e,this.backward?this.start-this.length:this.start,this.length)}findFirstNotIn(e,t=null){(null==t||t>this._length)&&(t=this._length);const i=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==i.left.id&&-1==i.right.id)return i;if(this.backward){if(-1!=i.right.id&&i.right.position<this._start-e[i.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new wt}}else if(-1!=i.left.id&&i.left.position>this._start+e[i.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new wt};return this.start=this.backward?-1==i.left.id?0:i.left.position:-1==i.right.id?this._start+this._length:i.right.position,i}findAllNotIn(e){return this._stream.findAllNotIn(e,this.backward?this._start-this._length:this._start,this._length)}findFirstSequence(e,t=null,i=null){(null==t||t>this._length)&&(t=this._length),(null==i||i>t)&&(i=t);const a=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==a.value.length)return a;if(this.backward){if(a.position<this._start-a.value.length-i)return{position:-1,value:new wt}}else if(a.position>this._start+a.value.length+i)return{position:-1,value:new wt};return this.start=a.position,a}findAllSequences(e){return this.stream.findAllSequences(e,this.backward?this.start-this.length:this.start,this.length)}findPairedPatterns(e,t,i=null){(null==i||i>this.length)&&(i=this.length);const l=this.stream.findPairedPatterns(e,t,this.backward?this.start-this.length:this.start,this.length);if(l.length)if(this.backward){if(l[0].right<this.start-t.length-i)return[]}else if(l[0].left>this.start+e.length+i)return[];return l}findPairedArrays(e,t,i=null){(null==i||i>this.length)&&(i=this.length);const l=this.stream.findPairedArrays(e,t,this.backward?this.start-this.length:this.start,this.length);if(l.length)if(this.backward){if(l[0].right.position<this.start-t[l[0].right.id].length-i)return[]}else if(l[0].left.position>this.start+e[l[0].left.id].length+i)return[];return l}replacePattern(e,t){return this.stream.replacePattern(e,t,this.backward?this.start-this.length:this.start,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),i=new Uint8Array(t.buffer);this.stream.view[this._start]=i[1],this._stream.view[this._start+1]=i[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[2],this._stream.view[this._start+1]=i[1],this._stream.view[this._start+2]=i[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[3],this._stream.view[this._start+1]=i[2],this._stream.view[this._start+2]=i[1],this._stream.view[this._start+3]=i[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[1],this._stream.view[this._start+1]=i[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),i=new Uint8Array(t.buffer);this._stream.view[this._start]=i[3],this._stream.view[this._start+1]=i[2],this._stream.view[this._start+2]=i[1],this._stream.view[this._start+3]=i[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);let i;if(this._length<e&&(e=this._length),this.backward){const a=this._stream.view.subarray(this._length-e,this._length);i=new Uint8Array(e);for(let l=0;l<e;l++)i[e-1-l]=a[l]}else i=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),i}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),i=32768;return t&i?-(i-(t^i)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),i=2147483648;return t&i?-(i-(t^i)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+s.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}return s.APPEND_BLOCK=1e3,s})();function iu(s,...r){if(!function um(s){return s instanceof Uint8Array||null!=s&&"object"==typeof s&&"Uint8Array"===s.constructor.name}(s))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(s.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${s.length}`)}function nu(s,r=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(r&&s.finished)throw new Error("Hash#digest() has already been called")}const ru=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),Qt=(s,r)=>s<<32-r|s>>>r,au=(s,r)=>s<<r|s>>>32-r>>>0;function Vl(s){return"string"==typeof s&&(s=function pm(s){if("string"!=typeof s)throw new Error("utf8ToBytes expected string, got "+typeof s);return new Uint8Array((new TextEncoder).encode(s))}(s)),iu(s),s}new Uint8Array(new Uint32Array([287454020]).buffer);class gm{clone(){return this._cloneInto()}}function Ol(s){const r=t=>s().update(Vl(t)).digest(),e=s();return r.outputLen=e.outputLen,r.blockLen=e.blockLen,r.create=()=>s(),r}const xd=(s,r,e)=>s&r^~s&e,Bd=(s,r,e)=>s&r^s&e^r&e;class lu extends gm{constructor(r,e,t,i){super(),this.blockLen=r,this.outputLen=e,this.padOffset=t,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=ru(this.buffer)}update(r){nu(this);const{view:e,buffer:t,blockLen:i}=this,a=(r=Vl(r)).length;for(let l=0;l<a;){const h=Math.min(i-this.pos,a-l);if(h!==i)t.set(r.subarray(l,l+h),this.pos),this.pos+=h,l+=h,this.pos===i&&(this.process(e,0),this.pos=0);else{const d=ru(r);for(;i<=a-l;l+=i)this.process(d,l)}}return this.length+=r.length,this.roundClean(),this}digestInto(r){nu(this),function Id(s,r){iu(s);const e=r.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}(r,this),this.finished=!0;const{buffer:e,view:t,blockLen:i,isLE:a}=this;let{pos:l}=this;e[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(t,0),l=0);for(let D=l;D<i;D++)e[D]=0;(function wm(s,r,e,t){if("function"==typeof s.setBigUint64)return s.setBigUint64(r,e,t);const i=BigInt(32),a=BigInt(4294967295),l=Number(e>>i&a),h=Number(e&a),p=t?0:4;s.setUint32(r+(t?4:0),l,t),s.setUint32(r+p,h,t)})(t,i-8,BigInt(8*this.length),a),this.process(t,0);const h=ru(r),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=d/4,B=this.get();if(p>B.length)throw new Error("_sha2: outputLen bigger than state");for(let D=0;D<p;D++)h.setUint32(4*D,B[D],a)}digest(){const{buffer:r,outputLen:e}=this;this.digestInto(r);const t=r.slice(0,e);return this.destroy(),t}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:e,buffer:t,length:i,finished:a,destroyed:l,pos:h}=this;return r.length=i,r.pos=h,r.finished=a,r.destroyed=l,i%e&&r.buffer.set(t),r}}const ha=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Ss=new Uint32Array(80);class ym extends lu{constructor(){super(64,20,8,!1),this.A=0|ha[0],this.B=0|ha[1],this.C=0|ha[2],this.D=0|ha[3],this.E=0|ha[4]}get(){const{A:r,B:e,C:t,D:i,E:a}=this;return[r,e,t,i,a]}set(r,e,t,i,a){this.A=0|r,this.B=0|e,this.C=0|t,this.D=0|i,this.E=0|a}process(r,e){for(let d=0;d<16;d++,e+=4)Ss[d]=r.getUint32(e,!1);for(let d=16;d<80;d++)Ss[d]=au(Ss[d-3]^Ss[d-8]^Ss[d-14]^Ss[d-16],1);let{A:t,B:i,C:a,D:l,E:h}=this;for(let d=0;d<80;d++){let p,B;d<20?(p=xd(i,a,l),B=1518500249):d<40?(p=i^a^l,B=1859775393):d<60?(p=Bd(i,a,l),B=2400959708):(p=i^a^l,B=3395469782);const D=au(t,5)+p+h+B+Ss[d]|0;h=l,l=a,a=au(i,30),i=t,t=D}t=t+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,h=h+this.E|0,this.set(t,i,a,l,h)}roundClean(){Ss.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}const bm=Ol(()=>new ym),Sm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),As=new Uint32Array(64);class Rd extends lu{constructor(){super(64,32,8,!1),this.A=0|_s[0],this.B=0|_s[1],this.C=0|_s[2],this.D=0|_s[3],this.E=0|_s[4],this.F=0|_s[5],this.G=0|_s[6],this.H=0|_s[7]}get(){const{A:r,B:e,C:t,D:i,E:a,F:l,G:h,H:d}=this;return[r,e,t,i,a,l,h,d]}set(r,e,t,i,a,l,h,d){this.A=0|r,this.B=0|e,this.C=0|t,this.D=0|i,this.E=0|a,this.F=0|l,this.G=0|h,this.H=0|d}process(r,e){for(let D=0;D<16;D++,e+=4)As[D]=r.getUint32(e,!1);for(let D=16;D<64;D++){const q=As[D-15],G=As[D-2],le=Qt(q,7)^Qt(q,18)^q>>>3,ke=Qt(G,17)^Qt(G,19)^G>>>10;As[D]=ke+As[D-7]+le+As[D-16]|0}let{A:t,B:i,C:a,D:l,E:h,F:d,G:p,H:B}=this;for(let D=0;D<64;D++){const G=B+(Qt(h,6)^Qt(h,11)^Qt(h,25))+xd(h,d,p)+Sm[D]+As[D]|0,ke=(Qt(t,2)^Qt(t,13)^Qt(t,22))+Bd(t,i,a)|0;B=p,p=d,d=h,h=l+G|0,l=a,a=i,i=t,t=G+ke|0}t=t+this.A|0,i=i+this.B|0,a=a+this.C|0,l=l+this.D|0,h=h+this.E|0,d=d+this.F|0,p=p+this.G|0,B=B+this.H|0,this.set(t,i,a,l,h,d,p,B)}roundClean(){As.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const _m=Ol(()=>new Rd),Pl=BigInt(2**32-1),cu=BigInt(32);function Vd(s,r=!1){return r?{h:Number(s&Pl),l:Number(s>>cu&Pl)}:{h:0|Number(s>>cu&Pl),l:0|Number(s&Pl)}}const Je_split=function Am(s,r=!1){let e=new Uint32Array(s.length),t=new Uint32Array(s.length);for(let i=0;i<s.length;i++){const{h:a,l}=Vd(s[i],r);[e[i],t[i]]=[a,l]}return[e,t]},Je_shrSH=(s,r,e)=>s>>>e,Je_shrSL=(s,r,e)=>s<<32-e|r>>>e,Je_rotrSH=(s,r,e)=>s>>>e|r<<32-e,Je_rotrSL=(s,r,e)=>s<<32-e|r>>>e,Je_rotrBH=(s,r,e)=>s<<64-e|r>>>e-32,Je_rotrBL=(s,r,e)=>s>>>e-32|r<<64-e,Je_add=function Mm(s,r,e,t){const i=(r>>>0)+(t>>>0);return{h:s+e+(i/2**32|0)|0,l:0|i}},Je_add3L=(s,r,e)=>(s>>>0)+(r>>>0)+(e>>>0),Je_add3H=(s,r,e,t)=>r+e+t+(s/2**32|0)|0,Je_add4L=(s,r,e,t)=>(s>>>0)+(r>>>0)+(e>>>0)+(t>>>0),Je_add4H=(s,r,e,t,i)=>r+e+t+i+(s/2**32|0)|0,Je_add5H=(s,r,e,t,i,a)=>r+e+t+i+a+(s/2**32|0)|0,Je_add5L=(s,r,e,t,i)=>(s>>>0)+(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),[Um,Fm]=Je_split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),ks=new Uint32Array(80),Es=new Uint32Array(80);class Dl extends lu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:e,Bh:t,Bl:i,Ch:a,Cl:l,Dh:h,Dl:d,Eh:p,El:B,Fh:D,Fl:q,Gh:G,Gl:le,Hh:ke,Hl:ye}=this;return[r,e,t,i,a,l,h,d,p,B,D,q,G,le,ke,ye]}set(r,e,t,i,a,l,h,d,p,B,D,q,G,le,ke,ye){this.Ah=0|r,this.Al=0|e,this.Bh=0|t,this.Bl=0|i,this.Ch=0|a,this.Cl=0|l,this.Dh=0|h,this.Dl=0|d,this.Eh=0|p,this.El=0|B,this.Fh=0|D,this.Fl=0|q,this.Gh=0|G,this.Gl=0|le,this.Hh=0|ke,this.Hl=0|ye}process(r,e){for(let he=0;he<16;he++,e+=4)ks[he]=r.getUint32(e),Es[he]=r.getUint32(e+=4);for(let he=16;he<80;he++){const fe=0|ks[he-15],we=0|Es[he-15],Ae=Je_rotrSH(fe,we,1)^Je_rotrSH(fe,we,8)^Je_shrSH(fe,we,7),Ne=Je_rotrSL(fe,we,1)^Je_rotrSL(fe,we,8)^Je_shrSL(fe,we,7),Te=0|ks[he-2],Me=0|Es[he-2],ze=Je_rotrSH(Te,Me,19)^Je_rotrBH(Te,Me,61)^Je_shrSH(Te,Me,6),St=Je_rotrSL(Te,Me,19)^Je_rotrBL(Te,Me,61)^Je_shrSL(Te,Me,6),We=Je_add4L(Ne,St,Es[he-7],Es[he-16]),ct=Je_add4H(We,Ae,ze,ks[he-7],ks[he-16]);ks[he]=0|ct,Es[he]=0|We}let{Ah:t,Al:i,Bh:a,Bl:l,Ch:h,Cl:d,Dh:p,Dl:B,Eh:D,El:q,Fh:G,Fl:le,Gh:ke,Gl:ye,Hh:ae,Hl:be}=this;for(let he=0;he<80;he++){const fe=Je_rotrSH(D,q,14)^Je_rotrSH(D,q,18)^Je_rotrBH(D,q,41),we=Je_rotrSL(D,q,14)^Je_rotrSL(D,q,18)^Je_rotrBL(D,q,41),Ae=D&G^~D&ke,Te=Je_add5L(be,we,q&le^~q&ye,Fm[he],Es[he]),Me=Je_add5H(Te,ae,fe,Ae,Um[he],ks[he]),ze=0|Te,St=Je_rotrSH(t,i,28)^Je_rotrBH(t,i,34)^Je_rotrBH(t,i,39),We=Je_rotrSL(t,i,28)^Je_rotrBL(t,i,34)^Je_rotrBL(t,i,39),ct=t&a^t&h^a&h,Lt=i&l^i&d^l&d;ae=0|ke,be=0|ye,ke=0|G,ye=0|le,G=0|D,le=0|q,({h:D,l:q}=Je_add(0|p,0|B,0|Me,0|ze)),p=0|h,B=0|d,h=0|a,d=0|l,a=0|t,l=0|i;const Vt=Je_add3L(ze,We,Lt);t=Je_add3H(Vt,Me,St,ct),i=0|Vt}({h:t,l:i}=Je_add(0|this.Ah,0|this.Al,0|t,0|i)),({h:a,l}=Je_add(0|this.Bh,0|this.Bl,0|a,0|l)),({h,l:d}=Je_add(0|this.Ch,0|this.Cl,0|h,0|d)),({h:p,l:B}=Je_add(0|this.Dh,0|this.Dl,0|p,0|B)),({h:D,l:q}=Je_add(0|this.Eh,0|this.El,0|D,0|q)),({h:G,l:le}=Je_add(0|this.Fh,0|this.Fl,0|G,0|le)),({h:ke,l:ye}=Je_add(0|this.Gh,0|this.Gl,0|ke,0|ye)),({h:ae,l:be}=Je_add(0|this.Hh,0|this.Hl,0|ae,0|be)),this.set(t,i,a,l,h,d,p,B,D,q,G,le,ke,ye,ae,be)}roundClean(){ks.fill(0),Es.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Lm extends Dl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const jm=Ol(()=>new Dl),Hm=Ol(()=>new Lm),kt=new ArrayBuffer(0),y="";let lt=(()=>{class s extends TypeError{constructor(){super(...arguments),this.name=s.NAME}static isType(e,t){if("string"==typeof t){if("Array"===t&&Array.isArray(e))return!0;if("ArrayBuffer"===t&&e instanceof ArrayBuffer)return!0;if("ArrayBufferView"===t&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...i){for(const l of i)if(this.isType(e,l))return;const a=i.map(l=>l instanceof Function&&"name"in l?l.name:`${l}`);throw new s(`Parameter '${t}' is not of type ${a.length>1?`(${a.join(" or ")})`:a[0]}`)}}return s.NAME="ArgumentError",s})(),Qe=(()=>{class s extends TypeError{static assert(...e){let i,a,t=null;"string"==typeof e[0]?(t=e[0],i=e[1],a=e.slice(2)):(i=e[0],a=e.slice(1)),lt.assert(i,"parameters","object");for(const l of a)if(null==i[l])throw new s(l,t)}static assertEmpty(e,t,i){if(null==e)throw new s(t,i)}constructor(e,t=null,i){super(),this.name=s.NAME,this.field=e,t&&(this.target=t),this.message=i||`Absent mandatory parameter '${e}' ${t?` in '${t}'`:y}`}}return s.NAME="ParameterError",s})();class de extends Error{static assertSchema(r,e){if(!r.verified)throw new Error(`Object's schema was not verified against input data for ${e}`)}static assert(r,e){if(-1===r.offset)throw new de(`Error during parsing of ASN.1 data. Data is not correct for '${e}'.`)}constructor(r){super(r),this.name="AsnError"}}let ge=(()=>{class s{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=ut(e);de.assert(t,this.name);try{return new this({schema:t.result})}catch{throw new de(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return k.U$.ToString(t.toBER(),e)}}return s.CLASS_NAME="PkiObject",s})();function Cs(s){let r=!1,e=y;const t=s.trim();for(let i=0;i<t.length;i++)32===t.charCodeAt(i)?!1===r&&(r=!0):(r&&(e+=" ",r=!1),e+=t[i]);return e.toLowerCase()}const da="type",uu="value";let hu=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,da,s.defaultValues(da)),this.value=o(e,uu,s.defaultValues(uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case da:return y;case uu:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.type||y}),new Fe({name:t.value||y})]})}fromSchema(e){R(e,[da,"typeValue"]);const t=pe(e,e,s.schema({names:{type:da,value:"typeValue"}}));de.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new j({value:[new xe({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return e.value=0!==Object.keys(this.value).length?this.value.toJSON():this.value,e}isEqual(e){const t=[Zt.blockName(),Jt.blockName(),la.blockName(),Rn.blockName(),Ht.blockName(),ca.blockName(),Zc.blockName(),xl.blockName(),Qc.blockName(),Bl.blockName(),eu.blockName(),tu.blockName()];if(e instanceof ArrayBuffer)return k._H.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===s.blockName()){if(this.type!==e.type)return!1;const i=[!1,!1],a=this.value.constructor.blockName();for(const h of t)a===h&&(i[0]=!0),e.value.constructor.blockName()===h&&(i[1]=!0);if(i[0]!==i[1])return!1;if(i[0]&&i[1]){const h=Cs(this.value.valueBlock.value),d=Cs(e.value.valueBlock.value);if(0!==h.localeCompare(d))return!1}else if(!k._H.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}return s.CLASS_NAME="AttributeTypeAndValue",s})();const vi="typesAndValues",Ml="valueBeforeDecode";let mt=(()=>{class s extends ge{constructor(e={}){super(),this.typesAndValues=o(e,vi,s.defaultValues(vi)),this.valueBeforeDecode=o(e,Ml,s.defaultValues(Ml)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vi:return[];case Ml:return kt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vi:return 0===t.length;case Ml:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.repeatedSequence||y,value:new At({value:[new He({name:t.repeatedSet||y,value:hu.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){R(e,["RDN",vi]);const t=pe(e,e,s.schema({names:{blockName:"RDN",repeatedSet:vi}}));de.assertSchema(t,this.className),vi in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,i=>new hu({schema:i}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(0===this.valueBeforeDecode.byteLength)return new j({value:[new At({value:Array.from(this.typesAndValues,t=>t.toSchema())})]});const e=ut(this.valueBeforeDecode);if(de.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof j))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof s){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,i]of this.typesAndValues.entries())if(!1===i.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&Z(this.valueBeforeDecode,e)}}return s.CLASS_NAME="RelativeDistinguishedNames",s})();const fa="type",ma="value";function $m(s={},r=!1){const e=o(s,"names",{});return new j({optional:r,value:[new X({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:e.country_name||y,value:[new ft({value:[new Rn,new Ht]})]}),new X({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:e.administration_domain_name||y,value:[new ft({value:[new Rn,new Ht]})]}),new Be({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:e.network_address||y,isHexOnly:!0}),new Be({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:e.terminal_identifier||y,isHexOnly:!0}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:e.private_domain_name||y,value:[new ft({value:[new Rn,new Ht]})]}),new Be({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:e.organization_name||y,isHexOnly:!0}),new Be({optional:!0,name:e.numeric_user_identifier||y,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new X({optional:!0,name:e.personal_name||y,idBlock:{tagClass:3,tagNumber:5},value:[new Be({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Be({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new Be({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new Be({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new X({optional:!0,name:e.organizational_unit_names||y,idBlock:{tagClass:3,tagNumber:6},value:[new He({value:new Ht})]})]})}function Km(s=!1){return new j({optional:s,value:[new Ht,new Ht]})}function Gm(s=!1){return new At({optional:s,value:[new Be({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Fe]})]})}let bt=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,fa,s.defaultValues(fa)),this.value=o(e,ma,s.defaultValues(ma)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fa:return 9;case ma:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fa:return t===s.defaultValues(e);case ma:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new ft({value:[new X({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||y,value:[new xe,new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe]})]}),new Be({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:1}}),new Be({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:2}}),new X({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||y,value:[$m(t.builtInStandardAttributes||{},!1),Km(!0),Gm(!0)]}),new X({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||y,value:[mt.schema(t.directoryName||{})]}),new X({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||y,value:[new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ft({value:[new ca,new Ht,new la,new Zt,new Jt]})]}),new X({idBlock:{tagClass:3,tagNumber:1},value:[new ft({value:[new ca,new Ht,new la,new Zt,new Jt]})]})]}),new Be({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:6}}),new Be({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:7}}),new Be({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){R(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=pe(e,e,s.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(de.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=t.result.blockName;break;case 1:case 2:case 6:{const i=t.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=22;const l=ut(i.toBER(!1));de.assert(l,"GeneralName value"),this.value=l.result.valueBlock.value}break;case 4:this.value=new mt({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new ve({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const i=t.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;const l=ut(i.toBER(!1));de.assert(l,"GeneralName registeredID"),this.value=l.result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new X({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new xl({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new X({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new xe({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return s.schema()}}toJSON(){const e={type:this.type,value:y};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}return s.CLASS_NAME="GeneralName",s})();const pa="accessMethod",ga="accessLocation",Jm=[pa,ga];let Pd=(()=>{class s extends ge{constructor(e={}){super(),this.accessMethod=o(e,pa,s.defaultValues(pa)),this.accessLocation=o(e,ga,s.defaultValues(ga)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pa:return y;case ga:return new bt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.accessMethod||y}),bt.schema(t.accessLocation||{})]})}fromSchema(e){R(e,Jm);const t=pe(e,e,s.schema({names:{accessMethod:pa,accessLocation:{names:{blockName:ga}}}}));de.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new bt({schema:t.result.accessLocation})}toSchema(){return new j({value:[new xe({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}return s.CLASS_NAME="AccessDescription",s})();const Ns="seconds",Is="millis",Ts="micros";let On=(()=>{class s extends ge{constructor(e={}){super(),Ns in e&&(this.seconds=o(e,Ns,s.defaultValues(Ns))),Is in e&&(this.millis=o(e,Is,s.defaultValues(Is))),Ts in e&&(this.micros=o(e,Ts,s.defaultValues(Ts))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ns:case Is:case Ts:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ns:case Is:case Ts:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,optional:!0,value:[new Q({optional:!0,name:t.seconds||y}),new Be({name:t.millis||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Be({name:t.micros||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){R(e,[Ns,Is,Ts]);const t=pe(e,e,s.schema({names:{seconds:Ns,millis:Is,micros:Ts}}));if(de.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const i=new Q({valueHex:t.result.millis.valueBlock.valueHex});this.millis=i.valueBlock.valueDec}if("micros"in t.result){const i=new Q({valueHex:t.result.micros.valueBlock.valueHex});this.micros=i.valueBlock.valueDec}}toSchema(){const e=[];if(void 0!==this.seconds&&e.push(new Q({value:this.seconds})),void 0!==this.millis){const t=new Q({value:this.millis});e.push(new Be({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(void 0!==this.micros){const t=new Q({value:this.micros});e.push(new Be({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new j({value:e})}toJSON(){const e={};return void 0!==this.seconds&&(e.seconds=this.seconds),void 0!==this.millis&&(e.millis=this.millis),void 0!==this.micros&&(e.micros=this.micros),e}}return s.CLASS_NAME="Accuracy",s})();const Ul="algorithmId",va="algorithmParams",Dd="algorithm",du="params",qm=[Dd,du];let te=(()=>{class s extends ge{constructor(e={}){super(),this.algorithmId=o(e,Ul,s.defaultValues(Ul)),va in e&&(this.algorithmParams=o(e,va,s.defaultValues(va))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ul:return y;case va:return new Fe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ul:return t===y;case va:return t instanceof Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,optional:t.optional||!1,value:[new xe({name:t.algorithmIdentifier||y}),new Fe({name:t.algorithmParams||y,optional:!0})]})}fromSchema(e){R(e,qm);const t=pe(e,e,s.schema({names:{algorithmIdentifier:Dd,algorithmParams:du}}));de.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),du in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new xe({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof Fe)&&e.push(this.algorithmParams),new j({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof Fe)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof s&&this.algorithmId===e.algorithmId&&(this.algorithmParams?!!e.algorithmParams&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!e.algorithmParams)}}return s.CLASS_NAME="AlgorithmIdentifier",s})();const Pn="altNames",zm=[Pn];let Md=(()=>{class s extends ge{constructor(e={}){super(),this.altNames=o(e,Pn,s.defaultValues(Pn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Pn?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.altNames||y,value:bt.schema()})]})}fromSchema(e){R(e,zm);const t=pe(e,e,s.schema({names:{altNames:Pn}}));de.assertSchema(t,this.className),Pn in t.result&&(this.altNames=Array.from(t.result.altNames,i=>new bt({schema:i})))}toSchema(){return new j({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}return s.CLASS_NAME="AltName",s})();const Dn="type",Mn="values",Wm=[Dn,Mn];let et=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,Dn,s.defaultValues(Dn)),this.values=o(e,Mn,s.defaultValues(Mn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dn:return y;case Mn:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dn:return t===y;case Mn:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.type||y}),new At({name:t.setName||y,value:[new He({name:t.values||y,value:new Fe})]})]})}fromSchema(e){R(e,Wm);const t=pe(e,e,s.schema({names:{type:Dn,values:Mn}}));de.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new j({value:[new xe({value:this.type}),new At({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}return s.CLASS_NAME="Attribute",s})();const wa="notBeforeTime",ya="notAfterTime",Xm=[wa,ya];let Un=(()=>{class s extends ge{constructor(e={}){super(),this.notBeforeTime=o(e,wa,s.defaultValues(wa)),this.notAfterTime=o(e,ya,s.defaultValues(ya)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wa:case ya:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new dt({name:t.notBeforeTime||y}),new dt({name:t.notAfterTime||y})]})}fromSchema(e){R(e,Xm);const t=pe(e,e,s.schema({names:{notBeforeTime:wa,notAfterTime:ya}}));de.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new j({value:[new dt({valueDate:this.notBeforeTime}),new dt({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}return s.CLASS_NAME="AttCertValidityPeriod",s})();const ba="names",Ud="generalNames";let It=(()=>{class s extends ge{constructor(e={}){super(),this.names=o(e,ba,s.defaultValues(ba)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return"names"===e?[]:super.defaultValues(e)}static schema(e={},t=!1){const i=o(e,ba,{});return new j({optional:t,name:i.blockName||y,value:[new He({name:i.generalNames||y,value:bt.schema()})]})}fromSchema(e){R(e,[ba,Ud]);const t=pe(e,e,s.schema({names:{blockName:ba,generalNames:Ud}}));de.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,i=>new bt({schema:i}))}toSchema(){return new j({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}return s.CLASS_NAME="GeneralNames",s})();const Fd="2.5.29.17",Ld="2.5.29.18",fu="2.5.29.19",jd="2.5.29.28",Hd="2.5.29.29",$d="2.5.29.30",Kd="2.5.29.31",mu="2.5.29.46",Gd="2.5.29.32",$t="2.5.29.32.0",Jd="2.5.29.33",pu="2.5.29.35",qd="2.5.29.36",gu="1.3.6.1.5.5.7.1.1",vu="1.2.840.113549.1.7.1",Wd="1.2.840.113549.1.7.3",Xd="1.2.840.113549.1.7.6",Yd="1.2.840.113549.1.9.22.1",Zd="1.2.840.113549.1.9.22.3",Qd="1.2.840.113549.1.9.23.1",wi="keyIdentifier",yi="authorityCertIssuer",bi="authorityCertSerialNumber",g1=[wi,yi,bi];let ef=(()=>{class s extends ge{constructor(e={}){super(),wi in e&&(this.keyIdentifier=o(e,wi,s.defaultValues(wi))),yi in e&&(this.authorityCertIssuer=o(e,yi,s.defaultValues(yi))),bi in e&&(this.authorityCertSerialNumber=o(e,bi,s.defaultValues(bi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wi:return new ve;case yi:return[];case bi:return new Q;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Be({name:t.keyIdentifier||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.authorityCertIssuer||y,value:bt.schema()})]}),new Be({name:t.authorityCertSerialNumber||y,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){R(e,g1);const t=pe(e,e,s.schema({names:{keyIdentifier:wi,authorityCertIssuer:yi,authorityCertSerialNumber:bi}}));de.assertSchema(t,this.className),wi in t.result&&(this.keyIdentifier=new ve({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),yi in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,i=>new bt({schema:i}))),bi in t.result&&(this.authorityCertSerialNumber=new Q({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new Be({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new X({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,t=>t.toSchema())})),this.authorityCertSerialNumber&&e.push(new Be({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new j({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,t=>t.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}return s.CLASS_NAME="AuthorityKeyIdentifier",s})();const Si="pathLenConstraint",_i="cA";let tf=(()=>{class s extends ge{constructor(e={}){super(),this.cA=o(e,_i,!1),Si in e&&(this.pathLenConstraint=o(e,Si,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e!==_i&&super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new ys({optional:!0,name:t.cA||y}),new Q({optional:!0,name:t.pathLenConstraint||y})]})}fromSchema(e){R(e,[_i,Si]);const t=pe(e,e,s.schema({names:{cA:_i,pathLenConstraint:Si}}));de.assertSchema(t,this.className),_i in t.result&&(this.cA=t.result.cA.valueBlock.value),Si in t.result&&(this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.isHexOnly?t.result.pathLenConstraint:t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==s.defaultValues(_i)&&e.push(new ys({value:this.cA})),Si in this&&e.push(this.pathLenConstraint instanceof Q?this.pathLenConstraint:new Q({value:this.pathLenConstraint})),new j({value:e})}toJSON(){const e={};return this.cA!==s.defaultValues(_i)&&(e.cA=this.cA),Si in this&&(e.pathLenConstraint=this.pathLenConstraint instanceof Q?this.pathLenConstraint.toJSON():this.pathLenConstraint),e}}return s.CLASS_NAME="BasicConstraints",s})();const wu="certificateIndex",yu="keyIndex";let v1=(()=>{class s extends ge{constructor(e={}){super(),this.certificateIndex=o(e,wu,s.defaultValues(wu)),this.keyIndex=o(e,yu,s.defaultValues(yu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wu:case yu:return 0;default:return super.defaultValues(e)}}static schema(){return new Q}fromSchema(e){if(e.constructor.blockName()!==Q.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const i=new Uint8Array(t);switch(!0){case t.byteLength<4:{const q=new ArrayBuffer(4);new Uint8Array(q).set(i,4-t.byteLength),t=q.slice(0)}break;case t.byteLength>4:{const q=new ArrayBuffer(4);new Uint8Array(q).set(i.slice(0,4)),t=q.slice(0)}}const a=t.slice(0,2),l=new Uint8Array(a);let h=l[0];l[0]=l[1],l[1]=h;const d=new Uint16Array(a);this.keyIndex=d[0];const p=t.slice(2),B=new Uint8Array(p);h=B[0],B[0]=B[1],B[1]=h;const D=new Uint16Array(p);this.certificateIndex=D[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const i=new Uint8Array(e);let a=i[0];i[0]=i[1],i[1]=a;const l=new ArrayBuffer(2);new Uint16Array(l)[0]=this.keyIndex;const d=new Uint8Array(l);return a=d[0],d[0]=d[1],d[1]=a,new Q({valueHex:I(l,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}return s.CLASS_NAME="CAVersion",s})();const Sa="policyQualifierId",_a="qualifier",w1=[Sa,_a];let sf=(()=>{class s extends ge{constructor(e={}){super(),this.policyQualifierId=o(e,Sa,s.defaultValues(Sa)),this.qualifier=o(e,_a,s.defaultValues(_a)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sa:return y;case _a:return new Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.policyQualifierId||y}),new Fe({name:t.qualifier||y})]})}fromSchema(e){R(e,w1);const t=pe(e,e,s.schema({names:{policyQualifierId:Sa,qualifier:_a}}));de.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new j({value:[new xe({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}return s.CLASS_NAME="PolicyQualifierInfo",s})();const Aa="policyIdentifier",Ai="policyQualifiers",y1=[Aa,Ai];let nf=(()=>{class s extends ge{constructor(e={}){super(),this.policyIdentifier=o(e,Aa,s.defaultValues(Aa)),Ai in e&&(this.policyQualifiers=o(e,Ai,s.defaultValues(Ai))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Aa:return y;case Ai:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.policyIdentifier||y}),new j({optional:!0,value:[new He({name:t.policyQualifiers||y,value:sf.schema()})]})]})}fromSchema(e){R(e,y1);const t=pe(e,e,s.schema({names:{policyIdentifier:Aa,policyQualifiers:Ai}}));de.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),Ai in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,i=>new sf({schema:i})))}toSchema(){const e=[];return e.push(new xe({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new j({value:Array.from(this.policyQualifiers,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,t=>t.toJSON())),e}}return s.CLASS_NAME="PolicyInformation",s})();const ka="certificatePolicies",b1=[ka];let rf=(()=>{class s extends ge{constructor(e={}){super(),this.certificatePolicies=o(e,ka,s.defaultValues(ka)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ka?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.certificatePolicies||y,value:nf.schema()})]})}fromSchema(e){R(e,b1);const t=pe(e,e,s.schema({names:{certificatePolicies:ka}}));de.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,i=>new nf({schema:i}))}toSchema(){return new j({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}return s.CLASS_NAME="CertificatePolicies",s})();const Ea="templateID",is="templateMajorVersion",ns="templateMinorVersion",S1=[Ea,is,ns];class Fn extends ge{constructor(r={}){super(),this.templateID=o(r,Ea,Fn.defaultValues(Ea)),is in r&&(this.templateMajorVersion=o(r,is,Fn.defaultValues(is))),ns in r&&(this.templateMinorVersion=o(r,ns,Fn.defaultValues(ns))),r.schema&&this.fromSchema(r.schema)}static defaultValues(r){switch(r){case Ea:return y;case is:case ns:return 0;default:return super.defaultValues(r)}}static schema(r={}){const e=o(r,"names",{});return new j({name:e.blockName||y,value:[new xe({name:e.templateID||y}),new Q({name:e.templateMajorVersion||y,optional:!0}),new Q({name:e.templateMinorVersion||y,optional:!0})]})}fromSchema(r){R(r,S1);const e=pe(r,r,Fn.schema({names:{templateID:Ea,templateMajorVersion:is,templateMinorVersion:ns}}));de.assertSchema(e,this.className),this.templateID=e.result.templateID.valueBlock.toString(),is in e.result&&(this.templateMajorVersion=e.result.templateMajorVersion.valueBlock.valueDec),ns in e.result&&(this.templateMinorVersion=e.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const r=[];return r.push(new xe({value:this.templateID})),is in this&&r.push(new Q({value:this.templateMajorVersion})),ns in this&&r.push(new Q({value:this.templateMinorVersion})),new j({value:r})}toJSON(){const r={templateID:this.templateID};return is in this&&(r.templateMajorVersion=this.templateMajorVersion),ns in this&&(r.templateMinorVersion=this.templateMinorVersion),r}}const ki="distributionPoint",af="distributionPointNames",Ei="reasons",Ci="cRLIssuer",of="cRLIssuerNames",_1=[ki,af,Ei,Ci,of];let lf=(()=>{class s extends ge{constructor(e={}){super(),ki in e&&(this.distributionPoint=o(e,ki,s.defaultValues(ki))),Ei in e&&(this.reasons=o(e,Ei,s.defaultValues(Ei))),Ci in e&&(this.cRLIssuer=o(e,Ci,s.defaultValues(Ci))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ki:return[];case Ei:return new Ze;case Ci:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ft({value:[new X({name:t.distributionPoint||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.distributionPointNames||y,value:bt.schema()})]}),new X({name:t.distributionPoint||y,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:mt.schema().valueBlock.value})]})]}),new Be({name:t.reasons||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new X({name:t.cRLIssuer||y,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new He({name:t.cRLIssuerNames||y,value:bt.schema()})]})]})}fromSchema(e){R(e,_1);const t=pe(e,e,s.schema({names:{distributionPoint:ki,distributionPointNames:af,reasons:Ei,cRLIssuer:Ci,cRLIssuerNames:of}}));de.assertSchema(t,this.className),ki in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,i=>new bt({schema:i}))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new mt({schema:new j({value:t.result.distributionPoint.valueBlock.value})}))),Ei in t.result&&(this.reasons=new Ze({valueHex:t.result.reasons.valueBlock.valueHex})),Ci in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,i=>new bt({schema:i})))}toSchema(){const e=[];if(this.distributionPoint){let t;t=new X(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,i=>i.toSchema())}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new Be({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new X({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={};return this.distributionPoint&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,t=>t.toJSON()):this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,t=>t.toJSON())),e}}return s.CLASS_NAME="DistributionPoint",s})();const Ca="distributionPoints",A1=[Ca];let cf=(()=>{class s extends ge{constructor(e={}){super(),this.distributionPoints=o(e,Ca,s.defaultValues(Ca)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ca?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.distributionPoints||y,value:lf.schema()})]})}fromSchema(e){R(e,A1);const t=pe(e,e,s.schema({names:{distributionPoints:Ca}}));de.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,i=>new lf({schema:i}))}toSchema(){return new j({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}return s.CLASS_NAME="CRLDistributionPoints",s})();const Na="keyPurposes",k1=[Na];let E1=(()=>{class s extends ge{constructor(e={}){super(),this.keyPurposes=o(e,Na,s.defaultValues(Na)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Na?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.keyPurposes||y,value:new xe})]})}fromSchema(e){R(e,k1);const t=pe(e,e,s.schema({names:{keyPurposes:Na}}));de.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,i=>i.valueBlock.toString())}toSchema(){return new j({value:Array.from(this.keyPurposes,e=>new xe({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}return s.CLASS_NAME="ExtKeyUsage",s})();const Ia="accessDescriptions";let uf=(()=>{class s extends ge{constructor(e={}){super(),this.accessDescriptions=o(e,Ia,s.defaultValues(Ia)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ia?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.accessDescriptions||y,value:Pd.schema()})]})}fromSchema(e){R(e,[Ia]);const t=pe(e,e,s.schema({names:{accessDescriptions:Ia}}));de.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,i=>new Pd({schema:i}))}toSchema(){return new j({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}return s.CLASS_NAME="InfoAccess",s})();const Ni="distributionPoint",hf="distributionPointNames",xs="onlyContainsUserCerts",Bs="onlyContainsCACerts",Rs="onlySomeReasons",Vs="indirectCRL",Os="onlyContainsAttributeCerts",C1=[Ni,hf,xs,Bs,Rs,Vs,Os];let N1=(()=>{class s extends ge{constructor(e={}){super(),Ni in e&&(this.distributionPoint=o(e,Ni,s.defaultValues(Ni))),this.onlyContainsUserCerts=o(e,xs,s.defaultValues(xs)),this.onlyContainsCACerts=o(e,Bs,s.defaultValues(Bs)),Rs in e&&(this.onlySomeReasons=o(e,Rs,s.defaultValues(Rs))),this.indirectCRL=o(e,Vs,s.defaultValues(Vs)),this.onlyContainsAttributeCerts=o(e,Os,s.defaultValues(Os)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ni:return[];case xs:case Bs:return!1;case Rs:return 0;case Vs:case Os:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ft({value:[new X({name:t.distributionPoint||y,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.distributionPointNames||y,value:bt.schema()})]}),new X({name:t.distributionPoint||y,idBlock:{tagClass:3,tagNumber:1},value:mt.schema().valueBlock.value})]})]}),new Be({name:t.onlyContainsUserCerts||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Be({name:t.onlyContainsCACerts||y,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Be({name:t.onlySomeReasons||y,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new Be({name:t.indirectCRL||y,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new Be({name:t.onlyContainsAttributeCerts||y,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){R(e,C1);const t=pe(e,e,s.schema({names:{distributionPoint:Ni,distributionPointNames:hf,onlyContainsUserCerts:xs,onlyContainsCACerts:Bs,onlySomeReasons:Rs,indirectCRL:Vs,onlyContainsAttributeCerts:Os}}));if(de.assertSchema(t,this.className),Ni in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,i=>new bt({schema:i}));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new mt({schema:new j({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(xs in t.result){const i=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==i[0]}if(Bs in t.result){const i=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==i[0]}if(Rs in t.result){const i=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if(Vs in t.result){const i=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==i[0]}if(Os in t.result){const i=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==i[0]}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new X({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,i=>i.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==s.defaultValues(xs)&&e.push(new Be({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==s.defaultValues(Bs)&&e.push(new Be({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),void 0!==this.onlySomeReasons){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new Be({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==s.defaultValues(Vs)&&e.push(new Be({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==s.defaultValues(Os)&&e.push(new Be({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new j({value:e})}toJSON(){const e={};return this.distributionPoint&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,t=>t.toJSON()):this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==s.defaultValues(xs)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==s.defaultValues(Bs)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Rs in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==s.defaultValues(Vs)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==s.defaultValues(Os)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}return s.CLASS_NAME="IssuingDistributionPoint",s})();const Ta="base",Ln="minimum",Ps="maximum",I1=[Ta,Ln,Ps];let Fl=(()=>{class s extends ge{constructor(e={}){super(),this.base=o(e,Ta,s.defaultValues(Ta)),this.minimum=o(e,Ln,s.defaultValues(Ln)),Ps in e&&(this.maximum=o(e,Ps,s.defaultValues(Ps))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ta:return new bt;case Ln:case Ps:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[bt.schema(t.base||{}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Q({name:t.minimum||y})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Q({name:t.maximum||y})]})]})}fromSchema(e){R(e,I1);const t=pe(e,e,s.schema({names:{base:{names:{blockName:Ta}},minimum:Ln,maximum:Ps}}));de.assertSchema(t,this.className),this.base=new bt({schema:t.result.base}),Ln in t.result&&(this.minimum=t.result.minimum.valueBlock.isHexOnly?t.result.minimum:t.result.minimum.valueBlock.valueDec),Ps in t.result&&(this.maximum=t.result.maximum.valueBlock.isHexOnly?t.result.maximum:t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof Q?this.minimum:new Q({value:this.minimum}),e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Ps in this){let t=0;t=this.maximum instanceof Q?this.maximum:new Q({value:this.maximum}),e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new j({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&(e.minimum="number"==typeof this.minimum?this.minimum:this.minimum.toJSON()),void 0!==this.maximum&&(e.maximum="number"==typeof this.maximum?this.maximum:this.maximum.toJSON()),e}}return s.CLASS_NAME="GeneralSubtree",s})();const Ii="permittedSubtrees",Ti="excludedSubtrees",T1=[Ii,Ti];let x1=(()=>{class s extends ge{constructor(e={}){super(),Ii in e&&(this.permittedSubtrees=o(e,Ii,s.defaultValues(Ii))),Ti in e&&(this.excludedSubtrees=o(e,Ti,s.defaultValues(Ti))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ii:case Ti:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.permittedSubtrees||y,value:Fl.schema()})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.excludedSubtrees||y,value:Fl.schema()})]})]})}fromSchema(e){R(e,T1);const t=pe(e,e,s.schema({names:{permittedSubtrees:Ii,excludedSubtrees:Ti}}));de.assertSchema(t,this.className),Ii in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,i=>new Fl({schema:i}))),Ti in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,i=>new Fl({schema:i})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,t=>t.toSchema())})),this.excludedSubtrees&&e.push(new X({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,t=>t.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,t=>t.toJSON())),e}}return s.CLASS_NAME="NameConstraints",s})();const rs="requireExplicitPolicy",as="inhibitPolicyMapping",B1=[rs,as];let R1=(()=>{class s extends ge{constructor(e={}){super(),rs in e&&(this.requireExplicitPolicy=o(e,rs,s.defaultValues(rs))),as in e&&(this.inhibitPolicyMapping=o(e,as,s.defaultValues(as))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rs:case as:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Be({name:t.requireExplicitPolicy||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Be({name:t.inhibitPolicyMapping||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){R(e,B1);const t=pe(e,e,s.schema({names:{requireExplicitPolicy:rs,inhibitPolicyMapping:as}}));if(de.assertSchema(t,this.className),rs in t.result){const i=t.result.requireExplicitPolicy;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;const l=ut(i.toBER(!1));de.assert(l,"Integer"),this.requireExplicitPolicy=l.result.valueBlock.valueDec}if(as in t.result){const i=t.result.inhibitPolicyMapping;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;const l=ut(i.toBER(!1));de.assert(l,"Integer"),this.inhibitPolicyMapping=l.result.valueBlock.valueDec}}toSchema(){const e=[];if(rs in this){const t=new Q({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(as in this){const t=new Q({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new j({value:e})}toJSON(){const e={};return rs in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),as in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}return s.CLASS_NAME="PolicyConstraints",s})();const xa="issuerDomainPolicy",Ba="subjectDomainPolicy",V1=[xa,Ba];let df=(()=>{class s extends ge{constructor(e={}){super(),this.issuerDomainPolicy=o(e,xa,s.defaultValues(xa)),this.subjectDomainPolicy=o(e,Ba,s.defaultValues(Ba)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xa:case Ba:return y;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.issuerDomainPolicy||y}),new xe({name:t.subjectDomainPolicy||y})]})}fromSchema(e){R(e,V1);const t=pe(e,e,s.schema({names:{issuerDomainPolicy:xa,subjectDomainPolicy:Ba}}));de.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new j({value:[new xe({value:this.issuerDomainPolicy}),new xe({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}return s.CLASS_NAME="PolicyMapping",s})();const Ra="mappings",O1=[Ra];let P1=(()=>{class s extends ge{constructor(e={}){super(),this.mappings=o(e,Ra,s.defaultValues(Ra)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ra?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.mappings||y,value:df.schema()})]})}fromSchema(e){R(e,O1);const t=pe(e,e,s.schema({names:{mappings:Ra}}));de.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,i=>new df({schema:i}))}toSchema(){return new j({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}return s.CLASS_NAME="PolicyMappings",s})();const Ds="notBefore",Ms="notAfter",D1=[Ds,Ms];let M1=(()=>{class s extends ge{constructor(e={}){super(),Ds in e&&(this.notBefore=o(e,Ds,s.defaultValues(Ds))),Ms in e&&(this.notAfter=o(e,Ms,s.defaultValues(Ms))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ds:case Ms:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Be({name:t.notBefore||y,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Be({name:t.notAfter||y,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){R(e,D1);const t=pe(e,e,s.schema({names:{notBefore:Ds,notAfter:Ms}}));if(de.assertSchema(t,this.className),Ds in t.result){const i=new dt;i.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=i.toDate()}if(Ms in t.result){const i=new dt({valueHex:t.result.notAfter.valueBlock.valueHex});i.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=i.toDate()}}toSchema(){const e=[];return Ds in this&&e.push(new Be({idBlock:{tagClass:3,tagNumber:0},valueHex:new dt({valueDate:this.notBefore}).valueBlock.valueHexView})),Ms in this&&e.push(new Be({idBlock:{tagClass:3,tagNumber:1},valueHex:new dt({valueDate:this.notAfter}).valueBlock.valueHexView})),new j({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}return s.CLASS_NAME="PrivateKeyUsagePeriod",s})();const jn="id",os="type",Hn="values",U1=[jn,os],F1=[Hn];let ff=(()=>{class s extends ge{constructor(e={}){super(),this.id=o(e,jn,s.defaultValues(jn)),os in e&&(this.type=o(e,os,s.defaultValues(os))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jn:return y;case os:return new ot;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case jn:return t===y;case os:return t instanceof ot;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.id||y}),new Fe({name:t.type||y,optional:!0})]})}fromSchema(e){R(e,U1);const t=pe(e,e,s.schema({names:{id:jn,type:os}}));de.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),os in t.result&&(this.type=t.result.type)}toSchema(){const e=[new xe({value:this.id})];return os in this&&e.push(this.type),new j({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}return s.CLASS_NAME="QCStatement",s})(),L1=(()=>{class s extends ge{constructor(e={}){super(),this.values=o(e,Hn,s.defaultValues(Hn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Hn?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Hn?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.values||y,value:ff.schema(t.value||{})})]})}fromSchema(e){R(e,F1);const t=pe(e,e,s.schema({names:{values:Hn}}));de.assertSchema(t,this.className),this.values=Array.from(t.result.values,i=>new ff({schema:i}))}toSchema(){return new j({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}return s.CLASS_NAME="QCStatements",s})();var xi;class Us{static register(r,e,t){this.namedCurves[r.toLowerCase()]=this.namedCurves[e]={name:r,id:e,size:t}}static find(r){return this.namedCurves[r.toLowerCase()]||null}}xi=Us,Us.namedCurves={},xi.register("P-256","1.2.840.10045.3.1.7",32),xi.register("P-384","1.3.132.0.34",48),xi.register("P-521","1.3.132.0.35",66),xi.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),xi.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),xi.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const Hl="namedCurve";let Fs=(()=>{class s extends ge{constructor(e={}){super(),this.x=o(e,"x",s.defaultValues("x")),this.y=o(e,"y",s.defaultValues("y")),this.namedCurve=o(e,Hl,s.defaultValues(Hl)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"x":case"y":return kt;case Hl:return y;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"x":case"y":return t instanceof ArrayBuffer&&Z(t,s.defaultValues(e));case Hl:return"string"==typeof t&&t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new Rl}fromSchema(e){const t=k._H.toUint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const i=Us.find(this.namedCurve);if(!i)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const a=i.size;if(t.byteLength!==2*a+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=i.name,this.x=t.slice(1,a+1).buffer,this.y=t.slice(1+a,2*a+1).buffer}toSchema(){return new Rl({data:I(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=Us.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Ve(J(this.x),!0,!0,!1),y:Ve(J(this.y),!0,!0,!1)}}fromJSON(e){Qe.assert("json",e,"crv","x","y");let t=0;const i=Us.find(e.crv);i&&(this.namedCurve=i.id,t=i.size);const a=m(O(e.x,!0));if(a.byteLength<t){this.x=new ArrayBuffer(t);const h=new Uint8Array(this.x),d=new Uint8Array(a);h.set(d,1)}else this.x=a.slice(0,t);const l=m(O(e.y,!0));if(l.byteLength<t){this.y=new ArrayBuffer(t);const h=new Uint8Array(this.y),d=new Uint8Array(l);h.set(d,1)}else this.y=l.slice(0,t)}}return s.CLASS_NAME="ECPublicKey",s})();const Va="modulus",Oa="publicExponent",j1=[Va,Oa];let mf=(()=>{class s extends ge{constructor(e={}){super(),this.modulus=o(e,Va,s.defaultValues(Va)),this.publicExponent=o(e,Oa,s.defaultValues(Oa)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Va:case Oa:return new Q;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.modulus||y}),new Q({name:t.publicExponent||y})]})}fromSchema(e){R(e,j1);const t=pe(e,e,s.schema({names:{modulus:Va,publicExponent:Oa}}));de.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new j({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:k.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:k.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){Qe.assert("json",e,"n","e");const t=m(O(e.n,!0));this.modulus=new Q({valueHex:t.slice(0,Math.pow(2,ue(t.byteLength)))}),this.publicExponent=new Q({valueHex:m(O(e.e,!0)).slice(0,3)})}}return s.CLASS_NAME="RSAPublicKey",s})();const Pa="algorithm",Da="subjectPublicKey",H1=[Pa,Da];let es=(()=>{class s extends ge{get parsedKey(){if(void 0===this._parsedKey){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===xe.blockName())try{this._parsedKey=new Fs({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=ut(this.subjectPublicKey.valueBlock.valueHexView);if(-1!==e.offset)try{this._parsedKey=new mf({schema:e.result})}catch{}}}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}constructor(e={}){super(),this.algorithm=o(e,Pa,s.defaultValues(Pa)),this.subjectPublicKey=o(e,Da,s.defaultValues(Da));const t=o(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pa:return new te;case Da:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.algorithm||{}),new Ze({name:t.subjectPublicKey||y})]})}fromSchema(e){R(e,H1);const t=pe(e,e,s.schema({names:{algorithm:{names:{blockName:Pa}},subjectPublicKey:Da}}));de.assertSchema(t,this.className),this.algorithm=new te({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new j({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Fs({json:e}),this.algorithm=new te({algorithmId:"1.2.840.10045.2.1",algorithmParams:new xe({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new mf({json:e}),this.algorithm=new te({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new ot});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new Ze({valueHex:this.parsedKey.toSchema().toBER(!1)})}}importKey(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){try{if(!e)throw new Error("Need to provide publicKey input parameter");const l=ut(yield t.exportKey("spki",e));try{i.fromSchema(l.result)}catch{throw new Error("Error during initializing object from schema")}}catch(a){const l=a instanceof Error?a.message:`${a}`;throw new Error(`Error during exporting public key: ${l}`)}})()}}return s.CLASS_NAME="PublicKeyInfo",s})();const $n="version",Kn="privateKey",qt="namedCurve",Ls="publicKey",$1=[$n,Kn,qt,Ls];let pf=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,$n,s.defaultValues($n)),this.privateKey=o(e,Kn,s.defaultValues(Kn)),qt in e&&(this.namedCurve=o(e,qt,s.defaultValues(qt))),Ls in e&&(this.publicKey=o(e,Ls,s.defaultValues(Ls))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $n:return 1;case Kn:return new ve;case qt:return y;case Ls:return new Fs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $n:return t===s.defaultValues(e);case Kn:return t.isEqual(s.defaultValues(e));case qt:return t===y;case Ls:return Fs.compareWithDefault(qt,t.namedCurve)&&Fs.compareWithDefault("x",t.x)&&Fs.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),new ve({name:t.privateKey||y}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new xe({name:t.namedCurve||y})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ze({name:t.publicKey||y})]})]})}fromSchema(e){R(e,$1);const t=pe(e,e,s.schema({names:{version:$n,privateKey:Kn,namedCurve:qt,publicKey:Ls}}));if(de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,qt in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),Ls in t.result){const i={schema:t.result.publicKey.valueBlock.valueHex};qt in this&&(i.namedCurve=this.namedCurve),this.publicKey=new Fs(i)}}toSchema(){const e=[new Q({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[new xe({value:this.namedCurve})]})),this.publicKey&&e.push(new X({idBlock:{tagClass:3,tagNumber:1},value:[new Ze({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new j({value:e})}toJSON(){if(!this.namedCurve||s.compareWithDefault(qt,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=Us.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:k.U$.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const i=this.publicKey.toJSON();t.x=i.x,t.y=i.y}return t}fromJSON(e){Qe.assert("json",e,"crv","d");let t=0;const i=Us.find(e.crv);i&&(this.namedCurve=i.id,t=i.size);const a=k.U$.FromBase64Url(e.d);if(a.byteLength<t){const l=new ArrayBuffer(t),h=new Uint8Array(l),d=new Uint8Array(a);h.set(d,1),this.privateKey=new ve({valueHex:l})}else this.privateKey=new ve({valueHex:a.slice(0,t)});e.x&&e.y&&(this.publicKey=new Fs({json:e}))}}return s.CLASS_NAME="ECPrivateKey",s})();const Ma="prime",Ua="exponent",Fa="coefficient",K1=[Ma,Ua,Fa];let bu=(()=>{class s extends ge{constructor(e={}){super(),this.prime=o(e,Ma,s.defaultValues(Ma)),this.exponent=o(e,Ua,s.defaultValues(Ua)),this.coefficient=o(e,Fa,s.defaultValues(Fa)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ma:case Ua:case Fa:return new Q;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.prime||y}),new Q({name:t.exponent||y}),new Q({name:t.coefficient||y})]})}fromSchema(e){R(e,K1);const t=pe(e,e,s.schema({names:{prime:Ma,exponent:Ua,coefficient:Fa}}));de.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new j({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:k.U$.ToBase64Url(this.prime.valueBlock.valueHexView),d:k.U$.ToBase64Url(this.exponent.valueBlock.valueHexView),t:k.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){Qe.assert("json",e,"r","d","r"),this.prime=new Q({valueHex:k.U$.FromBase64Url(e.r)}),this.exponent=new Q({valueHex:k.U$.FromBase64Url(e.d)}),this.coefficient=new Q({valueHex:k.U$.FromBase64Url(e.t)})}}return s.CLASS_NAME="OtherPrimeInfo",s})();const La="version",ja="modulus",Ha="publicExponent",$a="privateExponent",Ka="prime1",Ga="prime2",Ja="exponent1",qa="exponent2",za="coefficient",Bi="otherPrimeInfos",G1=[La,ja,Ha,$a,Ka,Ga,Ja,qa,za,Bi];let gf=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,La,s.defaultValues(La)),this.modulus=o(e,ja,s.defaultValues(ja)),this.publicExponent=o(e,Ha,s.defaultValues(Ha)),this.privateExponent=o(e,$a,s.defaultValues($a)),this.prime1=o(e,Ka,s.defaultValues(Ka)),this.prime2=o(e,Ga,s.defaultValues(Ga)),this.exponent1=o(e,Ja,s.defaultValues(Ja)),this.exponent2=o(e,qa,s.defaultValues(qa)),this.coefficient=o(e,za,s.defaultValues(za)),Bi in e&&(this.otherPrimeInfos=o(e,Bi,s.defaultValues(Bi))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case La:return 0;case ja:case Ha:case $a:case Ka:case Ga:case Ja:case qa:case za:return new Q;case Bi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),new Q({name:t.modulus||y}),new Q({name:t.publicExponent||y}),new Q({name:t.privateExponent||y}),new Q({name:t.prime1||y}),new Q({name:t.prime2||y}),new Q({name:t.exponent1||y}),new Q({name:t.exponent2||y}),new Q({name:t.coefficient||y}),new j({optional:!0,value:[new He({name:t.otherPrimeInfosName||y,value:bu.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){R(e,G1);const t=pe(e,e,s.schema({names:{version:La,modulus:ja,publicExponent:Ha,privateExponent:$a,prime1:Ka,prime2:Ga,exponent1:Ja,exponent2:qa,coefficient:za,otherPrimeInfo:{names:{blockName:Bi}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Bi in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,i=>new bu({schema:i})))}toSchema(){const e=[];return e.push(new Q({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new j({value:Array.from(this.otherPrimeInfos,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={n:k.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:k.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:k.U$.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:k.U$.ToBase64Url(this.prime1.valueBlock.valueHexView),q:k.U$.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:k.U$.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:k.U$.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:k.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,t=>t.toJSON())),e}fromJSON(e){Qe.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new Q({valueHex:k.U$.FromBase64Url(e.n)}),this.publicExponent=new Q({valueHex:k.U$.FromBase64Url(e.e)}),this.privateExponent=new Q({valueHex:k.U$.FromBase64Url(e.d)}),this.prime1=new Q({valueHex:k.U$.FromBase64Url(e.p)}),this.prime2=new Q({valueHex:k.U$.FromBase64Url(e.q)}),this.exponent1=new Q({valueHex:k.U$.FromBase64Url(e.dp)}),this.exponent2=new Q({valueHex:k.U$.FromBase64Url(e.dq)}),this.coefficient=new Q({valueHex:k.U$.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,t=>new bu({json:t})))}}return s.CLASS_NAME="RSAPrivateKey",s})();const Wa="version",Xa="privateKeyAlgorithm",Ya="privateKey",Ri="attributes",$l="parsedKey",J1=[Wa,Xa,Ya,Ri];let Gn=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Wa,s.defaultValues(Wa)),this.privateKeyAlgorithm=o(e,Xa,s.defaultValues(Xa)),this.privateKey=o(e,Ya,s.defaultValues(Ya)),Ri in e&&(this.attributes=o(e,Ri,s.defaultValues(Ri))),$l in e&&(this.parsedKey=o(e,$l,s.defaultValues($l))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wa:return 0;case Xa:return new te;case Ya:return new ve;case Ri:return[];case $l:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),te.schema(t.privateKeyAlgorithm||{}),new ve({name:t.privateKey||y}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:t.attributes||y,value:et.schema()})]})]})}fromSchema(e){R(e,J1);const t=pe(e,e,s.schema({names:{version:Wa,privateKeyAlgorithm:{names:{blockName:Xa}},privateKey:Ya,attributes:Ri}}));switch(de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new te({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,Ri in t.result&&(this.attributes=Array.from(t.result.attributes,i=>new et({schema:i}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const i=ut(this.privateKey.valueBlock.valueHexView);-1!==i.offset&&(this.parsedKey=new gf({schema:i.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof xe){const i=ut(this.privateKey.valueBlock.valueHexView);-1!==i.offset&&(this.parsedKey=new pf({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:i.result}))}}}toSchema(){const e=[new Q({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,t=>t.toSchema())})),new j({value:e})}toJSON(){if(!this.parsedKey){const i={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(i.attributes=Array.from(this.attributes,a=>a.toJSON())),i}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new pf({json:e}),this.privateKeyAlgorithm=new te({algorithmId:"1.2.840.10045.2.1",algorithmParams:new xe({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new gf({json:e}),this.privateKeyAlgorithm=new te({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new ot});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new ve({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}return s.CLASS_NAME="PrivateKeyInfo",s})();const Jn="contentType",qn="contentEncryptionAlgorithm",Vi="encryptedContent",q1=[Jn,qn,Vi];let Ot=(()=>{class s extends ge{constructor(e={}){if(super(),this.contentType=o(e,Jn,s.defaultValues(Jn)),this.contentEncryptionAlgorithm=o(e,qn,s.defaultValues(qn)),Vi in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed&&!e.disableSplit)){const t=new ve({idBlock:{isConstructed:!0},isConstructed:!0});let i=0;const a=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let l=a.byteLength;for(;l>0;){const h=new Uint8Array(a,i,i+1024>a.byteLength?a.byteLength-i:1024),d=new ArrayBuffer(h.length),p=new Uint8Array(d);for(let B=0;B<p.length;B++)p[B]=h[B];t.valueBlock.value.push(new ve({valueHex:d})),l-=h.length,i+=h.length}this.encryptedContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jn:return y;case qn:return new te;case Vi:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jn:return t===y;case qn:return t.algorithmId===y&&!("algorithmParams"in t);case Vi:return t.isEqual(s.defaultValues(Vi));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.contentType||y}),te.schema(t.contentEncryptionAlgorithm||{}),new ft({value:[new X({name:t.encryptedContent||y,idBlock:{tagClass:3,tagNumber:0},value:[new He({value:new ve})]}),new Be({name:t.encryptedContent||y,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){R(e,q1);const t=pe(e,e,s.schema({names:{contentType:Jn,contentEncryptionAlgorithm:{names:{blockName:qn}},encryptedContent:Vi}}));de.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new te({schema:t.result.contentEncryptionAlgorithm}),Vi in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new xe({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const i=this.encryptedContent;i.idBlock.tagClass=3,i.idBlock.tagNumber=0,i.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(i)}return new j({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return ve.prototype.getValue.call(this.encryptedContent)}}return s.CLASS_NAME="EncryptedContentInfo",s})();const js="hashAlgorithm",Hs="maskGenAlgorithm",$s="saltLength",Ks="trailerField",z1=[js,Hs,$s,Ks];let Su=(()=>{class s extends ge{constructor(e={}){super(),this.hashAlgorithm=o(e,js,s.defaultValues(js)),this.maskGenAlgorithm=o(e,Hs,s.defaultValues(Hs)),this.saltLength=o(e,$s,s.defaultValues($s)),this.trailerField=o(e,Ks,s.defaultValues(Ks)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case js:return new te({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot});case Hs:return new te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new te({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot}).toSchema()});case $s:return 20;case Ks:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[te.schema(t.hashAlgorithm||{})]}),new X({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[te.schema(t.maskGenAlgorithm||{})]}),new X({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new Q({name:t.saltLength||y})]}),new X({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new Q({name:t.trailerField||y})]})]})}fromSchema(e){R(e,z1);const t=pe(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:js}},maskGenAlgorithm:{names:{blockName:Hs}},saltLength:$s,trailerField:Ks}}));de.assertSchema(t,this.className),js in t.result&&(this.hashAlgorithm=new te({schema:t.result.hashAlgorithm})),Hs in t.result&&(this.maskGenAlgorithm=new te({schema:t.result.maskGenAlgorithm})),$s in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Ks in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(s.defaultValues(js))||e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(s.defaultValues(Hs))||e.push(new X({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==s.defaultValues($s)&&e.push(new X({idBlock:{tagClass:3,tagNumber:2},value:[new Q({value:this.saltLength})]})),this.trailerField!==s.defaultValues(Ks)&&e.push(new X({idBlock:{tagClass:3,tagNumber:3},value:[new Q({value:this.trailerField})]})),new j({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(s.defaultValues(js))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(s.defaultValues(Hs))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==s.defaultValues($s)&&(e.saltLength=this.saltLength),this.trailerField!==s.defaultValues(Ks)&&(e.trailerField=this.trailerField),e}}return s.CLASS_NAME="RSASSAPSSParams",s})();const zn="salt",Za="iterationCount",zt="keyLength",ls="prf",W1=[zn,Za,zt,ls];let Qa=(()=>{class s extends ge{constructor(e={}){super(),this.salt=o(e,zn,s.defaultValues(zn)),this.iterationCount=o(e,Za,s.defaultValues(Za)),zt in e&&(this.keyLength=o(e,zt,s.defaultValues(zt))),ls in e&&(this.prf=o(e,ls,s.defaultValues(ls))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zn:return{};case Za:return-1;case zt:return 0;case ls:return new te({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot});default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new ft({value:[new ve({name:t.saltPrimitive||y}),te.schema(t.saltConstructed||{})]}),new Q({name:t.iterationCount||y}),new Q({name:t.keyLength||y,optional:!0}),te.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){R(e,W1);const t=pe(e,e,s.schema({names:{saltPrimitive:zn,saltConstructed:{names:{blockName:zn}},iterationCount:Za,keyLength:zt,prf:{names:{blockName:ls,optional:!0}}}}));de.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,zt in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),ls in t.result&&(this.prf=new te({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new Q({value:this.iterationCount})),zt in this&&s.defaultValues(zt)!==this.keyLength&&e.push(new Q({value:this.keyLength})),this.prf&&!1===s.defaultValues(ls).isEqual(this.prf)&&e.push(this.prf.toSchema()),new j({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return zt in this&&s.defaultValues(zt)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&!1===s.defaultValues(ls).isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}return s.CLASS_NAME="PBKDF2Params",s})();const eo="keyDerivationFunc",to="encryptionScheme",X1=[eo,to];let wf=(()=>{class s extends ge{constructor(e={}){super(),this.keyDerivationFunc=o(e,eo,s.defaultValues(eo)),this.encryptionScheme=o(e,to,s.defaultValues(to)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eo:case to:return new te;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.keyDerivationFunc||{}),te.schema(t.encryptionScheme||{})]})}fromSchema(e){R(e,X1);const t=pe(e,e,s.schema({names:{keyDerivationFunc:{names:{blockName:eo}},encryptionScheme:{names:{blockName:to}}}}));de.assertSchema(t,this.className),this.keyDerivationFunc=new te({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new te({schema:t.result.encryptionScheme})}toSchema(){return new j({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}return s.CLASS_NAME="PBES2Params",s})();class Y1{constructor(r){this.crypto=r.crypto,this.subtle="webkitSubtle"in r.crypto?r.crypto.webkitSubtle:r.crypto.subtle,this.name=o(r,"name",y)}encrypt(...r){var e=this;return(0,A.A)(function*(){return e.subtle.encrypt(...r)})()}decrypt(...r){var e=this;return(0,A.A)(function*(){return e.subtle.decrypt(...r)})()}sign(...r){return this.subtle.sign(...r)}verify(...r){var e=this;return(0,A.A)(function*(){return e.subtle.verify(...r)})()}digest(...r){var e=this;return(0,A.A)(function*(){return e.subtle.digest(...r)})()}generateKey(...r){var e=this;return(0,A.A)(function*(){return e.subtle.generateKey(...r)})()}deriveKey(...r){var e=this;return(0,A.A)(function*(){return e.subtle.deriveKey(...r)})()}deriveBits(...r){var e=this;return(0,A.A)(function*(){return e.subtle.deriveBits(...r)})()}wrapKey(...r){var e=this;return(0,A.A)(function*(){return e.subtle.wrapKey(...r)})()}unwrapKey(...r){var e=this;return(0,A.A)(function*(){return e.subtle.unwrapKey(...r)})()}exportKey(...r){return this.subtle.exportKey(...r)}importKey(...r){return this.subtle.importKey(...r)}getRandomValues(r){return this.crypto.getRandomValues(r)}}function yf(s,r,e,t,i){return _u.apply(this,arguments)}function _u(){return(_u=(0,A.A)(function*(s,r,e,t,i){let a,l,h;switch(s.toUpperCase()){case"SHA-1":a=20,l=64,h=bm;break;case"SHA-256":a=32,l=64,h=_m;break;case"SHA-384":a=48,l=128,h=Hm;break;case"SHA-512":a=64,l=128,h=jm;break;default:throw new Error("Unsupported hashing algorithm")}const d=new Uint8Array(e);let p=(new TextDecoder).decode(e);(new TextEncoder).encode(p).some((fe,we)=>fe!==d[we])&&(p=String.fromCharCode(...d));const D=new Uint8Array(2*p.length+2),q=new DataView(D.buffer);for(let fe=0;fe<p.length;fe++)q.setUint16(2*fe,p.charCodeAt(fe),!1);q.setUint16(2*p.length,0,!1);const G=new Uint8Array(l).fill(3),le=new Uint8Array(t),ke=new Uint8Array(l*Math.ceil(le.length/l)).map((fe,we)=>le[we%le.length]),ye=new Uint8Array(l*Math.ceil(D.length/l)).map((fe,we)=>D[we%D.length]);let ae=new Uint8Array(ke.length+ye.length);ae.set(ke),ae.set(ye,ke.length);const be=Math.ceil((r>>3)/a),he=[];for(let fe=0;fe<be;fe++){let we=new Uint8Array(G.length+ae.length);we.set(G),we.set(ae,G.length);for(let Me=0;Me<i;Me++)we=h(we);const Ae=new Uint8Array(l).map((Me,ze)=>we[ze%we.length]),Ne=Math.ceil(le.length/l)+Math.ceil(D.length/l),Te=[];for(let Me=0;Me<Ne;Me++){const ze=Array.from(ae.slice(Me*l,(Me+1)*l));let St=511;for(let We=Ae.length-1;We>=0;We--)St>>=8,St+=Ae[We]+(ze[We]||0),ze[We]=255&St;Te.push(...ze)}ae=new Uint8Array(Te),he.push(...we)}return new Uint8Array(he.slice(0,r>>3)).buffer})).apply(this,arguments)}function bf(s){const r="string"==typeof s?{name:s}:s;return"hash"in r?{...r,hash:bf(r.hash)}:r}class Kl extends Y1{importKey(r,e,t,i,a){var l=this;return(0,A.A)(function*(){var h,d,p,B,D,q;let G={};const le=bf(t);switch(r.toLowerCase()){case"raw":return l.subtle.importKey("raw",e,t,i,a);case"spki":{const ke=ut(k._H.toArrayBuffer(e));de.assert(ke,"keyData");const ye=new es;try{ye.fromSchema(ke.result)}catch{throw new lt("Incorrect keyData")}switch(le.name.toUpperCase()){case"RSA-PSS":if(!le.hash)throw new Qe("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(le.hash.name.toUpperCase()){case"SHA-1":G.alg="PS1";break;case"SHA-256":G.alg="PS256";break;case"SHA-384":G.alg="PS384";break;case"SHA-512":G.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${le.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(a=["verify"],G.kty="RSA",G.ext=i,G.key_ops=a,"1.2.840.113549.1.1.1"!==ye.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${ye.algorithm.algorithmId}`);if(!G.alg){if(!le.hash)throw new Qe("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(le.hash.name.toUpperCase()){case"SHA-1":G.alg="RS1";break;case"SHA-256":G.alg="RS256";break;case"SHA-384":G.alg="RS384";break;case"SHA-512":G.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${le.hash.name.toUpperCase()}`)}}const ae=ye.toJSON();Object.assign(G,ae)}break;case"ECDSA":a=["verify"];case"ECDH":{if(G={kty:"EC",ext:i,key_ops:a},"1.2.840.10045.2.1"!==ye.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${ye.algorithm.algorithmId}`);const ae=ye.toJSON();Object.assign(G,ae)}break;case"RSA-OAEP":{if(G.kty="RSA",G.ext=i,G.key_ops=a,"safari"===l.name.toLowerCase())G.alg="RSA-OAEP";else{if(!le.hash)throw new Qe("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(le.hash.name.toUpperCase()){case"SHA-1":G.alg="RSA-OAEP";break;case"SHA-256":G.alg="RSA-OAEP-256";break;case"SHA-384":G.alg="RSA-OAEP-384";break;case"SHA-512":G.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${le.hash.name.toUpperCase()}`)}}const ae=ye.toJSON();Object.assign(G,ae)}break;case"RSAES-PKCS1-V1_5":{G.kty="RSA",G.ext=i,G.key_ops=a,G.alg="PS1";const ae=ye.toJSON();Object.assign(G,ae)}break;default:throw new Error(`Incorrect algorithm name: ${le.name.toUpperCase()}`)}}break;case"pkcs8":{const ke=new Gn,ye=ut(k._H.toArrayBuffer(e));de.assert(ye,"keyData");try{ke.fromSchema(ye.result)}catch{throw new Error("Incorrect keyData")}if(!ke.parsedKey)throw new Error("Incorrect keyData");switch(le.name.toUpperCase()){case"RSA-PSS":switch(null===(h=le.hash)||void 0===h?void 0:h.name.toUpperCase()){case"SHA-1":G.alg="PS1";break;case"SHA-256":G.alg="PS256";break;case"SHA-384":G.alg="PS384";break;case"SHA-512":G.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(d=le.hash)||void 0===d?void 0:d.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(a=["sign"],G.kty="RSA",G.ext=i,G.key_ops=a,"1.2.840.113549.1.1.1"!==ke.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect private key algorithm: ${ke.privateKeyAlgorithm.algorithmId}`);if(!("alg"in G))switch(null===(p=le.hash)||void 0===p?void 0:p.name.toUpperCase()){case"SHA-1":G.alg="RS1";break;case"SHA-256":G.alg="RS256";break;case"SHA-384":G.alg="RS384";break;case"SHA-512":G.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(B=le.hash)||void 0===B?void 0:B.name.toUpperCase()}`)}const ae=ke.toJSON();Object.assign(G,ae)}break;case"ECDSA":a=["sign"];case"ECDH":{if(G={kty:"EC",ext:i,key_ops:a},"1.2.840.10045.2.1"!==ke.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect algorithm: ${ke.privateKeyAlgorithm.algorithmId}`);const ae=ke.toJSON();Object.assign(G,ae)}break;case"RSA-OAEP":{if(G.kty="RSA",G.ext=i,G.key_ops=a,"safari"===l.name.toLowerCase())G.alg="RSA-OAEP";else switch(null===(D=le.hash)||void 0===D?void 0:D.name.toUpperCase()){case"SHA-1":G.alg="RSA-OAEP";break;case"SHA-256":G.alg="RSA-OAEP-256";break;case"SHA-384":G.alg="RSA-OAEP-384";break;case"SHA-512":G.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(q=le.hash)||void 0===q?void 0:q.name.toUpperCase()}`)}const ae=ke.toJSON();Object.assign(G,ae)}break;case"RSAES-PKCS1-V1_5":{a=["decrypt"],G.kty="RSA",G.ext=i,G.key_ops=a,G.alg="PS1";const ae=ke.toJSON();Object.assign(G,ae)}break;default:throw new Error(`Incorrect algorithm name: ${le.name.toUpperCase()}`)}}break;case"jwk":G=e;break;default:throw new Error(`Incorrect format: ${r}`)}if("safari"===l.name.toLowerCase())try{return l.subtle.importKey("jwk",m(JSON.stringify(G)),t,i,a)}catch{return l.subtle.importKey("jwk",G,t,i,a)}return l.subtle.importKey("jwk",G,t,i,a)})()}exportKey(r,e){var t=this;return(0,A.A)(function*(){let i=yield t.subtle.exportKey("jwk",e);switch("safari"===t.name.toLowerCase()&&i instanceof ArrayBuffer&&(i=JSON.parse(J(i))),r.toLowerCase()){case"raw":return t.subtle.exportKey("raw",e);case"spki":{const a=new es;try{a.fromJSON(i)}catch{throw new Error("Incorrect key data")}return a.toSchema().toBER(!1)}case"pkcs8":{const a=new Gn;try{a.fromJSON(i)}catch{throw new Error("Incorrect key data")}return a.toSchema().toBER(!1)}case"jwk":return i;default:throw new Error(`Incorrect format: ${r}`)}})()}convert(r,e,t,i,a,l){var h=this;return(0,A.A)(function*(){if(r.toLowerCase()===e.toLowerCase())return t;const d=yield h.importKey(r,t,i,a,l);return h.exportKey(e,d)})()}getAlgorithmByOID(r,e=!1,t){switch(r){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(e)throw new Error(`Unsupported algorithm identifier ${t?`for ${t} `:y}: ${r}`);return{}}getOIDByAlgorithm(r,e=!1,t){let i=y;switch(r.name.toUpperCase()){case"RSAES-PKCS1-V1_5":i="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.1.1.5";break;case"SHA-256":i="1.2.840.113549.1.1.11";break;case"SHA-384":i="1.2.840.113549.1.1.12";break;case"SHA-512":i="1.2.840.113549.1.1.13"}break;case"RSA-PSS":i="1.2.840.113549.1.1.10";break;case"RSA-OAEP":i="1.2.840.113549.1.1.7";break;case"ECDSA":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.10045.4.1";break;case"SHA-256":i="1.2.840.10045.4.3.2";break;case"SHA-384":i="1.2.840.10045.4.3.3";break;case"SHA-512":i="1.2.840.10045.4.3.4"}break;case"ECDH":switch(r.kdf.toUpperCase()){case"SHA-1":i="1.3.133.16.840.63.0.2";break;case"SHA-256":i="1.3.132.1.11.1";break;case"SHA-384":i="1.3.132.1.11.2";break;case"SHA-512":i="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.2";break;case 192:i="2.16.840.1.101.3.4.1.22";break;case 256:i="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.6";break;case 192:i="2.16.840.1.101.3.4.1.26";break;case 256:i="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.4";break;case 192:i="2.16.840.1.101.3.4.1.24";break;case 256:i="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(r.length){case 128:i="2.16.840.1.101.3.4.1.5";break;case 192:i="2.16.840.1.101.3.4.1.25";break;case 256:i="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(r.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.2.7";break;case"SHA-256":i="1.2.840.113549.2.9";break;case"SHA-384":i="1.2.840.113549.2.10";break;case"SHA-512":i="1.2.840.113549.2.11"}break;case"DH":i="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":i="1.3.14.3.2.26";break;case"SHA-256":i="2.16.840.1.101.3.4.2.1";break;case"SHA-384":i="2.16.840.1.101.3.4.2.2";break;case"SHA-512":i="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":i="1.2.840.113549.1.5.12";break;case"P-256":i="1.2.840.10045.3.1.7";break;case"P-384":i="1.3.132.0.34";break;case"P-521":i="1.3.132.0.35"}if(!i&&e)throw new Error(`Unsupported algorithm ${t?`for ${t} `:y}: ${r.name}`);return i}getAlgorithmParameters(r,e){let t={algorithm:{},usages:[]};switch(r.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(e.toLowerCase()){case"generatekey":t={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":t={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(e.toLowerCase()){case"sign":case"verify":t={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":t={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":t={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(e.toLowerCase()){case"encrypt":case"decrypt":t={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":t={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":t={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(e.toLowerCase()){case"generatekey":t={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":t={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":t={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(e.toLowerCase()){case"exportkey":case"importkey":case"generatekey":t={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":t={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":t={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(e.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":t={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(e.toLowerCase()){case"sign":case"verify":t={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":t={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==e.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};t={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==e.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};t={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return t}getHashAlgorithm(r){let e=y;switch(r.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":e="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":e="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":e="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":e="SHA-512";break;case"1.2.840.113549.1.1.10":try{const t=new Su({schema:r.algorithmParams});if(t.hashAlgorithm){const i=this.getAlgorithmByOID(t.hashAlgorithm.algorithmId);if(!("name"in i))return y;e=i.name}else e="SHA-1"}catch{}}return e}encryptEncryptedContentInfo(r){var e=this;return(0,A.A)(function*(){Qe.assert(r,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=e.getOIDByAlgorithm(r.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),i=e.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),a=e.getOIDByAlgorithm({name:"HMAC",hash:{name:r.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),l=new ArrayBuffer(16),h=new Uint8Array(l);e.getRandomValues(h);const d=new ArrayBuffer(64),p=new Uint8Array(d);e.getRandomValues(p);const B=new Uint8Array(r.contentToEncrypt),D=new Qa({salt:new ve({valueHex:d}),iterationCount:r.iterationCount,prf:new te({algorithmId:a,algorithmParams:new ot})}),q=new Uint8Array(r.password),G=yield e.importKey("raw",q,"PBKDF2",!1,["deriveKey"]),le=yield e.deriveKey({name:"PBKDF2",hash:{name:r.hmacHashAlgorithm},salt:p,iterations:r.iterationCount},G,r.contentEncryptionAlgorithm,!1,["encrypt"]),ke=yield e.encrypt({name:r.contentEncryptionAlgorithm.name,iv:h},le,B),ye=new wf({keyDerivationFunc:new te({algorithmId:i,algorithmParams:D.toSchema()}),encryptionScheme:new te({algorithmId:t,algorithmParams:new ve({valueHex:l})})});return new Ot({contentType:r.contentType,contentEncryptionAlgorithm:new te({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:ye.toSchema()}),encryptedContent:new ve({valueHex:ke})})})()}decryptEncryptedContentInfo(r){var e=this;return(0,A.A)(function*(){if(Qe.assert(r,"password","encryptedContentInfo"),"1.2.840.113549.1.5.13"!==r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)throw new Error(`Unknown "contentEncryptionAlgorithm": ${r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t,i;try{t=new wf({schema:r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}try{i=new Qa({schema:t.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const a=e.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),h=new Uint8Array(t.encryptionScheme.algorithmParams.valueBlock.valueHex),p=new Uint8Array(i.salt.valueBlock.valueHex),B=i.iterationCount;let D="SHA-1";i.prf&&(D=e.getAlgorithmByOID(i.prf.algorithmId,!0).hash.name);const q=yield e.importKey("raw",r.password,"PBKDF2",!1,["deriveKey"]),G=yield e.deriveKey({name:"PBKDF2",hash:{name:D},salt:p,iterations:B},q,a,!1,["decrypt"]),le=r.encryptedContentInfo.getEncryptedContent();return e.decrypt({name:a.name,iv:h},G,le)})()}stampDataWithPassword(r){var e=this;return(0,A.A)(function*(){if(!(r instanceof Object))throw new Error('Parameters must have type "Object"');let t;switch(Qe.assert(r,"password","hashAlgorithm","iterationCount","salt","contentToStamp"),r.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${r.hashAlgorithm}`)}const i={name:"HMAC",length:t,hash:{name:r.hashAlgorithm}},a=yield yf(r.hashAlgorithm,t,r.password,r.salt,r.iterationCount),l=yield e.importKey("raw",new Uint8Array(a),i,!1,["sign"]);return e.sign(i,l,new Uint8Array(r.contentToStamp))})()}verifyDataStampedWithPassword(r){var e=this;return(0,A.A)(function*(){Qe.assert(r,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(r.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${r.hashAlgorithm}`)}const i={name:"HMAC",length:t,hash:{name:r.hashAlgorithm}},a=yield yf(r.hashAlgorithm,t,r.password,r.salt,r.iterationCount),l=yield e.importKey("raw",new Uint8Array(a),i,!1,["verify"]);return e.verify(i,l,new Uint8Array(r.signatureToVerify),new Uint8Array(r.contentToVerify))})()}getSignatureParameters(r,e="SHA-1"){var t=this;return(0,A.A)(function*(){t.getOIDByAlgorithm({name:e},!0,"hashAlgorithm");const i=new te,a=t.getAlgorithmParameters(r.algorithm.name,"sign");if(!Object.keys(a.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const l=a.algorithm;switch(l.hash.name="hash"in r.algorithm&&r.algorithm.hash&&r.algorithm.hash.name?r.algorithm.hash.name:e,r.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":i.algorithmId=t.getOIDByAlgorithm(l,!0);break;case"RSA-PSS":{switch(l.hash.name.toUpperCase()){case"SHA-256":l.saltLength=32;break;case"SHA-384":l.saltLength=48;break;case"SHA-512":l.saltLength=64}const h={};if("SHA-1"!==l.hash.name.toUpperCase()){const p=t.getOIDByAlgorithm({name:l.hash.name},!0,"hashAlgorithm");h.hashAlgorithm=new te({algorithmId:p,algorithmParams:new ot}),h.maskGenAlgorithm=new te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:h.hashAlgorithm.toSchema()})}20!==l.saltLength&&(h.saltLength=l.saltLength);const d=new Su(h);i.algorithmId="1.2.840.113549.1.1.10",i.algorithmParams=d.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${r.algorithm.name}`)}return{signatureAlgorithm:i,parameters:a}})()}signWithPrivateKey(r,e,t){var i=this;return(0,A.A)(function*(){const a=yield i.sign(t.algorithm,e,r);return"ECDSA"===t.algorithm.name?function Q1(s){if(s.byteLength%2!=0)return kt;const r=s.byteLength/2,e=new ArrayBuffer(r);new Uint8Array(e).set(new Uint8Array(s,0,r));const i=new Q({valueHex:e}),a=new ArrayBuffer(r);new Uint8Array(a).set(new Uint8Array(s,r,r));const h=new Q({valueHex:a});return new j({value:[i.convertToDER(),h.convertToDER()]}).toBER(!1)}(a):a})()}fillPublicKeyParameters(r,e){const t={},i=this.getHashAlgorithm(e);if(i===y)throw new Error(`Unsupported signature algorithm: ${e.algorithmId}`);let a;a="1.2.840.113549.1.1.10"===e.algorithmId?e.algorithmId:r.algorithm.algorithmId;const l=this.getAlgorithmByOID(a,!0);if(t.algorithm=this.getAlgorithmParameters(l.name,"importKey"),"hash"in t.algorithm.algorithm&&(t.algorithm.algorithm.hash.name=i),"ECDSA"===l.name){const h=r.algorithm;if(!h.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const d=h.algorithmParams;if("idBlock"in h.algorithmParams&&(1!==d.idBlock.tagClass||6!==d.idBlock.tagNumber))throw new Error("Incorrect type for ECDSA public key parameters");const p=this.getAlgorithmByOID(d.valueBlock.toString(),!0);t.algorithm.algorithm.namedCurve=p.name}return t}getPublicKey(r,e,t){var i=this;return(0,A.A)(function*(){t||(t=i.fillPublicKeyParameters(r,e));const a=r.toSchema().toBER(!1);return i.importKey("spki",a,t.algorithm.algorithm,!0,t.algorithm.usages)})()}verifyWithPublicKey(r,e,t,i,a){var l=this;return(0,A.A)(function*(){let h;if(a){const B={};let D;D="1.2.840.113549.1.1.10"===i.algorithmId?i.algorithmId:t.algorithm.algorithmId;const q=l.getAlgorithmByOID(D,!0);if(B.algorithm=l.getAlgorithmParameters(q.name,"importKey"),"hash"in B.algorithm.algorithm&&(B.algorithm.algorithm.hash.name=a),"ECDSA"===q.name){let G=!1;if("algorithmParams"in t.algorithm&&"idBlock"in t.algorithm.algorithmParams&&1===t.algorithm.algorithmParams.idBlock.tagClass&&6===t.algorithm.algorithmParams.idBlock.tagNumber&&(G=!0),!1===G)throw new Error("Incorrect type for ECDSA public key parameters");const le=l.getAlgorithmByOID(t.algorithm.algorithmParams.valueBlock.toString(),!0);B.algorithm.algorithm.namedCurve=le.name}h=yield l.getPublicKey(t,null,B)}else{if(!(a=l.getHashAlgorithm(i)))throw new Error(`Unsupported signature algorithm: ${i.algorithmId}`);h=yield l.getPublicKey(t,i)}const d=l.getAlgorithmParameters(h.algorithm.name,"verify");"hash"in d.algorithm&&(d.algorithm.hash.name=a);let p=e.valueBlock.valueHexView;if("ECDSA"===h.algorithm.name){const B=Us.find(h.algorithm.namedCurve);if(!B)throw new Error("Unsupported named curve in use");const D=ut(p);de.assert(D,"Signature value"),p=function ep(s,r){if(!(s instanceof j&&2===s.valueBlock.value.length&&s.valueBlock.value[0]instanceof Q&&s.valueBlock.value[1]instanceof Q))return kt;const e=s.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,t=s.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,i=new Uint8Array(2*r);return i.set(e,r-e.byteLength),i.set(t,2*r-t.byteLength),i.buffer}(D.result,B.size)}if("RSA-PSS"===h.algorithm.name){const B=new Su({schema:i.algorithmParams});d.algorithm.saltLength="saltLength"in B?B.saltLength:20;let D="SHA-1";"hashAlgorithm"in B&&(D=l.getAlgorithmByOID(B.hashAlgorithm.algorithmId,!0).name),d.algorithm.hash.name=D}return l.verify(d.algorithm,h,p,r)})()}}let Sf={name:"none",crypto:null};function _f(s){return!(!s||"object"!=typeof s||!("crypto"in s))}function Af(s,...r){let e=null;if(r.length<2)e=r.length?r[0]:typeof self<"u"&&self.crypto?new Kl({name:"browser",crypto:self.crypto}):null;else{const t=r[0],i=r[1];_f(i)?e=i:_f(t)?e=t:"subtle"in t&&"getRandomValues"in t&&(e=new Kl({crypto:t}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if("object"!=typeof global[process.pid])throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if("object"!=typeof global[process.pid].pkijs)throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:s,crypto:e}}else Sf={name:s,crypto:e}}function $e(s=!1){const r=function Z1(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let s;try{s=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return s}return Sf}();if(!r.crypto&&s)throw new Error("Unable to create WebCrypto object");return r.crypto}function Au(s){return $e(!0).getRandomValues(s)}function tp(s,r,e,t,i){return ku.apply(this,arguments)}function ku(){return(ku=(0,A.A)(function*(s,r,e,t,i){switch(s.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new lt(`Unknown hash function: ${s}`)}if(lt.assert(r,"zBuffer","ArrayBuffer"),0===r.byteLength)throw new lt("'zBuffer' has zero length, error");if(lt.assert(t,"SharedInfo","ArrayBuffer"),e>255)throw new lt("Please set 'Counter' argument to value less or equal to 255");const a=new ArrayBuffer(4),l=new Uint8Array(a);l[0]=0,l[1]=0,l[2]=0,l[3]=e;let h=kt;return h=I(h,r),h=I(h,a),h=I(h,t),{counter:e,result:yield i.digest({name:s},h)}})).apply(this,arguments)}function kf(s,r,e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,A.A)(function*(s,r,e,t,i=$e(!0)){let a=0,l=1;switch(s.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:throw new lt(`Unknown hash function: ${s}`)}if(lt.assert(r,"Zbuffer","ArrayBuffer"),0===r.byteLength)throw new lt("'Zbuffer' has zero length, error");lt.assert(t,"SharedInfo","ArrayBuffer");const h=e/a;Math.floor(h)>0&&(l=Math.floor(h),h-l>0&&l++);const d=[];for(let q=1;q<=l;q++)d.push(yield tp(s,r,q,t,i));let p=kt,B=1,D=!0;for(;D;){D=!1;for(const q of d)if(q.counter===B){p=I(p,q.result),D=!0;break}B++}if(p.byteLength>(e>>=3)){const q=new ArrayBuffer(e),G=new Uint8Array(q),le=new Uint8Array(p);for(let ke=0;ke<e;ke++)G[ke]=le[ke];return q}return p})).apply(this,arguments)}const Cu="version",Nu="logID",Iu="extensions",Tu="timestamp",xu="hashAlgorithm",Bu="signatureAlgorithm",Ru="signature",Rf="anonymous";let sp=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Cu,s.defaultValues(Cu)),this.logID=o(e,Nu,s.defaultValues(Nu)),this.timestamp=o(e,Tu,s.defaultValues(Tu)),this.extensions=o(e,Iu,s.defaultValues(Iu)),this.hashAlgorithm=o(e,xu,s.defaultValues(xu)),this.signatureAlgorithm=o(e,Bu,s.defaultValues(Bu)),this.signature=o(e,Ru,s.defaultValues(Ru)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cu:return 0;case Nu:case Iu:return kt;case Tu:return new Date(0);case xu:case Bu:return y;case Ru:return new Fe;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof Rl))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new ua({stream:new wt({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(v(new Uint8Array(e.getBlock(8)),8));const i=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(i)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Rf;break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const a=e.getUint16(),h=ut(new Uint8Array(e.getBlock(a)).buffer.slice(0));if(de.assert(h,"SignedCertificateTimestamp"),this.signature=h.result,t!==47+i+a)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new Rl({data:e.stream.buffer})}toStream(){const e=new ua;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),i=new Uint8Array(t),a=S(this.timestamp.valueOf(),8);let l,h;switch(i.set(new Uint8Array(a),8-a.byteLength),e.appendView(i),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":l=0;break;case"md5":l=1;break;case"sha1":l=2;break;case"sha224":l=3;break;case"sha256":l=4;break;case"sha384":l=5;break;case"sha512":l=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}switch(e.appendChar(l),this.signatureAlgorithm.toLowerCase()){case Rf:h=0;break;case"rsa":h=1;break;case"dsa":h=2;break;case"ecdsa":h=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(h);const d=this.signature.toBER(!1);return e.appendUint16(d.byteLength),e.appendView(new Uint8Array(d)),e}toJSON(){return{version:this.version,logID:b(this.logID),timestamp:this.timestamp,extensions:b(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}verify(e,t,i=0,a=$e(!0)){var l=this;return(0,A.A)(function*(){const h=Ve(J(l.logID));let d=null;const p=new ua;for(const ke of e)if(ke.log_id===h){d=ke.key;break}if(!d)throw new Error(`Public key not found for CT with logId: ${h}`);const B=m(O(d)),D=es.fromBER(B);p.appendChar(0),p.appendChar(0);const q=new ArrayBuffer(8),G=new Uint8Array(q),le=S(l.timestamp.valueOf(),8);return G.set(new Uint8Array(le),8-le.byteLength),p.appendView(G),p.appendUint16(i),0===i&&p.appendUint24(t.byteLength),p.appendView(new Uint8Array(t)),p.appendUint16(l.extensions.byteLength),0!==l.extensions.byteLength&&p.appendView(new Uint8Array(l.extensions)),a.verifyWithPublicKey(p.buffer.slice(0,p.length),new ve({valueHex:l.signature.toBER(!1)}),D,{algorithmId:y},"SHA-256")})()}}return s.CLASS_NAME="SignedCertificateTimestamp",s})();const Gl="timestamps";let ip=(()=>{class s extends ge{constructor(e={}){super(),this.timestamps=o(e,Gl,s.defaultValues(Gl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Gl?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Gl?0===t.length:super.defaultValues(e)}static schema(e={}){var t;const i=o(e,"names",{});return null!==(t=i.optional)&&void 0!==t||(i.optional=!1),new ve({name:i.blockName||"SignedCertificateTimestampList",optional:i.optional})}fromSchema(e){if(!(e instanceof ve))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new ua({stream:new wt({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new sp({stream:t}))}toSchema(){const e=new ua;let t=0;const i=[];for(const a of this.timestamps){const l=a.toStream();i.push(l),t+=l.stream.buffer.byteLength}e.appendUint16(t);for(const a of i)e.appendView(a.stream.view);return new ve({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}return s.CLASS_NAME="SignedCertificateTimestampList",s})();const so="attributes",np=[so];let rp=(()=>{class s extends ge{constructor(e={}){super(),this.attributes=o(e,so,s.defaultValues(so)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===so?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.attributes||y,value:et.schema()})]})}fromSchema(e){R(e,np);const t=pe(e,e,s.schema({names:{attributes:so}}));de.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,i=>new et({schema:i}))}toSchema(){return new j({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}return s.CLASS_NAME="SubjectDirectoryAttributes",s})();class yt{static getItems(){return this.types||(this.types={},yt.register(Fd,"SubjectAltName",Md),yt.register(Ld,"IssuerAltName",Md),yt.register(pu,"AuthorityKeyIdentifier",ef),yt.register(fu,"BasicConstraints",tf),yt.register("1.3.6.1.4.1.311.21.1","MicrosoftCaVersion",v1),yt.register(Gd,"CertificatePolicies",rf),yt.register("1.3.6.1.4.1.311.21.10","CertificatePoliciesMicrosoft",rf),yt.register("1.3.6.1.4.1.311.21.7","MicrosoftCertTemplateV2",Fn),yt.register(Kd,"CRLDistributionPoints",cf),yt.register(mu,"FreshestCRL",cf),yt.register("2.5.29.37","ExtKeyUsage",E1),yt.register(Hd,"CertificateIssuer",It),yt.register(gu,"AuthorityInfoAccess",uf),yt.register("1.3.6.1.5.5.7.1.11","SubjectInfoAccess",uf),yt.register(jd,"IssuingDistributionPoint",N1),yt.register($d,"NameConstraints",x1),yt.register(qd,"PolicyConstraints",R1),yt.register(Jd,"PolicyMappings",P1),yt.register("2.5.29.16","PrivateKeyUsagePeriod",M1),yt.register("1.3.6.1.5.5.7.1.3","QCStatements",L1),yt.register("1.3.6.1.4.1.11129.2.4.2","SignedCertificateTimestampList",ip),yt.register("2.5.29.9","SubjectDirectoryAttributes",rp)),this.types}static fromBER(r,e){const t=ut(e);if(-1===t.offset)return null;const i=this.find(r);if(i)try{return new i.type({schema:t.result})}catch{const l=new i.type;return l.parsingError=`Incorrectly formatted value of extension ${i.name} (${r})`,l}return t.result}static find(r){return this.getItems()[r]||null}static register(r,e,t){this.getItems()[r]={name:e,type:t}}}const io="extnID",Gs="critical",no="extnValue",Jl="parsedValue",ap=[io,Gs,no];let Oi=(()=>{class s extends ge{get parsedValue(){if(void 0===this._parsedValue){const e=yt.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}constructor(e={}){super(),this.extnID=o(e,io,s.defaultValues(io)),this.critical=o(e,Gs,s.defaultValues(Gs)),this.extnValue=no in e?new ve({valueHex:e.extnValue}):s.defaultValues(no),Jl in e&&(this.parsedValue=o(e,Jl,s.defaultValues(Jl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case io:return y;case Gs:return!1;case no:return new ve;case Jl:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.extnID||y}),new ys({name:t.critical||y,optional:!0}),new ve({name:t.extnValue||y})]})}fromSchema(e){R(e,ap);const t=pe(e,e,s.schema({names:{extnID:io,critical:Gs,extnValue:no}}));de.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Gs in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new xe({value:this.extnID})),this.critical!==s.defaultValues(Gs)&&e.push(new ys({value:this.critical})),e.push(this.extnValue),new j({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==s.defaultValues(Gs)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}return s.CLASS_NAME="Extension",s})();const ro="extensions",op=[ro];let Tt=(()=>{class s extends ge{constructor(e={}){super(),this.extensions=o(e,ro,s.defaultValues(ro)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ro?[]:super.defaultValues(e)}static schema(e={},t=!1){const i=o(e,"names",{});return new j({optional:t,name:i.blockName||y,value:[new He({name:i.extensions||y,value:Oi.schema(i.extension||{})})]})}fromSchema(e){R(e,op);const t=pe(e,e,s.schema({names:{extensions:ro}}));de.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,i=>new Oi({schema:i}))}toSchema(){return new j({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}return s.CLASS_NAME="Extensions",s})();const ao="issuer",oo="serialNumber",Pi="issuerUID",lp=[ao,oo,Pi];let cs=(()=>{class s extends ge{constructor(e={}){super(),this.issuer=o(e,ao,s.defaultValues(ao)),this.serialNumber=o(e,oo,s.defaultValues(oo)),Pi in e&&(this.issuerUID=o(e,Pi,s.defaultValues(Pi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ao:return new It;case oo:return new Q;case Pi:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[It.schema(t.issuer||{}),new Q({name:t.serialNumber||y}),new Ze({optional:!0,name:t.issuerUID||y})]})}fromSchema(e){R(e,lp);const t=pe(e,e,s.schema({names:{issuer:{names:{blockName:ao}},serialNumber:oo,issuerUID:Pi}}));de.assertSchema(t,this.className),this.issuer=new It({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,Pi in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new j({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}return s.CLASS_NAME="IssuerSerial",s})();const lo="version",Di="baseCertificateID",Mi="subjectName",co="issuer",uo="signature",ho="serialNumber",fo="attrCertValidityPeriod",mo="attributes",Ui="issuerUniqueID",Fi="extensions",cp=[lo,Di,Mi,co,uo,ho,fo,mo,Ui,Fi];let Ou=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,lo,s.defaultValues(lo)),Di in e&&(this.baseCertificateID=o(e,Di,s.defaultValues(Di))),Mi in e&&(this.subjectName=o(e,Mi,s.defaultValues(Mi))),this.issuer=o(e,co,s.defaultValues(co)),this.signature=o(e,uo,s.defaultValues(uo)),this.serialNumber=o(e,ho,s.defaultValues(ho)),this.attrCertValidityPeriod=o(e,fo,s.defaultValues(fo)),this.attributes=o(e,mo,s.defaultValues(mo)),Ui in e&&(this.issuerUniqueID=o(e,Ui,s.defaultValues(Ui))),Fi in e&&(this.extensions=o(e,Fi,s.defaultValues(Fi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lo:return 0;case Di:return new cs;case Mi:case co:return new It;case uo:return new te;case ho:return new Q;case fo:return new Un;case mo:return[];case Ui:return new Ze;case Fi:return new Tt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),new ft({value:[new X({name:t.baseCertificateID||y,idBlock:{tagClass:3,tagNumber:0},value:cs.schema().valueBlock.value}),new X({name:t.subjectName||y,idBlock:{tagClass:3,tagNumber:1},value:It.schema().valueBlock.value})]}),It.schema({names:{blockName:t.issuer||y}}),te.schema(t.signature||{}),new Q({name:t.serialNumber||y}),Un.schema(t.attrCertValidityPeriod||{}),new j({name:t.attributes||y,value:[new He({value:et.schema()})]}),new Ze({optional:!0,name:t.issuerUniqueID||y}),Tt.schema(t.extensions||{},!0)]})}fromSchema(e){R(e,cp);const t=pe(e,e,s.schema({names:{version:lo,baseCertificateID:Di,subjectName:Mi,issuer:co,signature:{names:{blockName:uo}},serialNumber:ho,attrCertValidityPeriod:{names:{blockName:fo}},attributes:mo,issuerUniqueID:Ui,extensions:{names:{blockName:Fi}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Di in t.result&&(this.baseCertificateID=new cs({schema:new j({value:t.result.baseCertificateID.valueBlock.value})})),Mi in t.result&&(this.subjectName=new It({schema:new j({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new te({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Un({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,i=>new et({schema:i})),Ui in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Fi in t.result&&(this.extensions=new Tt({schema:t.result.extensions}))}toSchema(){const e=new j({value:[new Q({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new j({value:Array.from(this.attributes,t=>t.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,t=>t.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}return s.CLASS_NAME="AttributeCertificateInfoV1",s})();const po="acinfo",go="signatureAlgorithm",vo="signatureValue",up=[po,vo,go];let Pu=(()=>{class s extends ge{constructor(e={}){super(),this.acinfo=o(e,po,s.defaultValues(po)),this.signatureAlgorithm=o(e,go,s.defaultValues(go)),this.signatureValue=o(e,vo,s.defaultValues(vo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case po:return new Ou;case go:return new te;case vo:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[Ou.schema(t.acinfo||{}),te.schema(t.signatureAlgorithm||{}),new Ze({name:t.signatureValue||y})]})}fromSchema(e){R(e,up);const t=pe(e,e,s.schema({names:{acinfo:{names:{blockName:po}},signatureAlgorithm:{names:{blockName:go}},signatureValue:vo}}));de.assertSchema(t,this.className),this.acinfo=new Ou({schema:t.result.acinfo}),this.signatureAlgorithm=new te({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new j({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}return s.CLASS_NAME="AttributeCertificateV1",s})();const wo="digestedObjectType",Li="otherObjectTypeID",yo="digestAlgorithm",bo="objectDigest",hp=[wo,Li,yo,bo];let Wn=(()=>{class s extends ge{constructor(e={}){super(),this.digestedObjectType=o(e,wo,s.defaultValues(wo)),Li in e&&(this.otherObjectTypeID=o(e,Li,s.defaultValues(Li))),this.digestAlgorithm=o(e,yo,s.defaultValues(yo)),this.objectDigest=o(e,bo,s.defaultValues(bo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wo:return new oa;case Li:return new xe;case yo:return new te;case bo:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new oa({name:t.digestedObjectType||y}),new xe({optional:!0,name:t.otherObjectTypeID||y}),te.schema(t.digestAlgorithm||{}),new Ze({name:t.objectDigest||y})]})}fromSchema(e){R(e,hp);const t=pe(e,e,s.schema({names:{digestedObjectType:wo,otherObjectTypeID:Li,digestAlgorithm:{names:{blockName:yo}},objectDigest:bo}}));de.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,Li in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new te({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new j({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}return s.CLASS_NAME="ObjectDigestInfo",s})();const ji="issuerName",Hi="baseCertificateID",$i="objectDigestInfo",dp=[ji,Hi,$i];let Df=(()=>{class s extends ge{constructor(e={}){super(),ji in e&&(this.issuerName=o(e,ji,s.defaultValues(ji))),Hi in e&&(this.baseCertificateID=o(e,Hi,s.defaultValues(Hi))),$i in e&&(this.objectDigestInfo=o(e,$i,s.defaultValues($i))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ji:return new It;case Hi:return new cs;case $i:return new Wn;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[It.schema({names:{blockName:t.issuerName}},!0),new X({optional:!0,name:t.baseCertificateID||y,idBlock:{tagClass:3,tagNumber:0},value:cs.schema().valueBlock.value}),new X({optional:!0,name:t.objectDigestInfo||y,idBlock:{tagClass:3,tagNumber:1},value:Wn.schema().valueBlock.value})]})}fromSchema(e){R(e,dp);const t=pe(e,e,s.schema({names:{issuerName:ji,baseCertificateID:Hi,objectDigestInfo:$i}}));de.assertSchema(t,this.className),ji in t.result&&(this.issuerName=new It({schema:t.result.issuerName})),Hi in t.result&&(this.baseCertificateID=new cs({schema:new j({value:t.result.baseCertificateID.valueBlock.value})})),$i in t.result&&(this.objectDigestInfo=new Wn({schema:new j({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new j;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}return s.CLASS_NAME="V2Form",s})();const Ki="baseCertificateID",Gi="entityName",Ji="objectDigestInfo",fp=[Ki,Gi,Ji];let Du=(()=>{class s extends ge{constructor(e={}){super(),Ki in e&&(this.baseCertificateID=o(e,Ki,s.defaultValues(Ki))),Gi in e&&(this.entityName=o(e,Gi,s.defaultValues(Gi))),Ji in e&&(this.objectDigestInfo=o(e,Ji,s.defaultValues(Ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ki:return new cs;case Gi:return new It;case Ji:return new Wn;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({optional:!0,name:t.baseCertificateID||y,idBlock:{tagClass:3,tagNumber:0},value:cs.schema().valueBlock.value}),new X({optional:!0,name:t.entityName||y,idBlock:{tagClass:3,tagNumber:1},value:It.schema().valueBlock.value}),new X({optional:!0,name:t.objectDigestInfo||y,idBlock:{tagClass:3,tagNumber:2},value:Wn.schema().valueBlock.value})]})}fromSchema(e){R(e,fp);const t=pe(e,e,s.schema({names:{baseCertificateID:Ki,entityName:Gi,objectDigestInfo:Ji}}));de.assertSchema(t,this.className),Ki in t.result&&(this.baseCertificateID=new cs({schema:new j({value:t.result.baseCertificateID.valueBlock.value})})),Gi in t.result&&(this.entityName=new It({schema:new j({value:t.result.entityName.valueBlock.value})})),Ji in t.result&&(this.objectDigestInfo=new Wn({schema:new j({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new j;return this.baseCertificateID&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new X({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}return s.CLASS_NAME="Holder",s})();const So="version",_o="holder",Ao="issuer",ko="signature",Eo="serialNumber",Co="attrCertValidityPeriod",No="attributes",qi="issuerUniqueID",zi="extensions",mp=[So,_o,Ao,ko,Eo,Co,No,qi,zi];let Mu=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,So,s.defaultValues(So)),this.holder=o(e,_o,s.defaultValues(_o)),this.issuer=o(e,Ao,s.defaultValues(Ao)),this.signature=o(e,ko,s.defaultValues(ko)),this.serialNumber=o(e,Eo,s.defaultValues(Eo)),this.attrCertValidityPeriod=o(e,Co,s.defaultValues(Co)),this.attributes=o(e,No,s.defaultValues(No)),qi in e&&(this.issuerUniqueID=o(e,qi,s.defaultValues(qi))),zi in e&&(this.extensions=o(e,zi,s.defaultValues(zi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case So:return 1;case _o:return new Du;case Ao:return{};case ko:return new te;case Eo:return new Q;case Co:return new Un;case No:return[];case qi:return new Ze;case zi:return new Tt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),Du.schema(t.holder||{}),new ft({value:[It.schema({names:{blockName:t.issuer||y}}),new X({name:t.issuer||y,idBlock:{tagClass:3,tagNumber:0},value:Df.schema().valueBlock.value})]}),te.schema(t.signature||{}),new Q({name:t.serialNumber||y}),Un.schema(t.attrCertValidityPeriod||{}),new j({name:t.attributes||y,value:[new He({value:et.schema()})]}),new Ze({optional:!0,name:t.issuerUniqueID||y}),Tt.schema(t.extensions||{},!0)]})}fromSchema(e){R(e,mp);const t=pe(e,e,s.schema({names:{version:So,holder:{names:{blockName:_o}},issuer:Ao,signature:{names:{blockName:ko}},serialNumber:Eo,attrCertValidityPeriod:{names:{blockName:Co}},attributes:No,issuerUniqueID:qi,extensions:{names:{blockName:zi}}}}));if(3!==(de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Du({schema:t.result.holder}),t.result.issuer.idBlock.tagClass))throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new Df({schema:new j({value:t.result.issuer.valueBlock.value})}),this.signature=new te({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Un({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,i=>new et({schema:i})),qi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),zi in t.result&&(this.extensions=new Tt({schema:t.result.extensions}))}toSchema(){const e=new j({value:[new Q({value:this.version}),this.holder.toSchema(),new X({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new j({value:Array.from(this.attributes,t=>t.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,t=>t.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}return s.CLASS_NAME="AttributeCertificateInfoV2",s})();const Io="acinfo",To="signatureAlgorithm",xo="signatureValue",pp=[Io,To,xo];let Wi=(()=>{class s extends ge{constructor(e={}){super(),this.acinfo=o(e,Io,s.defaultValues(Io)),this.signatureAlgorithm=o(e,To,s.defaultValues(To)),this.signatureValue=o(e,xo,s.defaultValues(xo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Io:return new Mu;case To:return new te;case xo:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[Mu.schema(t.acinfo||{}),te.schema(t.signatureAlgorithm||{}),new Ze({name:t.signatureValue||y})]})}fromSchema(e){R(e,pp);const t=pe(e,e,s.schema({names:{acinfo:{names:{blockName:Io}},signatureAlgorithm:{names:{blockName:To}},signatureValue:xo}}));de.assertSchema(t,this.className),this.acinfo=new Mu({schema:t.result.acinfo}),this.signatureAlgorithm=new te({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new j({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}return s.CLASS_NAME="AttributeCertificateV2",s})();const Xi="contentType",Xn="content",gp=[Xi,Xn];let Pt=(()=>{class s extends ge{constructor(e={}){super(),this.contentType=o(e,Xi,s.defaultValues(Xi)),this.content=o(e,Xn,s.defaultValues(Xn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xi:return y;case Xn:return new Fe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xi:return"string"==typeof t&&t===this.defaultValues(Xi);case Xn:return t instanceof Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return"optional"in t||(t.optional=!1),new j({name:t.blockName||"ContentInfo",optional:t.optional,value:[new xe({name:t.contentType||Xi}),new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.content||Xn})]})]})}fromSchema(e){R(e,gp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new j({value:[new xe({value:this.contentType}),new X({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof Fe||(e.content=this.content.toJSON()),e}}return s.CLASS_NAME="ContentInfo",s.DATA=vu,s.SIGNED_DATA="1.2.840.113549.1.7.2",s.ENVELOPED_DATA=Wd,s.ENCRYPTED_DATA=Xd,s})();const Uu="type",Fu="value",Lu="utcTimeName",ju="generalTimeName",vp=[Lu,ju];let xt=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,Uu,s.defaultValues(Uu)),this.value=o(e,Fu,s.defaultValues(Fu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uu:return 0;case Fu:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const i=o(e,"names",{});return new ft({optional:t,value:[new Vn({name:i.utcTimeName||y}),new dt({name:i.generalTimeName||y})]})}fromSchema(e){R(e,vp);const t=pe(e,e,s.schema({names:{utcTimeName:Lu,generalTimeName:ju}}));de.assertSchema(t,this.className),Lu in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),ju in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return 0===this.type?new Vn({valueDate:this.value}):1===this.type?new dt({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}return s.CLASS_NAME="Time",s})();const Js="version",ql="serialNumber",zl="signature",Wl="issuer",Xl="notBefore",Yl="notAfter",Zl="subject",Ql="subjectPublicKeyInfo",Bo="issuerUniqueID",Ro="subjectUniqueID",Vo="extensions",Oo="signatureAlgorithm",Po="signatureValue",Ut="tbsCertificate",ec=`${Ut}.${Js}`,$u=`${Ut}.${ql}`,Ku=`${Ut}.${zl}`,Gu=`${Ut}.${Wl}`,tc=`${Ut}.${Xl}`,sc=`${Ut}.${Yl}`,Ju=`${Ut}.${Zl}`,qu=`${Ut}.${Ql}`,ic=`${Ut}.${Bo}`,nc=`${Ut}.${Ro}`,Do=`${Ut}.${Vo}`,yp=[Ut,ec,$u,Ku,Gu,tc,sc,Ju,qu,ic,nc,Do,Oo,Po];function bp(s={}){const r=o(s,"names",{});return new j({name:r.blockName||Ut,value:[new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Q({name:r.tbsCertificateVersion||ec})]}),new Q({name:r.tbsCertificateSerialNumber||$u}),te.schema(r.signature||{names:{blockName:Ku}}),mt.schema(r.issuer||{names:{blockName:Gu}}),new j({name:r.tbsCertificateValidity||"tbsCertificate.validity",value:[xt.schema(r.notBefore||{names:{utcTimeName:tc,generalTimeName:tc}}),xt.schema(r.notAfter||{names:{utcTimeName:sc,generalTimeName:sc}})]}),mt.schema(r.subject||{names:{blockName:Ju}}),es.schema(r.subjectPublicKeyInfo||{names:{blockName:qu}}),new Be({name:r.tbsCertificateIssuerUniqueID||ic,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Be({name:r.tbsCertificateSubjectUniqueID||nc,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[Tt.schema(r.extensions||{names:{blockName:Do}})]})]})}let Kt=(()=>{class s extends ge{get tbs(){return k._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Js,s.defaultValues(Js)),this.serialNumber=o(e,ql,s.defaultValues(ql)),this.signature=o(e,zl,s.defaultValues(zl)),this.issuer=o(e,Wl,s.defaultValues(Wl)),this.notBefore=o(e,Xl,s.defaultValues(Xl)),this.notAfter=o(e,Yl,s.defaultValues(Yl)),this.subject=o(e,Zl,s.defaultValues(Zl)),this.subjectPublicKeyInfo=o(e,Ql,s.defaultValues(Ql)),Bo in e&&(this.issuerUniqueID=o(e,Bo,s.defaultValues(Bo))),Ro in e&&(this.subjectUniqueID=o(e,Ro,s.defaultValues(Ro))),Vo in e&&(this.extensions=o(e,Vo,s.defaultValues(Vo))),this.signatureAlgorithm=o(e,Oo,s.defaultValues(Oo)),this.signatureValue=o(e,Po,s.defaultValues(Po)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return kt;case Js:return 0;case ql:return new Q;case zl:return new te;case Wl:return new mt;case Xl:case Yl:return new xt;case Zl:return new mt;case Ql:return new es;case Bo:case Ro:return kt;case Vo:return[];case Oo:return new te;case Po:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[bp(t.tbsCertificate),te.schema(t.signatureAlgorithm||{names:{blockName:Oo}}),new Ze({name:t.signatureValue||Po})]})}fromSchema(e){R(e,yp);const t=pe(e,e,s.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:Do}}}}}}));de.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,ec in t.result&&(this.version=t.result[ec].valueBlock.valueDec),this.serialNumber=t.result[$u],this.signature=new te({schema:t.result[Ku]}),this.issuer=new mt({schema:t.result[Gu]}),this.notBefore=new xt({schema:t.result[tc]}),this.notAfter=new xt({schema:t.result[sc]}),this.subject=new mt({schema:t.result[Ju]}),this.subjectPublicKeyInfo=new es({schema:t.result[qu]}),ic in t.result&&(this.issuerUniqueID=t.result[ic].valueBlock.valueHex),nc in t.result&&(this.subjectUniqueID=t.result[nc].valueBlock.valueHex),Do in t.result&&(this.extensions=Array.from(t.result[Do],i=>new Oi({schema:i}))),this.signatureAlgorithm=new te({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return Js in this&&this.version!==s.defaultValues(Js)&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Q({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new j({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new Be({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new Be({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new j({value:Array.from(this.extensions,t=>t.toSchema())})]})),new j({value:e})}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return s.schema().value[0];const i=ut(this.tbsView);de.assert(i,"TBS Certificate"),t=i.result}else t=this.encodeTBS();return new j({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:k.U$.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Js in this&&this.version!==s.defaultValues(Js)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=k.U$.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=k.U$.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}getPublicKey(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){return t.getPublicKey(i.subjectPublicKeyInfo,i.signatureAlgorithm,e)})()}getKeyHash(e="SHA-1",t=$e(!0)){var i=this;return(0,A.A)(function*(){return t.digest({name:e},i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)})()}sign(e,t="SHA-1",i=$e(!0)){var a=this;return(0,A.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters;a.signature=l.signatureAlgorithm,a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Ze({valueHex:d})})()}verify(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){let a;if(e?a=e.subjectPublicKeyInfo:i.issuer.isEqual(i.subject)&&(a=i.subjectPublicKeyInfo),!(a instanceof es))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(i.tbsView,i.signatureValue,a,i.signatureAlgorithm)})()}}return s.CLASS_NAME="Certificate",s})();function Mf(s,r=null){if(r&&s.issuer.isEqual(r.issuer)&&s.serialNumber.isEqual(r.serialNumber))return null;let e=!1;if(s.extensions)for(const t of s.extensions)if(t.extnID===fu&&t.parsedValue instanceof tf&&t.parsedValue.cA){e=!0;break}return e?s:null}const Yn="certId",Zn="certValue",Qn="parsedValue",Sp=[Yn,Zn];let zu=(()=>{class s extends ge{constructor(e={}){super(),this.certId=o(e,Yn,s.defaultValues(Yn)),this.certValue=o(e,Zn,s.defaultValues(Zn)),Qn in e&&(this.parsedValue=o(e,Qn,s.defaultValues(Qn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yn:return y;case Zn:return new Fe;case Qn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yn:return t===y;case Zn:return t instanceof Fe;case Qn:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.id||"id"}),new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.value||"value"})]})]})}fromSchema(e){R(e,Sp);const t=pe(e,e,s.schema({names:{id:Yn,value:Zn}}));de.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const i=this.certValue.valueBlock.valueHexView;switch(this.certId){case Yd:try{this.parsedValue=Kt.fromBER(i)}catch{Wi.fromBER(i)}break;case Zd:this.parsedValue=Wi.fromBER(i);break;default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return Qn in this&&(this.certId="acinfo"in this.parsedValue?Zd:Yd,this.certValue=new ve({valueHex:this.parsedValue.toSchema().toBER(!1)})),new j({value:[new xe({value:this.certId}),new X({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}return s.CLASS_NAME="CertBag",s})();const Mo="userCertificate",er="revocationDate",Yi="crlEntryExtensions",_p=[Mo,er,Yi];let Ap=(()=>{class s extends ge{constructor(e={}){super(),this.userCertificate=o(e,Mo,s.defaultValues(Mo)),this.revocationDate=o(e,er,s.defaultValues(er)),Yi in e&&(this.crlEntryExtensions=o(e,Yi,s.defaultValues(Yi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mo:return new Q;case er:return new xt;case Yi:return new Tt;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.userCertificate||Mo}),xt.schema({names:{utcTimeName:t.revocationDate||er,generalTimeName:t.revocationDate||er}}),Tt.schema({names:{blockName:t.crlEntryExtensions||Yi}},!0)]})}fromSchema(e){R(e,_p);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new xt({schema:t.result.revocationDate}),Yi in t.result&&(this.crlEntryExtensions=new Tt({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new j({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}return s.CLASS_NAME="RevokedCertificate",s})();const Uo="version",Xu="signature",Yu="issuer",Zu="thisUpdate",rc="nextUpdate",ac="revokedCertificates",oc="crlExtensions",Fo="signatureAlgorithm",Lo="signatureValue",us="tbsCertList",lc=`${us}.version`,Qu=`${us}.signature`,eh=`${us}.issuer`,cc=`${us}.thisUpdate`,jo=`${us}.nextUpdate`,uc=`${us}.revokedCertificates`,hc=`${us}.extensions`,kp=[us,lc,Qu,eh,cc,jo,uc,hc,Fo,Lo];function Ep(s={}){const r=o(s,"names",{});return new j({name:r.blockName||us,value:[new Q({optional:!0,name:r.tbsCertListVersion||lc,value:2}),te.schema(r.signature||{names:{blockName:Qu}}),mt.schema(r.issuer||{names:{blockName:eh}}),xt.schema(r.tbsCertListThisUpdate||{names:{utcTimeName:cc,generalTimeName:cc}}),xt.schema(r.tbsCertListNextUpdate||{names:{utcTimeName:jo,generalTimeName:jo}},!0),new j({optional:!0,value:[new He({name:r.tbsCertListRevokedCertificates||uc,value:new j({value:[new Q,xt.schema(),Tt.schema({},!0)]})})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Tt.schema(r.crlExtensions||{names:{blockName:hc}})]})]})}const Cp=[pu,Ld,"2.5.29.20","2.5.29.27",jd,mu,gu,"2.5.29.21","2.5.29.24",Hd];let dc=(()=>{class s extends ge{get tbs(){return k._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Uo,s.defaultValues(Uo)),this.signature=o(e,Xu,s.defaultValues(Xu)),this.issuer=o(e,Yu,s.defaultValues(Yu)),this.thisUpdate=o(e,Zu,s.defaultValues(Zu)),rc in e&&(this.nextUpdate=o(e,rc,s.defaultValues(rc))),ac in e&&(this.revokedCertificates=o(e,ac,s.defaultValues(ac))),oc in e&&(this.crlExtensions=o(e,oc,s.defaultValues(oc))),this.signatureAlgorithm=o(e,Fo,s.defaultValues(Fo)),this.signatureValue=o(e,Lo,s.defaultValues(Lo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return kt;case Uo:return 0;case Xu:return new te;case Yu:return new mt;case Zu:case rc:return new xt;case ac:return[];case oc:return new Tt;case Fo:return new te;case Lo:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||"CertificateList",value:[Ep(e),te.schema(t.signatureAlgorithm||{names:{blockName:Fo}}),new Ze({name:t.signatureValue||Lo})]})}fromSchema(e){R(e,kp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,lc in t.result&&(this.version=t.result[lc].valueBlock.valueDec),this.signature=new te({schema:t.result[Qu]}),this.issuer=new mt({schema:t.result[eh]}),this.thisUpdate=new xt({schema:t.result[cc]}),jo in t.result&&(this.nextUpdate=new xt({schema:t.result[jo]})),uc in t.result&&(this.revokedCertificates=Array.from(t.result[uc],i=>new Ap({schema:i}))),hc in t.result&&(this.crlExtensions=new Tt({schema:t.result[hc]})),this.signatureAlgorithm=new te({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==s.defaultValues(Uo)&&e.push(new Q({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new j({value:Array.from(this.revokedCertificates,t=>t.toSchema())})),this.crlExtensions&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new j({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return s.schema();const i=ut(this.tbsView);de.assert(i,"TBS Certificate Revocation List"),t=i.result}return new j({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:k.U$.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==s.defaultValues(Uo)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,t=>t.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}sign(e,t="SHA-1",i=$e(!0)){var a=this;return(0,A.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),{parameters:h}=l;a.signature=l.signatureAlgorithm,a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Ze({valueHex:d})})()}verify(e={},t=$e(!0)){var i=this;return(0,A.A)(function*(){let a;if(e.issuerCertificate&&(a=e.issuerCertificate.subjectPublicKeyInfo,!i.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(a=e.publicKeyInfo),!a)throw new Error("Issuer's certificate must be provided as an input parameter");if(i.crlExtensions)for(const l of i.crlExtensions.extensions)if(l.critical&&!Cp.includes(l.extnID))return!1;return t.verifyWithPublicKey(i.tbsView,i.signatureValue,a,i.signatureAlgorithm)})()}}return s.CLASS_NAME="CertificateRevocationList",s})();const tr="crlId",sr="crlValue",Ho="parsedValue",Np=[tr,sr];let Ip=(()=>{class s extends ge{constructor(e={}){super(),this.crlId=o(e,tr,s.defaultValues(tr)),this.crlValue=o(e,sr,s.defaultValues(sr)),Ho in e&&(this.parsedValue=o(e,Ho,s.defaultValues(Ho))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tr:return y;case sr:return new Fe;case Ho:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case tr:return t===y;case sr:return t instanceof Fe;case Ho:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.id||"id"}),new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.value||"value"})]})]})}fromSchema(e){R(e,Np);const t=pe(e,e,s.schema({names:{id:tr,value:sr}}));if(de.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId!==Qd)throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`);this.parsedValue=dc.fromBER(this.certValue.valueBlock.valueHex)}toSchema(){return this.parsedValue&&(this.crlId=Qd,this.crlValue=new ve({valueHex:this.parsedValue.toSchema().toBER(!1)})),new j({value:[new xe({value:this.crlId}),new X({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}return s.CLASS_NAME="CRLBag",s})();const ir="version",nr="encryptedContentInfo",qs="unprotectedAttrs",Tp=[ir,nr,qs];let fc=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,ir,s.defaultValues(ir)),this.encryptedContentInfo=o(e,nr,s.defaultValues(nr)),qs in e&&(this.unprotectedAttrs=o(e,qs,s.defaultValues(qs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ir:return 0;case nr:return new Ot;case qs:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ir:return 0===t;case nr:return Ot.compareWithDefault("contentType",t.contentType)&&Ot.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Ot.compareWithDefault("encryptedContent",t.encryptedContent);case qs:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),Ot.schema(t.encryptedContentInfo||{}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.unprotectedAttrs||y,value:et.schema()})]})]})}fromSchema(e){R(e,Tp);const t=pe(e,e,s.schema({names:{version:ir,encryptedContentInfo:{names:{blockName:nr}},unprotectedAttrs:qs}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new Ot({schema:t.result.encryptedContentInfo}),qs in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,i=>new et({schema:i})))}toSchema(){const e=[];return e.push(new Q({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}encrypt(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){lt.assert(e,"parameters","object");const a={...e,contentType:"1.2.840.113549.1.7.1"};i.encryptedContentInfo=yield t.encryptEncryptedContentInfo(a)})()}decrypt(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){lt.assert(e,"parameters","object");const a={...e,encryptedContentInfo:i.encryptedContentInfo};return t.decryptEncryptedContentInfo(a)})()}}return s.CLASS_NAME="EncryptedData",s})();const Zi="encryptionAlgorithm",zs="encryptedData",$o="parsedValue",xp=[Zi,zs];let Uf=(()=>{class s extends ge{constructor(e={}){super(),this.encryptionAlgorithm=o(e,Zi,s.defaultValues(Zi)),this.encryptedData=o(e,zs,s.defaultValues(zs)),$o in e&&(this.parsedValue=o(e,$o,s.defaultValues($o))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zi:return new te;case zs:return new ve;case $o:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zi:return te.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case zs:return t.isEqual(s.defaultValues(e));case $o:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.encryptionAlgorithm||{names:{blockName:Zi}}),new ft({value:[new ve({name:t.encryptedData||zs}),new ve({idBlock:{isConstructed:!0},name:t.encryptedData||zs})]})]})}fromSchema(e){R(e,xp);const t=pe(e,e,s.schema({names:{encryptionAlgorithm:{names:{blockName:Zi}},encryptedData:zs}}));de.assertSchema(t,this.className),this.encryptionAlgorithm=new te({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new j({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}parseInternalValues(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){const l=yield new fc({encryptedContentInfo:new Ot({contentEncryptionAlgorithm:i.encryptionAlgorithm,encryptedContent:i.encryptedData})}).decrypt(e,t);i.parsedValue=Gn.fromBER(l)})()}makeInternalValues(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){if(!i.parsedValue)throw new Error('Please initialize "parsedValue" first');const a=new fc,l={...e,contentToEncrypt:i.parsedValue.toSchema().toBER(!1)};if(yield a.encrypt(l,t),!a.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");i.encryptionAlgorithm=a.encryptedContentInfo.contentEncryptionAlgorithm,i.encryptedData=a.encryptedContentInfo.encryptedContent})()}}return s.CLASS_NAME="PKCS8ShroudedKeyBag",s})();const rr="secretTypeId",ar="secretValue",Bp=[rr,ar];let Rp=(()=>{class s extends ge{constructor(e={}){super(),this.secretTypeId=o(e,rr,s.defaultValues(rr)),this.secretValue=o(e,ar,s.defaultValues(ar)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rr:return y;case ar:return new Fe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rr:return t===y;case ar:return t instanceof Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.id||"id"}),new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.value||"value"})]})]})}fromSchema(e){R(e,Bp);const t=pe(e,e,s.schema({names:{id:rr,value:ar}}));de.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new j({value:[new xe({value:this.secretTypeId}),new X({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}return s.CLASS_NAME="SecretBag",s})();class Ws{static getItems(){return this.items||(this.items={},Ws.register("1.2.840.113549.1.12.10.1.1",Gn),Ws.register("1.2.840.113549.1.12.10.1.2",Uf),Ws.register("1.2.840.113549.1.12.10.1.3",zu),Ws.register("1.2.840.113549.1.12.10.1.4",Ip),Ws.register("1.2.840.113549.1.12.10.1.5",Rp),Ws.register("1.2.840.113549.1.12.10.1.6",tn)),this.items}static register(r,e){this.getItems()[r]=e}static find(r){return this.getItems()[r]||null}}const Qi="bagId",en="bagValue",hs="bagAttributes",Vp=[Qi,en,hs];let Ko=(()=>{class s extends ge{constructor(e={}){super(),this.bagId=o(e,Qi,s.defaultValues(Qi)),this.bagValue=o(e,en,s.defaultValues(en)),hs in e&&(this.bagAttributes=o(e,hs,s.defaultValues(hs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qi:return y;case en:return new Fe;case hs:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qi:return t===y;case en:return t instanceof Fe;case hs:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.bagId||Qi}),new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.bagValue||en})]}),new At({optional:!0,value:[new He({name:t.bagAttributes||hs,value:et.schema()})]})]})}fromSchema(e){R(e,Vp);const t=pe(e,e,s.schema({names:{bagId:Qi,bagValue:en,bagAttributes:hs}}));de.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const i=Ws.find(this.bagId);if(!i)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new i({schema:t.result.bagValue}),hs in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,a=>new et({schema:a})))}toSchema(){const e=[new xe({value:this.bagId}),new X({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new At({value:Array.from(this.bagAttributes,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,t=>t.toJSON())),e}}return s.CLASS_NAME="SafeBag",s})();const or="safeBags";let tn=(()=>{class s extends ge{constructor(e={}){super(),this.safeBags=o(e,or,s.defaultValues(or)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===or?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===or?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.safeBags||y,value:Ko.schema()})]})}fromSchema(e){R(e,[or]);const t=pe(e,e,s.schema({names:{safeBags:or}}));de.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,i=>new Ko({schema:i}))}toSchema(){return new j({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}return s.CLASS_NAME="SafeContents",s})();const Go="otherCertFormat",Jo="otherCert",Op=[Go,Jo];class Xs extends ge{constructor(r={}){super(),this.otherCertFormat=o(r,Go,Xs.defaultValues(Go)),this.otherCert=o(r,Jo,Xs.defaultValues(Jo)),r.schema&&this.fromSchema(r.schema)}static defaultValues(r){switch(r){case Go:return y;case Jo:return new Fe;default:return super.defaultValues(r)}}static schema(r={}){const e=o(r,"names",{});return new j({name:e.blockName||y,value:[new xe({name:e.otherCertFormat||Go}),new Fe({name:e.otherCert||Jo})]})}fromSchema(r){R(r,Op);const e=pe(r,r,Xs.schema());de.assertSchema(e,this.className),this.otherCertFormat=e.result.otherCertFormat.valueBlock.toString(),this.otherCert=e.result.otherCert}toSchema(){return new j({value:[new xe({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const r={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof Fe||(r.otherCert=this.otherCert.toJSON()),r}}const qo="certificates",Pp=[qo];let lr=(()=>{class s extends ge{constructor(e={}){super(),this.certificates=o(e,qo,s.defaultValues(qo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===qo?[]:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new At({name:t.blockName||y,value:[new He({name:t.certificates||qo,value:new ft({value:[Kt.schema(),new X({idBlock:{tagClass:3,tagNumber:0},value:[new Fe]}),new X({idBlock:{tagClass:3,tagNumber:1},value:[new j]}),new X({idBlock:{tagClass:3,tagNumber:2},value:Wi.schema().valueBlock.value}),new X({idBlock:{tagClass:3,tagNumber:3},value:Xs.schema().valueBlock.value})]})})]})}fromSchema(e){R(e,Pp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],i=>{const a=i.idBlock.tagNumber;if(1===i.idBlock.tagClass)return new Kt({schema:i});const l=new j({value:i.valueBlock.value});switch(a){case 1:return 1===l.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new Wi({schema:l}):new Pu({schema:l});case 2:return new Wi({schema:l});case 3:return new Xs({schema:l})}return i})}toSchema(){return new At({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof Kt:return e.toSchema();case e instanceof Pu:return new X({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof Wi:return new X({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Xs:return new X({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}return s.CLASS_NAME="CertificateSet",s})();const zo="otherRevInfoFormat",Wo="otherRevInfo",Dp=[zo,Wo];let mc=(()=>{class s extends ge{constructor(e={}){super(),this.otherRevInfoFormat=o(e,zo,s.defaultValues(zo)),this.otherRevInfo=o(e,Wo,s.defaultValues(Wo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zo:return y;case Wo:return new Fe;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.otherRevInfoFormat||zo}),new Fe({name:t.otherRevInfo||Wo})]})}fromSchema(e){R(e,Dp);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new j({value:[new xe({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof Fe||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}return s.CLASS_NAME="OtherRevocationInfoFormat",s})();const Xo="crls",th="otherRevocationInfos",Mp=[Xo];let pc=(()=>{class s extends ge{constructor(e={}){super(),this.crls=o(e,Xo,s.defaultValues(Xo)),this.otherRevocationInfos=o(e,th,s.defaultValues(th)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xo:case th:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new At({name:t.blockName||y,value:[new He({name:t.crls||y,value:new ft({value:[dc.schema(),new X({idBlock:{tagClass:3,tagNumber:1},value:[new xe,new Fe]})]})})]})}fromSchema(e){R(e,Mp);const t=pe(e,e,s.schema({names:{crls:Xo}}));if(de.assertSchema(t,this.className),t.result.crls)for(const i of t.result.crls)1===i.idBlock.tagClass?this.crls.push(new dc({schema:i})):this.otherRevocationInfos.push(new mc({schema:i}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,t=>t.toSchema())),e.push(...Array.from(this.otherRevocationInfos,t=>{const i=t.toSchema();return i.idBlock.tagClass=3,i.idBlock.tagNumber=1,i})),new At({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}return s.CLASS_NAME="RevocationInfoChoices",s})();const Yo="certs",sn="crls",Up=[Yo,sn];let sh=(()=>{class s extends ge{constructor(e={}){super(),this.crls=o(e,sn,s.defaultValues(sn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yo:return new lr;case sn:return new pc;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yo:return 0===t.certificates.length;case sn:return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({name:t.certs||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:lr.schema().valueBlock.value}),new X({name:t.crls||y,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pc.schema().valueBlock.value})]})}fromSchema(e){R(e,Up);const t=pe(e,e,s.schema({names:{certs:Yo,crls:sn}}));de.assertSchema(t,this.className),Yo in t.result&&(this.certs=new lr({schema:new At({value:t.result.certs.valueBlock.value})})),sn in t.result&&(this.crls=new pc({schema:new At({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new X({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new j({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}return s.CLASS_NAME="OriginatorInfo",s})();const Zo="issuer",Qo="serialNumber",Fp=[Zo,Qo];let Bt=(()=>{class s extends ge{constructor(e={}){super(),this.issuer=o(e,Zo,s.defaultValues(Zo)),this.serialNumber=o(e,Qo,s.defaultValues(Qo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zo:return new mt;case Qo:return new Q;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[mt.schema(t.issuer||{}),new Q({name:t.serialNumber||y})]})}fromSchema(e){R(e,Fp);const t=pe(e,e,s.schema({names:{issuer:{names:{blockName:Zo}},serialNumber:Qo}}));de.assertSchema(t,this.className),this.issuer=new mt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new j({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}return s.CLASS_NAME="IssuerAndSerialNumber",s})();const gc="variant",el="value",Lp=["blockName"];let jp=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,gc,s.defaultValues(gc)),el in e&&(this.value=o(e,el,s.defaultValues(el))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gc:return-1;case el:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gc:return-1===t;case el:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new ft({value:[Bt.schema({names:{blockName:t.blockName||y}}),new Be({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){R(e,Lp);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new ve({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Bt))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof ve))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new Be({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Fe}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant)&&this.value&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="RecipientIdentifier",s})();const nn="version",cr="rid",ur="keyEncryptionAlgorithm",hr="encryptedKey",vc="recipientCertificate",Hp=[nn,cr,ur,hr];let ih=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,nn,s.defaultValues(nn)),this.rid=o(e,cr,s.defaultValues(cr)),this.keyEncryptionAlgorithm=o(e,ur,s.defaultValues(ur)),this.encryptedKey=o(e,hr,s.defaultValues(hr)),this.recipientCertificate=o(e,vc,s.defaultValues(vc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nn:return-1;case cr:return{};case ur:return new te;case hr:return new ve;case vc:return new Kt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case nn:return t===s.defaultValues(nn);case cr:return 0===Object.keys(t).length;case ur:case hr:return t.isEqual(s.defaultValues(e));case vc:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),jp.schema(t.rid||{}),te.schema(t.keyEncryptionAlgorithm||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){R(e,Hp);const t=pe(e,e,s.schema({names:{version:nn,rid:{names:{blockName:cr}},keyEncryptionAlgorithm:{names:{blockName:ur}},encryptedKey:hr}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.rid=3===t.result.rid.idBlock.tagClass?new ve({valueHex:t.result.rid.valueBlock.valueHex}):new Bt({schema:t.result.rid}),this.keyEncryptionAlgorithm=new te({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Bt?(this.version=0,e.push(new Q({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new Q({value:this.version})),e.push(new Be({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new j({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="KeyTransRecipientInfo",s})();const dr="algorithm",fr="publicKey",$p=[dr,fr];let nh=(()=>{class s extends ge{constructor(e={}){super(),this.algorithm=o(e,dr,s.defaultValues(dr)),this.publicKey=o(e,fr,s.defaultValues(fr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case dr:return new te;case fr:return new Ze;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case dr:case fr:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.algorithm||{}),new Ze({name:t.publicKey||y})]})}fromSchema(e){R(e,$p);const t=pe(e,e,s.schema({names:{algorithm:{names:{blockName:dr}},publicKey:fr}}));de.assertSchema(t,this.className),this.algorithm=new te({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new j({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}return s.CLASS_NAME="OriginatorPublicKey",s})();const wc="variant",tl="value",Kp=["blockName"];let yc=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,wc,s.defaultValues(wc)),tl in e&&(this.value=o(e,tl,s.defaultValues(tl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wc:return-1;case tl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wc:return-1===t;case tl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new ft({value:[Bt.schema({names:{blockName:t.blockName||y}}),new Be({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||y}),new X({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||y,value:nh.schema().valueBlock.value})]})}fromSchema(e){R(e,Kp);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new nh({schema:new j({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new Fe}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant||3===this.variant)&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="OriginatorIdentifierOrKey",s})();const mr="keyAttrId",ts="keyAttr",Gp=[mr,ts];let pr=(()=>{class s extends ge{constructor(e={}){super(),this.keyAttrId=o(e,mr,s.defaultValues(mr)),ts in e&&(this.keyAttr=o(e,ts,s.defaultValues(ts))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mr:return y;case ts:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case mr:return"string"==typeof t&&t===y;case ts:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({optional:t.optional||!0,name:t.blockName||y,value:[new xe({name:t.keyAttrId||y}),new Fe({optional:!0,name:t.keyAttr||y})]})}fromSchema(e){R(e,Gp);const t=pe(e,e,s.schema({names:{keyAttrId:mr,keyAttr:ts}}));de.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),ts in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new xe({value:this.keyAttrId})),ts in this&&e.push(this.keyAttr),new j({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return ts in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}return s.CLASS_NAME="OtherKeyAttribute",s})();const rn="subjectKeyIdentifier",Ys="date",Zs="other",Jp=[rn,Ys,Zs];let rh=(()=>{class s extends ge{constructor(e={}){super(),this.subjectKeyIdentifier=o(e,rn,s.defaultValues(rn)),Ys in e&&(this.date=o(e,Ys,s.defaultValues(Ys))),Zs in e&&(this.other=o(e,Zs,s.defaultValues(Zs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rn:return new ve;case Ys:return new dt;case Zs:return new pr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rn:return t.isEqual(s.defaultValues(rn));case Ys:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case Zs:return t.keyAttrId===y&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new ve({name:t.subjectKeyIdentifier||y}),new dt({optional:!0,name:t.date||y}),pr.schema(t.other||{})]})}fromSchema(e){R(e,Jp);const t=pe(e,e,s.schema({names:{subjectKeyIdentifier:rn,date:Ys,other:{names:{blockName:Zs}}}}));de.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,Ys in t.result&&(this.date=t.result.date),Zs in t.result&&(this.other=new pr({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new j({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}return s.CLASS_NAME="RecipientKeyIdentifier",s})();const bc="variant",Sc="value",qp=["blockName"];let sl=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,bc,s.defaultValues(bc)),this.value=o(e,Sc,s.defaultValues(Sc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bc:return-1;case Sc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case bc:return-1===t;case Sc:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new ft({value:[Bt.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||y}}),new X({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:0},value:rh.schema(t.rKeyId||{names:{blockName:t.blockName||y}}).valueBlock.value})]})}fromSchema(e){R(e,qp);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new rh({schema:new j({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new X({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Fe}}toJSON(){const e={variant:this.variant};return(1===this.variant||2===this.variant)&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="KeyAgreeRecipientIdentifier",s})();const gr="rid",an="encryptedKey",zp=[gr,an];let ah=(()=>{class s extends ge{constructor(e={}){super(),this.rid=o(e,gr,s.defaultValues(gr)),this.encryptedKey=o(e,an,s.defaultValues(an)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gr:return new sl;case an:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gr:return-1===t.variant&&!("value"in t);case an:return t.isEqual(s.defaultValues(an));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[sl.schema(t.rid||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){R(e,zp);const t=pe(e,e,s.schema({names:{rid:{names:{blockName:gr}},encryptedKey:an}}));de.assertSchema(t,this.className),this.rid=new sl({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new j({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="RecipientEncryptedKey",s})();const _c="encryptedKeys",Ff="RecipientEncryptedKeys",Wp=[Ff];let Ac=(()=>{class s extends ge{constructor(e={}){super(),this.encryptedKeys=o(e,_c,s.defaultValues(_c)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===_c?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===_c?0===t.length:super.defaultValues(e)}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.RecipientEncryptedKeys||y,value:ah.schema()})]})}fromSchema(e){R(e,Wp);const t=pe(e,e,s.schema({names:{RecipientEncryptedKeys:Ff}}));de.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,i=>new ah({schema:i}))}toSchema(){return new j({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}return s.CLASS_NAME="RecipientEncryptedKeys",s})();const vr="version",wr="originator",ds="ukm",yr="keyEncryptionAlgorithm",br="recipientEncryptedKeys",kc="recipientCertificate",Ec="recipientPublicKey",Xp=[vr,wr,ds,yr,br];let oh=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,vr,s.defaultValues(vr)),this.originator=o(e,wr,s.defaultValues(wr)),ds in e&&(this.ukm=o(e,ds,s.defaultValues(ds))),this.keyEncryptionAlgorithm=o(e,yr,s.defaultValues(yr)),this.recipientEncryptedKeys=o(e,br,s.defaultValues(br)),this.recipientCertificate=o(e,kc,s.defaultValues(kc)),this.recipientPublicKey=o(e,Ec,s.defaultValues(Ec)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vr:return 0;case wr:return new yc;case ds:return new ve;case yr:return new te;case br:return new Ac;case kc:return new Kt;case Ec:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vr:return 0===t;case wr:return-1===t.variant&&!("value"in t);case ds:return t.isEqual(s.defaultValues(ds));case yr:return t.algorithmId===y&&!("algorithmParams"in t);case br:return 0===t.encryptedKeys.length;case kc:case Ec:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),new X({idBlock:{tagClass:3,tagNumber:0},value:[yc.schema(t.originator||{})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ve({name:t.ukm||y})]}),te.schema(t.keyEncryptionAlgorithm||{}),Ac.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){R(e,Xp);const t=pe(e,e,s.schema({names:{version:vr,originator:{names:{blockName:wr}},ukm:ds,keyEncryptionAlgorithm:{names:{blockName:yr}},recipientEncryptedKeys:{names:{blockName:br}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new yc({schema:t.result.originator}),ds in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new te({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Ac({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new Q({value:this.version})),e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new j({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}return s.CLASS_NAME="KeyAgreeRecipientInfo",s})();const on="keyIdentifier",Qs="date",ei="other",Yp=[on,Qs,ei];let Cc=(()=>{class s extends ge{constructor(e={}){super(),this.keyIdentifier=o(e,on,s.defaultValues(on)),Qs in e&&(this.date=o(e,Qs,s.defaultValues(Qs))),ei in e&&(this.other=o(e,ei,s.defaultValues(ei))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case on:return new ve;case Qs:return new dt;case ei:return new pr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case on:return t.isEqual(s.defaultValues(on));case Qs:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case ei:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new ve({name:t.keyIdentifier||y}),new dt({optional:!0,name:t.date||y}),pr.schema(t.other||{})]})}fromSchema(e){R(e,Yp);const t=pe(e,e,s.schema({names:{keyIdentifier:on,date:Qs,other:{names:{blockName:ei}}}}));de.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,Qs in t.result&&(this.date=t.result.date),ei in t.result&&(this.other=new pr({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new j({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}return s.CLASS_NAME="KEKIdentifier",s})();const Sr="version",_r="kekid",Ar="keyEncryptionAlgorithm",ln="encryptedKey",Nc="preDefinedKEK",Zp=[Sr,_r,Ar,ln];let lh=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,Sr,s.defaultValues(Sr)),this.kekid=o(e,_r,s.defaultValues(_r)),this.keyEncryptionAlgorithm=o(e,Ar,s.defaultValues(Ar)),this.encryptedKey=o(e,ln,s.defaultValues(ln)),this.preDefinedKEK=o(e,Nc,s.defaultValues(Nc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sr:return 0;case _r:return new Cc;case Ar:return new te;case ln:return new ve;case Nc:return kt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===s.defaultValues(Sr);case _r:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&!("date"in t)&&!("other"in t);case Ar:return t.algorithmId===y&&!("algorithmParams"in t);case ln:return t.isEqual(s.defaultValues(ln));case Nc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),Cc.schema(t.kekid||{}),te.schema(t.keyEncryptionAlgorithm||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){R(e,Zp);const t=pe(e,e,s.schema({names:{version:Sr,kekid:{names:{blockName:_r}},keyEncryptionAlgorithm:{names:{blockName:Ar}},encryptedKey:ln}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Cc({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new te({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new j({value:[new Q({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}return s.CLASS_NAME="KEKRecipientInfo",s})();const kr="version",ti="keyDerivationAlgorithm",Er="keyEncryptionAlgorithm",cn="encryptedKey",Ic="password",Qp=[kr,ti,Er,cn];let ch=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,kr,s.defaultValues(kr)),ti in e&&(this.keyDerivationAlgorithm=o(e,ti,s.defaultValues(ti))),this.keyEncryptionAlgorithm=o(e,Er,s.defaultValues(Er)),this.encryptedKey=o(e,cn,s.defaultValues(cn)),this.password=o(e,Ic,s.defaultValues(Ic)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case kr:return-1;case ti:case Er:return new te;case cn:return new ve;case Ic:return kt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case kr:return-1===t;case ti:case Er:return t.algorithmId===y&&!("algorithmParams"in t);case cn:return t.isEqual(s.defaultValues(cn));case Ic:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),new X({name:t.keyDerivationAlgorithm||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:te.schema().valueBlock.value}),te.schema(t.keyEncryptionAlgorithm||{}),new ve({name:t.encryptedKey||y})]})}fromSchema(e){R(e,Qp);const t=pe(e,e,s.schema({names:{version:kr,keyDerivationAlgorithm:ti,keyEncryptionAlgorithm:{names:{blockName:Er}},encryptedKey:cn}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ti in t.result&&(this.keyDerivationAlgorithm=new te({schema:new j({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new te({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new Q({value:this.version})),this.keyDerivationAlgorithm&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new j({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}return s.CLASS_NAME="PasswordRecipientInfo",s})();const Cr="oriType",un="oriValue",eg=[Cr,un];let Lf=(()=>{class s extends ge{constructor(e={}){super(),this.oriType=o(e,Cr,s.defaultValues(Cr)),this.oriValue=o(e,un,s.defaultValues(un)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cr:return y;case un:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Cr:return t===y;case un:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.oriType||y}),new Fe({name:t.oriValue||y})]})}fromSchema(e){R(e,eg);const t=pe(e,e,s.schema({names:{oriType:Cr,oriValue:un}}));de.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new j({value:[new xe({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return s.compareWithDefault(un,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}return s.CLASS_NAME="OtherRecipientInfo",s})();const Tc="variant",il="value",tg=["blockName"];let Nr=(()=>{class s extends ge{constructor(e={}){super(),this.variant=o(e,Tc,s.defaultValues(Tc)),il in e&&(this.value=o(e,il,s.defaultValues(il))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tc:return-1;case il:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tc:return t===s.defaultValues(e);case il:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new ft({value:[ih.schema({names:{blockName:t.blockName||y}}),new X({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:1},value:oh.schema().valueBlock.value}),new X({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:2},value:lh.schema().valueBlock.value}),new X({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:3},value:ch.schema().valueBlock.value}),new X({name:t.blockName||y,idBlock:{tagClass:3,tagNumber:4},value:Lf.schema().valueBlock.value})]})}fromSchema(e){R(e,tg);const t=pe(e,e,s.schema({names:{blockName:"blockName"}}));if(de.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new ih({schema:t.result.blockName});else{const i=new j({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new oh({schema:i});break;case 2:this.variant=3,this.value=new lh({schema:i});break;case 3:this.variant=4,this.value=new ch({schema:i});break;case 4:this.variant=5,this.value=new Lf({schema:i});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){Qe.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new Fe}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}return s.CLASS_NAME="RecipientInfo",s})();const si="hashAlgorithm",ii="maskGenAlgorithm",ni="pSourceAlgorithm",sg=[si,ii,ni];let uh=(()=>{class s extends ge{constructor(e={}){super(),this.hashAlgorithm=o(e,si,s.defaultValues(si)),this.maskGenAlgorithm=o(e,ii,s.defaultValues(ii)),this.pSourceAlgorithm=o(e,ni,s.defaultValues(ni)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case si:return new te({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot});case ii:return new te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new te({algorithmId:"1.3.14.3.2.26",algorithmParams:new ot}).toSchema()});case ni:return new te({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new ve({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new X({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[te.schema(t.hashAlgorithm||{})]}),new X({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[te.schema(t.maskGenAlgorithm||{})]}),new X({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[te.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){R(e,sg);const t=pe(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:si}},maskGenAlgorithm:{names:{blockName:ii}},pSourceAlgorithm:{names:{blockName:ni}}}}));de.assertSchema(t,this.className),si in t.result&&(this.hashAlgorithm=new te({schema:t.result.hashAlgorithm})),ii in t.result&&(this.maskGenAlgorithm=new te({schema:t.result.maskGenAlgorithm})),ni in t.result&&(this.pSourceAlgorithm=new te({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(s.defaultValues(si))||e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(s.defaultValues(ii))||e.push(new X({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(s.defaultValues(ni))||e.push(new X({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new j({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(s.defaultValues(si))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(s.defaultValues(ii))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(s.defaultValues(ni))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}return s.CLASS_NAME="RSAESOAEPParams",s})();const Ir="keyInfo",ri="entityUInfo",Tr="suppPubInfo",ig=[Ir,ri,Tr];let jf=(()=>{class s extends ge{constructor(e={}){super(),this.keyInfo=o(e,Ir,s.defaultValues(Ir)),ri in e&&(this.entityUInfo=o(e,ri,s.defaultValues(ri))),this.suppPubInfo=o(e,Tr,s.defaultValues(Tr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ir:return new te;case ri:case Tr:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ir:case ri:case Tr:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.keyInfo||{}),new X({name:t.entityUInfo||y,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new ve]}),new X({name:t.suppPubInfo||y,idBlock:{tagClass:3,tagNumber:2},value:[new ve]})]})}fromSchema(e){R(e,ig);const t=pe(e,e,s.schema({names:{keyInfo:{names:{blockName:Ir}},entityUInfo:ri,suppPubInfo:Tr}}));de.assertSchema(t,this.className),this.keyInfo=new te({schema:t.result.keyInfo}),ri in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new X({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new j({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}return s.CLASS_NAME="ECCCMSSharedInfo",s})();const xr="version",ai="originatorInfo",Br="recipientInfos",Rr="encryptedContentInfo",oi="unprotectedAttrs",ng=[xr,ai,Br,Rr,oi],Hf={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},rg={"P-256":256,"P-384":384,"P-521":528};let $f=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,xr,s.defaultValues(xr)),ai in e&&(this.originatorInfo=o(e,ai,s.defaultValues(ai))),this.recipientInfos=o(e,Br,s.defaultValues(Br)),this.encryptedContentInfo=o(e,Rr,s.defaultValues(Rr)),oi in e&&(this.unprotectedAttrs=o(e,oi,s.defaultValues(oi))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xr:return 0;case ai:return new sh;case Br:return[];case Rr:return new Ot;case oi:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xr:return t===s.defaultValues(e);case ai:return 0===t.certs.certificates.length&&0===t.crls.crls.length;case Br:case oi:return 0===t.length;case Rr:return Ot.compareWithDefault("contentType",t.contentType)&&Ot.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Ot.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||y}),new X({name:t.originatorInfo||y,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:sh.schema().valueBlock.value}),new At({value:[new He({name:t.recipientInfos||y,value:Nr.schema()})]}),Ot.schema(t.encryptedContentInfo||{}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.unprotectedAttrs||y,value:et.schema()})]})]})}fromSchema(e){R(e,ng);const t=pe(e,e,s.schema({names:{version:xr,originatorInfo:ai,recipientInfos:Br,encryptedContentInfo:{names:{blockName:Rr}},unprotectedAttrs:oi}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ai in t.result&&(this.originatorInfo=new sh({schema:new j({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,i=>new Nr({schema:i})),this.encryptedContentInfo=new Ot({schema:t.result.encryptedContentInfo}),oi in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,i=>new et({schema:i})))}toSchema(){const e=[];return e.push(new Q({value:this.version})),this.originatorInfo&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new At({value:Array.from(this.recipientInfos,t=>t.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,t=>t.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}addRecipientByCertificate(e,t,i,a=$e(!0)){const l=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Hf,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))i=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);i=2}switch(i){case 1:{let h,d;if(!0===l.useOAEP){h=a.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const B=a.getOIDByAlgorithm({name:l.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),D=new te({algorithmId:B,algorithmParams:new ot});d=new uh({hashAlgorithm:D,maskGenAlgorithm:new te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:D.toSchema()})}).toSchema()}else{if(h=a.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),h===y)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");d=new ot}const p=new ih({version:0,rid:new Bt({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new te({algorithmId:h,algorithmParams:d}),recipientCertificate:e});this.recipientInfos.push(new Nr({variant:1,value:p}))}break;case 2:{const h=new sl({variant:1,value:new Bt({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(h,l,{recipientCertificate:e},a)}break;default:throw new Error(`Unknown "variant" value: ${i}`)}return!0}addRecipientByPreDefinedData(e,t={},i,a=$e(!0)){if(lt.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const l=new ArrayBuffer(16),h=new Uint8Array(l);a.getRandomValues(h),t.keyIdentifier=l}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),void 0===t.iterationCount&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new ot),i){case 1:{const l=a.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),h=new lh({version:4,kekid:new Cc({keyIdentifier:new ve({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new te({algorithmId:l,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Nr({variant:3,value:h}))}break;case 2:{const l=a.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),h=new ArrayBuffer(64),d=new Uint8Array(h);a.getRandomValues(d);const p=a.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),B=new Qa({salt:new ve({valueHex:h}),iterationCount:t.iterationCount,prf:new te({algorithmId:p,algorithmParams:new ot})}),D=a.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),q=new ch({version:0,keyDerivationAlgorithm:new te({algorithmId:l,algorithmParams:B.toSchema()}),keyEncryptionAlgorithm:new te({algorithmId:D,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Nr({variant:4,value:q}))}break;default:throw new Error(`Unknown value for "variant": ${i}`)}}addRecipientByKeyIdentifier(e,t,i,a=$e(!0)){const l=Object.assign({},Hf,i||{}),h=new sl({variant:2,value:new rh({subjectKeyIdentifier:new ve({valueHex:t})})});this._addKeyAgreeRecipientInfo(h,l,{recipientPublicKey:e},a)}_addKeyAgreeRecipientInfo(e,t,i,a=$e(!0)){const l=new ah({rid:e}),h=a.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),d=new te({algorithmId:h}),p=a.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),B=new ArrayBuffer(64),D=new Uint8Array(B);a.getRandomValues(D);const q={version:3,ukm:new ve({valueHex:B}),keyEncryptionAlgorithm:new te({algorithmId:p,algorithmParams:d.toSchema()}),recipientEncryptedKeys:new Ac({encryptedKeys:[l]})},G=new oh(Object.assign(q,i));this.recipientInfos.push(new Nr({variant:2,value:G}))}encrypt(e,t,i=$e(!0)){var a=this;return(0,A.A)(function*(){const l=new ArrayBuffer(16),h=new Uint8Array(l);i.getRandomValues(h);const d=new Uint8Array(t),p=i.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),B=yield i.generateKey(e,!0,["encrypt"]),D=yield i.encrypt({name:e.name,iv:h},B,d),q=yield i.exportKey("raw",B);a.version=2,a.encryptedContentInfo=new Ot({disableSplit:a.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new te({algorithmId:p,algorithmParams:new ve({valueHex:l})}),encryptedContent:new ve({valueHex:D})});const G=function(){var be=(0,A.A)(function*(he){const fe=a.recipientInfos[he].value;let we,Ae;if(fe.recipientPublicKey)we=fe.recipientPublicKey.algorithm.namedCurve,Ae=fe.recipientPublicKey;else{if(!fe.recipientCertificate)throw new Error("Unsupported RecipientInfo");{const Re=fe.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(Re.constructor.blockName()!==xe.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${he}`);switch(Re.valueBlock.toString()){case"1.2.840.10045.3.1.7":we="P-256";break;case"1.3.132.0.34":we="P-384";break;case"1.3.132.0.35":we="P-521";break;default:throw new Error(`Incorrect curve OID for index ${he}`)}Ae=yield fe.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:we},usages:[]}},i)}}const Ne=rg[we],Te=yield i.generateKey({name:"ECDH",namedCurve:we},!0,["deriveBits"]),Me=yield i.exportKey("spki",Te.publicKey),ze=yield i.deriveBits({name:"ECDH",public:Ae},Te.privateKey,Ne),St=new te({schema:fe.keyEncryptionAlgorithm.algorithmParams}),We=i.getAlgorithmByOID(St.algorithmId,!0,"aesKWAlgorithm");let ct=We.length;const Lt=new ArrayBuffer(4),Vt=new Uint8Array(Lt);for(let Re=3;Re>=0;Re--)Vt[Re]=ct,ct>>=8;const gs=new jf({keyInfo:new te({algorithmId:St.algorithmId}),entityUInfo:fe.ukm,suppPubInfo:new ve({valueHex:Lt})}).toSchema().toBER(!1),Gt=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),ht=yield kf(Gt.kdf,ze,We.length,gs,i),st=yield i.importKey("raw",ht,{name:"AES-KW"},!0,["wrapKey"]),De=yield i.wrapKey("raw",B,st,{name:"AES-KW"}),je=new yc;return je.variant=3,je.value=nh.fromBER(Me),fe.originator=je,fe.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new ve({valueHex:De}),{ecdhPrivateKey:Te.privateKey}});return function(fe){return be.apply(this,arguments)}}(),le=function(){var be=(0,A.A)(function*(he){const fe=a.recipientInfos[he].value,we=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===we.name){const Ne=new uh({schema:fe.keyEncryptionAlgorithm.algorithmParams});if(we.hash=i.getAlgorithmByOID(Ne.hashAlgorithm.algorithmId),!("name"in we.hash))throw new Error(`Incorrect OID for hash algorithm: ${Ne.hashAlgorithm.algorithmId}`)}try{const Ae=yield fe.recipientCertificate.getPublicKey({algorithm:{algorithm:we,usages:["encrypt","wrapKey"]}},i),Ne=yield i.encrypt(Ae.algorithm,Ae,q);fe.encryptedKey=new ve({valueHex:Ne})}catch{}});return function(fe){return be.apply(this,arguments)}}(),ke=function(){var be=(0,A.A)(function*(he){const fe=a.recipientInfos[he].value,we=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),Ae=yield i.importKey("raw",new Uint8Array(fe.preDefinedKEK),we,!0,["wrapKey"]),Ne=yield i.wrapKey("raw",B,Ae,we);fe.encryptedKey=new ve({valueHex:Ne})});return function(fe){return be.apply(this,arguments)}}(),ye=function(){var be=(0,A.A)(function*(he){const fe=a.recipientInfos[he].value;let we;if(!fe.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!fe.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{we=new Qa({schema:fe.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const Ae=new Uint8Array(fe.password),Ne=yield i.importKey("raw",Ae,"PBKDF2",!1,["deriveKey"]),Te=i.getAlgorithmByOID(fe.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let Me="SHA-1";we.prf&&(Me=i.getAlgorithmByOID(we.prf.algorithmId,!0,"prfAlgorithm").hash.name);const ze=new Uint8Array(we.salt.valueBlock.valueHex),St=we.iterationCount,We=yield i.deriveKey({name:"PBKDF2",hash:{name:Me},salt:ze,iterations:St},Ne,Te,!0,["wrapKey"]),ct=yield i.wrapKey("raw",B,We,Te);fe.encryptedKey=new ve({valueHex:ct})});return function(fe){return be.apply(this,arguments)}}(),ae=[];for(let be=0;be<a.recipientInfos.length;be++)switch(a.recipientInfos[be].variant){case 1:ae.push(yield le(be));break;case 2:ae.push(yield G(be));break;case 3:ae.push(yield ke(be));break;case 4:ae.push(yield ye(be));break;default:throw new Error(`Unknown recipient type in array with index ${be}`)}return ae})()}decrypt(e,t,i=$e(!0)){var a=this;return(0,A.A)(function*(){const l=t||{};if(e+1>a.recipientInfos.length)throw new Error('Maximum value for "index" is: '+(a.recipientInfos.length-1));const h=function(){var ae=(0,A.A)(function*(be){const he=a.recipientInfos[be].value;let fe,we,Ae;const Ne=he.originator;if(l.recipientCertificate){const ht=l.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(ht.constructor.blockName()!==xe.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${be}`);fe=ht.valueBlock.toString()}else{if(!Ne.value.algorithm.algorithmParams)throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const ht=Ne.value.algorithm.algorithmParams;if(ht.constructor.blockName()!==xe.blockName())throw new Error(`Incorrect originator for index ${be}`);fe=ht.valueBlock.toString()}}if(!l.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(fe){case"1.2.840.10045.3.1.7":we="P-256",Ae=256;break;case"1.3.132.0.34":we="P-384",Ae=384;break;case"1.3.132.0.35":we="P-521",Ae=528;break;default:throw new Error(`Incorrect curve OID for index ${be}`)}let Te,Me=i;k._H.isBufferSource(l.recipientPrivateKey)?Te=yield i.importKey("pkcs8",l.recipientPrivateKey,{name:"ECDH",namedCurve:we},!0,["deriveBits"]):(Te=l.recipientPrivateKey,"crypto"in l&&l.crypto&&(Me=l.crypto.subtle)),"algorithmParams"in Ne.value.algorithm||(Ne.value.algorithm.algorithmParams=new xe({value:fe}));const ze=Ne.value.toSchema().toBER(!1),St=yield i.importKey("spki",ze,{name:"ECDH",namedCurve:we},!0,[]),We=yield Me.deriveBits({name:"ECDH",public:St},Te,Ae);function ct(ht){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,A.A)(function*(ht){ht=ht||!1;const st=new te({schema:he.keyEncryptionAlgorithm.algorithmParams}),De=i.getAlgorithmByOID(st.algorithmId,!0,"kwAlgorithm");let je=De.length;const Re=new ArrayBuffer(4),qe=new Uint8Array(Re);for(let Xe=3;Xe>=0;Xe--)qe[Xe]=je,je>>=8;const tt={algorithmId:st.algorithmId};ht&&(tt.algorithmParams=new ot);const Yt=new jf({keyInfo:new te(tt),entityUInfo:he.ukm,suppPubInfo:new ve({valueHex:Re})}).toSchema().toBER(!1),pt=i.getAlgorithmByOID(he.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!pt.name)throw new Error(`Incorrect OID for key encryption algorithm: ${he.keyEncryptionAlgorithm.algorithmId}`);return kf(pt.kdf,We,De.length,Yt,i)})).apply(this,arguments)}const Vt=yield ct(),xn=function(){var ht=(0,A.A)(function*(st){return i.importKey("raw",st,{name:"AES-KW"},!0,["unwrapKey"])});return function(De){return ht.apply(this,arguments)}}(),gs=yield xn(Vt),Gt=function(){var ht=(0,A.A)(function*(st){const je=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm");return i.unwrapKey("raw",he.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,st,{name:"AES-KW"},je,!0,["decrypt"])});return function(De){return ht.apply(this,arguments)}}();try{return yield Gt(gs)}catch{const ht=yield ct(!0);return Gt(yield xn(ht))}});return function(he){return ae.apply(this,arguments)}}(),d=function(){var ae=(0,A.A)(function*(be){const he=a.recipientInfos[be].value;if(!l.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const fe=i.getAlgorithmByOID(he.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===fe.name){const St=new uh({schema:he.keyEncryptionAlgorithm.algorithmParams});if(fe.hash=i.getAlgorithmByOID(St.hashAlgorithm.algorithmId),!("name"in fe.hash))throw new Error(`Incorrect OID for hash algorithm: ${St.hashAlgorithm.algorithmId}`)}let we,Ae=i;k._H.isBufferSource(l.recipientPrivateKey)?we=yield i.importKey("pkcs8",l.recipientPrivateKey,fe,!0,["decrypt"]):(we=l.recipientPrivateKey,"crypto"in l&&l.crypto&&(Ae=l.crypto.subtle));const Ne=yield Ae.decrypt(we.algorithm,we,he.encryptedKey.valueBlock.valueHexView),Te=a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,Me=i.getAlgorithmByOID(Te,!0,"contentEncryptionAlgorithm");if(!("name"in Me))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${Te}`);return i.importKey("raw",Ne,Me,!0,["decrypt"])});return function(he){return ae.apply(this,arguments)}}(),p=function(){var ae=(0,A.A)(function*(be){const he=a.recipientInfos[be].value;if(!l.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const fe=i.getAlgorithmByOID(he.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),we=yield i.importKey("raw",l.preDefinedData,fe,!0,["unwrapKey"]),Ae=a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,Ne=i.getAlgorithmByOID(Ae,!0,"contentEncryptionAlgorithm");if(!Ne.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${Ae}`);return i.unwrapKey("raw",he.encryptedKey.valueBlock.valueHexView,we,fe,Ne,!0,["decrypt"])});return function(he){return ae.apply(this,arguments)}}(),B=function(){var ae=(0,A.A)(function*(be){const he=a.recipientInfos[be].value;let fe;if(!l.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!he.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!he.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{fe=new Qa({schema:he.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const we=yield i.importKey("raw",l.preDefinedData,"PBKDF2",!1,["deriveKey"]),Ae=i.getAlgorithmByOID(he.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),Ne=fe.prf?i.getAlgorithmByOID(fe.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",Te=new Uint8Array(fe.salt.valueBlock.valueHex),Me=fe.iterationCount,ze=yield i.deriveKey({name:"PBKDF2",hash:{name:Ne},salt:Te,iterations:Me},we,Ae,!0,["unwrapKey"]),We=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm");return i.unwrapKey("raw",he.encryptedKey.valueBlock.valueHexView,ze,Ae,We,!0,["decrypt"])});return function(he){return ae.apply(this,arguments)}}();let D;switch(a.recipientInfos[e].variant){case 1:D=yield d(e);break;case 2:D=yield h(e);break;case 3:D=yield p(e);break;case 4:D=yield B(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const G=i.getAlgorithmByOID(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,!0,"contentEncryptionAlgorithm"),ke=new Uint8Array(a.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex);if(!a.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const ye=a.encryptedContentInfo.getEncryptedContent();return i.decrypt({name:G.name,iv:ke},D,ye)})()}}return s.CLASS_NAME="EnvelopedData",s})();const Vr="safeContents",nl="parsedValue",Kf="contentInfos";let hh=(()=>{class s extends ge{constructor(e={}){super(),this.safeContents=o(e,Vr,s.defaultValues(Vr)),nl in e&&(this.parsedValue=o(e,nl,s.defaultValues(nl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vr:return[];case nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Vr:return 0===t.length;case nl:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new He({name:t.contentInfos||y,value:Pt.schema()})]})}fromSchema(e){R(e,[Kf]);const t=pe(e,e,s.schema({names:{contentInfos:Kf}}));de.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,i=>new Pt({schema:i}))}toSchema(){return new j({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}parseInternalValues(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){if(Qe.assert(e,Vr),lt.assert(e.safeContents,Vr,"Array"),e.safeContents.length!==i.safeContents.length)throw new lt('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');i.parsedValue={safeContents:[]};for(const[a,l]of i.safeContents.entries()){const h=e.safeContents[a],d=`parameters.safeContents[${a}]`;switch(l.contentType){case vu:{lt.assert(l.content,"this.safeContents[j].content",ve);const p=l.content.getValue();i.parsedValue.safeContents.push({privacyMode:0,value:tn.fromBER(p)})}break;case Wd:{const p=new $f({schema:l.content});Qe.assert(d,h,"recipientCertificate","recipientKey");const D=h.recipientCertificate,q=h.recipientKey,G=yield p.decrypt(0,{recipientCertificate:D,recipientPrivateKey:q},t);i.parsedValue.safeContents.push({privacyMode:2,value:tn.fromBER(G)})}break;case Xd:{const p=new fc({schema:l.content});Qe.assert(d,h,"password");const B=h.password,D=yield p.decrypt({password:B},t);i.parsedValue.safeContents.push({privacyMode:1,value:tn.fromBER(D)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${l.contentType}`)}}})()}makeInternalValues(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){if(!i.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(lt.assert(i.parsedValue,"this.parsedValue","object"),lt.assert(i.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),lt.assert(e,"parameters","object"),Qe.assert(e,"safeContents"),lt.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==i.parsedValue.safeContents.length)throw new lt('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');i.safeContents=[];for(const[a,l]of i.parsedValue.safeContents.entries())switch(Qe.assert("content",l,"privacyMode","value"),lt.assert(l.value,"content.value",tn),l.privacyMode){case 0:{const h=l.value.toSchema().toBER(!1);i.safeContents.push(new Pt({contentType:"1.2.840.113549.1.7.1",content:new ve({valueHex:h})}))}break;case 1:{const h=new fc,d=e.safeContents[a];d.contentToEncrypt=l.value.toSchema().toBER(!1),yield h.encrypt(d,t),i.safeContents.push(new Pt({contentType:"1.2.840.113549.1.7.6",content:h.toSchema()}))}break;case 2:{const h=new $f,d=l.value.toSchema().toBER(!1),p=e.safeContents[a];switch(Qe.assert(`parameters.safeContents[${a}]`,p,"encryptingCertificate","encryptionAlgorithm"),!0){case"aes-cbc"===p.encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===p.encryptionAlgorithm.name.toLowerCase():break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${p.encryptionAlgorithm}`)}switch(!0){case 128===p.encryptionAlgorithm.length:case 192===p.encryptionAlgorithm.length:case 256===p.encryptionAlgorithm.length:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${p.encryptionAlgorithm.length}`)}const B=p.encryptionAlgorithm;h.addRecipientByCertificate(p.encryptingCertificate,{},void 0,t),yield h.encrypt(B,d,t),i.safeContents.push(new Pt({contentType:"1.2.840.113549.1.7.3",content:h.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${l.privacyMode}`)}return i})()}}return s.CLASS_NAME="AuthenticatedSafe",s})();const hn="hashAlgorithm",Or="issuerNameHash",Pr="issuerKeyHash",dn="serialNumber",ag=[hn,Or,Pr,dn];let li=(()=>{class s extends ge{static create(e,t,i=$e(!0)){return(0,A.A)(function*(){const a=new s;return yield a.createForCertificate(e,t,i),a})()}constructor(e={}){super(),this.hashAlgorithm=o(e,hn,s.defaultValues(hn)),this.issuerNameHash=o(e,Or,s.defaultValues(Or)),this.issuerKeyHash=o(e,Pr,s.defaultValues(Pr)),this.serialNumber=o(e,dn,s.defaultValues(dn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hn:return new te;case Or:case Pr:return new ve;case dn:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hn:return t.algorithmId===y&&!("algorithmParams"in t);case Or:case Pr:case dn:return t.isEqual(s.defaultValues(dn));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||y}}),new ve({name:t.issuerNameHash||y}),new ve({name:t.issuerKeyHash||y}),new Q({name:t.serialNumber||y})]})}fromSchema(e){R(e,ag);const t=pe(e,e,s.schema({names:{hashAlgorithm:hn,issuerNameHash:Or,issuerKeyHash:Pr,serialNumber:dn}}));de.assertSchema(t,this.className),this.hashAlgorithm=new te({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new j({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!k._H.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!k._H.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}createForCertificate(e,t,i=$e(!0)){var a=this;return(0,A.A)(function*(){Qe.assert(t,hn,"issuerCertificate");const l=i.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");a.hashAlgorithm=new te({algorithmId:l,algorithmParams:new ot});const h=t.issuerCertificate;a.serialNumber=e.serialNumber;const d=yield i.digest({name:t.hashAlgorithm},h.subject.toSchema().toBER(!1));a.issuerNameHash=new ve({valueHex:d});const p=h.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,B=yield i.digest({name:t.hashAlgorithm},p);a.issuerKeyHash=new ve({valueHex:B})})()}}return s.CLASS_NAME="CertID",s})();const Dr="certID",Mr="certStatus",Ur="thisUpdate",ci="nextUpdate",fn="singleExtensions",og=[Dr,Mr,Ur,ci,fn];let Gf=(()=>{class s extends ge{constructor(e={}){super(),this.certID=o(e,Dr,s.defaultValues(Dr)),this.certStatus=o(e,Mr,s.defaultValues(Mr)),this.thisUpdate=o(e,Ur,s.defaultValues(Ur)),ci in e&&(this.nextUpdate=o(e,ci,s.defaultValues(ci))),fn in e&&(this.singleExtensions=o(e,fn,s.defaultValues(fn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dr:return new li;case Mr:return{};case Ur:case ci:return new Date(0,0,0);case fn:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dr:return li.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&li.compareWithDefault("issuerNameHash",t.issuerNameHash)&&li.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&li.compareWithDefault("serialNumber",t.serialNumber);case Mr:return 0===Object.keys(t).length;case Ur:case ci:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[li.schema(t.certID||{}),new ft({value:[new Be({name:t.certStatus||y,idBlock:{tagClass:3,tagNumber:0}}),new X({name:t.certStatus||y,idBlock:{tagClass:3,tagNumber:1},value:[new dt,new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new oa]})]}),new Be({name:t.certStatus||y,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new dt({name:t.thisUpdate||y}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new dt({name:t.nextUpdate||y})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Tt.schema(t.singleExtensions||{})]})]})}fromSchema(e){R(e,og);const t=pe(e,e,s.schema({names:{certID:{names:{blockName:Dr}},certStatus:Mr,thisUpdate:Ur,nextUpdate:ci,singleExtensions:{names:{blockName:fn}}}}));de.assertSchema(t,this.className),this.certID=new li({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),ci in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),fn in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,i=>new Oi({schema:i})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new dt({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[new dt({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new j({value:Array.from(this.singleExtensions,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,t=>t.toJSON())),e}}return s.CLASS_NAME="SingleResponse",s})();const xc="tbs",mn="version",rl="responderID",al="producedAt",ol="responses",Fr="responseExtensions",pn="ResponseData",Bc=`${pn}.${mn}`,Lr=`${pn}.${rl}`,dh=`${pn}.${al}`,fh=`${pn}.${ol}`,Rc=`${pn}.${Fr}`,lg=[pn,Bc,Lr,dh,fh,Rc];let ui=(()=>{class s extends ge{get tbs(){return k._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,xc,s.defaultValues(xc))),mn in e&&(this.version=o(e,mn,s.defaultValues(mn))),this.responderID=o(e,rl,s.defaultValues(rl)),this.producedAt=o(e,al,s.defaultValues(al)),this.responses=o(e,ol,s.defaultValues(ol)),Fr in e&&(this.responseExtensions=o(e,Fr,s.defaultValues(Fr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mn:return 0;case xc:return kt;case rl:return{};case al:return new Date(0,0,0);case ol:case Fr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xc:return 0===t.byteLength;case rl:return 0===Object.keys(t).length;case al:return t===s.defaultValues(e);case ol:case Fr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||pn,value:[new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Q({name:t.version||Bc})]}),new ft({value:[new X({name:t.responderID||Lr,idBlock:{tagClass:3,tagNumber:1},value:[mt.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new X({name:t.responderID||Lr,idBlock:{tagClass:3,tagNumber:2},value:[new ve({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new dt({name:t.producedAt||dh}),new j({value:[new He({name:fh,value:Gf.schema(t.response||{})})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Tt.schema(t.extensions||{names:{blockName:Rc}})]})]})}fromSchema(e){R(e,lg);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Bc in t.result&&(this.version=t.result[Bc].valueBlock.valueDec),this.responderID=1===t.result[Lr].idBlock.tagNumber?new mt({schema:t.result[Lr].valueBlock.value[0]}):t.result[Lr].valueBlock.value[0],this.producedAt=t.result[dh].toDate(),this.responses=Array.from(t.result[fh],i=>new Gf({schema:i})),Rc in t.result&&(this.responseExtensions=Array.from(t.result[Rc].valueBlock.value,i=>new Oi({schema:i})))}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return s.schema();const i=ut(this.tbsView);de.assert(i,"TBS Response Data"),t=i.result}else{const i=[];mn in this&&i.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[new Q({value:this.version})]})),i.push(new X(this.responderID instanceof mt?{idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]}:{idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),i.push(new dt({valueDate:this.producedAt})),i.push(new j({value:Array.from(this.responses,a=>a.toSchema())})),this.responseExtensions&&i.push(new X({idBlock:{tagClass:3,tagNumber:1},value:[new j({value:Array.from(this.responseExtensions,a=>a.toSchema())})]})),t=new j({value:i})}return t}toJSON(){const e={};return mn in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,t=>t.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,t=>t.toJSON())),e}}return s.CLASS_NAME="ResponseData",s})();const mh="trustedCerts",ph="certs",gh="crls",vh="ocsps",wh="checkDate",yh="findOrigin",bh="findIssuer";var jr=function(s){return s[s.unknown=-1]="unknown",s[s.success=0]="success",s[s.noRevocation=11]="noRevocation",s[s.noPath=60]="noPath",s[s.noValidPath=97]="noValidPath",s}(jr||{});let ll=(()=>{class s extends Error{constructor(e,t){super(t),this.name=s.NAME,this.code=e,this.message=t}}return s.NAME="ChainValidationError",s})();class Vc{constructor(r={}){this.trustedCerts=o(r,mh,this.defaultValues(mh)),this.certs=o(r,ph,this.defaultValues(ph)),this.crls=o(r,gh,this.defaultValues(gh)),this.ocsps=o(r,vh,this.defaultValues(vh)),this.checkDate=o(r,wh,this.defaultValues(wh)),this.findOrigin=o(r,yh,this.defaultValues(yh)),this.findIssuer=o(r,bh,this.defaultValues(bh))}static defaultFindOrigin(r,e){0===r.tbsView.byteLength&&(r.tbsView=new Uint8Array(r.encodeTBS().toBER()));for(const t of e.certs)if(0===t.tbsView.byteLength&&(t.tbsView=new Uint8Array(t.encodeTBS().toBER())),k._H.isEqual(r.tbsView,t.tbsView))return"Intermediate Certificates";for(const t of e.trustedCerts)if(0===t.tbsView.byteLength&&(t.tbsView=new Uint8Array(t.encodeTBS().toBER())),k._H.isEqual(r.tbsView,t.tbsView))return"Trusted Certificates";return"Unknown"}defaultFindIssuer(r,e,t=$e(!0)){return(0,A.A)(function*(){const i=[];let a=null,l=null,h=null;if(r.subject.isEqual(r.issuer))try{if(yield r.verify(void 0,t))return[r]}catch{}if(r.extensions)for(const p of r.extensions)if(p.extnID===pu&&p.parsedValue instanceof ef){p.parsedValue.keyIdentifier?a=p.parsedValue.keyIdentifier:(p.parsedValue.authorityCertIssuer&&(l=p.parsedValue.authorityCertIssuer),p.parsedValue.authorityCertSerialNumber&&(h=p.parsedValue.authorityCertSerialNumber));break}function d(p){if(null!==a&&p.extensions){let D=!1;for(const q of p.extensions)if("2.5.29.14"===q.extnID&&q.parsedValue){D=!0,k._H.isEqual(q.parsedValue.valueBlock.valueHex,a.valueBlock.valueHexView)&&i.push(p);break}if(D)return}let B=!1;null!==h&&(B=p.serialNumber.isEqual(h)),null!==l?p.subject.isEqual(l)&&B&&i.push(p):r.issuer.isEqual(p.subject)&&i.push(p)}for(const p of e.trustedCerts)d(p);for(const p of e.certs)d(p);for(let p=i.length-1;p>=0;p--)try{!1===(yield r.verify(i[p],t))&&i.splice(p,1)}catch{i.splice(p,1)}return i})()}defaultValues(r){switch(r){case mh:case ph:case gh:case vh:return[];case wh:return new Date;case yh:return Vc.defaultFindOrigin;case bh:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${r}`)}}sort(r=!1,e=$e(!0)){var t=this;return(0,A.A)(function*(){const i=[],a=function(){var ye=(0,A.A)(function*(ae,be){const he=[];function fe(Ae){let Ne=!0;for(let Te=0;Te<Ae.length;Te++){for(let Me=0;Me<Ae.length;Me++)if(Me!==Te&&Ae[Te]===Ae[Me]){Ne=!1;break}if(!Ne)break}return Ne}if(function cg(s,r){for(let e=0;e<r.length;e++)if(k._H.isEqual(s.tbsView,r[e].tbsView))return!0;return!1}(ae,t.trustedCerts))return[[ae]];const we=yield t.findIssuer(ae,t,be);if(0===we.length)throw new Error("No valid certificate paths found");for(let Ae=0;Ae<we.length;Ae++){if(k._H.isEqual(we[Ae].tbsView,ae.tbsView)){he.push([we[Ae]]);continue}const Ne=yield a(we[Ae],be);for(let Te=0;Te<Ne.length;Te++){const Me=Ne[Te].slice();Me.splice(0,0,we[Ae]),fe(Me)?he.push(Me):he.push(Ne[Te])}}return he});return function(be,he){return ye.apply(this,arguments)}}(),l=function(){var ye=(0,A.A)(function*(ae){const be=[],he=[],fe=[];if(be.push(...i.filter(we=>ae.issuer.isEqual(we.subject))),0===be.length)return{status:1,statusMessage:"No certificate's issuers"};if(he.push(...t.crls.filter(we=>we.issuer.isEqual(ae.issuer))),0===he.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let we=0;we<he.length;we++){const Ae=he[we];if(!(Ae.nextUpdate&&Ae.nextUpdate.value<t.checkDate))for(let Ne=0;Ne<be.length;Ne++)try{if(yield he[we].verify({issuerCertificate:be[Ne]},e)){fe.push({crl:he[we],certificate:be[Ne]});break}}catch{}}return fe.length?{status:0,statusMessage:y,result:fe}:{status:3,statusMessage:"No valid CRLs found"}});return function(be){return ye.apply(this,arguments)}}(),h=function(){var ye=(0,A.A)(function*(ae,be){const he=e.getAlgorithmByOID(ae.signatureAlgorithm.algorithmId);if(!he.name||!he.hash)return 1;for(let fe=0;fe<t.ocsps.length;fe++){const Ae=yield t.ocsps[fe].getCertificateStatus(ae,be,e);if(Ae.isForCertificate)return 0===Ae.status?0:1}return 2});return function(be,he){return ye.apply(this,arguments)}}();function d(ye){return p.apply(this,arguments)}function p(){return(p=(0,A.A)(function*(ye,ae=!1){let be=!1,he=!1,fe=!1,we=!1;if(ye.extensions){for(let Ae=0;Ae<ye.extensions.length;Ae++){const Ne=ye.extensions[Ae];if(Ne.critical&&!Ne.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${Ne.extnID}`};if("2.5.29.15"===Ne.extnID){fe=!0;const Te=new Uint8Array(Ne.parsedValue.valueBlock.valueHex);!(4&~Te[0])&&(he=!0),!(2&~Te[0])&&(we=!0)}Ne.extnID===fu&&"cA"in Ne.parsedValue&&!0===Ne.parsedValue.cA&&(be=!0)}if(!0===he&&!1===be)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(!0===fe&&!0===be&&!1===he)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===be&&!0===fe&&ae&&!1===we)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===be?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:y}})).apply(this,arguments)}const B=function(){var ye=(0,A.A)(function*(ae,be){for(let he=0;he<ae.length;he++)if(ae[he].notBefore.value>be||ae[he].notAfter.value<be)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(ae.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let he=ae.length-2;he>=0;he--)if(!1===ae[he].issuer.isEqual(ae[he].subject)&&!1===ae[he].issuer.isEqual(ae[he+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==t.crls.length||0!==t.ocsps.length)for(let he=0;he<ae.length-1;he++){let fe=2,we={status:0,statusMessage:y};if(0!==t.ocsps.length)switch(fe=yield h(ae[he],ae[he+1]),fe){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==t.crls.length){if(we=yield l(ae[he]),0===we.status&&we.result)for(let Ae=0;Ae<we.result.length;Ae++){if(we.result[Ae].crl.isCertificateRevoked(ae[he]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(yield d(we.result[Ae].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===r)throw new ll(jr.noRevocation,`No revocation values found for one of certificates: ${we.statusMessage}`)}else if(2===fe)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===fe&&2===we.status&&r){const Ae=ae[he+1];let Ne=!1;if(Ae.extensions)for(const Te of Ae.extensions)switch(Te.extnID){case Kd:case mu:case gu:Ne=!0}if(Ne)throw new ll(jr.noRevocation,`No revocation values found for one of certificates: ${we.statusMessage}`)}}for(const[he,fe]of ae.entries())if(he&&!(yield d(fe)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"};return{result:!0}});return function(be,he){return ye.apply(this,arguments)}}();i.push(...t.trustedCerts),i.push(...t.certs);for(let ye=0;ye<i.length;ye++)for(let ae=0;ae<i.length;ae++)if(ye!==ae&&k._H.isEqual(i[ye].tbsView,i[ae].tbsView)){i.splice(ae,1),ye=0;break}const D=i[i.length-1];let q;const G=[D];if(q=yield a(D,e),0===q.length)throw new ll(jr.noPath,"Unable to find certificate path");for(let ye=q.length-1;ye>=0;ye--){let ae=!1;for(let be=0;be<q[ye].length;be++){const he=q[ye][be];for(let fe=0;fe<t.trustedCerts.length;fe++)if(k._H.isEqual(he.tbsView,t.trustedCerts[fe].tbsView)){ae=!0;break}if(ae)break}ae||q.splice(ye,1)}if(0===q.length)throw new ll(jr.noValidPath,"No valid certificate paths found");let le=q[0].length,ke=0;for(let ye=0;ye<q.length;ye++)q[ye].length<le&&(le=q[ye].length,ke=ye);for(let ye=0;ye<q[ke].length;ye++)G.push(q[ke][ye]);if(q=yield B(G,t.checkDate),!1===q.result)throw q;return G})()}verify(r={},e=$e(!0)){var t=this;return(0,A.A)(function*(){function i(p,B){const D=Cs(p),q=Cs(B),G=D.split("."),le=q.split("."),ke=G.length,ye=le.length;if(0===ke||0===ye||ke<ye)return!1;for(let ae=0;ae<ke;ae++)if(0===G[ae].length)return!1;for(let ae=0;ae<ye;ae++)if(0===le[ae].length){if(0===ae){if(1===ye)return!1;continue}return!1}for(let ae=0;ae<ye;ae++)if(0!==le[ye-1-ae].length&&0!==G[ke-1-ae].localeCompare(le[ye-1-ae]))return!1;return!0}function a(p,B){const D=Cs(p),q=Cs(B),G=D.split("@"),le=q.split("@");if(0===G.length||0===le.length||G.length<le.length)return!1;if(1===le.length){if(i(G[1],le[0])){const ye=G[1].split("."),ae=le[0].split(".");return 0===ae[0].length||ye.length===ae.length}return!1}return 0===D.localeCompare(q)}function l(p,B){let D=Cs(p);const q=Cs(B),G=D.split("/");if(q.split("/").length>1)return!1;if(G.length>1)for(let ye=0;ye<G.length;ye++)if(G[ye].length>0&&":"!==G[ye].charAt(G[ye].length-1)){D=G[ye].split(":")[0];break}if(i(D,q)){const ye=D.split("."),ae=q.split(".");return 0===ae[0].length||ye.length===ae.length}return!1}function h(p,B){const D=p.valueBlock.valueHexView,q=B.valueBlock.valueHexView;if(4===D.length&&8===q.length){for(let G=0;G<4;G++)if((D[G]^q[G])&q[G+4])return!1;return!0}if(16===D.length&&32===q.length){for(let G=0;G<16;G++)if((D[G]^q[G])&q[G+16])return!1;return!0}return!1}function d(p,B){if(0===p.typesAndValues.length||0===B.typesAndValues.length)return!0;if(p.typesAndValues.length<B.typesAndValues.length)return!1;let D=!0,q=0;for(let G=0;G<B.typesAndValues.length;G++){let le=!1;for(let ke=q;ke<p.typesAndValues.length;ke++)if(le=p.typesAndValues[ke].isEqual(B.typesAndValues[G]),p.typesAndValues[ke].type===B.typesAndValues[G].type&&(D=D&&le),!0===le){if(0===q||q===ke){q=ke+1;break}return!1}if(!1===le)return!1}return 0!==q&&D}try{if(0===t.certs.length)throw new Error("Empty certificate array");const p=r.passedWhenNotRevValues||!1,B=r.initialPolicySet||[$t];let ae=r.initialExplicitPolicy||!1,be=r.initialPolicyMappingInhibit||!1,he=r.initialInhibitPolicy||!1;const fe=[!1,!1,!1];let we=0,Ae=0,Ne=0,Te=r.initialPermittedSubtreesSet||[],Me=r.initialExcludedSubtreesSet||[];const ze=r.initialRequiredNameForms||[];let St=1;t.certs=yield t.sort(p,e);const We=[];We.push($t);const ct=[],Lt=new Array(t.certs.length-1);for(let De=0;De<t.certs.length-1;De++)Lt[De]=!0;ct.push(Lt);const Vt=new Array(t.certs.length-1),xn=new Array(t.certs.length-1);let gs=ae?t.certs.length-1:-1;for(let De=t.certs.length-2;De>=0;De--,St++){const je=t.certs[De];if(je.extensions){for(let Re=0;Re<je.extensions.length;Re++){const qe=je.extensions[Re];if(qe.extnID===Gd){xn[De]=qe.parsedValue;for(let tt=0;tt<We.length;tt++)if(We[tt]===$t){delete ct[tt][De];break}for(let tt=0;tt<qe.parsedValue.certificatePolicies.length;tt++){let Dt=-1;const Yt=qe.parsedValue.certificatePolicies[tt].policyIdentifier;for(let pt=0;pt<We.length;pt++)if(Yt===We[pt]){Dt=pt;break}if(-1===Dt){We.push(Yt);const pt=new Array(t.certs.length-1);pt[De]=!0,ct.push(pt)}else ct[Dt][De]=!0}}if(qe.extnID===Jd){if(be)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};Vt[De]=qe.parsedValue}qe.extnID===qd&&!1===ae&&(0===qe.parsedValue.requireExplicitPolicy?(ae=!0,gs=De):!1===fe[0]?(fe[0]=!0,we=qe.parsedValue.requireExplicitPolicy):we=we>qe.parsedValue.requireExplicitPolicy?qe.parsedValue.requireExplicitPolicy:we,0===qe.parsedValue.inhibitPolicyMapping?be=!0:!1===fe[1]?(fe[1]=!0,Ae=qe.parsedValue.inhibitPolicyMapping+1):Ae=Ae>qe.parsedValue.inhibitPolicyMapping+1?qe.parsedValue.inhibitPolicyMapping+1:Ae),"2.5.29.54"===qe.extnID&&!1===he&&(0===qe.parsedValue.valueBlock.valueDec?he=!0:!1===fe[2]?(fe[2]=!0,Ne=qe.parsedValue.valueBlock.valueDec):Ne=Ne>qe.parsedValue.valueBlock.valueDec?qe.parsedValue.valueBlock.valueDec:Ne)}if(!0===he){let Re=-1;for(let qe=0;qe<We.length;qe++)if(We[qe]===$t){Re=qe;break}-1!==Re&&delete ct[0][De]}!1===ae&&!0===fe[0]&&(we--,0===we&&(ae=!0,gs=De,fe[0]=!1)),!1===be&&!0===fe[1]&&(Ae--,0===Ae&&(be=!0,fe[1]=!1)),!1===he&&!0===fe[2]&&(Ne--,0===Ne&&(he=!0,fe[2]=!1))}}for(let De=0;De<t.certs.length-1;De++)if(De<t.certs.length-2&&typeof Vt[De+1]<"u")for(let je=0;je<Vt[De+1].mappings.length;je++){if(Vt[De+1].mappings[je].issuerDomainPolicy===$t||Vt[De+1].mappings[je].subjectDomainPolicy===$t)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let Re=-1,qe=-1;for(let tt=0;tt<We.length;tt++)We[tt]===Vt[De+1].mappings[je].issuerDomainPolicy&&(Re=tt),We[tt]===Vt[De+1].mappings[je].subjectDomainPolicy&&(qe=tt);typeof ct[Re][De]<"u"&&delete ct[Re][De];for(let tt=0;tt<xn[De].certificatePolicies.length;tt++)if(Vt[De+1].mappings[je].subjectDomainPolicy===xn[De].certificatePolicies[tt].policyIdentifier&&-1!==Re&&-1!==qe)for(let Dt=0;Dt<=De;Dt++)typeof ct[qe][Dt]<"u"&&(ct[Re][Dt]=!0,delete ct[qe][Dt])}for(let De=0;De<We.length;De++)if(We[De]===$t)for(let je=0;je<gs;je++)delete ct[De][je];const Gt=[];for(let De=0;De<ct.length;De++){let je=!0;for(let Re=0;Re<t.certs.length-1;Re++){let qe=!1;if(Re<gs&&We[De]===$t&&We.length>1){je=!1;break}if(typeof ct[De][Re]>"u"){if(Re>=gs)for(let tt=0;tt<We.length;tt++)if(We[tt]===$t){!0===ct[tt][Re]&&(qe=!0);break}if(!qe){je=!1;break}}}!0===je&&Gt.push(We[De])}let ht=[];if(1===B.length&&B[0]===$t&&!1===ae)ht=B;else if(1===Gt.length&&Gt[0]===$t)ht=B;else for(let De=0;De<Gt.length;De++)for(let je=0;je<B.length;je++)if(B[je]===Gt[De]||B[je]===$t){ht.push(Gt[De]);break}const st={result:ht.length>0,resultCode:0,resultMessage:ht.length>0?y:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:Gt,userConstrPolicies:ht,explicitPolicyIndicator:ae,policyMappings:Vt,certificatePath:t.certs};if(0===ht.length||!1===st.result)return st;St=1;for(let De=t.certs.length-2;De>=0;De--,St++){const je=t.certs[De];let Re=[],qe=[],tt=[];if(je.extensions)for(let Xe=0;Xe<je.extensions.length;Xe++){const Le=je.extensions[Xe];Le.extnID===$d&&("permittedSubtrees"in Le.parsedValue&&(qe=qe.concat(Le.parsedValue.permittedSubtrees)),"excludedSubtrees"in Le.parsedValue&&(tt=tt.concat(Le.parsedValue.excludedSubtrees))),Le.extnID===Fd&&(Re=Re.concat(Le.parsedValue.altNames))}let Dt=ze.length<=0;for(let Xe=0;Xe<ze.length;Xe++)switch(ze[Xe].base.type){case 4:if(ze[Xe].base.value.typesAndValues.length!==je.subject.typesAndValues.length)continue;Dt=!0;for(let Le=0;Le<je.subject.typesAndValues.length;Le++)if(je.subject.typesAndValues[Le].type!==ze[Xe].base.value.typesAndValues[Le].type){Dt=!1;break}if(!0===Dt)break}if(!1===Dt)throw st.result=!1,st.resultCode=21,st.resultMessage="No necessary name form found",st;const Yt=[[],[],[],[],[]];for(let Xe=0;Xe<Te.length;Xe++)switch(Te[Xe].base.type){case 1:Yt[0].push(Te[Xe]);break;case 2:Yt[1].push(Te[Xe]);break;case 4:Yt[2].push(Te[Xe]);break;case 6:Yt[3].push(Te[Xe]);break;case 7:Yt[4].push(Te[Xe])}for(let Xe=0;Xe<5;Xe++){let Le=!1,Bn=!1;const mi=Yt[Xe];for(let pi=0;pi<mi.length;pi++){switch(Xe){case 0:if(Re.length>0)for(let gt=0;gt<Re.length;gt++)1===Re[gt].type&&(Bn=!0,Le=Le||a(Re[gt].value,mi[pi].base.value));else for(let gt=0;gt<je.subject.typesAndValues.length;gt++)("1.2.840.113549.1.9.1"===je.subject.typesAndValues[gt].type||"0.9.2342.19200300.100.1.3"===je.subject.typesAndValues[gt].type)&&(Bn=!0,Le=Le||a(je.subject.typesAndValues[gt].value.valueBlock.value,mi[pi].base.value));break;case 1:if(Re.length>0)for(let gt=0;gt<Re.length;gt++)2===Re[gt].type&&(Bn=!0,Le=Le||i(Re[gt].value,mi[pi].base.value));break;case 2:Bn=!0,Le=d(je.subject,mi[pi].base.value);break;case 3:if(Re.length>0)for(let gt=0;gt<Re.length;gt++)6===Re[gt].type&&(Bn=!0,Le=Le||l(Re[gt].value,mi[pi].base.value));break;case 4:if(Re.length>0)for(let gt=0;gt<Re.length;gt++)7===Re[gt].type&&(Bn=!0,Le=Le||h(Re[gt].value,mi[pi].base.value))}if(Le)break}if(!1===Le&&mi.length>0&&Bn)throw st.result=!1,st.resultCode=41,st.resultMessage='Failed to meet "permitted sub-trees" name constraint',st}let pt=!1;for(let Xe=0;Xe<Me.length;Xe++){switch(Me[Xe].base.type){case 1:if(Re.length>=0)for(let Le=0;Le<Re.length;Le++)1===Re[Le].type&&(pt=pt||a(Re[Le].value,Me[Xe].base.value));else for(let Le=0;Le<je.subject.typesAndValues.length;Le++)("1.2.840.113549.1.9.1"===je.subject.typesAndValues[Le].type||"0.9.2342.19200300.100.1.3"===je.subject.typesAndValues[Le].type)&&(pt=pt||a(je.subject.typesAndValues[Le].value.valueBlock.value,Me[Xe].base.value));break;case 2:if(Re.length>0)for(let Le=0;Le<Re.length;Le++)2===Re[Le].type&&(pt=pt||i(Re[Le].value,Me[Xe].base.value));break;case 4:pt=pt||d(je.subject,Me[Xe].base.value);break;case 6:if(Re.length>0)for(let Le=0;Le<Re.length;Le++)6===Re[Le].type&&(pt=pt||l(Re[Le].value,Me[Xe].base.value));break;case 7:if(Re.length>0)for(let Le=0;Le<Re.length;Le++)7===Re[Le].type&&(pt=pt||h(Re[Le].value,Me[Xe].base.value))}if(pt)break}if(!0===pt)throw st.result=!1,st.resultCode=42,st.resultMessage='Failed to meet "excluded sub-trees" name constraint',st;Te=Te.concat(qe),Me=Me.concat(tt)}return st}catch(p){return p instanceof Error?p instanceof ll?{result:!1,resultCode:p.code,resultMessage:p.message,error:p}:{result:!1,resultCode:jr.unknown,resultMessage:p.message,error:p}:p&&"object"==typeof p&&"resultMessage"in p?p:{result:!1,resultCode:-1,resultMessage:`${p}`}}})()}}const Oc="tbsResponseData",cl="signatureAlgorithm",ul="signature",Hr="certs",hl="BasicOCSPResponse",Sh=`${hl}.${Oc}`,_h=`${hl}.${cl}`,Ah=`${hl}.${ul}`,Pc=`${hl}.${Hr}`,ug=[Sh,_h,Ah,Pc];let hg=(()=>{class s extends ge{constructor(e={}){super(),this.tbsResponseData=o(e,Oc,s.defaultValues(Oc)),this.signatureAlgorithm=o(e,cl,s.defaultValues(cl)),this.signature=o(e,ul,s.defaultValues(ul)),Hr in e&&(this.certs=o(e,Hr,s.defaultValues(Hr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oc:return new ui;case cl:return new te;case ul:return new Ze;case Hr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let i=ui.compareWithDefault("tbs",t.tbs)&&ui.compareWithDefault("responderID",t.responderID)&&ui.compareWithDefault("producedAt",t.producedAt)&&ui.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(i=i&&ui.compareWithDefault("responseExtensions",t.responseExtensions)),i}case cl:return t.algorithmId===y&&!("algorithmParams"in t);case ul:return t.isEqual(s.defaultValues(e));case Hr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||hl,value:[ui.schema(t.tbsResponseData||{names:{blockName:Sh}}),te.schema(t.signatureAlgorithm||{names:{blockName:_h}}),new Ze({name:t.signature||Ah}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new j({value:[new He({name:Pc,value:Kt.schema(t.certs||{})})]})]})]})}fromSchema(e){R(e,ug);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsResponseData=new ui({schema:t.result[Sh]}),this.signatureAlgorithm=new te({schema:t.result[_h]}),this.signature=t.result[Ah],Pc in t.result&&(this.certs=Array.from(t.result[Pc],i=>new Kt({schema:i})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:[new j({value:Array.from(this.certs,t=>t.toSchema())})]})),new j({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}getCertificateStatus(e,t,i=$e(!0)){var a=this;return(0,A.A)(function*(){const l={isForCertificate:!1,status:2},h={},d=[];for(const p of a.tbsResponseData.responses){const B=i.getAlgorithmByOID(p.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!h[B.name]){h[B.name]=1;const D=new li;d.push(D),yield D.createForCertificate(e,{hashAlgorithm:B.name,issuerCertificate:t},i)}}for(const p of a.tbsResponseData.responses)for(const B of d)if(p.certID.isEqual(B)){l.isForCertificate=!0;try{switch(p.certStatus.idBlock.isConstructed){case!0:1===p.certStatus.idBlock.tagNumber&&(l.status=1);break;case!1:switch(p.certStatus.idBlock.tagNumber){case 0:l.status=0;break;case 2:l.status=2}}}catch{}return l}return l})()}sign(e,t="SHA-1",i=$e(!0)){var a=this;return(0,A.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters.algorithm;if(!("name"in h))throw new Error("Empty algorithm");a.signatureAlgorithm=l.signatureAlgorithm,a.tbsResponseData.tbsView=new Uint8Array(a.tbsResponseData.toSchema(!0).toBER());const d=yield i.signWithPrivateKey(a.tbsResponseData.tbsView,e,{algorithm:h});a.signature=new Ze({valueHex:d})})()}verify(e={},t=$e(!0)){var i=this;return(0,A.A)(function*(){let a=null,l=-1;const h=e.trustedCerts||[];if(!i.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case i.tbsResponseData.responderID instanceof mt:for(const[D,q]of i.certs.entries())if(q.subject.isEqual(i.tbsResponseData.responderID)){l=D;break}break;case i.tbsResponseData.responderID instanceof ve:for(const[D,q]of i.certs.entries())if(Z(yield t.digest({name:"sha-1"},q.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),i.tbsResponseData.responderID.valueBlock.valueHex)){l=D;break}break;default:throw new Error("Wrong value for responderID")}if(-1===l)throw new Error("Correct certificate was not found in OCSP response");a=i.certs[l];const d=[a];for(const D of i.certs){const q=yield Mf(D,a);q&&d.push(q)}if(!(yield new Vc({certs:d,trustedCerts:h}).verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(i.tbsResponseData.tbsView,i.signature,i.certs[l].subjectPublicKeyInfo,i.signatureAlgorithm)})()}}return s.CLASS_NAME="BasicOCSPResponse",s})();const Eh="version",Ch="subject",Nh="subjectPublicKeyInfo",$r="attributes",dl="signatureAlgorithm",fl="signatureValue",Kr="CertificationRequestInfo",Ih=`${Kr}.version`,Th=`${Kr}.subject`,xh=`${Kr}.subjectPublicKeyInfo`,Dc=`${Kr}.attributes`,dg=[Kr,Ih,Th,xh,Dc,dl,fl];function fg(s={}){const r=o(s,"names",{});return new j({name:r.CertificationRequestInfo||Kr,value:[new Q({name:r.CertificationRequestInfoVersion||Ih}),mt.schema(r.subject||{names:{blockName:Th}}),es.schema({names:{blockName:xh}}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({optional:!0,name:r.CertificationRequestInfoAttributes||Dc,value:et.schema(r.attributes||{})})]})]})}let mg=(()=>{class s extends ge{get tbs(){return k._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(o(e,"tbs",s.defaultValues("tbs"))),this.version=o(e,Eh,s.defaultValues(Eh)),this.subject=o(e,Ch,s.defaultValues(Ch)),this.subjectPublicKeyInfo=o(e,Nh,s.defaultValues(Nh)),$r in e&&(this.attributes=o(e,$r,s.defaultValues($r))),this.signatureAlgorithm=o(e,dl,s.defaultValues(dl)),this.signatureValue=o(e,fl,s.defaultValues(fl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return kt;case Eh:return 0;case Ch:return new mt;case Nh:return new es;case $r:return[];case dl:return new te;case fl:return new Ze;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({value:[fg(t.certificationRequestInfo||{}),new j({name:t.signatureAlgorithm||dl,value:[new xe,new Fe({optional:!0})]}),new Ze({name:t.signatureValue||fl})]})}fromSchema(e){R(e,dg);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[Ih].valueBlock.valueDec,this.subject=new mt({schema:t.result[Th]}),this.subjectPublicKeyInfo=new es({schema:t.result[xh]}),Dc in t.result&&(this.attributes=Array.from(t.result[Dc],i=>new et({schema:i}))),this.signatureAlgorithm=new te({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new Q({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return $r in this&&e.push(new X({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],t=>t.toSchema())})),new j({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbsView.byteLength)return s.schema();const i=ut(this.tbsView);de.assert(i,"PKCS#10 Certificate Request"),t=i.result}else t=this.encodeTBS();return new j({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:k.U$.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return $r in this&&(e.attributes=Array.from(this.attributes||[],t=>t.toJSON())),e}sign(e,t="SHA-1",i=$e(!0)){var a=this;return(0,A.A)(function*(){if(!e)throw new Error("Need to provide a private key for signing");const l=yield i.getSignatureParameters(e,t),h=l.parameters;a.signatureAlgorithm=l.signatureAlgorithm,a.tbsView=new Uint8Array(a.encodeTBS().toBER());const d=yield i.signWithPrivateKey(a.tbsView,e,h);a.signatureValue=new Ze({valueHex:d})})()}verify(e=$e(!0)){var t=this;return(0,A.A)(function*(){return e.verifyWithPublicKey(t.tbsView,t.signatureValue,t.subjectPublicKeyInfo,t.signatureAlgorithm)})()}getPublicKey(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){return t.getPublicKey(i.subjectPublicKeyInfo,i.signatureAlgorithm,e)})()}}return s.CLASS_NAME="CertificationRequest",s})();const gn="digestAlgorithm",vn="digest",pg=[gn,vn];let Gr=(()=>{class s extends ge{constructor(e={}){super(),this.digestAlgorithm=o(e,gn,s.defaultValues(gn)),this.digest=o(e,vn,s.defaultValues(vn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gn:return new te;case vn:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gn:return te.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case vn:return t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.digestAlgorithm||{names:{blockName:gn}}),new ve({name:t.digest||vn})]})}fromSchema(e){R(e,pg);const t=pe(e,e,s.schema({names:{digestAlgorithm:{names:{blockName:gn}},digest:vn}}));de.assertSchema(t,this.className),this.digestAlgorithm=new te({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new j({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}return s.CLASS_NAME="DigestInfo",s})();const Jr="eContentType",Wt="eContent",gg=[Jr,Wt];let qr=(()=>{class s extends ge{constructor(e={}){if(super(),this.eContentType=o(e,Jr,s.defaultValues(Jr)),Wt in e&&(this.eContent=o(e,Wt,s.defaultValues(Wt)),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const t=new ve({idBlock:{isConstructed:!0},isConstructed:!0});let i=0;const a=this.eContent.valueBlock.valueHexView.slice().buffer;let l=a.byteLength;for(;l>0;){const h=new Uint8Array(a,i,i+65536>a.byteLength?a.byteLength-i:65536),d=new ArrayBuffer(h.length),p=new Uint8Array(d);for(let B=0;B<p.length;B++)p[B]=h[B];t.valueBlock.value.push(new ve({valueHex:d})),l-=h.length,i+=h.length}this.eContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jr:return y;case Wt:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jr:return t===y;case Wt:return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(s.defaultValues(Wt));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new xe({name:t.eContentType||y}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Fe({name:t.eContent||y})]})]})}fromSchema(e){R(e,gg);const t=pe(e,e,s.schema({names:{eContentType:Jr,eContent:Wt}}));de.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Wt in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new xe({value:this.eContentType})),this.eContent&&!1===s.compareWithDefault(Wt,this.eContent)&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new j({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&!1===s.compareWithDefault(Wt,this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}return s.CLASS_NAME="EncapsulatedContentInfo",s})();const wn="mac",yn="macSalt",fs="iterations",vg=[wn,yn,fs];let bn=(()=>{class s extends ge{constructor(e={}){super(),this.mac=o(e,wn,s.defaultValues(wn)),this.macSalt=o(e,yn,s.defaultValues(yn)),fs in e&&(this.iterations=o(e,fs,s.defaultValues(fs))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wn:return new Gr;case yn:return new ve;case fs:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wn:return Gr.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&Gr.compareWithDefault("digest",t.digest);case yn:return t.isEqual(s.defaultValues(e));case fs:return t===s.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,optional:t.optional||!0,value:[Gr.schema(t.mac||{names:{blockName:wn}}),new ve({name:t.macSalt||yn}),new Q({optional:!0,name:t.iterations||fs})]})}fromSchema(e){R(e,vg);const t=pe(e,e,s.schema({names:{mac:{names:{blockName:wn}},macSalt:yn,iterations:fs}}));de.assertSchema(t,this.className),this.mac=new Gr({schema:t.result.mac}),this.macSalt=t.result.macSalt,fs in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return void 0!==this.iterations&&e.push(new Q({value:this.iterations})),new j({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return void 0!==this.iterations&&(e.iterations=this.iterations),e}}return s.CLASS_NAME="MacData",s})();const Sn="hashAlgorithm",_n="hashedMessage",wg=[Sn,_n];let ml=(()=>{class s extends ge{static create(e,t,i=$e(!0)){return(0,A.A)(function*(){const a=i.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),l=yield i.digest(e,t);return new s({hashAlgorithm:new te({algorithmId:a,algorithmParams:new ot}),hashedMessage:new ve({valueHex:l})})})()}constructor(e={}){super(),this.hashAlgorithm=o(e,Sn,s.defaultValues(Sn)),this.hashedMessage=o(e,_n,s.defaultValues(_n)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sn:return new te;case _n:return new ve;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Sn:return t.algorithmId===y&&!("algorithmParams"in t);case _n:return 0===t.isEqual(s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[te.schema(t.hashAlgorithm||{}),new ve({name:t.hashedMessage||y})]})}fromSchema(e){R(e,wg);const t=pe(e,e,s.schema({names:{hashAlgorithm:{names:{blockName:Sn}},hashedMessage:_n}}));de.assertSchema(t,this.className),this.hashAlgorithm=new te({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new j({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}return s.CLASS_NAME="MessageImprint",s})();const An="type",ms="attributes",Mc="encodedValue",Cg=[ms];let Ft=(()=>{class s extends ge{constructor(e={}){super(),this.type=o(e,An,s.defaultValues(An)),this.attributes=o(e,ms,s.defaultValues(ms)),this.encodedValue=o(e,Mc,s.defaultValues(Mc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case An:return-1;case ms:return[];case Mc:return kt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case An:return t===s.defaultValues(An);case ms:return 0===t.length;case Mc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new X({name:t.blockName||y,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new He({name:t.attributes||y,value:et.schema()})]})}fromSchema(e){R(e,Cg);const t=pe(e,e,s.schema({names:{tagNumber:this.type,attributes:ms}}));if(de.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=k._H.toArrayBuffer(t.result.valueBeforeDecodeView),new Uint8Array(this.encodedValue)[0]=49,ms in t.result)this.attributes=Array.from(t.result.attributes,a=>new et({schema:a}));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(s.compareWithDefault(An,this.type)||s.compareWithDefault(ms,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new X({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(s.compareWithDefault(An,this.type)||s.compareWithDefault(ms,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}return s.CLASS_NAME="SignedAndUnsignedAttributes",s})();const zr="version",kn="sid",Wr="digestAlgorithm",hi="signedAttrs",Xr="signatureAlgorithm",gl="signature",di="unsignedAttrs",fi="SignerInfo",Bh=`${fi}.${zr}`,vl=`${fi}.${kn}`,Rh=`${fi}.${Wr}`,Uc=`${fi}.${hi}`,Vh=`${fi}.${Xr}`,Oh=`${fi}.${gl}`,Fc=`${fi}.${di}`,Ng=[Bh,vl,Rh,Uc,Vh,Oh,Fc];let Ph=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,zr,s.defaultValues(zr)),this.sid=o(e,kn,s.defaultValues(kn)),this.digestAlgorithm=o(e,Wr,s.defaultValues(Wr)),hi in e&&(this.signedAttrs=o(e,hi,s.defaultValues(hi))),this.signatureAlgorithm=o(e,Xr,s.defaultValues(Xr)),this.signature=o(e,gl,s.defaultValues(gl)),di in e&&(this.unsignedAttrs=o(e,di,s.defaultValues(di))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zr:return 0;case kn:return new Fe;case Wr:return new te;case hi:return new Ft({type:0});case Xr:return new te;case gl:return new ve;case di:return new Ft({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zr:return s.defaultValues(zr)===t;case kn:return t instanceof Fe;case Wr:return t instanceof te&&t.isEqual(s.defaultValues(Wr));case hi:return Ft.compareWithDefault("type",t.type)&&Ft.compareWithDefault("attributes",t.attributes)&&Ft.compareWithDefault("encodedValue",t.encodedValue);case Xr:return t instanceof te&&t.isEqual(s.defaultValues(Xr));case gl:case di:return Ft.compareWithDefault("type",t.type)&&Ft.compareWithDefault("attributes",t.attributes)&&Ft.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:fi,value:[new Q({name:t.version||Bh}),new ft({value:[Bt.schema(t.sidSchema||{names:{blockName:vl}}),new ft({value:[new X({optional:!0,name:t.sid||vl,idBlock:{tagClass:3,tagNumber:0},value:[new ve]}),new Be({optional:!0,name:t.sid||vl,idBlock:{tagClass:3,tagNumber:0}})]})]}),te.schema(t.digestAlgorithm||{names:{blockName:Rh}}),Ft.schema(t.signedAttrs||{names:{blockName:Uc,tagNumber:0}}),te.schema(t.signatureAlgorithm||{names:{blockName:Vh}}),new ve({name:t.signature||Oh}),Ft.schema(t.unsignedAttrs||{names:{blockName:Fc,tagNumber:1}})]})}fromSchema(e){R(e,Ng);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.version=t.result[Bh].valueBlock.valueDec;const i=t.result[vl];this.sid=1===i.idBlock.tagClass?new Bt({schema:i}):i,this.digestAlgorithm=new te({schema:t.result[Rh]}),Uc in t.result&&(this.signedAttrs=new Ft({type:0,schema:t.result[Uc]})),this.signatureAlgorithm=new te({schema:t.result[Vh]}),this.signature=t.result[Oh],Fc in t.result&&(this.unsignedAttrs=new Ft({type:1,schema:t.result[Fc]}))}toSchema(){if(s.compareWithDefault(kn,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new Q({value:this.version})),e.push(this.sid instanceof Bt?this.sid.toSchema():this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&!1===s.compareWithDefault(hi,this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&!1===s.compareWithDefault(di,this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new j({value:e})}toJSON(){if(s.compareWithDefault(kn,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof Fe||(e.sid=this.sid.toJSON()),this.signedAttrs&&!1===s.compareWithDefault(hi,this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&!1===s.compareWithDefault(di,this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}return s.CLASS_NAME="SignerInfo",s})();const wl="version",yl="policy",bl="messageImprint",Sl="serialNumber",_l="genTime",En="ordering",Cn="nonce",Yr="accuracy",Zr="tsa",Qr="extensions",Xt="TSTInfo",Dh=`${Xt}.${wl}`,Mh=`${Xt}.${yl}`,Uh=`${Xt}.${bl}`,Fh=`${Xt}.${Sl}`,Lh=`${Xt}.${_l}`,Lc=`${Xt}.${Yr}`,jc=`${Xt}.${En}`,Hc=`${Xt}.${Cn}`,$c=`${Xt}.${Zr}`,Kc=`${Xt}.${Qr}`,Ig=[Dh,Mh,Uh,Fh,Lh,Lc,jc,Hc,$c,Kc];let Tg=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,wl,s.defaultValues(wl)),this.policy=o(e,yl,s.defaultValues(yl)),this.messageImprint=o(e,bl,s.defaultValues(bl)),this.serialNumber=o(e,Sl,s.defaultValues(Sl)),this.genTime=o(e,_l,s.defaultValues(_l)),Yr in e&&(this.accuracy=o(e,Yr,s.defaultValues(Yr))),En in e&&(this.ordering=o(e,En,s.defaultValues(En))),Cn in e&&(this.nonce=o(e,Cn,s.defaultValues(Cn))),Zr in e&&(this.tsa=o(e,Zr,s.defaultValues(Zr))),Qr in e&&(this.extensions=o(e,Qr,s.defaultValues(Qr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return 0;case yl:return y;case bl:return new ml;case Sl:return new Q;case _l:return new Date(0,0,0);case Yr:return new On;case En:return!1;case Cn:return new Q;case Zr:return new bt;case Qr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wl:case yl:case _l:case En:return t===s.defaultValues(En);case bl:return ml.compareWithDefault(Sn,t.hashAlgorithm)&&ml.compareWithDefault(_n,t.hashedMessage);case Sl:case Cn:return t.isEqual(s.defaultValues(Cn));case Yr:return On.compareWithDefault(Ns,t.seconds)&&On.compareWithDefault(Is,t.millis)&&On.compareWithDefault(Ts,t.micros);case Zr:return bt.compareWithDefault(fa,t.type)&&bt.compareWithDefault(ma,t.value);case Qr:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||Xt,value:[new Q({name:t.version||Dh}),new xe({name:t.policy||Mh}),ml.schema(t.messageImprint||{names:{blockName:Uh}}),new Q({name:t.serialNumber||Fh}),new dt({name:t.genTime||Lh}),On.schema(t.accuracy||{names:{blockName:Lc}}),new ys({name:t.ordering||jc,optional:!0}),new Q({name:t.nonce||Hc,optional:!0}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[bt.schema(t.tsa||{names:{blockName:$c}})]}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He({name:t.extensions||Kc,value:Oi.schema(t.extension||{})})]})]})}fromSchema(e){R(e,Ig);const t=pe(e,e,s.schema());de.assertSchema(t,this.className),this.version=t.result[Dh].valueBlock.valueDec,this.policy=t.result[Mh].valueBlock.toString(),this.messageImprint=new ml({schema:t.result[Uh]}),this.serialNumber=t.result[Fh],this.genTime=t.result[Lh].toDate(),Lc in t.result&&(this.accuracy=new On({schema:t.result[Lc]})),jc in t.result&&(this.ordering=t.result[jc].valueBlock.value),Hc in t.result&&(this.nonce=t.result[Hc]),$c in t.result&&(this.tsa=new bt({schema:t.result[$c]})),Kc in t.result&&(this.extensions=Array.from(t.result[Kc],i=>new Oi({schema:i})))}toSchema(){const e=[];return e.push(new Q({value:this.version})),e.push(new xe({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new dt({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),void 0!==this.ordering&&e.push(new ys({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,t=>t.toSchema())})),new j({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),void 0!==this.ordering&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}verify(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const a=e.data;if(e.notBefore&&i.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&i.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const l=t.getAlgorithmByOID(i.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),h=yield t.digest(l.name,new Uint8Array(a));return k._H.isEqual(h,i.messageImprint.hashedMessage.valueBlock.valueHexView)})()}}return s.CLASS_NAME="TSTInfo",s})();const ea="version",Al="digestAlgorithms",kl="encapContentInfo",ta="certificates",sa="crls",El="signerInfos",Cl="ocsps",Nn="SignedData",jh=`${Nn}.${ea}`,Gc=`${Nn}.${Al}`,Hh=`${Nn}.${kl}`,Jc=`${Nn}.${ta}`,qc=`${Nn}.${sa}`,zc=`${Nn}.${El}`,xg=[jh,Gc,Hh,Jc,qc,zc];class Rt extends Error{constructor({message:r,code:e=0,date:t=new Date,signatureVerified:i=null,signerCertificate:a=null,signerCertificateVerified:l=null,timestampSerial:h=null,certificatePath:d=[]}){super(r),this.name="SignedDataVerifyError",this.date=t,this.code=e,this.timestampSerial=h,this.signatureVerified=i,this.signerCertificate=a,this.signerCertificateVerified=l,this.certificatePath=d}}let Jf=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,ea,s.defaultValues(ea)),this.digestAlgorithms=o(e,Al,s.defaultValues(Al)),this.encapContentInfo=o(e,kl,s.defaultValues(kl)),ta in e&&(this.certificates=o(e,ta,s.defaultValues(ta))),sa in e&&(this.crls=o(e,sa,s.defaultValues(sa))),Cl in e&&(this.ocsps=o(e,Cl,s.defaultValues(Cl))),this.signerInfos=o(e,El,s.defaultValues(El)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ea:return 0;case Al:return[];case kl:return new qr;case ta:case sa:case Cl:case El:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ea:return t===s.defaultValues(ea);case kl:return qr.compareWithDefault("eContentType",t.eContentType)&&qr.compareWithDefault("eContent",t.eContent);case Al:case ta:case sa:case Cl:case El:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return void 0===t.optional&&(t.optional=!1),new j({name:t.blockName||Nn,optional:t.optional,value:[new Q({name:t.version||jh}),new At({value:[new He({name:t.digestAlgorithms||Gc,value:te.schema()})]}),qr.schema(t.encapContentInfo||{names:{blockName:Hh}}),new X({name:t.certificates||Jc,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:lr.schema().valueBlock.value}),new X({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:pc.schema(t.crls||{names:{crls:qc}}).valueBlock.value}),new At({value:[new He({name:t.signerInfos||zc,value:Ph.schema()})]})]})}fromSchema(e){R(e,xg);const t=pe(e,e,s.schema());if(de.assertSchema(t,this.className),this.version=t.result[jh].valueBlock.valueDec,Gc in t.result&&(this.digestAlgorithms=Array.from(t.result[Gc],i=>new te({schema:i}))),this.encapContentInfo=new qr({schema:t.result[Hh]}),Jc in t.result){const i=new lr({schema:new At({value:t.result[Jc].valueBlock.value})});this.certificates=i.certificates.slice(0)}qc in t.result&&(this.crls=Array.from(t.result[qc],i=>1===i.idBlock.tagClass?new dc({schema:i}):(i.idBlock.tagClass=1,i.idBlock.tagNumber=16,new mc({schema:i})))),zc in t.result&&(this.signerInfos=Array.from(t.result[zc],i=>new Ph({schema:i})))}toSchema(e=!1){const t=[];if(this.version=this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Xs)||this.crls&&this.crls.length&&this.crls.some(i=>i instanceof mc)?5:this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Wi)?4:this.certificates&&this.certificates.length&&this.certificates.some(i=>i instanceof Pu)||this.signerInfos.some(i=>3===i.version)||this.encapContentInfo.eContentType!==s.ID_DATA?3:1,t.push(new Q({value:this.version})),t.push(new At({value:Array.from(this.digestAlgorithms,i=>i.toSchema())})),t.push(this.encapContentInfo.toSchema()),this.certificates){const a=new lr({certificates:this.certificates}).toSchema();t.push(new X({idBlock:{tagClass:3,tagNumber:0},value:a.valueBlock.value}))}return this.crls&&t.push(new X({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,i=>{if(i instanceof mc){const a=i.toSchema();return a.idBlock.tagClass=3,a.idBlock.tagNumber=1,a}return i.toSchema(e)})})),t.push(new At({value:Array.from(this.signerInfos,i=>i.toSchema())})),new j({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,t=>t.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,t=>t.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,t=>t.toJSON())),this.crls&&(e.crls=Array.from(this.crls,t=>t.toJSON())),e}verify({signer:e=-1,data:t=kt,trustedCerts:i=[],checkDate:a=new Date,checkChain:l=!1,passedWhenNotRevValues:h=!1,extendedMode:d=!1,findOrigin:p=null,findIssuer:B=null}={},D=$e(!0)){var q=this;return(0,A.A)(function*(){let G=null,le=null;try{let ke=kt,ye=y,ae=[];const be=q.signerInfos[e];if(!be)throw new Rt({date:a,code:1,message:"Unable to get signer by supplied index"});if(!q.certificates)throw new Rt({date:a,code:2,message:"No certificates attached to this signed data"});if(be.sid instanceof Bt){for(const Ae of q.certificates)if(Ae instanceof Kt&&Ae.issuer.isEqual(be.sid.issuer)&&Ae.serialNumber.isEqual(be.sid.serialNumber)){G=Ae;break}}else{const Ae=be.sid,Ne=Ae.idBlock.isConstructed?Ae.valueBlock.value[0].valueBlock.valueHex:Ae.valueBlock.valueHex;for(const Te of q.certificates)if(Te instanceof Kt&&Z(yield D.digest({name:"sha-1"},Te.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView),Ne)){G=Te;break}}if(!G)throw new Rt({date:a,code:3,message:"Unable to find signer certificate"});if("1.2.840.113549.1.9.16.1.4"===q.encapContentInfo.eContentType){if(!q.encapContentInfo.eContent)throw new Rt({date:a,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:G,timestampSerial:le,signerCertificateVerified:!0});let Ae;try{Ae=Tg.fromBER(q.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new Rt({date:a,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:G,timestampSerial:le,signerCertificateVerified:!0})}if(a=Ae.genTime,le=Ae.serialNumber.valueBlock.valueHexView.slice(),0===t.byteLength)throw new Rt({date:a,code:4,message:"Missed detached data input array"});if(!(yield Ae.verify({data:t},D)))throw new Rt({date:a,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:G,timestampSerial:le,signerCertificateVerified:!0})}if(l){const Ae=q.certificates.filter(ze=>ze instanceof Kt&&!!Mf(ze,G)),Ne={checkDate:a,certs:Ae,trustedCerts:i};B&&(Ne.findIssuer=B),p&&(Ne.findOrigin=p);const Te=new Vc(Ne);if(Te.certs.push(G),q.crls)for(const ze of q.crls)"thisUpdate"in ze?Te.crls.push(ze):"1.3.6.1.5.5.7.48.1.1"===ze.otherRevInfoFormat&&Te.ocsps.push(new hg({schema:ze.otherRevInfo}));q.ocsps&&Te.ocsps.push(...q.ocsps);const Me=yield Te.verify({passedWhenNotRevValues:h},D).catch(ze=>{throw new Rt({date:a,code:5,message:`Validation of signer's certificate failed with error: ${ze instanceof Object?ze.resultMessage:ze}`,signerCertificate:G,signerCertificateVerified:!1})});if(Me.certificatePath&&(ae=Me.certificatePath),!Me.result)throw new Rt({date:a,code:5,message:`Validation of signer's certificate failed: ${Me.resultMessage}`,signerCertificate:G,signerCertificateVerified:!1})}const he=D.getAlgorithmByOID(be.digestAlgorithm.algorithmId);if(!("name"in he))throw new Rt({date:a,code:7,message:`Unsupported signature algorithm: ${be.digestAlgorithm.algorithmId}`,signerCertificate:G,signerCertificateVerified:!0});ye=he.name;const fe=q.encapContentInfo.eContent;if(fe)t=1===fe.idBlock.tagClass&&4===fe.idBlock.tagNumber?fe.getValue():fe.valueBlock.valueBeforeDecodeView;else if(0===t.byteLength)throw new Rt({date:a,code:8,message:"Missed detached data input array",signerCertificate:G,signerCertificateVerified:!0});if(be.signedAttrs){let Ae=!1,Ne=!1;for(const Te of be.signedAttrs.attributes)if("1.2.840.113549.1.9.3"===Te.type&&(Ae=!0),"1.2.840.113549.1.9.4"===Te.type&&(Ne=!0,ke=Te.values[0].valueBlock.valueHex),Ae&&Ne)break;if(!1===Ae)throw new Rt({date:a,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:G,signerCertificateVerified:!0});if(!1===Ne)throw new Rt({date:a,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:G,signerCertificateVerified:!0})}if(be.signedAttrs){if(!Z(yield D.digest(ye,new Uint8Array(t)),ke))throw new Rt({date:a,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:G,timestampSerial:le,signerCertificateVerified:!0});t=be.signedAttrs.encodedValue}const we="1.2.840.113549.1.1.1"===be.signatureAlgorithm.algorithmId?yield D.verifyWithPublicKey(t,be.signature,G.subjectPublicKeyInfo,be.signatureAlgorithm,ye):yield D.verifyWithPublicKey(t,be.signature,G.subjectPublicKeyInfo,be.signatureAlgorithm);return d?{date:a,code:14,message:y,signatureVerified:we,signerCertificate:G,timestampSerial:le,signerCertificateVerified:!0,certificatePath:ae}:we}catch(ke){throw ke instanceof Rt?ke:new Rt({date:a,code:15,message:`Error during verification: ${ke instanceof Error?ke.message:ke}`,signatureVerified:null,signerCertificate:G,timestampSerial:le,signerCertificateVerified:!0})}})()}sign(e,t,i="SHA-1",a=kt,l=$e(!0)){var h=this;return(0,A.A)(function*(){var d;if(!e)throw new Error("Need to provide a private key for signing");const p=h.signerInfos[t];if(!p)throw new RangeError("SignerInfo index is out of range");(null===(d=p.signedAttrs)||void 0===d||!d.attributes.length)&&"hash"in e.algorithm&&"hash"in e.algorithm&&e.algorithm.hash&&(i=e.algorithm.hash.name);const B=l.getOIDByAlgorithm({name:i},!0,"hashAlgorithm");0===h.digestAlgorithms.filter(le=>le.algorithmId===B).length&&h.digestAlgorithms.push(new te({algorithmId:B,algorithmParams:new ot})),p.digestAlgorithm=new te({algorithmId:B,algorithmParams:new ot});const D=yield l.getSignatureParameters(e,i),q=D.parameters;if(p.signatureAlgorithm=D.signatureAlgorithm,p.signedAttrs)0!==p.signedAttrs.encodedValue.byteLength?a=p.signedAttrs.encodedValue:(a=p.signedAttrs.toSchema().toBER(),k._H.toUint8Array(a)[0]=49);else{const le=h.encapContentInfo.eContent;if(le)a=1===le.idBlock.tagClass&&4===le.idBlock.tagNumber?le.getValue():le.valueBlock.valueBeforeDecodeView;else if(0===a.byteLength)throw new Error("Missed detached data input array")}const G=yield l.signWithPrivateKey(a,e,q);p.signature=new ve({valueHex:G})})()}}return s.CLASS_NAME="SignedData",s.ID_DATA=vu,s})();const In="version",Tn="authSafe",ps="macData",Nl="parsedValue",Bg=[In,Tn,ps];let Rg=(()=>{class s extends ge{constructor(e={}){super(),this.version=o(e,In,s.defaultValues(In)),this.authSafe=o(e,Tn,s.defaultValues(Tn)),ps in e&&(this.macData=o(e,ps,s.defaultValues(ps))),Nl in e&&(this.parsedValue=o(e,Nl,s.defaultValues(Nl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case In:return 3;case Tn:return new Pt;case ps:return new bn;case Nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case In:return t===s.defaultValues(e);case Tn:return Pt.compareWithDefault("contentType",t.contentType)&&Pt.compareWithDefault("content",t.content);case ps:return bn.compareWithDefault("mac",t.mac)&&bn.compareWithDefault("macSalt",t.macSalt)&&bn.compareWithDefault("iterations",t.iterations);case Nl:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=o(e,"names",{});return new j({name:t.blockName||y,value:[new Q({name:t.version||In}),Pt.schema(t.authSafe||{names:{blockName:Tn}}),bn.schema(t.macData||{names:{blockName:ps,optional:!0}})]})}fromSchema(e){R(e,Bg);const t=pe(e,e,s.schema({names:{version:In,authSafe:{names:{blockName:Tn}},macData:{names:{blockName:ps}}}}));de.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new Pt({schema:t.result.authSafe}),ps in t.result&&(this.macData=new bn({schema:t.result.macData}))}toSchema(){const e=[new Q({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new j({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}makeInternalValues(e={},t=$e(!0)){var i=this;return(0,A.A)(function*(){if(lt.assert(e,"parameters","object"),!i.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(Qe.assertEmpty(i.parsedValue.integrityMode,"integrityMode","parsedValue"),Qe.assertEmpty(i.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),i.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new Qe("iterations");Qe.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),Qe.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),Qe.assertEmpty(e.password,"password");const a=new ArrayBuffer(64),l=new Uint8Array(a);t.getRandomValues(l);const h=i.parsedValue.authenticatedSafe.toSchema().toBER(!1);i.authSafe=new Pt({contentType:Pt.DATA,content:new ve({valueHex:h})});const d=yield t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:a,iterationCount:e.iterations,contentToStamp:h});i.macData=new bn({mac:new Gr({digestAlgorithm:new te({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new ve({valueHex:d})}),macSalt:new ve({valueHex:a}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new Qe("signingCertificate");Qe.assertEmpty(e.privateKey,"privateKey"),Qe.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const a=i.parsedValue.authenticatedSafe.toSchema().toBER(!1),l=new Jf({version:1,encapContentInfo:new qr({eContentType:"1.2.840.113549.1.7.1",eContent:new ve({valueHex:a})}),certificates:[e.signingCertificate]}),h=yield t.digest({name:e.hashAlgorithm},new Uint8Array(a)),d=[];d.push(new et({type:"1.2.840.113549.1.9.3",values:[new xe({value:"1.2.840.113549.1.7.1"})]})),d.push(new et({type:"1.2.840.113549.1.9.5",values:[new Vn({valueDate:new Date})]})),d.push(new et({type:"1.2.840.113549.1.9.4",values:[new ve({valueHex:h})]})),l.signerInfos.push(new Ph({version:1,sid:new Bt({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new Ft({type:0,attributes:d})})),yield l.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),i.authSafe=new Pt({contentType:"1.2.840.113549.1.7.2",content:l.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${i.parsedValue.integrityMode}`)}})()}parseInternalValues(e,t=$e(!0)){var i=this;return(0,A.A)(function*(){switch(lt.assert(e,"parameters","object"),void 0===e.checkIntegrity&&(e.checkIntegrity=!0),i.parsedValue={},i.authSafe.contentType){case Pt.DATA:{Qe.assertEmpty(e.password,"password"),i.parsedValue.integrityMode=0,lt.assert(i.authSafe.content,"authSafe.content",ve);const a=i.authSafe.content.getValue();if(i.parsedValue.authenticatedSafe=hh.fromBER(a),e.checkIntegrity){if(!i.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const l=t.getAlgorithmByOID(i.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!(yield t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:l.name,salt:k._H.toArrayBuffer(i.macData.macSalt.valueBlock.valueHexView),iterationCount:i.macData.iterations||1,contentToVerify:a,signatureToVerify:k._H.toArrayBuffer(i.macData.mac.digest.valueBlock.valueHexView)})))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Pt.SIGNED_DATA:{i.parsedValue.integrityMode=1;const a=new Jf({schema:i.authSafe.content}),l=a.encapContentInfo.eContent;Qe.assert(l,"eContent","cmsSigned.encapContentInfo"),lt.assert(l,"eContent",ve);const h=l.getValue();if(i.parsedValue.authenticatedSafe=hh.fromBER(h),!(yield a.verify({signer:0,checkChain:!1},t)))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${i.authSafe.contentType}`)}})()}}return s.CLASS_NAME="PFX",s})();!function Xg(){if(typeof self<"u"){if("crypto"in self){let s="webcrypto";"webkitSubtle"in self.crypto&&(s="safari"),Af(s,new Kl({name:s,crypto}))}}else if(typeof crypto<"u"&&"webcrypto"in crypto){const s="NodeJS ^15",r=crypto.webcrypto;Af(s,new Kl({name:s,crypto:r}))}}();const Yg=function(){var s=(0,A.A)(function*(r,e,t,i,a,l){try{const h={name:"ECDSA",namedCurve:"P-384",typedCurve:""},d=yield crypto.subtle.generateKey(h,!0,["sign","verify"]),p=new mg;p.subject.typesAndValues.push(new hu({type:"2.5.4.3",value:new Ht({value:"Test"})})),yield p.subjectPublicKeyInfo.importKey(d.publicKey),yield p.sign(d.privateKey,"SHA-384");const B=p.toSchema().toBER(!1),D=Il(B,"CERTIFICATE REQUEST"),q=yield new Promise((ye,ae)=>{r.issueNewCertificate(D,e,t,i).subscribe(be=>{},be=>{201===be.status?ye(be.error.text):(console.error("Error when trying to issue new certificate:",be.error.message),ae(be))})}),G=yield crypto.subtle.exportKey("pkcs8",d.privateKey),le=yield crypto.subtle.exportKey("spki",d.publicKey),ke=new Gn({schema:ut(G).result});if(a){const ae=Zg(q).map(fe=>new Kt({schema:ut(fe).result})),be=Qg(),he=yield e0(ke,ae,be);return{certificate:q,publicKey:Il(le,"PUBLIC KEY"),privateKey:Il(G,"PRIVATE KEY"),pkcs12Keystore:he,keystorePassword:be}}return{certificate:q,publicKey:Il(le,"PUBLIC KEY"),privateKey:Il(G,"PRIVATE KEY")}}catch(h){return void console.error("Error while issuing new certificate:",h)}});return function(e,t,i,a,l,h){return s.apply(this,arguments)}}(),Il=(s,r)=>{let e=k.U$.ToBase64(s),t="";for(;e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return`-----BEGIN ${r}-----\n${t}-----END ${r}-----\n`},Zg=s=>{let r=s.split(/-----END CERTIFICATE-----/);return r=r.slice(0,r.length-1),r.map(t=>t.split(/-----BEGIN CERTIFICATE-----/)[1].replace(/\n/gm,"")).map(t=>k.U$.FromBase64(t))},Qg=()=>{const r=new Uint32Array(26);crypto.getRandomValues(r);let e="";for(const t of r)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_^$#&!%"[t%70];return e},e0=function(){var s=(0,A.A)(function*(r,e,t){const i=new ArrayBuffer(4);Au(new Uint8Array(i));const l=new ArrayBuffer(4);Au(new Uint8Array(l));const d=new ArrayBuffer(4);Au(new Uint8Array(d));const B=new ArrayBuffer(1);new Uint8Array(B)[0]|=128;const q=new Ze({valueHex:B,unusedBits:7});r.attributes=[new et({type:"2.5.29.15",values:[q]})];let G="";e[0].subject.typesAndValues.forEach(ae=>{"2.5.4.3"===ae.type&&(G=ae.value.valueBlock.value)});let le="";e[1].subject.typesAndValues.forEach(ae=>{"2.5.4.3"===ae.type&&(le=ae.value.valueBlock.value)});const ke=new Rg({parsedValue:{integrityMode:0,authenticatedSafe:new hh({parsedValue:{safeContents:[{privacyMode:0,value:new tn({safeBags:[new Ko({bagId:"1.2.840.113549.1.12.10.1.2",bagValue:new Uf({parsedValue:r}),bagAttributes:[new et({type:"1.2.840.113549.1.9.20",values:[new Jt({value:"PKCS8ShroudedKeyBag from PKIjs"})]}),new et({type:"1.2.840.113549.1.9.21",values:[new ve({valueHex:i})]}),new et({type:"1.3.6.1.4.1.311.17.1",values:[new Jt({value:"MCP using https://pkijs.org/"})]})]})]})},{privacyMode:1,value:new tn({safeBags:[new Ko({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new zu({parsedValue:e[0]}),bagAttributes:[new et({type:"1.2.840.113549.1.9.20",values:[new Jt({value:G})]}),new et({type:"1.2.840.113549.1.9.21",values:[new ve({valueHex:l})]}),new et({type:"1.3.6.1.4.1.311.17.1",values:[new Jt({value:"MCP using https://pkijs.org/"})]})]}),new Ko({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new zu({parsedValue:e[1]}),bagAttributes:[new et({type:"1.2.840.113549.1.9.20",values:[new Jt({value:le})]}),new et({type:"1.2.840.113549.1.9.21",values:[new ve({valueHex:d})]}),new et({type:"1.3.6.1.4.1.311.17.1",values:[new Jt({value:"MCP using https://pkijs.org/"})]})]})]})}]}})}}),ye=m(t);return yield ke.parsedValue.authenticatedSafe.parsedValue.safeContents[0].value.safeBags[0].bagValue.makeInternalValues({password:ye,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-1",iterationCount:1e5}),yield ke.parsedValue.authenticatedSafe.makeInternalValues({safeContents:[{},{password:ye,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-1",iterationCount:1e5}]}),yield ke.makeInternalValues({password:ye,iterations:1e5,pbkdf2HashAlgorithm:"SHA-256",hmacHashAlgorithm:"SHA-256"}),ke.toSchema().toBER(!1)});return function(e,t,i){return s.apply(this,arguments)}}();var t0=L(888),s0=L(3830),i0=L(8168),Wc=L(1066),n0=L(2537);const r0={serialNumber:{title:"Serial number",type:"string"},start:{title:"Valid from",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)},end:{title:"Valid until",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)}},a0={serialNumber:{title:"Serial number",type:"string"},revokedAt:{title:"Revoked from",type:"string",valuePrepareFunction:s=>(0,Wc.t)(s)},revokeReason:{title:"Reason",type:"string"}},o0=s=>[s];function l0(s,r){if(1&s&&n.nrm(0,"app-smart-table",0),2&s){const e=n.XpG();n.Y8G("labels",e.columnsForActive)("data",e.data)("selectedIds",n.eq3(7,o0,e.serial))("onDelete",e.revoke)("onDownload",e.download)("onAdd",e.add)("itemType",e.itemType)}}function c0(s,r){if(1&s&&n.nrm(0,"app-smart-table",1),2&s){const e=n.XpG();n.Y8G("labels",e.columnsForRevoked)("data",e.data)("itemType",e.itemType)}}function u0(s,r){if(1&s&&(n.j41(0,"h1"),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("The given context is wrong! : ",e.context,"")}}let h0=(()=>{class s{constructor(){this.context="active",this.data=[],this.onAdd=new n.bkB,this.onDownload=new n.bkB,this.onRevoke=new n.bkB,this.itemType=c.SP.Certificate,this.download=e=>{this.onDownload.emit(e)},this.add=()=>{this.onAdd.emit()},this.revoke=e=>{this.onRevoke.emit(e)},this.empty=[],this.columnsForActive=r0,this.columnsForRevoked=a0}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-cert-table"]],inputs:{context:"context",data:"data",serial:"serial"},outputs:{onAdd:"onAdd",onDownload:"onDownload",onRevoke:"onRevoke"},standalone:!0,features:[n.aNF],decls:3,vars:1,consts:[["deleteText","Revoke","placeholder","There is no issued certificate.",3,"labels","data","selectedIds","onDelete","onDownload","onAdd","itemType"],["placeholder","There is no revoked certificate.",3,"labels","data","itemType"]],template:function(t,i){1&t&&n.DNE(0,l0,1,9,"app-smart-table",0)(1,c0,1,3,"app-smart-table",1)(2,u0,2,1,"h1"),2&t&&n.vxM("active"===i.context?0:"revoked"===i.context?1:2)},dependencies:[n0.B]})}return s})();function f0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.xc7("width",400,"px"),n.R7$(),n.JRh(t.convertTimeString(t.item[e.key]))}}function m0(s,r){1&s&&(n.j41(0,"span",7),n.EFF(1,"Active"),n.k0s())}function p0(s,r){if(1&s&&(n.j41(0,"span",11),n.EFF(1),n.k0s()),2&s){const e=r.$implicit;n.R7$(),n.JRh(e)}}function g0(s,r){if(1&s&&n.Z7z(0,p0,2,1,"span",11,n.fX1),2&s){const e=n.XpG(3).$implicit,t=n.XpG();n.Dyx(t.item[e.key])}}function v0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No value assigned"),n.k0s())}function w0(s,r){if(1&s&&n.DNE(0,g0,2,0)(1,v0,2,0,"button",10),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.vxM(t.item[e.key].length>0?0:1)}}function y0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(e);const i=n.XpG(2).$implicit,a=n.XpG();return n.Njj(a.openXmlDialog(a.item[i.key]))}),n.EFF(1,"View XML"),n.k0s()}}function b0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(e);const i=n.XpG(2).$implicit,a=n.XpG();return n.Njj(a.downloadDocFile(a.item[i.key]))}),n.EFF(1,"Download file"),n.k0s()}}function S0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.organization.name," (",e.item.organization.id,")")}}function _0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.subscriptionPlan.name," (",e.item.subscriptionPlan.id,")")}}function A0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(3);n.xc7("width",400,"px"),n.R7$(),n.Lme("",e.item.organizationSubscription.subscriptionPlan.name," (",e.item.organizationSubscription.id,")")}}function k0(s,r){if(1&s&&(n.j41(0,"span",9),n.EFF(1),n.k0s()),2&s){const e=n.XpG(2).$implicit,t=n.XpG();n.xc7("width",400,"px"),n.R7$(),n.JRh(t.item[e.key])}}function E0(s,r){if(1&s&&n.DNE(0,f0,2,3,"span",6)(1,m0,2,0,"span",7)(2,w0,2,1)(3,y0,2,0,"button",8)(4,b0,2,0,"button",8)(5,S0,2,4,"span",6)(6,_0,2,4,"span",6)(7,A0,2,4,"span",6)(8,k0,2,3,"span",6),2&s){const e=n.XpG().$implicit,t=n.XpG();n.vxM(t.isTimestampFormat(e.key)?0:"boolean"===e.value.type?1:"serviceType"===e.key||"dataProductType"===e.key?2:"instanceAsXml"===e.key?3:"instanceAsDoc"===e.key?4:"organizationId"===e.value.type?5:"subscriptionPlanId"===e.value.type?6:"organizationSubscriptionId"===e.value.type?7:8)}}function C0(s,r){1&s&&(n.j41(0,"span",13),n.EFF(1,"Inactive"),n.k0s())}function N0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No XML data available"),n.k0s())}function I0(s,r){1&s&&(n.j41(0,"button",10),n.EFF(1,"No document available"),n.k0s())}function T0(s,r){1&s&&n.nrm(0,"span",9),2&s&&n.xc7("width",400,"px")}function x0(s,r){if(1&s&&n.DNE(0,C0,2,0,"span",13)(1,N0,2,0,"button",10)(2,I0,2,0,"button",10)(3,T0,1,2,"span",6),2&s){const e=n.XpG().$implicit;n.vxM("boolean"===e.value.type?0:"instanceAsXml"===e.key?1:"instanceAsDoc"===e.key?2:3)}}function B0(s,r){if(1&s&&(n.j41(0,"div",2)(1,"label",3),n.EFF(2),n.k0s(),n.j41(3,"div",4)(4,"div",5),n.DNE(5,E0,9,1)(6,x0,4,1),n.k0s()()()),2&s){const e=r.$implicit,t=n.XpG();n.R7$(2),n.JRh(e.value.title),n.R7$(3),n.vxM(t.item[e.key]?5:6)}}function R0(s,r){if(1&s){const e=n.RV6();n.j41(0,"div",2)(1,"label",3),n.EFF(2,"Active certificates"),n.k0s(),n.j41(3,"div",14)(4,"app-cert-table",15),n.bIt("onAdd",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.openCertModal())})("onDownload",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickDownloadBtn(i))})("onRevoke",function(i){n.eBV(e);const a=n.XpG();return n.Njj(a.clickRevokeBtn(i))}),n.k0s()()(),n.j41(5,"div",2)(6,"label",3),n.EFF(7,"Revoked certificates"),n.k0s(),n.j41(8,"div",14),n.nrm(9,"app-cert-table",16),n.k0s()()}if(2&s){const e=n.XpG();n.R7$(4),n.Y8G("data",e.activeCertificates)("serial",e.serial),n.R7$(5),n.Y8G("data",e.revokedCertificates)}}let V0=(()=>{class s{constructor(){this.itemType=c.SP.None,this.item={},this.showCertTables=!1,this.activeCertificates=[],this.revokedCertificates=[],this.columnForMenu={},this.serial=void 0,this.openXmlDialogCall=new n.bkB,this.downloadDocFileCall=new n.bkB,this.clickRevokeBtnCall=new n.bkB,this.clickDownloadBtnCall=new n.bkB,this.openCertModalCall=new n.bkB,this.convertTimeString=e=>(0,Wc.YF)(e),this.sortColumnForMenu=(e,t)=>((s,r)=>s.order>r.order?-1:1)(e,t),this.openXmlDialog=e=>{this.openXmlDialogCall.emit(e)},this.downloadDocFile=e=>{this.downloadDocFileCall.emit(e)},this.openCertModal=()=>{this.openCertModalCall.emit()},this.clickRevokeBtn=e=>{this.clickRevokeBtnCall.emit(e)},this.clickDownloadBtn=e=>{this.clickDownloadBtnCall.emit(e)}}isTimestampFormat(e){return c.N3.includes(e)}static#e=this.\u0275fac=function(t){return new(t||s)};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-item-table"]],inputs:{itemType:"itemType",item:"item",showCertTables:"showCertTables",activeCertificates:"activeCertificates",revokedCertificates:"revokedCertificates",columnForMenu:"columnForMenu",serial:"serial"},outputs:{openXmlDialogCall:"openXmlDialogCall",downloadDocFileCall:"downloadDocFileCall",clickRevokeBtnCall:"clickRevokeBtnCall",clickDownloadBtnCall:"clickDownloadBtnCall",openCertModalCall:"openCertModalCall"},standalone:!0,features:[n.aNF],decls:4,vars:5,consts:[[1,"clr-form","clr-form-horizontal"],["class","clr-form-horizontal clr-form-control clr-row",4,"ngFor","ngForOf"],[1,"clr-form-horizontal","clr-form-control","clr-row"],[1,"clr-control-label","clr-col-12","clr-col-md-2"],["ng-reflect-ng-class","clr-col-md-10 clr-col-12",1,"clr-control-container","clr-col-md-10","clr-col-12"],[1,"clr-input-wrapper"],["clrinput","","type","string","ng-reflect-name","mrn","ng-reflect-required","true","required","","aria-describedby","clr-form-control-1-helper",1,"clr-input","ng-untouched","ng-pristine","ng-invalid","ng-star-inserted",3,"width"],[1,"label","label-success"],[1,"btn","btn-sm"],["clrinput","","type","string","ng-reflect-name","mrn","ng-reflect-required","true","required","","aria-describedby","clr-form-control-1-helper",1,"clr-input","ng-untouched","ng-pristine","ng-invalid","ng-star-inserted"],["disabled","",1,"btn","btn-sm","btn-outline"],[1,"label","label-light-blue"],[1,"btn","btn-sm",3,"click"],[1,"label","label-danger"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],["context","active",3,"onAdd","onDownload","onRevoke","data","serial"],["context","revoked",3,"data"]],template:function(t,i){1&t&&(n.j41(0,"div",0),n.DNE(1,B0,7,2,"div",1),n.nI1(2,"keyvalue"),n.DNE(3,R0,10,3),n.k0s()),2&t&&(n.R7$(),n.Y8G("ngForOf",n.i5U(2,2,i.columnForMenu,i.sortColumnForMenu)),n.R7$(2),n.vxM(i.showCertTables?3:-1))},dependencies:[h0,N.pM,u.G,N.lG]})}return s})();var zf=L(2269);let O0=(()=>{class s{constructor(e,t){this.usersService=e,this.organizationsService=t}ngOnInit(){}formatCerts(e){let t=[];for(const i in e){const a=e[i];for(const l in a)e[i][l]=a[l];a.revoked&&(a.revokeInfo=a.revokedAt),t.push(a)}return t}splitByRevokeStatus(e){let t=[],i=[];for(const a in e){const l=e[a];l.revoked?i.push(l):t.push(l)}return t.sort((a,l)=>a.end-l.end),i.sort((a,l)=>a.end-l.end),{activeCertificates:this.formatCerts(t),revokedCertificates:this.formatCerts(i)}}issueNewCertificate(e,t,i,a){if(null==t||!i)throw new Error("Internal state lost");switch(t){case c.SP.Organization:return this.organizationsService.newOrgCertFromCsr(e,i);case c.SP.User:return this.usersService.newUserCertFromCsr(e,a,i);default:throw new Error("Unknown item type")}}revokeCertificate(e,t,i,a,l){if(null==e||!t)throw new Error("Internal state lost");throw new Error("Unknown item type")}static#e=this.\u0275fac=function(t){return new(t||s)(n.KVO(zf.Tz),n.KVO(zf.PZ))};static#t=this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Wf=L(9380),P0=L(5189),$h=L(5540),D0=L(8721);let M0=(()=>{class s{constructor(e){this.translate=e}downloadPemCertificate(e,t,i){try{const a=t.split(" ").join("_"),l=new D0;l.file("Certificate_"+a+".pem",e.certificate),e.privateKey&&l.file("PrivateKey_"+a+".pem",e.privateKey),e.publicKey&&l.file("PublicKey_"+a+".pem",e.publicKey),e.pkcs12Keystore&&l.file("Keystore_"+a+".p12",e.pkcs12Keystore),e.keystorePassword&&l.file("KeystorePassword_"+a+".txt",e.keystorePassword),l.generateAsync({type:"blob"}).then(function(h){$h.saveAs(h,"Certificate_"+a+".zip")})}catch(a){i.notify("error",this.translate.instant("error.file.downloadcert")+a)}}downloadBase64File(e,t,i,a){try{let l=this.convertBase64ToByteArray(e),h=new Blob([l],{type:t});$h.saveAs(h,i)}catch(l){a.notify("error",this.translate.instant("error.file.downloaderror")+l)}}downloadFile(e,t,i,a){try{let l=new Blob([e],{type:t});$h.saveAs(l,i)}catch(l){a.notify("error",this.translate.instant("error.file.downloaderror")+l)}}convertBase64ToByteArray(e){let t=window.atob(e),i=new Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Uint8Array(i)}static#e=this.\u0275fac=function(t){return new(t||s)(n.KVO(Wf.c$))};static#t=this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var U0=L(6482);const F0=["certModal"],L0=["revokeModal"],j0=["migrateModal"],H0=["xmlModal"];function $0(s,r){1&s&&n.EFF(0," Organization details ")}function K0(s,r){if(1&s&&n.EFF(0),2&s){const e=n.XpG();n.SpI(" ",e.capitalize(e.itemType)," details ")}}function G0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",36),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.clickMigrateBtn())}),n.EFF(1,"Migrate"),n.k0s()}}function J0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",37),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.approve())}),n.EFF(1,"Approve"),n.k0s(),n.j41(2,"button",36),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.edit())}),n.EFF(3,"Edit"),n.k0s()}}function q0(s,r){if(1&s){const e=n.RV6();n.j41(0,"button",36),n.bIt("click",function(){n.eBV(e);const i=n.XpG();return n.Njj(i.edit())}),n.EFF(1,"Edit"),n.k0s()}}function z0(s,r){1&s&&(n.j41(0,"div",18)(1,"p"),n.EFF(2,"Here is your certificate bundle. You can download it by clicking the button below."),n.k0s()())}function W0(s,r){if(1&s&&(n.j41(0,"h3",15),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("Revoke ",e.selectedActiveCerts.length," certificates")}}function X0(s,r){if(1&s&&(n.j41(0,"h3",15),n.EFF(1),n.k0s()),2&s){const e=n.XpG();n.R7$(),n.SpI("Revoke ",e.selectedActiveCerts.length," certificate")}}function Y0(s,r){if(1&s){const e=n.RV6();n.j41(0,"clr-radio-wrapper")(1,"input",38),n.bIt("click",function(){const i=n.eBV(e).$implicit,a=n.XpG();return n.Njj(a.revokeReason=i)}),n.k0s(),n.j41(2,"label"),n.EFF(3),n.k0s()()}if(2&s){const e=r.$implicit;n.R7$(3),n.JRh(e.title)}}function Z0(s,r){if(1&s&&(n.j41(0,"div")(1,"span"),n.EFF(2),n.k0s()(),n.j41(3,"div")(4,"a",39),n.EFF(5,"More info"),n.k0s()()),2&s){const e=n.XpG();n.R7$(2),n.JRh(e.revokeReason.description),n.R7$(2),n.Y8G("href",e.revokeReason.reference,n.B4B)}}function Q0(s,r){1&s&&(n.j41(0,"div")(1,"span"),n.EFF(2,"Select reason name"),n.k0s()())}let ev=(()=>{class s{constructor(e,t,i,a,l,h){this.certificateService=e,this.translate=t,this.notifier=i,this.fileHelper=a,this.locale=h,this.itemType=c.SP.None,this.item={},this.orgMrn="",this.mrnPrefix="urn:mrn:",this.instanceVersion=void 0,this.serial=void 0,this.onEdit=new n.bkB,this.onMigrate=new n.bkB,this.onDelete=new n.bkB,this.onRefresh=new n.bkB,this.onApprove=new n.bkB,this.onDownloadCert=new n.bkB,this.viewContext="detail",this.columnForMenu={},this.itemId="",this.activeCertificates=[],this.revokedCertificates=[],this.revokeModalOpened=!1,this.certModalOpened=!1,this.fromBrowser=!0,this.revokeReason=void 0,this.revokeReasons=[],this.selectedActiveCerts=[],this.revokeAt=void 0,this.reasonTitle="",this.certificateBundle=void 0,this.migrateModalOpened=!1,this.newServiceMrn="",this.userItemType=c.SP.User,this.adminUser={permissions:i0.s},this.adminUserMrnPrefix="urn:mrn:mcp:",this.xmlModalOpened=!1,this.xmlContent="",this.showCertTables=!1,this.geometry=[],this.geometryNames=[],this.checkIfShowCertTables=()=>{this.showCertTables=this.itemType===c.SP.UserCert},this.setForm=()=>{this.itemType!==c.SP.None&&Object.entries(w.Y[this.itemType.toString()]).map(([d,p])=>{p.visibleFrom&&(p.visibleFrom&&!p.visibleFrom.includes(this.viewContext)||(this.columnForMenu[d]=p))})},this.assignCertificatesByStatus=d=>{this.activeCertificates=[],this.revokedCertificates=[],d.sort((p,B)=>p.start<B.start?1:-1),d.map(p=>{p.revoked?this.revokedCertificates.push(p):this.activeCertificates.push(p)}),this.revokedCertificates=this.updateRevokeReason(this.revokedCertificates)},this.updateRevokeReason=d=>d.map(p=>({...p,revokeReason:this.revokeReasons.filter(B=>B.value===p.revokeReason)[0].title})),this.edit=()=>{this.onEdit.emit(this.item)},this.migrate=()=>{this.onMigrate.emit(this.newServiceMrn)},this.approve=()=>{this.onApprove.emit(this.item)},this.deleteItem=()=>{this.onDelete.emit(this.item)},this.openCertModal=()=>{this.itemType===c.SP.Service&&this.instanceVersion?this.notifier.notify("error",this.translate.instant("error.form.requiremigrate")):(this.certModal?.open(),this.certModalOpened=!0,this.issue())},this.openXmlDialog=(d,p=!1)=>{this.xmlModalOpened=!0,this.xmlModal?.open(),this.xmlContent=d.content},this.downloadDocFile=d=>{this.downloadFile(d.name,d.filecontentContentType,d.filecontent)},this.issue=()=>{Yg(this.certificateService,this.itemType===c.SP.UserCert?c.SP.User:this.itemType,this.itemId,this.orgMrn,this.fromBrowser,this.instanceVersion).then(d=>{this.certificateBundle=d,this.notifier.notify("success",this.translate.instant("success.resource.create"))})},this.revokeCerts=d=>{this.revokeAt=new Date(Date.parse(this.revokeAt.toLocaleString()))},this.clickDownloadBtn=d=>{0!==d.length?d.forEach(p=>{const B=(0,N.Yq)(p.end,"yyyy-MM-ddTHH-mm-ss",this.locale);this.fileHelper.downloadPemCertificate({certificate:p.certificate},this.item.mrn+"_exp_"+B,this.notifier)}):this.notifier.notify("warning",this.translate.instant("error.selection.noSelection"))},this.clickRevokeBtn=d=>{this.itemType===c.SP.Service&&this.instanceVersion?this.notifier.notify("error",this.translate.instant("error.form.requiremigrate")):0!==d.length?(this.revokeModalOpened=!0,this.selectedActiveCerts=d):this.notifier.notify("warning",this.translate.instant("error.selection.noSelection"))},this.clickMigrateBtn=()=>{this.migrateModal?.open(),this.migrateModalOpened=!0,this.newServiceMrn=this.item.mrn+":"+this.instanceVersion},this.cancel=()=>{this.certModal?.close(),this.certModalOpened=!1,this.revokeModal?.close(),this.revokeModalOpened=!1,this.migrateModal?.close(),this.migrateModalOpened=!1,this.onRefresh.emit(),this.newServiceMrn="",this.certificateBundle=void 0},this.refreshData=()=>{this.onRefresh.emit()},this.issueFromBrowser=()=>{this.fromBrowser=!0},this.issueManualKeystore=()=>{this.fromBrowser=!1},this.capitalize=d=>d[0].toUpperCase()+d.slice(1),this.revokeReasons.sort((d,p)=>d.value.localeCompare(p.value)),l.getOrgMrn().then(d=>{this.orgMrn=d})}ngOnChanges(e){!e.item||!e.item.currentValue||(this.item=e.item.currentValue&&e.item.currentValue,this.item&&this.itemType===c.SP.Role?(this.itemId=this.item.id,this.setForm()):this.item&&(this.itemId=this.item.mrn,this.setForm(),this.item.certificates&&this.assignCertificatesByStatus(this.item.certificates)),this.itemType===c.SP.OrgCandidate&&(this.adminUserMrnPrefix=(0,s0.B)(this.item.mrn,this.itemType)),this.checkIfShowCertTables())}downloadFile(e,t,i){for(var a=atob(i.replace(/\s/g,"")),l=a.length,h=new ArrayBuffer(l),d=new Uint8Array(h),p=0;p<l;p++)d[p]=a.charCodeAt(p);var B=new Blob([d],{type:t}),D=window.document.createElement("a");D.href=window.URL.createObjectURL(B),D.download=e,document.body.appendChild(D),D.click(),document.body.removeChild(D)}download(){this.certificateBundle&&(this.fileHelper.downloadPemCertificate(this.certificateBundle,this.itemId,this.notifier),this.notifier.notify("success",this.translate.instant("success.certificate.chosen")))}static#e=this.\u0275fac=function(t){return new(t||s)(n.rXU(O0),n.rXU(Wf.c$),n.rXU(P0.iJ),n.rXU(M0),n.rXU(U0.u),n.rXU(n.xe9))};static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["app-item-view"]],viewQuery:function(t,i){if(1&t&&(n.GBs(F0,7),n.GBs(L0,7),n.GBs(j0,7),n.GBs(H0,7),n.GBs(t0.j,5)),2&t){let a;n.mGM(a=n.lsd())&&(i.certModal=a.first),n.mGM(a=n.lsd())&&(i.revokeModal=a.first),n.mGM(a=n.lsd())&&(i.migrateModal=a.first),n.mGM(a=n.lsd())&&(i.xmlModal=a.first),n.mGM(a=n.lsd())&&(i.newAdminUserForm=a.first)}},inputs:{itemType:"itemType",item:"item",orgMrn:"orgMrn",mrnPrefix:"mrnPrefix",instanceVersion:"instanceVersion",serial:"serial"},outputs:{onEdit:"onEdit",onMigrate:"onMigrate",onDelete:"onDelete",onRefresh:"onRefresh",onApprove:"onApprove",onDownloadCert:"onDownloadCert"},standalone:!0,features:[n.OA$,n.aNF],decls:120,vars:21,consts:[["certModal",""],["revokeModal",""],["migrateModal",""],["xmlModal",""],[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[1,"card"],[1,"card-header"],[1,"card-block"],[1,"card-text"],[3,"clickDownloadBtnCall","clickRevokeBtnCall","openCertModalCall","item","itemType","showCertTables","activeCertificates","revokedCertificates","columnForMenu","serial"],[1,"card-footer"],[1,"btn","btn-primary"],[1,"btn","btn-danger",3,"click"],["clrModalSize","lg",1,"modal",3,"clrModalOpenChange","clrModalOpen"],[1,"modal-title"],["aria-label","Close","type","button",1,"close",3,"click"],[1,"modal-body"],[1,"clr-col-sm-12","clr-col-md-12"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],[1,"clr-col-4"],[1,"clr-col-8"],["type","date","autocomplete","off","clrDate","","name","demo",3,"ngModelChange","ngModel"],[1,"clr-form"],[1,"clr-form-control"],["for","basic",1,"clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","basic","placeholder","Enter value here",1,"clr-input",3,"value"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"clr-subtext"],[1,"clr-textarea-wrapper"],["clrTextarea","","cols","100","rows","40"],["href","https://www.iala-aism.org/product/g1128-specification-of-e-nav-technical-service-fillable-annex-f-service-instance-description/","target","_blank"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],["type","radio","clrRadio","","name","options","required","",3,"click"],["target","_blank",3,"href"]],template:function(t,i){if(1&t){const a=n.RV6();n.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),n.DNE(4,$0,1,0)(5,K0,1,1),n.k0s(),n.j41(6,"div",8)(7,"div",9)(8,"div",4)(9,"app-item-table",10),n.bIt("clickDownloadBtnCall",function(h){return n.eBV(a),n.Njj(i.clickDownloadBtn(h))})("clickRevokeBtnCall",function(h){return n.eBV(a),n.Njj(i.clickRevokeBtn(h))})("openCertModalCall",function(){return n.eBV(a),n.Njj(i.openCertModal())}),n.k0s()()()(),n.j41(10,"div",11),n.DNE(11,G0,2,0,"button",12)(12,J0,4,0)(13,q0,2,0,"button",12),n.j41(14,"button",13),n.bIt("click",function(){return n.eBV(a),n.Njj(i.deleteItem())}),n.EFF(15,"Delete"),n.k0s()()()()(),n.j41(16,"clr-modal",14,0),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.certModalOpened,h)||(i.certModalOpened=h),n.Njj(h)}),n.j41(18,"div",15)(19,"button",16),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.j41(20,"h3",15),n.EFF(21,"Issue a new certificate"),n.k0s()(),n.j41(22,"div",17),n.DNE(23,z0,3,0,"div",18),n.k0s(),n.j41(24,"div",19)(25,"button",20),n.bIt("click",function(){return n.eBV(a),n.Njj(i.download())}),n.EFF(26,"Download certificate"),n.k0s(),n.j41(27,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(28,"Close"),n.k0s()()(),n.j41(29,"clr-modal",14,1),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.revokeModalOpened,h)||(i.revokeModalOpened=h),n.Njj(h)}),n.j41(31,"div",15)(32,"button",16),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.DNE(33,W0,2,1,"h3",15)(34,X0,2,1,"h3",15),n.k0s(),n.j41(35,"div",17)(36,"div",18)(37,"div",4)(38,"span")(39,"b"),n.EFF(40,"Warning: chosen certificates will no longer be valid when they are revoked!"),n.k0s()()(),n.j41(41,"div",4)(42,"div",22)(43,"div")(44,"h5"),n.EFF(45,"Reason name"),n.k0s()(),n.j41(46,"div"),n.Z7z(47,Y0,4,1,"clr-radio-wrapper",null,n.fX1),n.k0s()(),n.j41(49,"div",23)(50,"div")(51,"h5"),n.EFF(52,"Explanation"),n.k0s()(),n.j41(53,"div"),n.DNE(54,Z0,6,2)(55,Q0,3,0,"div"),n.k0s()()(),n.j41(56,"div",4)(57,"div",22)(58,"div")(59,"h5"),n.EFF(60,"Revoke at"),n.k0s()()(),n.j41(61,"div",23)(62,"clr-date-container")(63,"input",24),n.mxI("ngModelChange",function(h){return n.eBV(a),n.DH7(i.revokeAt,h)||(i.revokeAt=h),n.Njj(h)}),n.k0s()()()(),n.j41(64,"div",4)(65,"div")(66,"p"),n.EFF(67,"Choose revocation reason and date to proceed."),n.k0s()()()()(),n.j41(68,"div",19)(69,"button",20),n.bIt("click",function(){return n.eBV(a),n.Njj(i.revokeCerts(i.selectedActiveCerts))}),n.EFF(70,"Revoke"),n.k0s(),n.j41(71,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(72,"Cancel"),n.k0s()()(),n.j41(73,"clr-modal",14,2),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.migrateModalOpened,h)||(i.migrateModalOpened=h),n.Njj(h)}),n.j41(75,"div",15)(76,"button",16),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.EFF(77," Migrate service "),n.k0s(),n.j41(78,"div",17)(79,"div",18)(80,"div",4)(81,"span"),n.EFF(82,"This migration allows you to remove the version from an existing service's MRN by assigning a new MRN that includes the version. It simplifies version management and future updates, making it easier for users to maintain and update services. The MRN below is given as an example, but you can edit it as you want."),n.k0s()(),n.j41(83,"div",4)(84,"form",25)(85,"div",26)(86,"label",27),n.EFF(87,"Recommended new MRN for your service"),n.k0s(),n.j41(88,"div",28)(89,"div",29),n.nrm(90,"input",30)(91,"cds-icon",31),n.k0s(),n.j41(92,"span",32),n.EFF(93,"New MRN can have the version of service inside."),n.k0s()()()()()()(),n.j41(94,"div",19)(95,"button",20),n.bIt("click",function(){return n.eBV(a),n.Njj(i.migrate())}),n.EFF(96,"Migrate"),n.k0s(),n.j41(97,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(98,"Cancel"),n.k0s()()(),n.j41(99,"clr-modal",14,3),n.mxI("clrModalOpenChange",function(h){return n.eBV(a),n.DH7(i.xmlModalOpened,h)||(i.xmlModalOpened=h),n.Njj(h)}),n.j41(101,"div",15)(102,"button",16),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.k0s(),n.EFF(103," XML editor "),n.k0s(),n.j41(104,"div",17)(105,"div",18)(106,"div",4)(107,"div",28)(108,"div",33)(109,"textarea",34),n.EFF(110),n.k0s(),n.nrm(111,"cds-icon",31),n.k0s(),n.j41(112,"span",32)(113,"a",35),n.EFF(114,"What is G1128?"),n.k0s()()()()()(),n.j41(115,"div",19)(116,"button",20),n.bIt("click",function(){return n.eBV(a),n.Njj(i.migrate())}),n.EFF(117,"Migrate"),n.k0s(),n.j41(118,"button",21),n.bIt("click",function(){return n.eBV(a),n.Njj(i.cancel())}),n.EFF(119,"Cancel"),n.k0s()()()}2&t&&(n.R7$(4),n.vxM("orgcandidate"===i.itemType?4:5),n.R7$(5),n.Y8G("item",i.item)("itemType",i.itemType)("showCertTables",i.showCertTables)("activeCertificates",i.activeCertificates)("revokedCertificates",i.revokedCertificates)("columnForMenu",i.columnForMenu)("serial",i.serial),n.R7$(2),n.vxM("service"===i.itemType&&i.instanceVersion?11:"orgcandidate"===i.itemType?12:13),n.R7$(5),n.R50("clrModalOpen",i.certModalOpened),n.R7$(7),n.vxM(i.certificateBundle?23:-1),n.R7$(6),n.R50("clrModalOpen",i.revokeModalOpened),n.R7$(4),n.vxM(i.selectedActiveCerts.length>1?33:34),n.R7$(14),n.Dyx(i.revokeReasons),n.R7$(7),n.vxM(i.revokeReason?54:55),n.R7$(9),n.R50("ngModel",i.revokeAt),n.R7$(10),n.R50("clrModalOpen",i.migrateModalOpened),n.R7$(17),n.xc7("width",400,"px"),n.Y8G("value",i.newServiceMrn),n.R7$(9),n.R50("clrModalOpen",i.xmlModalOpened),n.R7$(11),n.JRh(i.xmlContent))},dependencies:[u.G,V.z7t,V.bZN,V.zN1,V.BlU,V.jsN,V.aZZ,V.fkp,V.cIb,V.DRH,V.CxT,V.lnv,V._Qf,V.WF1,g.YN,g.qT,g.me,g.BC,g.cb,g.vS,g.cV,V.UcF,V.eJj,V0]})}return s})()},3426:(nt,U,L)=>{"use strict";L.d(U,{d:()=>O});var n=L(6994),c=L(5950),w=L(6908),g=L(5166),N=L(3103),u=L(1066),V=L(9677),A=L(8745),k=L(6482);function _(J,m){if(1&J){const M=c.RV6();c.j41(0,"div")(1,"button",1),c.bIt("click",function(){c.eBV(M);const R=c.XpG();return c.Njj(R.back())}),c.EFF(2,"Back"),c.k0s()(),c.j41(3,"div",2)(4,"div",3)(5,"app-item-view",4),c.bIt("onEdit",function(){c.eBV(M);const R=c.XpG();return c.Njj(R.edit(R.selectedItem))})("onDelete",function(){c.eBV(M);const R=c.XpG();return c.Njj(R.deleteItem(R.selectedItem))})("onRefresh",function(){c.eBV(M);const R=c.XpG();return c.Njj(R.refreshData())})("onMigrate",function(R){c.eBV(M);const Ie=c.XpG();return c.Njj(Ie.migrate(R))})("onApprove",function(R){c.eBV(M);const Ie=c.XpG();return c.Njj(Ie.approve(R))}),c.k0s()()()}if(2&J){const M=c.XpG();c.R7$(5),c.Y8G("itemType",M.itemType)("item",M.selectedItem)}}function o(J,m){if(1&J){const M=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV(M);const R=c.XpG(3);return c.Njj(R.onAdd())}),c.nrm(2,"cds-icon",11),c.EFF(3),c.k0s()()}if(2&J){const M=c.XpG(3);c.R7$(3),c.SpI(" ",M.addText," ")}}function b(J,m){if(1&J){const M=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV(M);const R=c.XpG(3);return c.Njj(R.onDelete(R.selected))}),c.nrm(2,"cds-icon",12),c.EFF(3),c.k0s(),c.j41(4,"button",10),c.bIt("click",function(){c.eBV(M);const R=c.XpG(3);return c.Njj(R.onDownload(R.selected))}),c.nrm(5,"cds-icon",13),c.EFF(6),c.k0s()()}if(2&J){const M=c.XpG(3);c.R7$(3),c.SpI(" ",M.deleteText,""),c.R7$(3),c.SpI(" ",M.downloadText,"")}}function E(J,m){if(1&J){const M=c.RV6();c.j41(0,"div",9)(1,"button",10),c.bIt("click",function(){c.eBV(M);const R=c.XpG(3);return c.Njj(R.onDelete(R.selected))}),c.nrm(2,"cds-icon",12),c.EFF(3),c.k0s()()}if(2&J){const M=c.XpG(3);c.R7$(3),c.SpI(" ",M.deleteText,"")}}function v(J,m){if(1&J&&(c.j41(0,"clr-dg-action-bar"),c.DNE(1,o,4,1,"div",9)(2,b,7,2,"div",9)(3,E,4,1,"div",9),c.k0s()),2&J){const M=c.XpG(2);c.R7$(),c.vxM(void 0!==M.onAdd&&"orgcandidate"!==M.itemType?1:-1),c.R7$(),c.vxM(void 0!==M.onDelete&&void 0!==M.onDownload?2:void 0!==M.onDelete?3:-1)}}function S(J,m){if(1&J&&(c.j41(0,"clr-dg-column"),c.EFF(1),c.k0s()),2&J){const M=m.$implicit;c.R7$(),c.JRh(M)}}function I(J,m){if(1&J){const M=c.RV6();c.j41(0,"clr-dg-cell",15),c.bIt("click",function(){c.eBV(M);const R=c.XpG(2).$implicit,Ie=c.XpG(2);return c.Njj(Ie.userRowSelect(R))}),c.EFF(1),c.k0s()}if(2&J){const M=c.XpG().$implicit,ue=c.XpG().$implicit,R=c.XpG(2);c.R7$(),c.JRh(R.convertTimeString(ue[M]))}}function H(J,m){if(1&J){const M=c.RV6();c.j41(0,"clr-dg-cell",15),c.bIt("click",function(){c.eBV(M);const R=c.XpG(2).$implicit,Ie=c.XpG(2);return c.Njj(Ie.userRowSelect(R))}),c.EFF(1),c.k0s()}if(2&J){const M=c.XpG().$implicit,ue=c.XpG().$implicit;c.R7$(),c.JRh(ue[M])}}function K(J,m){if(1&J&&c.DNE(0,I,2,1,"clr-dg-cell")(1,H,2,1,"clr-dg-cell"),2&J){const M=m.$implicit,ue=c.XpG(3);c.vxM(ue.isTimestampFormat(M)?0:1)}}function ie(J,m){if(1&J&&(c.j41(0,"clr-dg-row",14),c.Z7z(1,K,2,1,null,null,c.fX1),c.k0s()),2&J){const M=m.$implicit,ue=c.XpG(2);c.Y8G("clrDgItem",M),c.R7$(),c.Dyx(ue.labelKeys)}}function Z(J,m){if(1&J&&(c.j41(0,"clr-dg-detail")(1,"clr-dg-detail-header"),c.EFF(2),c.k0s(),c.j41(3,"clr-dg-detail-body"),c.nrm(4,"app-item-view",17),c.k0s()()),2&J){const M=m.$implicit,ue=c.XpG(3);c.R7$(2),c.JRh(M.mrn),c.R7$(2),c.Y8G("itemType",ue.itemType)("item",M)}}function me(J,m){1&J&&c.DNE(0,Z,5,3,"clr-dg-detail",16)}function ne(J,m){if(1&J){const M=c.RV6();c.j41(0,"button",19),c.bIt("click",function(){const R=c.eBV(M).$implicit,Ie=c.XpG(3);return c.Njj(Ie.loadData(R))}),c.EFF(1),c.k0s()}if(2&J){const M=m.$implicit,ue=c.XpG(3);c.Y8G("disabled",M==ue.currentPageNumber),c.R7$(),c.JRh(M+1)}}function _e(J,m){if(1&J){const M=c.RV6();c.j41(0,"div",8)(1,"div",18)(2,"button",19),c.bIt("click",function(){c.eBV(M);const R=c.XpG(2);return c.Njj(R.changePageRange(-1))}),c.EFF(3," \xab "),c.k0s(),c.Z7z(4,ne,2,2,"button",20,c.fX1),c.j41(6,"button",19),c.bIt("click",function(){c.eBV(M);const R=c.XpG(2);return c.Njj(R.changePageRange(1))}),c.EFF(7," \xbb "),c.k0s()()()}if(2&J){const M=c.XpG(2);c.R7$(2),c.Y8G("disabled",0===M.currentPageRange),c.R7$(2),c.Dyx(M.visiblePageNumbers),c.R7$(2),c.Y8G("disabled",(M.currentPageRange+1)*M.elementsPerPage>=M.totalPages)}}function Ve(J,m){if(1&J){const M=c.RV6();c.j41(0,"clr-datagrid",5),c.mxI("clrDgSelectedChange",function(R){c.eBV(M);const Ie=c.XpG();return c.DH7(Ie.selected,R)||(Ie.selected=R),c.Njj(R)}),c.bIt("clrDgRefresh",function(R){c.eBV(M);const Ie=c.XpG();return c.Njj(Ie.refresh(R))}),c.DNE(1,v,4,2,"clr-dg-action-bar"),c.Z7z(2,S,2,1,"clr-dg-column",null,c.fX1),c.j41(4,"clr-dg-placeholder",6),c.EFF(5),c.k0s(),c.DNE(6,ie,3,1,"clr-dg-row",7)(7,me,1,0,"clr-dg-detail"),c.j41(8,"clr-dg-footer"),c.DNE(9,_e,8,2,"div",8),c.k0s()()}if(2&J){const M=c.XpG();c.R50("clrDgSelected",M.selected),c.Y8G("clrDgLoading",M.isLoading),c.R7$(),c.vxM(M.onAdd||M.onDelete||M.onDownload?1:-1),c.R7$(),c.Dyx(M.labelTitles),c.R7$(3),c.JRh(M.placeholder),c.R7$(),c.Y8G("clrDgItemsOf",M.data),c.R7$(),c.vxM(M.detailView?7:-1),c.R7$(2),c.vxM(M.totalPages>1?9:-1)}}let O=(()=>{class J{constructor(M,ue){this.router=M,this.authService=ue,this.itemType=g.SP.Subscription,this.labels=void 0,this.placeholder="We couldn't find any data!",this.deleteText="Delete",this.downloadText="Download",this.hasPermission=!1,this.addText="Add",this.totalPages=0,this.totalElements=0,this.getData=R=>new Promise((Ie,Se)=>Ie([])),this.onRowSelect=new c.bkB,this.onRevokeCerts=new c.bkB,this.onDownloadCerts=new c.bkB,this.onEdit=new c.bkB,this.onMigrate=new c.bkB,this.onRefresh=new c.bkB,this.onApprove=new c.bkB,this.data=void 0,this.selected=[],this.detail={},this.selectedItem={},this.expanded=!1,this.detailView=!1,this.labelKeys=[],this.labelTitles=[],this.isLoading=!1,this.pageNumbers=[],this.currentPageNumber=0,this.currentPageRange=0,this.visiblePageNumbers=[],this.elementsPerPage=10,this.roles=[],this.userRowSelect=R=>{this.expanded=!0,this.selectedItem=(0,V.C)(R),this.onRowSelect.emit(R)},this.back=()=>{this.expanded=!1,this.selectedItem={}},this.edit=R=>{this.expanded=!0,this.selectedItem=R,this.onEdit.emit(R)},this.approve=R=>{this.onApprove.emit(R)},this.migrate=R=>{this.onMigrate.emit({...this.selectedItem,newServiceMrn:R})},this.deleteItem=R=>{this.onDelete?.call(this,[R])},this.convertTimeString=R=>(0,u.YF)(R),this.refreshData=()=>{this.loadData().then(()=>{if(this.selectedItem&&this.selectedItem.mrn){const R=this.data?.find(Ie=>this.itemType===g.SP.Service?Ie.mrn===this.selectedItem.mrn&&Ie.instanceVersion===this.selectedItem.instanceVersion:this.itemType===g.SP.Role?Ie.id===this.selectedItem.id:Ie.mrn===this.selectedItem.mrn);R&&(this.selectedItem=R)}this.isLoading=!1})},this.isLoading=!0}ngOnInit(){this.loadData(),this.updateVisiblePageNumbers()}ngOnChanges(M){M.labels&&(this.labelKeys=Object.keys(this.labels),this.labelTitles=Object.values(this.labels).map(ue=>ue.title)),M.totalPages&&(this.pageNumbers=Array(this.totalPages).fill(0).map((ue,R)=>R),this.updateVisiblePageNumbers())}updateVisiblePageNumbers(){const M=this.currentPageRange*this.elementsPerPage,ue=Math.min(M+this.elementsPerPage,this.totalPages);this.visiblePageNumbers=Array.from({length:ue-M},(R,Ie)=>M+Ie)}changePageRange(M){this.currentPageRange+=M,this.updateVisiblePageNumbers()}loadData(M=this.currentPageNumber){var ue=this;return(0,n.A)(function*(){ue.data=(yield ue.getData(ue.itemType,M,ue.elementsPerPage))||[],M!==ue.currentPageNumber&&(ue.currentPageNumber=M),ue.isLoading=!1})()}refresh(M){var ue=this;return(0,n.A)(function*(){!ue.data&&ue.hasPermission&&ue.loadData()})()}isTimestampFormat(M){return g.N3.includes(M)}static#e=this.\u0275fac=function(ue){return new(ue||J)(c.rXU(A.Ix),c.rXU(k.u))};static#t=this.\u0275cmp=c.VBU({type:J,selectors:[["app-smart-expandable-table"]],inputs:{itemType:"itemType",labels:"labels",placeholder:"placeholder",onDownload:"onDownload",onDelete:"onDelete",onAdd:"onAdd",deleteText:"deleteText",downloadText:"downloadText",hasPermission:"hasPermission",addText:"addText",totalPages:"totalPages",totalElements:"totalElements",getData:"getData"},outputs:{onRowSelect:"onRowSelect",onRevokeCerts:"onRevokeCerts",onDownloadCerts:"onDownloadCerts",onEdit:"onEdit",onMigrate:"onMigrate",onRefresh:"onRefresh",onApprove:"onApprove"},standalone:!0,features:[c.OA$,c.aNF],decls:2,vars:1,consts:[[3,"clrDgSelected","clrDgLoading"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"clr-row"],[1,"clr-col-lg-12","clr-col-md-8","clr-col-12"],[3,"onEdit","onDelete","onRefresh","onMigrate","onApprove","itemType","item"],[3,"clrDgSelectedChange","clrDgRefresh","clrDgSelected","clrDgLoading"],[1,"datagrid-empty"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[1,"clr-row","clr-justify-content-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["shape","times"],["shape","download"],[3,"clrDgItem"],[3,"click"],[4,"clrIfDetail"],[3,"itemType","item"],[1,"btn-group","btn-outline-primary","btn-sm"],[1,"btn",3,"click","disabled"],[1,"btn",3,"disabled"]],template:function(ue,R){1&ue&&c.DNE(0,_,6,2)(1,Ve,10,7,"clr-datagrid",0),2&ue&&c.vxM(R.expanded?0:1)},dependencies:[w.PuD,w.ghA,w.fQA,w.slD,w.scM,w.f1O,w.PNO,w.ig6,w.Lwm,w.AtP,w.XTg,w.E1i,w.aFj,w.NTI,w.cIg,w.qDI,w.v0q,w.Aup,w.rpC,w.mCo,w.BlU,w.oFi,N.Y]})}return J})()},2537:(nt,U,L)=>{"use strict";L.d(U,{B:()=>Ve});var n=L(5950),c=L(6908),w=L(1232),g=L(5930);const u=["download",(0,g.s)({outline:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>',outlineAlerted:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>',outlineBadged:'<path d="M31,31H5a1,1,0,0,0,0,2H31a1,1,0,0,0,0-2Z"/><path d="M18,29.48,28.61,18.87a1,1,0,0,0-1.41-1.41L19,25.65V5a1,1,0,0,0-2,0V25.65L8.81,17.46a1,1,0,1,0-1.41,1.41Z"/>'})];var V=L(673);const k=["plus",(0,g.s)({outline:'<path d="M30,17H19V6a1,1,0,1,0-2,0V17H6a1,1,0,0,0-1,1,.91.91,0,0,0,1,.94H17V30a1,1,0,1,0,2,0V19H30a1,1,0,0,0,1-1A1,1,0,0,0,30,17Z"/>'})];var _=L(5166),o=L(1066);const b=()=>[10,20,50,100];function E(O,J){1&O&&(n.j41(0,"clr-spinner"),n.EFF(1,"Loading"),n.k0s())}function v(O,J){if(1&O){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onAdd())}),n.nrm(2,"cds-icon",9),n.EFF(3),n.k0s()()}if(2&O){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.addText," ")}}function S(O,J){if(1&O){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onDelete(ue.selected))}),n.nrm(2,"cds-icon",10),n.EFF(3),n.k0s(),n.j41(4,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onDownload(ue.selected))}),n.nrm(5,"cds-icon",11),n.EFF(6),n.k0s()()}if(2&O){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.deleteText,""),n.R7$(3),n.SpI(" ",m.downloadText,"")}}function I(O,J){if(1&O){const m=n.RV6();n.j41(0,"div",7)(1,"button",8),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(3);return n.Njj(ue.onDelete(ue.selected))}),n.nrm(2,"cds-icon",10),n.EFF(3),n.k0s()()}if(2&O){const m=n.XpG(3);n.R7$(3),n.SpI(" ",m.deleteText,"")}}function H(O,J){if(1&O&&(n.j41(0,"clr-dg-action-bar"),n.DNE(1,v,4,1,"div",7)(2,S,7,2,"div",7)(3,I,4,1,"div",7),n.k0s()),2&O){const m=n.XpG(2);n.R7$(),n.vxM(void 0!==m.onAdd?1:-1),n.R7$(),n.vxM(void 0!==m.onDelete&&void 0!==m.onDownload?2:void 0!==m.onDelete?3:-1)}}function K(O,J){if(1&O&&(n.j41(0,"clr-dg-column"),n.EFF(1),n.k0s()),2&O){const m=J.$implicit;n.R7$(),n.JRh(m)}}function ie(O,J){if(1&O){const m=n.RV6();n.j41(0,"clr-dg-cell",13),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(2).$implicit,R=n.XpG(2);return n.Njj(R.userRowSelect(ue))}),n.EFF(1),n.k0s()}if(2&O){const m=n.XpG().$implicit,M=n.XpG().$implicit,ue=n.XpG(2);n.R7$(),n.JRh(ue.convertTimeString(M[m]))}}function Z(O,J){if(1&O){const m=n.RV6();n.j41(0,"clr-dg-cell",13),n.bIt("click",function(){n.eBV(m);const ue=n.XpG(2).$implicit,R=n.XpG(2);return n.Njj(R.userRowSelect(ue))}),n.EFF(1),n.k0s()}if(2&O){const m=n.XpG().$implicit,M=n.XpG().$implicit;n.R7$(),n.JRh(M[m])}}function me(O,J){if(1&O&&n.DNE(0,ie,2,1,"clr-dg-cell")(1,Z,2,1,"clr-dg-cell"),2&O){const m=J.$implicit,M=n.XpG(3);n.vxM(M.isTimestampFormat(m)?0:1)}}function ne(O,J){if(1&O&&(n.j41(0,"clr-dg-row",12),n.Z7z(1,me,2,1,null,null,n.fX1),n.k0s()),2&O){const m=J.$implicit,M=n.XpG(2);n.Y8G("clrDgItem",m),n.R7$(),n.Dyx(M.labelKeys)}}function _e(O,J){if(1&O){const m=n.RV6();n.j41(0,"clr-datagrid",2),n.mxI("clrDgSelectedChange",function(ue){n.eBV(m);const R=n.XpG();return n.DH7(R.selected,ue)||(R.selected=ue),n.Njj(ue)}),n.DNE(1,H,4,2,"clr-dg-action-bar"),n.Z7z(2,K,2,1,"clr-dg-column",null,n.fX1),n.j41(4,"clr-dg-placeholder",3),n.EFF(5),n.k0s(),n.DNE(6,ne,3,1,"clr-dg-row",4),n.j41(7,"clr-dg-footer")(8,"clr-dg-pagination",5,0)(10,"clr-dg-page-size",6),n.EFF(11," items per page"),n.k0s(),n.EFF(12),n.k0s()()()}if(2&O){const m=n.sdS(9),M=n.XpG();n.R50("clrDgSelected",M.selected),n.R7$(),n.vxM(M.onAdd||M.onDelete||M.onDownload?1:-1),n.R7$(),n.Dyx(M.labelTitles),n.R7$(3),n.JRh(M.placeholder),n.R7$(),n.Y8G("clrDgItemsOf",M.data),n.R7$(2),n.Y8G("clrDgPageSize",10),n.R7$(2),n.Y8G("clrPageSizeOptions",n.lJ4(9,b)),n.R7$(2),n.E5c(" ",m.firstItem+1," - ",m.lastItem+1," of ",m.totalItems," certificates ")}}w.h.addIcons(u,V.a,k);let Ve=(()=>{class O{constructor(){this.data=[],this.itemType=_.SP.Subscription,this.labels={},this.placeholder="We couldn't find any data!",this.deleteText="Delete",this.downloadText="Download",this.addText="Add",this.selectedIds=[],this.onRowSelect=new n.bkB,this.selected=[],this.detail={},this.isLoading=!0,this.labelKeys=[],this.labelTitles=[],this.userRowSelect=m=>{console.log(m),this.onRowSelect&&this.onRowSelect.emit(m)},this.convertTimeString=m=>(0,o.t)(m)}ngOnChanges(m){m.data.currentValue.length>0&&(this.labelKeys=Object.keys(this.labels),this.labelTitles=Object.values(this.labels).map(M=>M.title)),this.isLoading=!1,this.data.length>0&&this.selectedIds.length>0&&(this.selected=this.data.filter(M=>this.selectedIds[0]===M.serialNumber))}isTimestampFormat(m){return _.N3.includes(m)}static#e=this.\u0275fac=function(M){return new(M||O)};static#t=this.\u0275cmp=n.VBU({type:O,selectors:[["app-smart-table"]],inputs:{data:"data",itemType:"itemType",labels:"labels",placeholder:"placeholder",onDownload:"onDownload",onDelete:"onDelete",onAdd:"onAdd",deleteText:"deleteText",downloadText:"downloadText",addText:"addText",selectedIds:"selectedIds"},outputs:{onRowSelect:"onRowSelect"},standalone:!0,features:[n.OA$,n.aNF],decls:2,vars:1,consts:[["pagination",""],[3,"clrDgSelected"],[3,"clrDgSelectedChange","clrDgSelected"],[1,"datagrid-empty"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize"],[3,"clrPageSizeOptions"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],["shape","times"],["shape","download"],[3,"clrDgItem"],[3,"click"]],template:function(M,ue){1&M&&n.DNE(0,E,2,0,"clr-spinner")(1,_e,13,10,"clr-datagrid",1),2&M&&n.vxM(ue.isLoading?0:1)},dependencies:[c.PuD,c.ghA,c.fQA,c.slD,c.scM,c.Lwm,c.AtP,c.oip,c.o3y,c.XTg,c.E1i,c.NTI,c.cIg,c.qDI,c.v0q,c.Aup,c.rpC,c.mCo,c.BlU,c.BkK,c.oFi]})}return O})()},3562:(nt,U,L)=>{"use strict";L.d(U,{q:()=>o});var n=L(5950),c=L(6908);const w=(b,E)=>E.id;function g(b,E){if(1&b&&(n.j41(0,"li"),n.EFF(1),n.k0s()),2&b){const v=n.XpG().$implicit;n.R7$(),n.SpI("",v.name,": Free")}}function N(b,E){if(1&b&&(n.j41(0,"li"),n.EFF(1),n.k0s()),2&b){const v=n.XpG().$implicit,S=n.XpG(2);n.R7$(),n.LHq("",v.name,": ",v.unitPrice," ",S.currency," per ",v.unit,"")}}function u(b,E){1&b&&n.DNE(0,g,2,1,"li")(1,N,2,4,"li"),2&b&&n.vxM(0===E.$implicit.unitPrice?0:1)}function V(b,E){1&b&&(n.j41(0,"button",5),n.EFF(1,"Selected"),n.k0s())}function A(b,E){if(1&b){const v=n.RV6();n.j41(0,"button",7),n.bIt("click",function(){n.eBV(v);const I=n.XpG(2);return n.Njj(I.onClick(I.plan.id))}),n.EFF(1),n.k0s()}if(2&b){const v=n.XpG(2);n.R7$(),n.JRh(v.btnText)}}function k(b,E){if(1&b&&(n.j41(0,"div",0)(1,"h3"),n.EFF(2),n.nrm(3,"br"),n.EFF(4),n.k0s(),n.j41(5,"p",1),n.EFF(6),n.k0s(),n.j41(7,"p",2),n.EFF(8),n.k0s()(),n.j41(9,"div",3)(10,"p")(11,"strong"),n.EFF(12,"All the goodness of MCP, and:"),n.k0s()(),n.j41(13,"ul")(14,"li"),n.EFF(15,"Access to MCP identity"),n.k0s(),n.j41(16,"li"),n.EFF(17,"Access to issue/revoke MCP certificates"),n.k0s(),n.j41(18,"li"),n.EFF(19,"Access to the MMS network"),n.k0s(),n.j41(20,"li"),n.EFF(21,"Unlimited receiving of S124 Navigational Warning messages"),n.k0s(),n.j41(22,"li"),n.EFF(23,"Access to MMS chat service"),n.k0s(),n.j41(24,"li"),n.EFF(25,"Access to Automatic Route Planning service"),n.k0s()(),n.j41(26,"p")(27,"strong"),n.EFF(28,"Service costs:"),n.k0s()(),n.j41(29,"ul"),n.Z7z(30,u,2,1,null,null,w),n.k0s()(),n.j41(32,"div",4),n.DNE(33,V,2,0,"button",5)(34,A,2,1,"button",6),n.k0s()),2&b){const v=n.XpG();n.R7$(2),n.SpI("",v.plan.name," "),n.R7$(2),n.SpI(" (~ ",v.plan.maxUsers," users)"),n.R7$(2),n.Lme("",v.plan.monthlyCost," ",v.plan.currency,""),n.R7$(2),n.JRh(v.plan.description),n.R7$(22),n.Dyx(v.services),n.R7$(3),n.vxM(v.selected?33:34)}}function _(b,E){1&b&&(n.j41(0,"h1"),n.EFF(1,"Plan is not available"),n.k0s())}let o=(()=>{class b{constructor(){this.plan=void 0,this.selected=!1,this.currency="",this.btnText="",this.services=[],this.onBtnClick=new n.bkB}onClick(v){this.onBtnClick.emit(v)}static#e=this.\u0275fac=function(S){return new(S||b)};static#t=this.\u0275cmp=n.VBU({type:b,selectors:[["app-subscription-plan"]],inputs:{plan:"plan",selected:"selected",currency:"currency",btnText:"btnText",services:"services"},outputs:{onBtnClick:"onBtnClick"},standalone:!0,features:[n.aNF],decls:2,vars:1,consts:[[1,"card-header"],[1,"price"],[1,"monthly-price"],[1,"card-body"],[1,"card-footer"],[1,"btn","btn-outline","btn-block"],[1,"btn","btn-primary","btn-block"],[1,"btn","btn-primary","btn-block",3,"click"]],template:function(S,I){1&S&&n.DNE(0,k,35,6)(1,_,2,0,"h1"),2&S&&n.vxM(void 0!==I.plan?0:1)},dependencies:[c.SVK],styles:[".card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #ddd;padding:1rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700}.price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#563d7c}.billing-info[_ngcontent-%COMP%], .monthly-price[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.card-body[_ngcontent-%COMP%]{padding:1rem;text-align:left}.card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.card-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #ddd;padding:1rem;text-align:center}.btn[_ngcontent-%COMP%]{margin-top:1rem}.addon[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.card.selected[_ngcontent-%COMP%]{border:2px solid #007bff;background-color:#e9f7ff}"]})}return b})()},2478:(nt,U,L)=>{"use strict";L.d(U,{R:()=>N});var n=L(6908),c=L(58),w=L(7882),g=L(5950);let N=(()=>{class u{static#e=this.\u0275fac=function(k){return new(k||u)};static#t=this.\u0275mod=g.$C({type:u});static#s=this.\u0275inj=g.G2t({imports:[c.G,n.PuD,w.YN]})}return u})()},723:(nt,U,L)=>{"use strict";L.d(U,{C:()=>F}),L(8959);var c=L(1232),w=L(5930);const N=["user",(0,w.s)({outline:'<path d="M18,17a7,7,0,1,0-7-7A7,7,0,0,0,18,17ZM18,5a5,5,0,1,1-5,5A5,5,0,0,1,18,5Z"/><path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/>',outlineAlerted:'<path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/><path d="M18,17a7,7,0,0,0,4.45-1.6h-.22A3.68,3.68,0,0,1,20,14.6a5,5,0,1,1,1.24-8.42l1-1.76A7,7,0,1,0,18,17Z"/>',outlineBadged:'<path d="M30.47,24.37a17.16,17.16,0,0,0-24.93,0A2,2,0,0,0,5,25.74V31a2,2,0,0,0,2,2H29a2,2,0,0,0,2-2V25.74A2,2,0,0,0,30.47,24.37ZM29,31H7V25.73a15.17,15.17,0,0,1,22,0h0Z"/><path d="M18,17a7,7,0,0,0,6.85-5.56,7.4,7.4,0,0,1-2.24-6.69A7,7,0,1,0,18,17ZM18,5a5,5,0,1,1-5,5A5,5,0,0,1,18,5Z"/>',solid:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><circle cx="18" cy="10" r="7"/>',solidAlerted:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><path d="M18,17a7,7,0,0,0,4.45-1.6h-.22A3.68,3.68,0,0,1,19,9.89l3.16-5.47A7,7,0,1,0,18,17Z"/>',solidBadged:'<path d="M30.61,24.52a17.16,17.16,0,0,0-25.22,0,1.51,1.51,0,0,0-.39,1v6A1.5,1.5,0,0,0,6.5,33h23A1.5,1.5,0,0,0,31,31.5v-6A1.51,1.51,0,0,0,30.61,24.52Z"/><path d="M18,17a7,7,0,0,0,6.85-5.56,7.4,7.4,0,0,1-2.24-6.69A7,7,0,1,0,18,17Z"/>'})];var u=L(5950),V=L(6908),A=L(6994);const _=["crown",(0,w.s)({outline:'<path d="M4,13.33A1.39,1.39,0,1,0,2.6,14.72,1.39,1.39,0,0,0,4,13.33Z"/><path d="M31.81,15.84a20.35,20.35,0,0,0-4.58,1.43,22.7,22.7,0,0,0-3.48,2.1A17.69,17.69,0,0,1,22,16.57a47.65,47.65,0,0,1-2.8-7.69,1,1,0,0,0-1-.74,1,1,0,0,0-1,.74,46.71,46.71,0,0,1-2.8,7.69,17,17,0,0,1-1.76,2.8,22.7,22.7,0,0,0-3.48-2.1,20.66,20.66,0,0,0-4.58-1.43,1,1,0,0,0-1,.39,1,1,0,0,0-.09,1.05A50.13,50.13,0,0,1,7.82,31.17a1,1,0,0,0,1,.83H27.62a1,1,0,0,0,1-.83,50.15,50.15,0,0,1,4.26-13.89,1,1,0,0,0-.09-1.05A1,1,0,0,0,31.81,15.84ZM26.79,30H9.64a55.66,55.66,0,0,0-3.4-11.71,15.75,15.75,0,0,1,2.09.78,20,20,0,0,1,3.85,2.45,1,1,0,0,0,1.39-.09,19.28,19.28,0,0,0,2.67-4,43.46,43.46,0,0,0,2-4.89,41.74,41.74,0,0,0,2,4.89,19.92,19.92,0,0,0,2.66,4,1,1,0,0,0,1.4.09,19.21,19.21,0,0,1,3.85-2.45,14.77,14.77,0,0,1,2.09-.78A55.07,55.07,0,0,0,26.79,30Z"/><ellipse cx="33.83" cy="13.33" rx="1.39" ry="1.39"/><path d="M18.22,6.39A1.39,1.39,0,1,0,16.84,5,1.39,1.39,0,0,0,18.22,6.39Z"/><path d="M18.23,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,18.23,26.34Z"/><path d="M12.58,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,12.58,26.34Z"/><path d="M23.89,26.34a1.11,1.11,0,1,0,1.1,1.1A1.1,1.1,0,0,0,23.89,26.34Z"/>',solid:'<path d="M2.6,11.93A1.4,1.4,0,1,0,4,13.33,1.4,1.4,0,0,0,2.6,11.93Z"/><ellipse cx="33.83" cy="13.33" rx="1.39" ry="1.39"/><path d="M18.22,6.39A1.39,1.39,0,1,0,16.84,5,1.39,1.39,0,0,0,18.22,6.39Z"/><path d="M31.63,16.1A18.61,18.61,0,0,0,28,17.34a21.57,21.57,0,0,0-4,2.49,19.2,19.2,0,0,1-2.26-3.49,48.92,48.92,0,0,1-2.52-6.58,1,1,0,0,0-1-.71h0a1,1,0,0,0-1,.71,48.42,48.42,0,0,1-2.52,6.58,18.69,18.69,0,0,1-2.26,3.48,22.81,22.81,0,0,0-4-2.48A18.83,18.83,0,0,0,4.9,16.1a1,1,0,0,0-1,.33,1,1,0,0,0-.13,1.07,55.9,55.9,0,0,1,4,13.5,1,1,0,0,0,1,.83h19a1,1,0,0,0,1-.83,55.9,55.9,0,0,1,4-13.5,1,1,0,0,0-.13-1.07A1,1,0,0,0,31.63,16.1ZM11.08,28.55a1.11,1.11,0,1,1,1.1-1.11A1.11,1.11,0,0,1,11.08,28.55Zm7.15,0a1.11,1.11,0,0,1,0-2.21,1.11,1.11,0,0,1,0,2.21Zm7.16,0a1.11,1.11,0,1,1,1.1-1.11A1.11,1.11,0,0,1,25.39,28.55Z"/>'})],b=["sun",(0,w.s)({outline:'<path d="M18,6.31a1,1,0,0,0,1-1V1.91a1,1,0,0,0-2,0v3.4A1,1,0,0,0,18,6.31Z"/><path d="M18,29.69a1,1,0,0,0-1,1v3.4a1,1,0,0,0,2,0v-3.4A1,1,0,0,0,18,29.69Z"/><path d="M8.32,9.74A1,1,0,0,0,9,10a1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42L7.33,5.92A1,1,0,0,0,5.92,7.33Z"/><path d="M27.68,26.26a1,1,0,1,0-1.42,1.42l2.41,2.4a1,1,0,0,0,.71.3,1,1,0,0,0,.7-.3,1,1,0,0,0,0-1.41Z"/><path d="M6.31,18a1,1,0,0,0-1-1H1.91a1,1,0,0,0,0,2h3.4A1,1,0,0,0,6.31,18Z"/><path d="M34.09,17h-3.4a1,1,0,1,0,0,2h3.4a1,1,0,0,0,0-2Z"/><path d="M8.32,26.26l-2.4,2.41a1,1,0,0,0,.7,1.71,1,1,0,0,0,.71-.3l2.41-2.4a1,1,0,1,0-1.42-1.42Z"/><path d="M27,10a1,1,0,0,0,.71-.29l2.4-2.41a1,1,0,0,0,0-1.41,1,1,0,0,0-1.41,0l-2.41,2.4a1,1,0,0,0,0,1.42A1,1,0,0,0,27,10Z"/><path d="M18.13,7.75a10.13,10.13,0,1,0,10,10.13A10.08,10.08,0,0,0,18.13,7.75Zm0,18.25a8.13,8.13,0,1,1,8-8.12A8.08,8.08,0,0,1,18.13,26Z"/>',solid:'<path d="M18,6.42a1,1,0,0,0,1-1V1.91a1,1,0,0,0-2,0V5.42A1,1,0,0,0,18,6.42Z"/><path d="M18,29.58a1,1,0,0,0-1,1v3.51a1,1,0,0,0,2,0V30.58A1,1,0,0,0,18,29.58Z"/><path d="M8.4,9.81A1,1,0,0,0,9.81,8.4L7.33,5.92A1,1,0,0,0,5.92,7.33Z"/><path d="M27.6,26.19a1,1,0,0,0-1.41,1.41l2.48,2.48a1,1,0,0,0,1.41-1.41Z"/><path d="M6.42,18a1,1,0,0,0-1-1H1.91a1,1,0,0,0,0,2H5.42A1,1,0,0,0,6.42,18Z"/><path d="M34.09,17H30.58a1,1,0,0,0,0,2h3.51a1,1,0,0,0,0-2Z"/><path d="M8.4,26.19,5.92,28.67a1,1,0,0,0,1.41,1.41L9.81,27.6A1,1,0,0,0,8.4,26.19Z"/><path d="M27.6,9.81l2.48-2.48a1,1,0,0,0-1.41-1.41L26.19,8.4A1,1,0,0,0,27.6,9.81Z"/><circle cx="18" cy="18" r="10"/>'})],v=["moon",(0,w.s)({outline:'<path d="M31,27.19a1,1,0,0,0-1-.56c-.28,0-.56,0-.85,0A11,11,0,0,1,24.92,5.61a1,1,0,0,0,.61-1,1,1,0,0,0-.67-.91,14.7,14.7,0,0,0-5-.87,15.12,15.12,0,0,0,0,30.24,14.78,14.78,0,0,0,11-4.81A1,1,0,0,0,31,27.19ZM19.89,31.12a13.12,13.12,0,0,1,0-26.24,11.81,11.81,0,0,1,2,.16,13,13,0,0,0,5.72,23.53A12.75,12.75,0,0,1,19.89,31.12Z"/>',solid:'<path d="M29.2,26.72A12.07,12.07,0,0,1,22.9,4.44,13.68,13.68,0,0,0,19.49,4a14,14,0,0,0,0,28,13.82,13.82,0,0,0,10.9-5.34A11.71,11.71,0,0,1,29.2,26.72Z"/>'})];var S=L(2170),K=L(3987),ie=L(6482),Z=L(9380),me=L(8745);const ne=(T,re)=>re.code;function _e(T,re){if(1&T){const z=u.RV6();u.j41(0,"div",11),u.bIt("click",function(){const ce=u.eBV(z).$implicit,Pe=u.XpG(2);return u.Njj(Pe.changeLang(ce.code))}),u.EFF(1),u.k0s()}if(2&T){const z=re.$implicit;u.R7$(),u.JRh(z.name)}}function Ve(T,re){if(1&T){const z=u.RV6();u.j41(0,"clr-dropdown-menu",12)(1,"button",13),u.bIt("click",function(){u.eBV(z);const ce=u.XpG(2);return u.Njj(ce.toggleTheme())}),u.EFF(2),u.k0s(),u.j41(3,"button",13),u.bIt("click",function(){u.eBV(z);const ce=u.XpG(2);return u.Njj(ce.goMyPage())}),u.EFF(4,"personal page"),u.k0s(),u.j41(5,"button",13),u.bIt("click",function(){u.eBV(z);const ce=u.XpG(2);return u.Njj(ce.logOut())}),u.EFF(6,"log out"),u.k0s()()}if(2&T){const z=u.XpG(2);u.R7$(2),u.SpI("switch to ",z.counterTheme,"")}}function O(T,re){if(1&T){const z=u.RV6();u.j41(0,"div",1)(1,"a",2),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goHome())}),u.nrm(2,"cds-icon",3),u.j41(3,"span",4),u.EFF(4,"MCP as a Service Portal"),u.k0s()()(),u.nrm(5,"div",5),u.j41(6,"div",6)(7,"clr-dropdown")(8,"button",7),u.EFF(9),u.nrm(10,"cds-icon",8),u.k0s(),u.j41(11,"clr-dropdown-menu"),u.Z7z(12,_e,2,1,"div",9,ne),u.k0s()(),u.j41(14,"clr-dropdown")(15,"button",7),u.EFF(16),u.nrm(17,"cds-icon",8),u.k0s(),u.DNE(18,Ve,7,1,"clr-dropdown-menu",10),u.k0s()()}if(2&T){const z=u.XpG();u.R7$(5),u.Y8G("clr-nav-level",2),u.R7$(4),u.SpI(" ",z.currentLangName," "),u.R7$(3),u.Dyx(z.langs),u.R7$(4),u.SpI(" ",z.userName," ")}}function J(T,re){if(1&T){const z=u.RV6();u.j41(0,"div",1)(1,"a",14),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goFront())}),u.nrm(2,"clr-icon",15),u.j41(3,"span",4),u.EFF(4,"MCP as a Service"),u.k0s()()(),u.j41(5,"div",16)(6,"clr-dropdown")(7,"button",17),u.EFF(8," Service "),u.nrm(9,"clr-icon",18),u.k0s(),u.j41(10,"clr-dropdown-menu",19)(11,"a",20),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goMCP())}),u.EFF(12,"Maritime Connectivity Platform"),u.k0s(),u.j41(13,"a",20),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goS124())}),u.EFF(14,"S124 Navigational Warning service"),u.k0s(),u.j41(15,"a",20),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goChat())}),u.EFF(16,"MMS Chat service"),u.k0s(),u.j41(17,"a",20),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goARP())}),u.EFF(18,"Automatic Route Planning service"),u.k0s()()(),u.j41(19,"button",21),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.goPrice())}),u.EFF(20," Price "),u.k0s(),u.j41(21,"button",21),u.bIt("click",function(){u.eBV(z);const ce=u.XpG();return u.Njj(ce.downloadUserManual())}),u.EFF(22," User manual "),u.k0s()()}}c.h.addIcons(_,b,v);let m=(()=>{class T{constructor(z,$,ce){this.authService=z,this.translate=$,this.router=ce,this.role="admin",this.userName="admin",this.theme="light",this.counterTheme="dark",this.currentLang="en-GB",this.currentLangName="English",this.myMrn="",this.langs=S.e,this.loggedIn=!1,this.authService.isAuthenticated$.subscribe(Pe=>{this.loggedIn=Pe}),this.authService.getUserName().then(Pe=>{this.userName=Pe}),this.authService.getUserMrn().then(Pe=>{this.myMrn=Pe}),this.theme=localStorage.getItem("theme")||"light",this.counterTheme="dark"===this.theme?"light":"dark",document.body.setAttribute("cds-theme",this.theme),this.loadLang()}loadLang(){this.currentLang=(0,K.rR)(this.translate),this.currentLangName=(0,K.Xo)(this.currentLang)}logOut(){var z=this;return(0,A.A)(function*(){z.authService.logout()})()}changeLang(z){var $=this;return(0,A.A)(function*(){(0,K.lk)($.translate,z),$.loadLang()})()}goHome(){this.router.navigateByUrl("/pages")}goMyPage(){this.router.navigateByUrl("/pages/ir/user/"+this.myMrn)}toggleTheme(){this.theme="light"===this.theme?"dark":"light",document.body.setAttribute("cds-theme",this.theme),(()=>{localStorage.setItem("theme",this.theme)})(),this.counterTheme="dark"===this.theme?"light":"dark"}goMCP(){this.router.navigateByUrl("/mcp")}goS124(){this.router.navigateByUrl("/s124")}goARP(){this.router.navigateByUrl("/arp")}goChat(){this.router.navigateByUrl("/chat")}goFront(){this.router.navigateByUrl("/")}goPrice(){this.router.navigateByUrl("/pricing")}downloadUserManual(){const z=document.createElement("a");z.href="/assets/user_manual.pdf",z.download="user_manual.pdf",z.click()}static#e=this.\u0275fac=function($){return new($||T)(u.rXU(ie.u),u.rXU(Z.c$),u.rXU(me.Ix))};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-header"]],decls:3,vars:3,consts:[[3,"role","clr-nav-level"],[1,"branding"],[1,"nav-link",3,"click"],["shape","crown"],[1,"title"],[1,"header-nav",3,"clr-nav-level"],[1,"header-actions"],["clrDropdownTrigger","","aria-label","open user profile",1,"nav-text"],["shape","angle","direction","down"],["aria-label","option.code","clrDropdownItem",""],["clrPosition","bottom-right",4,"clrIfOpen"],["aria-label","option.code","clrDropdownItem","",3,"click"],["clrPosition","bottom-right"],[1,"btn","btn-link",3,"click"],["routerLinkActive","active",1,"nav-link",3,"click"],["shape","applications"],[1,"header-nav"],["clrDropdownTrigger","",1,"btn","btn-link","nav-link"],["shape","caret down"],["clrPosition","bottom-left"],["clrDropdownItem","","routerLinkActive","active",3,"click"],["routerLinkActive","active",1,"btn","btn-link","nav-link",3,"click"]],template:function($,ce){1&$&&(u.j41(0,"clr-header",0),u.DNE(1,O,19,3)(2,J,23,0),u.k0s()),2&$&&(u.Y8G("role",ce.role)("clr-nav-level",1),u.R7$(),u.vxM(ce.loggedIn?1:2))},dependencies:[V.U4n,V.BlU,V.vEc,V.Z2Z,V.ndX,V.ZNj,V.TZW,V.e3J,V.jWx,V.wIE,me.wQ]})}return T})();const M=[{title:"MaaS Management",icon:"lock",children:[{title:"Organization Management",link:"/pages/maas/organization",group:"supermgmt"},{title:"Service Management",link:"/pages/maas/service",group:"supermgmt"},{title:"Subscription Plan Management",link:"/pages/maas/plan",group:"supermgmt"},{title:"Org-Sub Management",link:"/pages/maas/orgsubscription",group:"supermgmt"},{title:"Org-Service Usage Overview",link:"/pages/maas/orgsvcusageoverview",group:"supermgmt"},{title:"Organization Approval",link:"/pages/maas/orgcandidate",group:"supermgmt"},{title:"Documentation",file:"/assets/super_admin_manual.pdf",group:"myorg"}],permissions:["SuperAdmin"]},{title:"My Organization Management",icon:"layers",children:[{title:"Subscription plans",link:"/pages/org/subscription",group:"myorg"},{title:"Service Subscriptions",link:"/pages/org/orgsvcsub",group:"myorg"},{title:"User Service Subscription",link:"/pages/org/usersvcsubscription",group:"myorg"},{title:"Usage Cost Limit",link:"/pages/org/orgcostlimit",group:"myorg"}],permissions:["SuperAdmin","OrgAdmin"]},{title:"User Management",icon:"user",children:[{title:"User Management",link:"/pages/user/user",group:"usermgmt"},{title:"User Service Usage Overview",link:"/pages/user/usersvcusageoverview",group:"usermgmt"},{title:"User Service Usage",link:"/pages/user/usersvcusage",group:"usermgmt"}],permissions:["SuperAdmin","OrgAdmin","UserAdmin"]},{title:"Service Access",icon:"network-globe",link:"https://chatsea.aivn.kr",permissions:["SuperAdmin","OrgAdmin","UserAdmin","User"]},{title:"Knowledge Base",icon:"help",children:[{title:"Documentation",file:"/assets/user_manual.pdf",group:"myorg"}],permissions:["SuperAdmin","OrgAdmin","UserAdmin","User"]}];var ue=L(8214),R=L(357),Ie=L(6156),Se=L(7949),Oe=L(7537),ee=L(2047);function Y(T,re){1&T&&u.nrm(0,"div",6)}function Ue(T,re){if(1&T){const z=u.RV6();u.j41(0,"a",9),u.bIt("click",function(ce){u.eBV(z);const Pe=u.XpG().$implicit,Ke=u.XpG(3);return u.Njj(Ke.downloadFile(Pe.file,ce))}),u.EFF(1),u.nI1(2,"translate"),u.k0s()}if(2&T){const z=u.XpG().$implicit;u.R7$(),u.SpI(" ",u.bMT(2,1,z.title)," ")}}function Ce(T,re){if(1&T&&(u.j41(0,"a",10),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const z=u.XpG(2).$implicit;u.Y8G("routerLink",z.link),u.R7$(),u.SpI(" ",u.bMT(2,2,z.title)," ")}}function Ee(T,re){if(1&T&&(u.j41(0,"a",10),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const z=u.XpG(2).$implicit;u.Y8G("routerLink",z.link),u.R7$(),u.SpI(" ",u.bMT(2,2,z.title)," ")}}function rt(T,re){if(1&T&&(u.j41(0,"a",10),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const z=u.XpG(2).$implicit;u.Y8G("routerLink",z.link),u.R7$(),u.SpI(" ",u.bMT(2,2,z.title)," ")}}function _t(T,re){if(1&T&&(u.j41(0,"a",10),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&T){const z=u.XpG(2).$implicit;u.Y8G("routerLink",z.link),u.R7$(),u.SpI(" ",u.bMT(2,2,z.title)," ")}}function Ge(T,re){if(1&T&&u.DNE(0,Ce,3,4,"a",10)(1,Ee,3,4,"a",10)(2,rt,3,4,"a",10)(3,_t,3,4,"a",10),2&T){const z=u.XpG().$implicit,$=u.XpG(3);u.vxM(z.forSuperAdmin&&"SuperAdmin"==$.role?0:-1),u.R7$(),u.vxM(z.forOrgAdmin&&"OrgAdmin"==$.role?1:-1),u.R7$(),u.vxM(z.forUserAdmin&&"UserAdmin"==$.role?2:3)}}function Ye(T,re){if(1&T&&(u.j41(0,"div",8),u.EFF(1),u.k0s()),2&T){const z=u.XpG().$implicit;u.R7$(),u.JRh(z.title)}}function vt(T,re){if(1&T&&u.DNE(0,Y,1,0,"div",6)(1,Ue,3,3,"a",7)(2,Ge,4,3)(3,Ye,2,1,"div",8),2&T){const z=re.$implicit;u.vxM("separator"===z.title?0:z.file?1:z.link?2:3)}}function at(T,re){if(1&T&&(u.j41(0,"clr-vertical-nav-group",4),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.j41(4,"clr-vertical-nav-group-children"),u.Z7z(5,vt,4,1,null,null,u.fX1),u.nrm(7,"div",6),u.k0s()()),2&T){const z=u.XpG().$implicit;u.R7$(),u.BMQ("shape",z.icon),u.R7$(),u.SpI(" ",u.bMT(3,2,z.title)," "),u.R7$(3),u.Dyx(z.children)}}function Nt(T,re){if(1&T&&(u.j41(0,"a",11),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.k0s()),2&T){const z=u.XpG(2).$implicit;u.Y8G("href",z.link,u.B4B),u.R7$(),u.BMQ("shape",z.icon),u.R7$(),u.SpI(" ",u.bMT(3,3,z.title)," ")}}function Et(T,re){if(1&T&&(u.j41(0,"a",10),u.nrm(1,"cds-icon",5),u.EFF(2),u.nI1(3,"translate"),u.k0s()),2&T){const z=u.XpG(2).$implicit;u.Y8G("routerLink",z.link),u.R7$(),u.BMQ("shape",z.icon),u.R7$(),u.SpI(" ",u.bMT(3,3,z.title)," ")}}function f(T,re){if(1&T&&u.DNE(0,Nt,4,5,"a",11)(1,Et,4,5,"a",10),2&T){const z=u.XpG().$implicit;u.vxM(z.link.includes("http")?0:1)}}function oe(T,re){if(1&T&&(u.qex(0),u.DNE(1,at,8,4,"clr-vertical-nav-group",3)(2,f,2,1,"ng-template",null,0,u.C5r),u.bVm()),2&T){const z=re.$implicit,$=u.sdS(3);u.R7$(),u.Y8G("ngIf",z.children)("ngIfElse",$)}}c.h.addIcons(R.V,Ie.h,Se.Q,Oe.t);let se=(()=>{class T{constructor(z,$){this.authService=$,this.navGroups=M,this.role="",this.hasServiceRegistry=ue.o.HAS_SERVICE_REGISTRY,z.setDefaultLang("en-GB"),z.use("en-GB")}ngOnInit(){this.navGroups=M.filter(z=>z.permissions.includes("User")),this.authService.user$.subscribe(z=>{z&&(this.navGroups=M.filter($=>$.permissions.includes(z.role)))})}downloadFile(z,$){if($.preventDefault(),z){const ce=document.createElement("a");ce.href=z,ce.download="",ce.target="_blank",document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)}else console.error("Invalid link provided for download.")}static#e=this.\u0275fac=function($){return new($||T)(u.rXU(Z.c$),u.rXU(ie.u))};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-sidebar"]],decls:2,vars:2,consts:[["singleLink",""],[3,"clrVerticalNavCollapsible"],[4,"ngFor","ngForOf"],["routerLinkActive","active",4,"ngIf","ngIfElse"],["routerLinkActive","active"],["clrVerticalNavIcon",""],[1,"nav-divider"],["clrVerticalNavLink","","routerLinkActive","active"],[1,"nav-header"],["clrVerticalNavLink","","routerLinkActive","active",3,"click"],["clrVerticalNavLink","","routerLinkActive","active",3,"routerLink"],["clrVerticalNavLink","","target","_blank",3,"href"]],template:function($,ce){1&$&&(u.j41(0,"clr-vertical-nav",1),u.DNE(1,oe,4,2,"ng-container",2),u.k0s()),2&$&&(u.Y8G("clrVerticalNavCollapsible",!1),u.R7$(),u.Y8G("ngForOf",ce.navGroups))},dependencies:[ee.Sq,ee.bT,V.BlU,V.D2I,V.VTg,V.wqM,V.zLy,V.Wfw,me.Wk,me.wQ,Z.D9]})}return T})();const P=["*"];function x(T,re){1&T&&u.nrm(0,"mp-sidebar",1)}let C=(()=>{class T{constructor(){this.hasSidebar=!0}static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-main"]],inputs:{hasSidebar:"hasSidebar"},ngContentSelectors:P,decls:4,vars:1,consts:[[1,"content-container"],[1,"sidenav"],[1,"content-area"]],template:function($,ce){1&$&&(u.NAR(),u.j41(0,"div",0),u.DNE(1,x,1,0,"mp-sidebar",1),u.j41(2,"div",2),u.SdG(3),u.k0s()()),2&$&&(u.R7$(),u.vxM(ce.hasSidebar?1:-1))},dependencies:[se]})}return T})();const W=["*"];c.h.addIcons(N);let F=(()=>{class T{constructor(){this.hasSidebar=!0}static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275cmp=u.VBU({type:T,selectors:[["mp-layout"]],inputs:{hasSidebar:"hasSidebar"},ngContentSelectors:W,decls:4,vars:1,consts:[[3,"hasSidebar"]],template:function($,ce){1&$&&(u.NAR(),u.j41(0,"clr-main-container"),u.nrm(1,"mp-header"),u.j41(2,"mp-main",0),u.SdG(3),u.k0s()()),2&$&&(u.R7$(2),u.Y8G("hasSidebar",ce.hasSidebar))},dependencies:[V.ohH,V.y1j,m,C]})}return T})()},5540:function(nt,U){var L,c;void 0!==(c="function"==typeof(L=function(){"use strict";function g(_,o,b){var E=new XMLHttpRequest;E.open("GET",_),E.responseType="blob",E.onload=function(){k(E.response,o,b)},E.onerror=function(){console.error("could not download file")},E.send()}function N(_){var o=new XMLHttpRequest;o.open("HEAD",_,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function u(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(o)}}var V="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,A=V.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),k=V.saveAs||("object"!=typeof window||window!==V?function(){}:"download"in HTMLAnchorElement.prototype&&!A?function(_,o,b){var E=V.URL||V.webkitURL,v=document.createElement("a");v.download=o=o||_.name||"download",v.rel="noopener","string"==typeof _?(v.href=_,v.origin===location.origin?u(v):N(v.href)?g(_,o,b):u(v,v.target="_blank")):(v.href=E.createObjectURL(_),setTimeout(function(){E.revokeObjectURL(v.href)},4e4),setTimeout(function(){u(v)},0))}:"msSaveOrOpenBlob"in navigator?function(_,o,b){if(o=o||_.name||"download","string"!=typeof _)navigator.msSaveOrOpenBlob(function w(_,o){return typeof o>"u"?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\ufeff",_],{type:_.type}):_}(_,b),o);else if(N(_))g(_,o,b);else{var E=document.createElement("a");E.href=_,E.target="_blank",setTimeout(function(){u(E)})}}:function(_,o,b,E){if((E=E||open("","_blank"))&&(E.document.title=E.document.body.innerText="downloading..."),"string"==typeof _)return g(_,o,b);var v="application/octet-stream"===_.type,S=/constructor/i.test(V.HTMLElement)||V.safari,I=/CriOS\/[\d]+/.test(navigator.userAgent);if((I||v&&S||A)&&typeof FileReader<"u"){var H=new FileReader;H.onloadend=function(){var Z=H.result;Z=I?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=Z:location=Z,E=null},H.readAsDataURL(_)}else{var K=V.URL||V.webkitURL,ie=K.createObjectURL(_);E?E.location=ie:location.href=ie,E=null,setTimeout(function(){K.revokeObjectURL(ie)},4e4)}});V.saveAs=k.saveAs=k,nt.exports=k})?L.apply(U,[]):L)&&(nt.exports=c)},8721:nt=>{nt.exports=function U(L,n,c){function w(u,V){if(!n[u]){if(!L[u]){if(g)return g(u,!0);var k=new Error("Cannot find module '"+u+"'");throw k.code="MODULE_NOT_FOUND",k}var _=n[u]={exports:{}};L[u][0].call(_.exports,function(o){return w(L[u][1][o]||o)},_,_.exports,U,L,n,c)}return n[u].exports}for(var g=void 0,N=0;N<c.length;N++)w(c[N]);return w}({1:[function(U,L,n){"use strict";var c=U("./utils"),w=U("./support"),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(N){for(var u,V,A,_,o,b,E=[],v=0,S=N.length,I=S,H="string"!==c.getTypeOf(N);v<N.length;)I=S-v,A=H?(u=N[v++],V=v<S?N[v++]:0,v<S?N[v++]:0):(u=N.charCodeAt(v++),V=v<S?N.charCodeAt(v++):0,v<S?N.charCodeAt(v++):0),_=(3&u)<<4|V>>4,o=1<I?(15&V)<<2|A>>6:64,b=2<I?63&A:64,E.push(g.charAt(u>>2)+g.charAt(_)+g.charAt(o)+g.charAt(b));return E.join("")},n.decode=function(N){var u,V,A,k,_,o,b=0,E=0,v="data:";if(N.substr(0,5)===v)throw new Error("Invalid base64 input, it looks like a data url.");var S,I=3*(N=N.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(N.charAt(N.length-1)===g.charAt(64)&&I--,N.charAt(N.length-2)===g.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=w.uint8array?new Uint8Array(0|I):new Array(0|I);b<N.length;)u=g.indexOf(N.charAt(b++))<<2|(k=g.indexOf(N.charAt(b++)))>>4,V=(15&k)<<4|(_=g.indexOf(N.charAt(b++)))>>2,A=(3&_)<<6|(o=g.indexOf(N.charAt(b++))),S[E++]=u,64!==_&&(S[E++]=V),64!==o&&(S[E++]=A);return S}},{"./support":30,"./utils":32}],2:[function(U,L,n){"use strict";var c=U("./external"),w=U("./stream/DataWorker"),g=U("./stream/Crc32Probe"),N=U("./stream/DataLengthProbe");function u(V,A,k,_,o){this.compressedSize=V,this.uncompressedSize=A,this.crc32=k,this.compression=_,this.compressedContent=o}u.prototype={getContentWorker:function(){var V=new w(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new N("data_length")),A=this;return V.on("end",function(){if(this.streamInfo.data_length!==A.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),V},getCompressedWorker:function(){return new w(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(V,A,k){return V.pipe(new g).pipe(new N("uncompressedSize")).pipe(A.compressWorker(k)).pipe(new N("compressedSize")).withStreamInfo("compression",A)},L.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(U,L,n){"use strict";var c=U("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},n.DEFLATE=U("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(U,L,n){"use strict";var c=U("./utils"),w=function(){for(var g,N=[],u=0;u<256;u++){g=u;for(var V=0;V<8;V++)g=1&g?3988292384^g>>>1:g>>>1;N[u]=g}return N}();L.exports=function(g,N){return void 0!==g&&g.length?"string"!==c.getTypeOf(g)?function(u,V,A){var _=w,o=0+A;u^=-1;for(var b=0;b<o;b++)u=u>>>8^_[255&(u^V[b])];return~u}(0|N,g,g.length):function(u,V,A){var _=w,o=0+A;u^=-1;for(var b=0;b<o;b++)u=u>>>8^_[255&(u^V.charCodeAt(b))];return~u}(0|N,g,g.length):0}},{"./utils":32}],5:[function(U,L,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(U,L,n){"use strict";var c;c=typeof Promise<"u"?Promise:U("lie"),L.exports={Promise:c}},{lie:37}],7:[function(U,L,n){"use strict";var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",w=U("pako"),g=U("./utils"),N=U("./stream/GenericWorker"),u=c?"uint8array":"array";function V(A,k){N.call(this,"FlateWorker/"+A),this._pako=null,this._pakoAction=A,this._pakoOptions=k,this.meta={}}n.magic="\b\0",g.inherits(V,N),V.prototype.processChunk=function(A){this.meta=A.meta,null===this._pako&&this._createPako(),this._pako.push(g.transformTo(u,A.data),!1)},V.prototype.flush=function(){N.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},V.prototype.cleanUp=function(){N.prototype.cleanUp.call(this),this._pako=null},V.prototype._createPako=function(){this._pako=new w[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var A=this;this._pako.onData=function(k){A.push({data:k,meta:A.meta})}},n.compressWorker=function(A){return new V("Deflate",A)},n.uncompressWorker=function(){return new V("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(U,L,n){"use strict";function c(_,o){var b,E="";for(b=0;b<o;b++)E+=String.fromCharCode(255&_),_>>>=8;return E}function w(_,o,b,E,v,S){var I,H,K=_.file,ie=_.compression,Z=S!==u.utf8encode,me=g.transformTo("string",S(K.name)),ne=g.transformTo("string",u.utf8encode(K.name)),_e=K.comment,Ve=g.transformTo("string",S(_e)),O=g.transformTo("string",u.utf8encode(_e)),J=ne.length!==K.name.length,m=O.length!==_e.length,M="",ue="",R="",Ie=K.dir,Se=K.date,Oe={crc32:0,compressedSize:0,uncompressedSize:0};o&&!b||(Oe.crc32=_.crc32,Oe.compressedSize=_.compressedSize,Oe.uncompressedSize=_.uncompressedSize);var ee=0;o&&(ee|=8),Z||!J&&!m||(ee|=2048);var Ee,_t,Y=0,Ue=0;Ie&&(Y|=16),"UNIX"===v?(Ue=798,Y|=(_t=Ee=K.unixPermissions,Ee||(_t=Ie?16893:33204),(65535&_t)<<16)):(Ue=20,Y|=function(Ee){return 63&(Ee||0)}(K.dosPermissions)),I=Se.getUTCHours(),I<<=6,I|=Se.getUTCMinutes(),I<<=5,I|=Se.getUTCSeconds()/2,H=Se.getUTCFullYear()-1980,H<<=4,H|=Se.getUTCMonth()+1,H<<=5,H|=Se.getUTCDate(),J&&(ue=c(1,1)+c(V(me),4)+ne,M+="up"+c(ue.length,2)+ue),m&&(R=c(1,1)+c(V(Ve),4)+O,M+="uc"+c(R.length,2)+R);var Ce="";return Ce+="\n\0",Ce+=c(ee,2),Ce+=ie.magic,Ce+=c(I,2),Ce+=c(H,2),Ce+=c(Oe.crc32,4),Ce+=c(Oe.compressedSize,4),Ce+=c(Oe.uncompressedSize,4),Ce+=c(me.length,2),Ce+=c(M.length,2),{fileRecord:A.LOCAL_FILE_HEADER+Ce+me+M,dirRecord:A.CENTRAL_FILE_HEADER+c(Ue,2)+Ce+c(Ve.length,2)+"\0\0\0\0"+c(Y,4)+c(E,4)+me+M+Ve}}var g=U("../utils"),N=U("../stream/GenericWorker"),u=U("../utf8"),V=U("../crc32"),A=U("../signature");function k(_,o,b,E){N.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=o,this.zipPlatform=b,this.encodeFileName=E,this.streamFiles=_,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}g.inherits(k,N),k.prototype.push=function(_){var o=_.meta.percent||0,b=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(_):(this.bytesWritten+=_.data.length,N.prototype.push.call(this,{data:_.data,meta:{currentFile:this.currentFile,percent:b?(o+100*(b-E-1))/b:100}}))},k.prototype.openedSource=function(_){this.currentSourceOffset=this.bytesWritten,this.currentFile=_.file.name;var o=this.streamFiles&&!_.file.dir;if(o){var b=w(_,o,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(_){this.accumulate=!1;var E,o=this.streamFiles&&!_.file.dir,b=w(_,o,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),o)this.push({data:(E=_,A.DATA_DESCRIPTOR+c(E.crc32,4)+c(E.compressedSize,4)+c(E.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var _=this.bytesWritten,o=0;o<this.dirRecords.length;o++)this.push({data:this.dirRecords[o],meta:{percent:100}});var v,S,I,ie,E=(v=this.dirRecords.length,S=this.bytesWritten-_,I=_,ie=g.transformTo("string",(0,this.encodeFileName)(this.zipComment)),A.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(v,2)+c(v,2)+c(S,4)+c(I,4)+c(ie.length,2)+ie);this.push({data:E,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(_){this._sources.push(_);var o=this;return _.on("data",function(b){o.processChunk(b)}),_.on("end",function(){o.closedSource(o.previous.streamInfo),o._sources.length?o.prepareNextSource():o.end()}),_.on("error",function(b){o.error(b)}),this},k.prototype.resume=function(){return!!N.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(_){var o=this._sources;if(!N.prototype.error.call(this,_))return!1;for(var b=0;b<o.length;b++)try{o[b].error(_)}catch{}return!0},k.prototype.lock=function(){N.prototype.lock.call(this);for(var _=this._sources,o=0;o<_.length;o++)_[o].lock()},L.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(U,L,n){"use strict";var c=U("../compressions"),w=U("./ZipFileWorker");n.generateWorker=function(g,N,u){var V=new w(N.streamFiles,u,N.platform,N.encodeFileName),A=0;try{g.forEach(function(k,_){A++;var o=function(S,I){var H=S||I,K=c[H];if(!K)throw new Error(H+" is not a valid compression method !");return K}(_.options.compression,N.compression),E=_.dir,v=_.date;_._compressWorker(o,_.options.compressionOptions||N.compressionOptions||{}).withStreamInfo("file",{name:k,dir:E,date:v,comment:_.comment||"",unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions}).pipe(V)}),V.entriesCount=A}catch(k){V.error(k)}return V}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(U,L,n){"use strict";function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var w=new c;for(var g in this)"function"!=typeof this[g]&&(w[g]=this[g]);return w}}(c.prototype=U("./object")).loadAsync=U("./load"),c.support=U("./support"),c.defaults=U("./defaults"),c.version="3.10.1",c.loadAsync=function(w,g){return(new c).loadAsync(w,g)},c.external=U("./external"),L.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(U,L,n){"use strict";var c=U("./utils"),w=U("./external"),g=U("./utf8"),N=U("./zipEntries"),u=U("./stream/Crc32Probe"),V=U("./nodejsUtils");function A(k){return new w.Promise(function(_,o){var b=k.decompressed.getContentWorker().pipe(new u);b.on("error",function(E){o(E)}).on("end",function(){b.streamInfo.crc32!==k.decompressed.crc32?o(new Error("Corrupted zip : CRC32 mismatch")):_()}).resume()})}L.exports=function(k,_){var o=this;return _=c.extend(_||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),V.isNode&&V.isStream(k)?w.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",k,!0,_.optimizedBinaryString,_.base64).then(function(b){var E=new N(_);return E.load(b),E}).then(function(b){var E=[w.Promise.resolve(b)],v=b.files;if(_.checkCRC32)for(var S=0;S<v.length;S++)E.push(A(v[S]));return w.Promise.all(E)}).then(function(b){for(var E=b.shift(),v=E.files,S=0;S<v.length;S++){var I=v[S],H=I.fileNameStr,K=c.resolve(I.fileNameStr);o.file(K,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:_.createFolders}),I.dir||(o.file(K).unsafeOriginalName=H)}return E.zipComment.length&&(o.comment=E.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(U,L,n){"use strict";var c=U("../utils"),w=U("../stream/GenericWorker");function g(N,u){w.call(this,"Nodejs stream input adapter for "+N),this._upstreamEnded=!1,this._bindStream(u)}c.inherits(g,w),g.prototype._bindStream=function(N){var u=this;(this._stream=N).pause(),N.on("data",function(V){u.push({data:V,meta:{percent:0}})}).on("error",function(V){u.isPaused?this.generatedError=V:u.error(V)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},g.prototype.pause=function(){return!!w.prototype.pause.call(this)&&(this._stream.pause(),!0)},g.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},L.exports=g},{"../stream/GenericWorker":28,"../utils":32}],13:[function(U,L,n){"use strict";var c=U("readable-stream").Readable;function w(g,N,u){c.call(this,N),this._helper=g;var V=this;g.on("data",function(A,k){V.push(A)||V._helper.pause(),u&&u(k)}).on("error",function(A){V.emit("error",A)}).on("end",function(){V.push(null)})}U("../utils").inherits(w,c),w.prototype._read=function(){this._helper.resume()},L.exports=w},{"../utils":32,"readable-stream":16}],14:[function(U,L,n){"use strict";L.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,w){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,w);if("number"==typeof c)throw new Error('The "data" argument must not be a number');return new Buffer(c,w)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var w=new Buffer(c);return w.fill(0),w},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&"function"==typeof c.on&&"function"==typeof c.pause&&"function"==typeof c.resume}}},{}],15:[function(U,L,n){"use strict";function c(K,ie,Z){var me,ne=g.getTypeOf(ie),_e=g.extend(Z||{},V);_e.date=_e.date||new Date,null!==_e.compression&&(_e.compression=_e.compression.toUpperCase()),"string"==typeof _e.unixPermissions&&(_e.unixPermissions=parseInt(_e.unixPermissions,8)),_e.unixPermissions&&16384&_e.unixPermissions&&(_e.dir=!0),_e.dosPermissions&&16&_e.dosPermissions&&(_e.dir=!0),_e.dir&&(K=v(K)),_e.createFolders&&(me=E(K))&&S.call(this,me,!0),Z&&void 0!==Z.binary||(_e.binary=!("string"===ne&&!1===_e.binary&&!1===_e.base64)),(ie instanceof A&&0===ie.uncompressedSize||_e.dir||!ie||0===ie.length)&&(_e.base64=!1,_e.binary=!0,ie="",_e.compression="STORE",ne="string");var O;O=ie instanceof A||ie instanceof N?ie:o.isNode&&o.isStream(ie)?new b(K,ie):g.prepareContent(K,ie,_e.binary,_e.optimizedBinaryString,_e.base64);var J=new k(K,O,_e);this.files[K]=J}var w=U("./utf8"),g=U("./utils"),N=U("./stream/GenericWorker"),u=U("./stream/StreamHelper"),V=U("./defaults"),A=U("./compressedObject"),k=U("./zipObject"),_=U("./generate"),o=U("./nodejsUtils"),b=U("./nodejs/NodejsStreamInputAdapter"),E=function(K){"/"===K.slice(-1)&&(K=K.substring(0,K.length-1));var ie=K.lastIndexOf("/");return 0<ie?K.substring(0,ie):""},v=function(K){return"/"!==K.slice(-1)&&(K+="/"),K},S=function(K,ie){return ie=void 0!==ie?ie:V.createFolders,K=v(K),this.files[K]||c.call(this,K,null,{dir:!0,createFolders:ie}),this.files[K]};function I(K){return"[object RegExp]"===Object.prototype.toString.call(K)}var H={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(K){var ie,Z,me;for(ie in this.files)me=this.files[ie],(Z=ie.slice(this.root.length,ie.length))&&ie.slice(0,this.root.length)===this.root&&K(Z,me)},filter:function(K){var ie=[];return this.forEach(function(Z,me){K(Z,me)&&ie.push(me)}),ie},file:function(K,ie,Z){if(1!==arguments.length)return c.call(this,K=this.root+K,ie,Z),this;if(I(K)){var me=K;return this.filter(function(_e,Ve){return!Ve.dir&&me.test(_e)})}var ne=this.files[this.root+K];return ne&&!ne.dir?ne:null},folder:function(K){if(!K)return this;if(I(K))return this.filter(function(ne,_e){return _e.dir&&K.test(ne)});var Z=S.call(this,this.root+K),me=this.clone();return me.root=Z.name,me},remove:function(K){var ie=this.files[K=this.root+K];if(ie||("/"!==K.slice(-1)&&(K+="/"),ie=this.files[K]),ie&&!ie.dir)delete this.files[K];else for(var Z=this.filter(function(ne,_e){return _e.name.slice(0,K.length)===K}),me=0;me<Z.length;me++)delete this.files[Z[me].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(K){var ie,Z={};try{if((Z=g.extend(K||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:w.utf8encode})).type=Z.type.toLowerCase(),Z.compression=Z.compression.toUpperCase(),"binarystring"===Z.type&&(Z.type="string"),!Z.type)throw new Error("No output type specified.");g.checkSupport(Z.type),"darwin"!==Z.platform&&"freebsd"!==Z.platform&&"linux"!==Z.platform&&"sunos"!==Z.platform||(Z.platform="UNIX"),"win32"===Z.platform&&(Z.platform="DOS"),ie=_.generateWorker(this,Z,Z.comment||this.comment||"")}catch(ne){(ie=new N("error")).error(ne)}return new u(ie,Z.type||"string",Z.mimeType)},generateAsync:function(K,ie){return this.generateInternalStream(K).accumulate(ie)},generateNodeStream:function(K,ie){return(K=K||{}).type||(K.type="nodebuffer"),this.generateInternalStream(K).toNodejsStream(ie)}};L.exports=H},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(U,L,n){"use strict";L.exports=U("stream")},{stream:void 0}],17:[function(U,L,n){"use strict";var c=U("./DataReader");function w(g){c.call(this,g);for(var N=0;N<this.data.length;N++)g[N]=255&g[N]}U("../utils").inherits(w,c),w.prototype.byteAt=function(g){return this.data[this.zero+g]},w.prototype.lastIndexOfSignature=function(g){for(var N=g.charCodeAt(0),u=g.charCodeAt(1),V=g.charCodeAt(2),A=g.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===N&&this.data[k+1]===u&&this.data[k+2]===V&&this.data[k+3]===A)return k-this.zero;return-1},w.prototype.readAndCheckSignature=function(g){var N=g.charCodeAt(0),u=g.charCodeAt(1),V=g.charCodeAt(2),A=g.charCodeAt(3),k=this.readData(4);return N===k[0]&&u===k[1]&&V===k[2]&&A===k[3]},w.prototype.readData=function(g){if(this.checkOffset(g),0===g)return[];var N=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,N},L.exports=w},{"../utils":32,"./DataReader":18}],18:[function(U,L,n){"use strict";var c=U("../utils");function w(g){this.data=g,this.length=g.length,this.index=0,this.zero=0}w.prototype={checkOffset:function(g){this.checkIndex(this.index+g)},checkIndex:function(g){if(this.length<this.zero+g||g<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+g+"). Corrupted zip ?")},setIndex:function(g){this.checkIndex(g),this.index=g},skip:function(g){this.setIndex(this.index+g)},byteAt:function(){},readInt:function(g){var N,u=0;for(this.checkOffset(g),N=this.index+g-1;N>=this.index;N--)u=(u<<8)+this.byteAt(N);return this.index+=g,u},readString:function(g){return c.transformTo("string",this.readData(g))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var g=this.readInt(4);return new Date(Date.UTC(1980+(g>>25&127),(g>>21&15)-1,g>>16&31,g>>11&31,g>>5&63,(31&g)<<1))}},L.exports=w},{"../utils":32}],19:[function(U,L,n){"use strict";var c=U("./Uint8ArrayReader");function w(g){c.call(this,g)}U("../utils").inherits(w,c),w.prototype.readData=function(g){this.checkOffset(g);var N=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,N},L.exports=w},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(U,L,n){"use strict";var c=U("./DataReader");function w(g){c.call(this,g)}U("../utils").inherits(w,c),w.prototype.byteAt=function(g){return this.data.charCodeAt(this.zero+g)},w.prototype.lastIndexOfSignature=function(g){return this.data.lastIndexOf(g)-this.zero},w.prototype.readAndCheckSignature=function(g){return g===this.readData(4)},w.prototype.readData=function(g){this.checkOffset(g);var N=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,N},L.exports=w},{"../utils":32,"./DataReader":18}],21:[function(U,L,n){"use strict";var c=U("./ArrayReader");function w(g){c.call(this,g)}U("../utils").inherits(w,c),w.prototype.readData=function(g){if(this.checkOffset(g),0===g)return new Uint8Array(0);var N=this.data.subarray(this.zero+this.index,this.zero+this.index+g);return this.index+=g,N},L.exports=w},{"../utils":32,"./ArrayReader":17}],22:[function(U,L,n){"use strict";var c=U("../utils"),w=U("../support"),g=U("./ArrayReader"),N=U("./StringReader"),u=U("./NodeBufferReader"),V=U("./Uint8ArrayReader");L.exports=function(A){var k=c.getTypeOf(A);return c.checkSupport(k),"string"!==k||w.uint8array?"nodebuffer"===k?new u(A):w.uint8array?new V(c.transformTo("uint8array",A)):new g(c.transformTo("array",A)):new N(A)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(U,L,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(U,L,n){"use strict";var c=U("./GenericWorker"),w=U("../utils");function g(N){c.call(this,"ConvertWorker to "+N),this.destType=N}w.inherits(g,c),g.prototype.processChunk=function(N){this.push({data:w.transformTo(this.destType,N.data),meta:N.meta})},L.exports=g},{"../utils":32,"./GenericWorker":28}],25:[function(U,L,n){"use strict";var c=U("./GenericWorker"),w=U("../crc32");function g(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}U("../utils").inherits(g,c),g.prototype.processChunk=function(N){this.streamInfo.crc32=w(N.data,this.streamInfo.crc32||0),this.push(N)},L.exports=g},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(U,L,n){"use strict";var c=U("../utils"),w=U("./GenericWorker");function g(N){w.call(this,"DataLengthProbe for "+N),this.propName=N,this.withStreamInfo(N,0)}c.inherits(g,w),g.prototype.processChunk=function(N){N&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+N.data.length),w.prototype.processChunk.call(this,N)},L.exports=g},{"../utils":32,"./GenericWorker":28}],27:[function(U,L,n){"use strict";var c=U("../utils"),w=U("./GenericWorker");function g(N){w.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,N.then(function(V){u.dataIsReady=!0,u.data=V,u.max=V&&V.length||0,u.type=c.getTypeOf(V),u.isPaused||u._tickAndRepeat()},function(V){u.error(V)})}c.inherits(g,w),g.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this.data=null},g.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},g.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},g.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var N=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":N=this.data.substring(this.index,u);break;case"uint8array":N=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":N=this.data.slice(this.index,u)}return this.index=u,this.push({data:N,meta:{percent:this.max?this.index/this.max*100:0}})},L.exports=g},{"../utils":32,"./GenericWorker":28}],28:[function(U,L,n){"use strict";function c(w){this.name=w||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(w){this.emit("data",w)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(w){this.emit("error",w)}return!0},error:function(w){return!this.isFinished&&(this.isPaused?this.generatedError=w:(this.isFinished=!0,this.emit("error",w),this.previous&&this.previous.error(w),this.cleanUp()),!0)},on:function(w,g){return this._listeners[w].push(g),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(w,g){if(this._listeners[w])for(var N=0;N<this._listeners[w].length;N++)this._listeners[w][N].call(this,g)},pipe:function(w){return w.registerPrevious(this)},registerPrevious:function(w){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=w.streamInfo,this.mergeStreamInfo(),this.previous=w;var g=this;return w.on("data",function(N){g.processChunk(N)}),w.on("end",function(){g.end()}),w.on("error",function(N){g.error(N)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var w=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),w=!0),this.previous&&this.previous.resume(),!w},flush:function(){},processChunk:function(w){this.push(w)},withStreamInfo:function(w,g){return this.extraStreamInfo[w]=g,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var w in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,w)&&(this.streamInfo[w]=this.extraStreamInfo[w])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var w="Worker "+this.name;return this.previous?this.previous+" -> "+w:w}},L.exports=c},{}],29:[function(U,L,n){"use strict";var c=U("../utils"),w=U("./ConvertWorker"),g=U("./GenericWorker"),N=U("../base64"),u=U("../support"),V=U("../external"),A=null;if(u.nodestream)try{A=U("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(o,b,E){var v=b;switch(b){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=b,this._mimeType=E,c.checkSupport(v),this._worker=o.pipe(new w(v)),o.lock()}catch(S){this._worker=new g("error"),this._worker.error(S)}}_.prototype={accumulate:function(o){return function k(o,b){return new V.Promise(function(E,v){var S=[],I=o._internalType,H=o._outputType,K=o._mimeType;o.on("data",function(ie,Z){S.push(ie),b&&b(Z)}).on("error",function(ie){S=[],v(ie)}).on("end",function(){try{var ie=function(Z,me,ne){switch(Z){case"blob":return c.newBlob(c.transformTo("arraybuffer",me),ne);case"base64":return N.encode(me);default:return c.transformTo(Z,me)}}(H,function(Z,me){var ne,_e=0,Ve=null,O=0;for(ne=0;ne<me.length;ne++)O+=me[ne].length;switch(Z){case"string":return me.join("");case"array":return Array.prototype.concat.apply([],me);case"uint8array":for(Ve=new Uint8Array(O),ne=0;ne<me.length;ne++)Ve.set(me[ne],_e),_e+=me[ne].length;return Ve;case"nodebuffer":return Buffer.concat(me);default:throw new Error("concat : unsupported type '"+Z+"'")}}(I,S),K);E(ie)}catch(Z){v(Z)}S=[]}).resume()})}(this,o)},on:function(o,b){var E=this;return this._worker.on(o,"data"===o?function(v){b.call(E,v.data,v.meta)}:function(){c.delay(b,arguments,E)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(o){if(c.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new A(this,{objectMode:"nodebuffer"!==this._outputType},o)}},L.exports=_},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(U,L,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var c=new ArrayBuffer(0);try{n.blob=0===new Blob([c],{type:"application/zip"}).size}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);w.append(c),n.blob=0===w.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!U("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(U,L,n){"use strict";for(var c=U("./utils"),w=U("./support"),g=U("./nodejsUtils"),N=U("./stream/GenericWorker"),u=new Array(256),V=0;V<256;V++)u[V]=252<=V?6:248<=V?5:240<=V?4:224<=V?3:192<=V?2:1;function A(){N.call(this,"utf-8 decode"),this.leftOver=null}function k(){N.call(this,"utf-8 encode")}u[254]=u[254]=1,n.utf8encode=function(_){return w.nodebuffer?g.newBufferFrom(_,"utf-8"):function(o){var b,E,v,S,I,H=o.length,K=0;for(S=0;S<H;S++)55296==(64512&(E=o.charCodeAt(S)))&&S+1<H&&56320==(64512&(v=o.charCodeAt(S+1)))&&(E=65536+(E-55296<<10)+(v-56320),S++),K+=E<128?1:E<2048?2:E<65536?3:4;for(b=w.uint8array?new Uint8Array(K):new Array(K),S=I=0;I<K;S++)55296==(64512&(E=o.charCodeAt(S)))&&S+1<H&&56320==(64512&(v=o.charCodeAt(S+1)))&&(E=65536+(E-55296<<10)+(v-56320),S++),E<128?b[I++]=E:(E<2048?b[I++]=192|E>>>6:(E<65536?b[I++]=224|E>>>12:(b[I++]=240|E>>>18,b[I++]=128|E>>>12&63),b[I++]=128|E>>>6&63),b[I++]=128|63&E);return b}(_)},n.utf8decode=function(_){return w.nodebuffer?c.transformTo("nodebuffer",_).toString("utf-8"):function(o){var b,E,v,S,I=o.length,H=new Array(2*I);for(b=E=0;b<I;)if((v=o[b++])<128)H[E++]=v;else if(4<(S=u[v]))H[E++]=65533,b+=S-1;else{for(v&=2===S?31:3===S?15:7;1<S&&b<I;)v=v<<6|63&o[b++],S--;1<S?H[E++]=65533:v<65536?H[E++]=v:(H[E++]=55296|(v-=65536)>>10&1023,H[E++]=56320|1023&v)}return H.length!==E&&(H.subarray?H=H.subarray(0,E):H.length=E),c.applyFromCharCode(H)}(_=c.transformTo(w.uint8array?"uint8array":"array",_))},c.inherits(A,N),A.prototype.processChunk=function(_){var o=c.transformTo(w.uint8array?"uint8array":"array",_.data);if(this.leftOver&&this.leftOver.length){if(w.uint8array){var b=o;(o=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),o.set(b,this.leftOver.length)}else o=this.leftOver.concat(o);this.leftOver=null}var E=function(S,I){var H;for((I=I||S.length)>S.length&&(I=S.length),H=I-1;0<=H&&128==(192&S[H]);)H--;return H<0||0===H?I:H+u[S[H]]>I?H:I}(o),v=o;E!==o.length&&(w.uint8array?(v=o.subarray(0,E),this.leftOver=o.subarray(E,o.length)):(v=o.slice(0,E),this.leftOver=o.slice(E,o.length))),this.push({data:n.utf8decode(v),meta:_.meta})},A.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=A,c.inherits(k,N),k.prototype.processChunk=function(_){this.push({data:n.utf8encode(_.data),meta:_.meta})},n.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(U,L,n){"use strict";var c=U("./support"),w=U("./base64"),g=U("./nodejsUtils"),N=U("./external");function u(b){return b}function V(b,E){for(var v=0;v<b.length;++v)E[v]=255&b.charCodeAt(v);return E}U("setimmediate"),n.newBlob=function(b,E){n.checkSupport("blob");try{return new Blob([b],{type:E})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(b),v.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var A={stringifyByChunk:function(b,E,v){var S=[],I=0,H=b.length;if(H<=v)return String.fromCharCode.apply(null,b);for(;I<H;)S.push(String.fromCharCode.apply(null,"array"===E||"nodebuffer"===E?b.slice(I,Math.min(I+v,H)):b.subarray(I,Math.min(I+v,H)))),I+=v;return S.join("")},stringifyByChar:function(b){for(var E="",v=0;v<b.length;v++)E+=String.fromCharCode(b[v]);return E},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&1===String.fromCharCode.apply(null,g.allocBuffer(1)).length}catch{return!1}}()}};function k(b){var E=65536,v=n.getTypeOf(b),S=!0;if("uint8array"===v?S=A.applyCanBeUsed.uint8array:"nodebuffer"===v&&(S=A.applyCanBeUsed.nodebuffer),S)for(;1<E;)try{return A.stringifyByChunk(b,v,E)}catch{E=Math.floor(E/2)}return A.stringifyByChar(b)}function _(b,E){for(var v=0;v<b.length;v++)E[v]=b[v];return E}n.applyFromCharCode=k;var o={};o.string={string:u,array:function(b){return V(b,new Array(b.length))},arraybuffer:function(b){return o.string.uint8array(b).buffer},uint8array:function(b){return V(b,new Uint8Array(b.length))},nodebuffer:function(b){return V(b,g.allocBuffer(b.length))}},o.array={string:k,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return g.newBufferFrom(b)}},o.arraybuffer={string:function(b){return k(new Uint8Array(b))},array:function(b){return _(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return g.newBufferFrom(new Uint8Array(b))}},o.uint8array={string:k,array:function(b){return _(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return g.newBufferFrom(b)}},o.nodebuffer={string:k,array:function(b){return _(b,new Array(b.length))},arraybuffer:function(b){return o.nodebuffer.uint8array(b).buffer},uint8array:function(b){return _(b,new Uint8Array(b.length))},nodebuffer:u},n.transformTo=function(b,E){if(E=E||"",!b)return E;n.checkSupport(b);var v=n.getTypeOf(E);return o[v][b](E)},n.resolve=function(b){for(var E=b.split("/"),v=[],S=0;S<E.length;S++){var I=E[S];"."===I||""===I&&0!==S&&S!==E.length-1||(".."===I?v.pop():v.push(I))}return v.join("/")},n.getTypeOf=function(b){return"string"==typeof b?"string":"[object Array]"===Object.prototype.toString.call(b)?"array":c.nodebuffer&&g.isBuffer(b)?"nodebuffer":c.uint8array&&b instanceof Uint8Array?"uint8array":c.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!c[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var E,v,S="";for(v=0;v<(b||"").length;v++)S+="\\x"+((E=b.charCodeAt(v))<16?"0":"")+E.toString(16).toUpperCase();return S},n.delay=function(b,E,v){setImmediate(function(){b.apply(v||null,E||[])})},n.inherits=function(b,E){function v(){}v.prototype=E.prototype,b.prototype=new v},n.extend=function(){var b,E,v={};for(b=0;b<arguments.length;b++)for(E in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],E)&&void 0===v[E]&&(v[E]=arguments[b][E]);return v},n.prepareContent=function(b,E,v,S,I){return N.Promise.resolve(E).then(function(H){return c.blob&&(H instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(H)))&&typeof FileReader<"u"?new N.Promise(function(K,ie){var Z=new FileReader;Z.onload=function(me){K(me.target.result)},Z.onerror=function(me){ie(me.target.error)},Z.readAsArrayBuffer(H)}):H}).then(function(H){var ie,K=n.getTypeOf(H);return K?("arraybuffer"===K?H=n.transformTo("uint8array",H):"string"===K&&(I?H=w.decode(H):v&&!0!==S&&(H=V(ie=H,c.uint8array?new Uint8Array(ie.length):new Array(ie.length)))),H):N.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(U,L,n){"use strict";var c=U("./reader/readerFor"),w=U("./utils"),g=U("./signature"),N=U("./zipEntry"),u=U("./support");function V(A){this.files=[],this.loadOptions=A}V.prototype={checkSignature:function(A){if(!this.reader.readAndCheckSignature(A)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+w.pretty(k)+", expected "+w.pretty(A)+")")}},isSignature:function(A,k){var _=this.reader.index;this.reader.setIndex(A);var o=this.reader.readString(4)===k;return this.reader.setIndex(_),o},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var A=this.reader.readData(this.zipCommentLength),_=w.transformTo(u.uint8array?"uint8array":"array",A);this.zipComment=this.loadOptions.decodeFileName(_)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var A,k,_,o=this.zip64EndOfCentralSize-44;0<o;)A=this.reader.readInt(2),k=this.reader.readInt(4),_=this.reader.readData(k),this.zip64ExtensibleData[A]={id:A,length:k,value:_}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var A,k;for(A=0;A<this.files.length;A++)this.reader.setIndex((k=this.files[A]).localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var A;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)(A=new N({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(A);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var A=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(A<0)throw this.isSignature(0,g.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(A);var k=A;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===w.MAX_VALUE_16BITS||this.diskWithCentralDirStart===w.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===w.MAX_VALUE_16BITS||this.centralDirRecords===w.MAX_VALUE_16BITS||this.centralDirSize===w.MAX_VALUE_32BITS||this.centralDirOffset===w.MAX_VALUE_32BITS){if(this.zip64=!0,(A=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(A),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var _=this.centralDirOffset+this.centralDirSize;this.zip64&&(_+=20,_+=12+this.zip64EndOfCentralSize);var o=k-_;if(0<o)this.isSignature(k,g.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(o<0)throw new Error("Corrupted zip: missing "+Math.abs(o)+" bytes.")},prepareReader:function(A){this.reader=c(A)},load:function(A){this.prepareReader(A),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},L.exports=V},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(U,L,n){"use strict";var c=U("./reader/readerFor"),w=U("./utils"),g=U("./compressedObject"),N=U("./crc32"),u=U("./utf8"),V=U("./compressions"),A=U("./support");function k(_,o){this.options=_,this.loadOptions=o}k.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(_){var o,b;if(_.skip(22),this.fileNameLength=_.readInt(2),b=_.readInt(2),this.fileName=_.readData(this.fileNameLength),_.skip(b),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(o=function(E){for(var v in V)if(Object.prototype.hasOwnProperty.call(V,v)&&V[v].magic===E)return V[v];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+w.pretty(this.compressionMethod)+" unknown (inner file : "+w.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,o,_.readData(this.compressedSize))},readCentralPart:function(_){this.versionMadeBy=_.readInt(2),_.skip(2),this.bitFlag=_.readInt(2),this.compressionMethod=_.readString(2),this.date=_.readDate(),this.crc32=_.readInt(4),this.compressedSize=_.readInt(4),this.uncompressedSize=_.readInt(4);var o=_.readInt(2);if(this.extraFieldsLength=_.readInt(2),this.fileCommentLength=_.readInt(2),this.diskNumberStart=_.readInt(2),this.internalFileAttributes=_.readInt(2),this.externalFileAttributes=_.readInt(4),this.localHeaderOffset=_.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");_.skip(o),this.readExtraFields(_),this.parseZIP64ExtraField(_),this.fileComment=_.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var _=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==_&&(this.dosPermissions=63&this.externalFileAttributes),3==_&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var _=c(this.extraFields[1].value);this.uncompressedSize===w.MAX_VALUE_32BITS&&(this.uncompressedSize=_.readInt(8)),this.compressedSize===w.MAX_VALUE_32BITS&&(this.compressedSize=_.readInt(8)),this.localHeaderOffset===w.MAX_VALUE_32BITS&&(this.localHeaderOffset=_.readInt(8)),this.diskNumberStart===w.MAX_VALUE_32BITS&&(this.diskNumberStart=_.readInt(4))}},readExtraFields:function(_){var o,b,E,v=_.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});_.index+4<v;)o=_.readInt(2),b=_.readInt(2),E=_.readData(b),this.extraFields[o]={id:o,length:b,value:E};_.setIndex(v)},handleUTF8:function(){var _=A.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var o=this.findExtraFieldUnicodePath();if(null!==o)this.fileNameStr=o;else{var b=w.transformTo(_,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var E=this.findExtraFieldUnicodeComment();if(null!==E)this.fileCommentStr=E;else{var v=w.transformTo(_,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var _=this.extraFields[28789];if(_){var o=c(_.value);return 1!==o.readInt(1)||N(this.fileName)!==o.readInt(4)?null:u.utf8decode(o.readData(_.length-5))}return null},findExtraFieldUnicodeComment:function(){var _=this.extraFields[25461];if(_){var o=c(_.value);return 1!==o.readInt(1)||N(this.fileComment)!==o.readInt(4)?null:u.utf8decode(o.readData(_.length-5))}return null}},L.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(U,L,n){"use strict";function c(o,b,E){this.name=o,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=b,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var w=U("./stream/StreamHelper"),g=U("./stream/DataWorker"),N=U("./utf8"),u=U("./compressedObject"),V=U("./stream/GenericWorker");c.prototype={internalStream:function(o){var b=null,E="string";try{if(!o)throw new Error("No output type specified.");var v="string"===(E=o.toLowerCase())||"text"===E;"binarystring"!==E&&"text"!==E||(E="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!v&&(b=b.pipe(new N.Utf8EncodeWorker)),!S&&v&&(b=b.pipe(new N.Utf8DecodeWorker))}catch(I){(b=new V("error")).error(I)}return new w(b,E,"")},async:function(o,b){return this.internalStream(o).accumulate(b)},nodeStream:function(o,b){return this.internalStream(o||"nodebuffer").toNodejsStream(b)},_compressWorker:function(o,b){if(this._data instanceof u&&this._data.compression.magic===o.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new N.Utf8EncodeWorker)),u.createWorkerFrom(E,o,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof V?this._data:new g(this._data)}};for(var A=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},_=0;_<A.length;_++)c.prototype[A[_]]=k;L.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(U,L,n){(function(c){"use strict";var w,g,N=c.MutationObserver||c.WebKitMutationObserver;if(N){var u=0,V=new N(o),A=c.document.createTextNode("");V.observe(A,{characterData:!0}),w=function(){A.data=u=++u%2}}else if(c.setImmediate||void 0===c.MessageChannel)w="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var b=c.document.createElement("script");b.onreadystatechange=function(){o(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},c.document.documentElement.appendChild(b)}:function(){setTimeout(o,0)};else{var k=new c.MessageChannel;k.port1.onmessage=o,w=function(){k.port2.postMessage(0)}}var _=[];function o(){var b,E;g=!0;for(var v=_.length;v;){for(E=_,_=[],b=-1;++b<v;)E[b]();v=_.length}g=!1}L.exports=function(b){1!==_.push(b)||g||w()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(U,L,n){"use strict";var c=U("immediate");function w(){}var g={},N=["REJECTED"],u=["FULFILLED"],V=["PENDING"];function A(v){if("function"!=typeof v)throw new TypeError("resolver must be a function");this.state=V,this.queue=[],this.outcome=void 0,v!==w&&b(this,v)}function k(v,S,I){this.promise=v,"function"==typeof S&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),"function"==typeof I&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function _(v,S,I){c(function(){var H;try{H=S(I)}catch(K){return g.reject(v,K)}H===v?g.reject(v,new TypeError("Cannot resolve promise with itself")):g.resolve(v,H)})}function o(v){var S=v&&v.then;if(v&&("object"==typeof v||"function"==typeof v)&&"function"==typeof S)return function(){S.apply(v,arguments)}}function b(v,S){var I=!1;function H(Z){I||(I=!0,g.reject(v,Z))}function K(Z){I||(I=!0,g.resolve(v,Z))}var ie=E(function(){S(K,H)});"error"===ie.status&&H(ie.value)}function E(v,S){var I={};try{I.value=v(S),I.status="success"}catch(H){I.status="error",I.value=H}return I}(L.exports=A).prototype.finally=function(v){if("function"!=typeof v)return this;var S=this.constructor;return this.then(function(I){return S.resolve(v()).then(function(){return I})},function(I){return S.resolve(v()).then(function(){throw I})})},A.prototype.catch=function(v){return this.then(null,v)},A.prototype.then=function(v,S){if("function"!=typeof v&&this.state===u||"function"!=typeof S&&this.state===N)return this;var I=new this.constructor(w);return this.state!==V?_(I,this.state===u?v:S,this.outcome):this.queue.push(new k(I,v,S)),I},k.prototype.callFulfilled=function(v){g.resolve(this.promise,v)},k.prototype.otherCallFulfilled=function(v){_(this.promise,this.onFulfilled,v)},k.prototype.callRejected=function(v){g.reject(this.promise,v)},k.prototype.otherCallRejected=function(v){_(this.promise,this.onRejected,v)},g.resolve=function(v,S){var I=E(o,S);if("error"===I.status)return g.reject(v,I.value);var H=I.value;if(H)b(v,H);else{v.state=u,v.outcome=S;for(var K=-1,ie=v.queue.length;++K<ie;)v.queue[K].callFulfilled(S)}return v},g.reject=function(v,S){v.state=N,v.outcome=S;for(var I=-1,H=v.queue.length;++I<H;)v.queue[I].callRejected(S);return v},A.resolve=function(v){return v instanceof this?v:g.resolve(new this(w),v)},A.reject=function(v){var S=new this(w);return g.reject(S,v)},A.all=function(v){var S=this;if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var I=v.length,H=!1;if(!I)return this.resolve([]);for(var K=new Array(I),ie=0,Z=-1,me=new this(w);++Z<I;)ne(v[Z],Z);return me;function ne(_e,Ve){S.resolve(_e).then(function(O){K[Ve]=O,++ie!==I||H||(H=!0,g.resolve(me,K))},function(O){H||(H=!0,g.reject(me,O))})}},A.race=function(v){if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var I=v.length,H=!1;if(!I)return this.resolve([]);for(var K=-1,ie=new this(w);++K<I;)this.resolve(v[K]).then(function(me){H||(H=!0,g.resolve(ie,me))},function(me){H||(H=!0,g.reject(ie,me))});return ie}},{immediate:36}],38:[function(U,L,n){"use strict";var c={};(0,U("./lib/utils/common").assign)(c,U("./lib/deflate"),U("./lib/inflate"),U("./lib/zlib/constants")),L.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(U,L,n){"use strict";var c=U("./zlib/deflate"),w=U("./utils/common"),g=U("./utils/strings"),N=U("./zlib/messages"),u=U("./zlib/zstream"),V=Object.prototype.toString,A=0,k=-1,_=0,o=8;function b(v){if(!(this instanceof b))return new b(v);this.options=w.assign({level:k,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},v||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var I=c.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(I!==A)throw new Error(N[I]);if(S.header&&c.deflateSetHeader(this.strm,S.header),S.dictionary){var H;if(H="string"==typeof S.dictionary?g.string2buf(S.dictionary):"[object ArrayBuffer]"===V.call(S.dictionary)?new Uint8Array(S.dictionary):S.dictionary,(I=c.deflateSetDictionary(this.strm,H))!==A)throw new Error(N[I]);this._dict_set=!0}}function E(v,S){var I=new b(S);if(I.push(v,!0),I.err)throw I.msg||N[I.err];return I.result}b.prototype.push=function(v,S){var I,H,K=this.strm,ie=this.options.chunkSize;if(this.ended)return!1;H=S===~~S?S:!0===S?4:0,K.input="string"==typeof v?g.string2buf(v):"[object ArrayBuffer]"===V.call(v)?new Uint8Array(v):v,K.next_in=0,K.avail_in=K.input.length;do{if(0===K.avail_out&&(K.output=new w.Buf8(ie),K.next_out=0,K.avail_out=ie),1!==(I=c.deflate(K,H))&&I!==A)return this.onEnd(I),!(this.ended=!0);0!==K.avail_out&&(0!==K.avail_in||4!==H&&2!==H)||this.onData("string"===this.options.to?g.buf2binstring(w.shrinkBuf(K.output,K.next_out)):w.shrinkBuf(K.output,K.next_out))}while((0<K.avail_in||0===K.avail_out)&&1!==I);return 4===H?(I=c.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===A):2!==H||(this.onEnd(A),!(K.avail_out=0))},b.prototype.onData=function(v){this.chunks.push(v)},b.prototype.onEnd=function(v){v===A&&(this.result="string"===this.options.to?this.chunks.join(""):w.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},n.Deflate=b,n.deflate=E,n.deflateRaw=function(v,S){return(S=S||{}).raw=!0,E(v,S)},n.gzip=function(v,S){return(S=S||{}).gzip=!0,E(v,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(U,L,n){"use strict";var c=U("./zlib/inflate"),w=U("./utils/common"),g=U("./utils/strings"),N=U("./zlib/constants"),u=U("./zlib/messages"),V=U("./zlib/zstream"),A=U("./zlib/gzheader"),k=Object.prototype.toString;function _(b){if(!(this instanceof _))return new _(b);this.options=w.assign({chunkSize:16384,windowBits:0,to:""},b||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,0===E.windowBits&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||b&&b.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&!(15&E.windowBits)&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new V,this.strm.avail_out=0;var v=c.inflateInit2(this.strm,E.windowBits);if(v!==N.Z_OK)throw new Error(u[v]);this.header=new A,c.inflateGetHeader(this.strm,this.header)}function o(b,E){var v=new _(E);if(v.push(b,!0),v.err)throw v.msg||u[v.err];return v.result}_.prototype.push=function(b,E){var v,S,I,H,K,ie,Z=this.strm,me=this.options.chunkSize,ne=this.options.dictionary,_e=!1;if(this.ended)return!1;S=E===~~E?E:!0===E?N.Z_FINISH:N.Z_NO_FLUSH,Z.input="string"==typeof b?g.binstring2buf(b):"[object ArrayBuffer]"===k.call(b)?new Uint8Array(b):b,Z.next_in=0,Z.avail_in=Z.input.length;do{if(0===Z.avail_out&&(Z.output=new w.Buf8(me),Z.next_out=0,Z.avail_out=me),(v=c.inflate(Z,N.Z_NO_FLUSH))===N.Z_NEED_DICT&&ne&&(ie="string"==typeof ne?g.string2buf(ne):"[object ArrayBuffer]"===k.call(ne)?new Uint8Array(ne):ne,v=c.inflateSetDictionary(this.strm,ie)),v===N.Z_BUF_ERROR&&!0===_e&&(v=N.Z_OK,_e=!1),v!==N.Z_STREAM_END&&v!==N.Z_OK)return this.onEnd(v),!(this.ended=!0);Z.next_out&&(0!==Z.avail_out&&v!==N.Z_STREAM_END&&(0!==Z.avail_in||S!==N.Z_FINISH&&S!==N.Z_SYNC_FLUSH)||("string"===this.options.to?(I=g.utf8border(Z.output,Z.next_out),H=Z.next_out-I,K=g.buf2string(Z.output,I),Z.next_out=H,Z.avail_out=me-H,H&&w.arraySet(Z.output,Z.output,I,H,0),this.onData(K)):this.onData(w.shrinkBuf(Z.output,Z.next_out)))),0===Z.avail_in&&0===Z.avail_out&&(_e=!0)}while((0<Z.avail_in||0===Z.avail_out)&&v!==N.Z_STREAM_END);return v===N.Z_STREAM_END&&(S=N.Z_FINISH),S===N.Z_FINISH?(v=c.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===N.Z_OK):S!==N.Z_SYNC_FLUSH||(this.onEnd(N.Z_OK),!(Z.avail_out=0))},_.prototype.onData=function(b){this.chunks.push(b)},_.prototype.onEnd=function(b){b===N.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):w.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=_,n.inflate=o,n.inflateRaw=function(b,E){return(E=E||{}).raw=!0,o(b,E)},n.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(U,L,n){"use strict";var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(N){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var V=u.shift();if(V){if("object"!=typeof V)throw new TypeError(V+"must be non-object");for(var A in V)V.hasOwnProperty(A)&&(N[A]=V[A])}}return N},n.shrinkBuf=function(N,u){return N.length===u?N:N.subarray?N.subarray(0,u):(N.length=u,N)};var w={arraySet:function(N,u,V,A,k){if(u.subarray&&N.subarray)N.set(u.subarray(V,V+A),k);else for(var _=0;_<A;_++)N[k+_]=u[V+_]},flattenChunks:function(N){var u,V,A,k,_,o;for(u=A=0,V=N.length;u<V;u++)A+=N[u].length;for(o=new Uint8Array(A),u=k=0,V=N.length;u<V;u++)o.set(_=N[u],k),k+=_.length;return o}},g={arraySet:function(N,u,V,A,k){for(var _=0;_<A;_++)N[k+_]=u[V+_]},flattenChunks:function(N){return[].concat.apply([],N)}};n.setTyped=function(N){N?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,w)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,g))},n.setTyped(c)},{}],42:[function(U,L,n){"use strict";var c=U("./common"),w=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch{w=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{g=!1}for(var N=new c.Buf8(256),u=0;u<256;u++)N[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function V(A,k){if(k<65537&&(A.subarray&&g||!A.subarray&&w))return String.fromCharCode.apply(null,c.shrinkBuf(A,k));for(var _="",o=0;o<k;o++)_+=String.fromCharCode(A[o]);return _}N[254]=N[254]=1,n.string2buf=function(A){var k,_,o,b,E,v=A.length,S=0;for(b=0;b<v;b++)55296==(64512&(_=A.charCodeAt(b)))&&b+1<v&&56320==(64512&(o=A.charCodeAt(b+1)))&&(_=65536+(_-55296<<10)+(o-56320),b++),S+=_<128?1:_<2048?2:_<65536?3:4;for(k=new c.Buf8(S),b=E=0;E<S;b++)55296==(64512&(_=A.charCodeAt(b)))&&b+1<v&&56320==(64512&(o=A.charCodeAt(b+1)))&&(_=65536+(_-55296<<10)+(o-56320),b++),_<128?k[E++]=_:(_<2048?k[E++]=192|_>>>6:(_<65536?k[E++]=224|_>>>12:(k[E++]=240|_>>>18,k[E++]=128|_>>>12&63),k[E++]=128|_>>>6&63),k[E++]=128|63&_);return k},n.buf2binstring=function(A){return V(A,A.length)},n.binstring2buf=function(A){for(var k=new c.Buf8(A.length),_=0,o=k.length;_<o;_++)k[_]=A.charCodeAt(_);return k},n.buf2string=function(A,k){var _,o,b,E,v=k||A.length,S=new Array(2*v);for(_=o=0;_<v;)if((b=A[_++])<128)S[o++]=b;else if(4<(E=N[b]))S[o++]=65533,_+=E-1;else{for(b&=2===E?31:3===E?15:7;1<E&&_<v;)b=b<<6|63&A[_++],E--;1<E?S[o++]=65533:b<65536?S[o++]=b:(S[o++]=55296|(b-=65536)>>10&1023,S[o++]=56320|1023&b)}return V(S,o)},n.utf8border=function(A,k){var _;for((k=k||A.length)>A.length&&(k=A.length),_=k-1;0<=_&&128==(192&A[_]);)_--;return _<0||0===_?k:_+N[A[_]]>k?_:k}},{"./common":41}],43:[function(U,L,n){"use strict";L.exports=function(c,w,g,N){for(var u=65535&c,V=c>>>16&65535,A=0;0!==g;){for(g-=A=2e3<g?2e3:g;V=V+(u=u+w[N++]|0)|0,--A;);u%=65521,V%=65521}return u|V<<16}},{}],44:[function(U,L,n){"use strict";L.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(U,L,n){"use strict";var c=function(){for(var w,g=[],N=0;N<256;N++){w=N;for(var u=0;u<8;u++)w=1&w?3988292384^w>>>1:w>>>1;g[N]=w}return g}();L.exports=function(w,g,N,u){var V=c,A=u+N;w^=-1;for(var k=u;k<A;k++)w=w>>>8^V[255&(w^g[k])];return~w}},{}],46:[function(U,L,n){"use strict";var c,w=U("../utils/common"),g=U("./trees"),N=U("./adler32"),u=U("./crc32"),V=U("./messages"),A=0,_=0,o=-2,v=2,S=8,H=286,K=30,ie=19,Z=2*H+1,me=15,ne=3,_e=258,Ve=_e+ne+1,O=42,J=113;function Ie(f,oe){return f.msg=V[oe],oe}function Se(f){return(f<<1)-(4<f?9:0)}function Oe(f){for(var oe=f.length;0<=--oe;)f[oe]=0}function ee(f){var oe=f.state,se=oe.pending;se>f.avail_out&&(se=f.avail_out),0!==se&&(w.arraySet(f.output,oe.pending_buf,oe.pending_out,se,f.next_out),f.next_out+=se,oe.pending_out+=se,f.total_out+=se,f.avail_out-=se,oe.pending-=se,0===oe.pending&&(oe.pending_out=0))}function Y(f,oe){g._tr_flush_block(f,0<=f.block_start?f.block_start:-1,f.strstart-f.block_start,oe),f.block_start=f.strstart,ee(f.strm)}function Ue(f,oe){f.pending_buf[f.pending++]=oe}function Ce(f,oe){f.pending_buf[f.pending++]=oe>>>8&255,f.pending_buf[f.pending++]=255&oe}function Ee(f,oe){var se,P,x=f.max_chain_length,C=f.strstart,W=f.prev_length,F=f.nice_match,T=f.strstart>f.w_size-Ve?f.strstart-(f.w_size-Ve):0,re=f.window,z=f.w_mask,$=f.prev,ce=f.strstart+_e,Pe=re[C+W-1],Ke=re[C+W];f.prev_length>=f.good_match&&(x>>=2),F>f.lookahead&&(F=f.lookahead);do{if(re[(se=oe)+W]===Ke&&re[se+W-1]===Pe&&re[se]===re[C]&&re[++se]===re[C+1]){C+=2,se++;do{}while(re[++C]===re[++se]&&re[++C]===re[++se]&&re[++C]===re[++se]&&re[++C]===re[++se]&&re[++C]===re[++se]&&re[++C]===re[++se]&&re[++C]===re[++se]&&re[++C]===re[++se]&&C<ce);if(P=_e-(ce-C),C=ce-_e,W<P){if(f.match_start=oe,F<=(W=P))break;Pe=re[C+W-1],Ke=re[C+W]}}}while((oe=$[oe&z])>T&&0!=--x);return W<=f.lookahead?W:f.lookahead}function rt(f){var oe,se,P,x,C,W,F,T,re,z,$=f.w_size;do{if(x=f.window_size-f.lookahead-f.strstart,f.strstart>=$+($-Ve)){for(w.arraySet(f.window,f.window,$,$,0),f.match_start-=$,f.strstart-=$,f.block_start-=$,oe=se=f.hash_size;P=f.head[--oe],f.head[oe]=$<=P?P-$:0,--se;);for(oe=se=$;P=f.prev[--oe],f.prev[oe]=$<=P?P-$:0,--se;);x+=$}if(0===f.strm.avail_in)break;if(F=f.window,T=f.strstart+f.lookahead,z=void 0,(re=x)<(z=(W=f.strm).avail_in)&&(z=re),se=0===z?0:(W.avail_in-=z,w.arraySet(F,W.input,W.next_in,z,T),1===W.state.wrap?W.adler=N(W.adler,F,z,T):2===W.state.wrap&&(W.adler=u(W.adler,F,z,T)),W.next_in+=z,W.total_in+=z,z),f.lookahead+=se,f.lookahead+f.insert>=ne)for(f.ins_h=f.window[C=f.strstart-f.insert],f.ins_h=(f.ins_h<<f.hash_shift^f.window[C+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[C+ne-1])&f.hash_mask,f.prev[C&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=C,C++,f.insert--,!(f.lookahead+f.insert<ne)););}while(f.lookahead<Ve&&0!==f.strm.avail_in)}function _t(f,oe){for(var se,P;;){if(f.lookahead<Ve){if(rt(f),f.lookahead<Ve&&oe===A)return 1;if(0===f.lookahead)break}if(se=0,f.lookahead>=ne&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,se=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),0!==se&&f.strstart-se<=f.w_size-Ve&&(f.match_length=Ee(f,se)),f.match_length>=ne)if(P=g._tr_tally(f,f.strstart-f.match_start,f.match_length-ne),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=ne){for(f.match_length--;f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,se=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart,0!=--f.match_length;);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else P=g._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(P&&(Y(f,!1),0===f.strm.avail_out))return 1}return f.insert=f.strstart<ne-1?f.strstart:ne-1,4===oe?(Y(f,!0),0===f.strm.avail_out?3:4):f.last_lit&&(Y(f,!1),0===f.strm.avail_out)?1:2}function Ge(f,oe){for(var se,P,x;;){if(f.lookahead<Ve){if(rt(f),f.lookahead<Ve&&oe===A)return 1;if(0===f.lookahead)break}if(se=0,f.lookahead>=ne&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,se=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=ne-1,0!==se&&f.prev_length<f.max_lazy_match&&f.strstart-se<=f.w_size-Ve&&(f.match_length=Ee(f,se),f.match_length<=5&&(1===f.strategy||f.match_length===ne&&4096<f.strstart-f.match_start)&&(f.match_length=ne-1)),f.prev_length>=ne&&f.match_length<=f.prev_length){for(x=f.strstart+f.lookahead-ne,P=g._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-ne),f.lookahead-=f.prev_length-1,f.prev_length-=2;++f.strstart<=x&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+ne-1])&f.hash_mask,se=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),0!=--f.prev_length;);if(f.match_available=0,f.match_length=ne-1,f.strstart++,P&&(Y(f,!1),0===f.strm.avail_out))return 1}else if(f.match_available){if((P=g._tr_tally(f,0,f.window[f.strstart-1]))&&Y(f,!1),f.strstart++,f.lookahead--,0===f.strm.avail_out)return 1}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(P=g._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<ne-1?f.strstart:ne-1,4===oe?(Y(f,!0),0===f.strm.avail_out?3:4):f.last_lit&&(Y(f,!1),0===f.strm.avail_out)?1:2}function Ye(f,oe,se,P,x){this.good_length=f,this.max_lazy=oe,this.nice_length=se,this.max_chain=P,this.func=x}function vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*Z),this.dyn_dtree=new w.Buf16(2*(2*K+1)),this.bl_tree=new w.Buf16(2*(2*ie+1)),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(me+1),this.heap=new w.Buf16(2*H+1),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*H+1),Oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(f){var oe;return f&&f.state?(f.total_in=f.total_out=0,f.data_type=v,(oe=f.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?O:J,f.adler=2===oe.wrap?0:1,oe.last_flush=A,g._tr_init(oe),_):Ie(f,o)}function Nt(f){var se,oe=at(f);return oe===_&&((se=f.state).window_size=2*se.w_size,Oe(se.head),se.max_lazy_match=c[se.level].max_lazy,se.good_match=c[se.level].good_length,se.nice_match=c[se.level].nice_length,se.max_chain_length=c[se.level].max_chain,se.strstart=0,se.block_start=0,se.lookahead=0,se.insert=0,se.match_length=se.prev_length=ne-1,se.match_available=0,se.ins_h=0),oe}function Et(f,oe,se,P,x,C){if(!f)return o;var W=1;if(-1===oe&&(oe=6),P<0?(W=0,P=-P):15<P&&(W=2,P-=16),x<1||9<x||se!==S||P<8||15<P||oe<0||9<oe||C<0||4<C)return Ie(f,o);8===P&&(P=9);var F=new vt;return(f.state=F).strm=f,F.wrap=W,F.gzhead=null,F.w_bits=P,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=x+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+ne-1)/ne),F.window=new w.Buf8(2*F.w_size),F.head=new w.Buf16(F.hash_size),F.prev=new w.Buf16(F.w_size),F.lit_bufsize=1<<x+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new w.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=oe,F.strategy=C,F.method=se,Nt(f)}c=[new Ye(0,0,0,0,function(f,oe){var se=65535;for(se>f.pending_buf_size-5&&(se=f.pending_buf_size-5);;){if(f.lookahead<=1){if(rt(f),0===f.lookahead&&oe===A)return 1;if(0===f.lookahead)break}f.strstart+=f.lookahead,f.lookahead=0;var P=f.block_start+se;if((0===f.strstart||f.strstart>=P)&&(f.lookahead=f.strstart-P,f.strstart=P,Y(f,!1),0===f.strm.avail_out)||f.strstart-f.block_start>=f.w_size-Ve&&(Y(f,!1),0===f.strm.avail_out))return 1}return f.insert=0,4===oe?(Y(f,!0),0===f.strm.avail_out?3:4):(f.strstart>f.block_start&&Y(f,!1),1)}),new Ye(4,4,8,4,_t),new Ye(4,5,16,8,_t),new Ye(4,6,32,32,_t),new Ye(4,4,16,16,Ge),new Ye(8,16,32,32,Ge),new Ye(8,16,128,128,Ge),new Ye(8,32,128,256,Ge),new Ye(32,128,258,1024,Ge),new Ye(32,258,258,4096,Ge)],n.deflateInit=function(f,oe){return Et(f,oe,S,15,8,0)},n.deflateInit2=Et,n.deflateReset=Nt,n.deflateResetKeep=at,n.deflateSetHeader=function(f,oe){return f&&f.state?2!==f.state.wrap?o:(f.state.gzhead=oe,_):o},n.deflate=function(f,oe){var se,P,x,C;if(!f||!f.state||5<oe||oe<0)return f?Ie(f,o):o;if(P=f.state,!f.output||!f.input&&0!==f.avail_in||666===P.status&&4!==oe)return Ie(f,0===f.avail_out?-5:o);if(P.strm=f,se=P.last_flush,P.last_flush=oe,P.status===O)if(2===P.wrap)f.adler=0,Ue(P,31),Ue(P,139),Ue(P,8),P.gzhead?(Ue(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),Ue(P,255&P.gzhead.time),Ue(P,P.gzhead.time>>8&255),Ue(P,P.gzhead.time>>16&255),Ue(P,P.gzhead.time>>24&255),Ue(P,9===P.level?2:2<=P.strategy||P.level<2?4:0),Ue(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(Ue(P,255&P.gzhead.extra.length),Ue(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(f.adler=u(f.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(Ue(P,0),Ue(P,0),Ue(P,0),Ue(P,0),Ue(P,0),Ue(P,9===P.level?2:2<=P.strategy||P.level<2?4:0),Ue(P,3),P.status=J);else{var W=S+(P.w_bits-8<<4)<<8;W|=(2<=P.strategy||P.level<2?0:P.level<6?1:6===P.level?2:3)<<6,0!==P.strstart&&(W|=32),W+=31-W%31,P.status=J,Ce(P,W),0!==P.strstart&&(Ce(P,f.adler>>>16),Ce(P,65535&f.adler)),f.adler=1}if(69===P.status)if(P.gzhead.extra){for(x=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>x&&(f.adler=u(f.adler,P.pending_buf,P.pending-x,x)),ee(f),x=P.pending,P.pending!==P.pending_buf_size));)Ue(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>x&&(f.adler=u(f.adler,P.pending_buf,P.pending-x,x)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(73===P.status)if(P.gzhead.name){x=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>x&&(f.adler=u(f.adler,P.pending_buf,P.pending-x,x)),ee(f),x=P.pending,P.pending===P.pending_buf_size)){C=1;break}C=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,Ue(P,C)}while(0!==C);P.gzhead.hcrc&&P.pending>x&&(f.adler=u(f.adler,P.pending_buf,P.pending-x,x)),0===C&&(P.gzindex=0,P.status=91)}else P.status=91;if(91===P.status)if(P.gzhead.comment){x=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>x&&(f.adler=u(f.adler,P.pending_buf,P.pending-x,x)),ee(f),x=P.pending,P.pending===P.pending_buf_size)){C=1;break}C=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,Ue(P,C)}while(0!==C);P.gzhead.hcrc&&P.pending>x&&(f.adler=u(f.adler,P.pending_buf,P.pending-x,x)),0===C&&(P.status=103)}else P.status=103;if(103===P.status&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&ee(f),P.pending+2<=P.pending_buf_size&&(Ue(P,255&f.adler),Ue(P,f.adler>>8&255),f.adler=0,P.status=J)):P.status=J),0!==P.pending){if(ee(f),0===f.avail_out)return P.last_flush=-1,_}else if(0===f.avail_in&&Se(oe)<=Se(se)&&4!==oe)return Ie(f,-5);if(666===P.status&&0!==f.avail_in)return Ie(f,-5);if(0!==f.avail_in||0!==P.lookahead||oe!==A&&666!==P.status){var F=2===P.strategy?function(T,re){for(var z;;){if(0===T.lookahead&&(rt(T),0===T.lookahead)){if(re===A)return 1;break}if(T.match_length=0,z=g._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,z&&(Y(T,!1),0===T.strm.avail_out))return 1}return T.insert=0,4===re?(Y(T,!0),0===T.strm.avail_out?3:4):T.last_lit&&(Y(T,!1),0===T.strm.avail_out)?1:2}(P,oe):3===P.strategy?function(T,re){for(var z,$,ce,Pe,Ke=T.window;;){if(T.lookahead<=_e){if(rt(T),T.lookahead<=_e&&re===A)return 1;if(0===T.lookahead)break}if(T.match_length=0,T.lookahead>=ne&&0<T.strstart&&($=Ke[ce=T.strstart-1])===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]){Pe=T.strstart+_e;do{}while($===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]&&$===Ke[++ce]&&ce<Pe);T.match_length=_e-(Pe-ce),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=ne?(z=g._tr_tally(T,1,T.match_length-ne),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):(z=g._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),z&&(Y(T,!1),0===T.strm.avail_out))return 1}return T.insert=0,4===re?(Y(T,!0),0===T.strm.avail_out?3:4):T.last_lit&&(Y(T,!1),0===T.strm.avail_out)?1:2}(P,oe):c[P.level].func(P,oe);if(3!==F&&4!==F||(P.status=666),1===F||3===F)return 0===f.avail_out&&(P.last_flush=-1),_;if(2===F&&(1===oe?g._tr_align(P):5!==oe&&(g._tr_stored_block(P,0,0,!1),3===oe&&(Oe(P.head),0===P.lookahead&&(P.strstart=0,P.block_start=0,P.insert=0))),ee(f),0===f.avail_out))return P.last_flush=-1,_}return 4!==oe?_:P.wrap<=0?1:(2===P.wrap?(Ue(P,255&f.adler),Ue(P,f.adler>>8&255),Ue(P,f.adler>>16&255),Ue(P,f.adler>>24&255),Ue(P,255&f.total_in),Ue(P,f.total_in>>8&255),Ue(P,f.total_in>>16&255),Ue(P,f.total_in>>24&255)):(Ce(P,f.adler>>>16),Ce(P,65535&f.adler)),ee(f),0<P.wrap&&(P.wrap=-P.wrap),0!==P.pending?_:1)},n.deflateEnd=function(f){var oe;return f&&f.state?(oe=f.state.status)!==O&&69!==oe&&73!==oe&&91!==oe&&103!==oe&&oe!==J&&666!==oe?Ie(f,o):(f.state=null,oe===J?Ie(f,-3):_):o},n.deflateSetDictionary=function(f,oe){var se,P,x,C,W,F,T,re,z=oe.length;if(!f||!f.state||2===(C=(se=f.state).wrap)||1===C&&se.status!==O||se.lookahead)return o;for(1===C&&(f.adler=N(f.adler,oe,z,0)),se.wrap=0,z>=se.w_size&&(0===C&&(Oe(se.head),se.strstart=0,se.block_start=0,se.insert=0),re=new w.Buf8(se.w_size),w.arraySet(re,oe,z-se.w_size,se.w_size,0),oe=re,z=se.w_size),W=f.avail_in,F=f.next_in,T=f.input,f.avail_in=z,f.next_in=0,f.input=oe,rt(se);se.lookahead>=ne;){for(P=se.strstart,x=se.lookahead-(ne-1);se.ins_h=(se.ins_h<<se.hash_shift^se.window[P+ne-1])&se.hash_mask,se.prev[P&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=P,P++,--x;);se.strstart=P,se.lookahead=ne-1,rt(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=ne-1,se.match_available=0,f.next_in=F,f.input=T,f.avail_in=W,se.wrap=C,_},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(U,L,n){"use strict";L.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(U,L,n){"use strict";L.exports=function(c,w){var g,N,u,V,A,k,_,o,b,E,v,S,I,H,K,ie,Z,me,ne,_e,Ve,O,J,m,M;m=c.input,u=(N=c.next_in)+(c.avail_in-5),M=c.output,A=(V=c.next_out)-(w-c.avail_out),k=V+(c.avail_out-257),_=(g=c.state).dmax,o=g.wsize,b=g.whave,E=g.wnext,v=g.window,S=g.hold,I=g.bits,H=g.lencode,K=g.distcode,ie=(1<<g.lenbits)-1,Z=(1<<g.distbits)-1;e:do{I<15&&(S+=m[N++]<<I,S+=m[N++]<<(I+=8),I+=8),me=H[S&ie];t:for(;;){if(S>>>=ne=me>>>24,I-=ne,0==(ne=me>>>16&255))M[V++]=65535&me;else{if(!(16&ne)){if(!(64&ne)){me=H[(65535&me)+(S&(1<<ne)-1)];continue t}if(32&ne){g.mode=12;break e}c.msg="invalid literal/length code",g.mode=30;break e}_e=65535&me,(ne&=15)&&(I<ne&&(S+=m[N++]<<I,I+=8),_e+=S&(1<<ne)-1,S>>>=ne,I-=ne),I<15&&(S+=m[N++]<<I,S+=m[N++]<<(I+=8),I+=8),me=K[S&Z];s:for(;;){if(S>>>=ne=me>>>24,I-=ne,!(16&(ne=me>>>16&255))){if(!(64&ne)){me=K[(65535&me)+(S&(1<<ne)-1)];continue s}c.msg="invalid distance code",g.mode=30;break e}if(Ve=65535&me,I<(ne&=15)&&(S+=m[N++]<<I,(I+=8)<ne&&(S+=m[N++]<<I,I+=8)),_<(Ve+=S&(1<<ne)-1)){c.msg="invalid distance too far back",g.mode=30;break e}if(S>>>=ne,I-=ne,(ne=V-A)<Ve){if(b<(ne=Ve-ne)&&g.sane){c.msg="invalid distance too far back",g.mode=30;break e}if(J=v,(O=0)===E){if(O+=o-ne,ne<_e){for(_e-=ne;M[V++]=v[O++],--ne;);O=V-Ve,J=M}}else if(E<ne){if(O+=o+E-ne,(ne-=E)<_e){for(_e-=ne;M[V++]=v[O++],--ne;);if(O=0,E<_e){for(_e-=ne=E;M[V++]=v[O++],--ne;);O=V-Ve,J=M}}}else if(O+=E-ne,ne<_e){for(_e-=ne;M[V++]=v[O++],--ne;);O=V-Ve,J=M}for(;2<_e;)M[V++]=J[O++],M[V++]=J[O++],M[V++]=J[O++],_e-=3;_e&&(M[V++]=J[O++],1<_e&&(M[V++]=J[O++]))}else{for(O=V-Ve;M[V++]=M[O++],M[V++]=M[O++],M[V++]=M[O++],2<(_e-=3););_e&&(M[V++]=M[O++],1<_e&&(M[V++]=M[O++]))}break}}break}}while(N<u&&V<k);N-=_e=I>>3,S&=(1<<(I-=_e<<3))-1,c.next_in=N,c.next_out=V,c.avail_in=N<u?u-N+5:5-(N-u),c.avail_out=V<k?k-V+257:257-(V-k),g.hold=S,g.bits=I}},{}],49:[function(U,L,n){"use strict";var c=U("../utils/common"),w=U("./adler32"),g=U("./crc32"),N=U("./inffast"),u=U("./inftrees"),k=0,_=-2,o=1,b=852,E=592;function v(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(O){var J;return O&&O.state?(O.total_in=O.total_out=(J=O.state).total=0,O.msg="",J.wrap&&(O.adler=1&J.wrap),J.mode=o,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new c.Buf32(b),J.distcode=J.distdyn=new c.Buf32(E),J.sane=1,J.back=-1,k):_}function H(O){var J;return O&&O.state?((J=O.state).wsize=0,J.whave=0,J.wnext=0,I(O)):_}function K(O,J){var m,M;return O&&O.state?(M=O.state,J<0?(m=0,J=-J):(m=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?_:(null!==M.window&&M.wbits!==J&&(M.window=null),M.wrap=m,M.wbits=J,H(O))):_}function ie(O,J){var m,M;return O?(M=new S,(O.state=M).window=null,(m=K(O,J))!==k&&(O.state=null),m):_}var Z,me,ne=!0;function _e(O){if(ne){var J;for(Z=new c.Buf32(512),me=new c.Buf32(32),J=0;J<144;)O.lens[J++]=8;for(;J<256;)O.lens[J++]=9;for(;J<280;)O.lens[J++]=7;for(;J<288;)O.lens[J++]=8;for(u(1,O.lens,0,288,Z,0,O.work,{bits:9}),J=0;J<32;)O.lens[J++]=5;u(2,O.lens,0,32,me,0,O.work,{bits:5}),ne=!1}O.lencode=Z,O.lenbits=9,O.distcode=me,O.distbits=5}function Ve(O,J,m,M){var ue,R=O.state;return null===R.window&&(R.wsize=1<<R.wbits,R.wnext=0,R.whave=0,R.window=new c.Buf8(R.wsize)),M>=R.wsize?(c.arraySet(R.window,J,m-R.wsize,R.wsize,0),R.wnext=0,R.whave=R.wsize):(M<(ue=R.wsize-R.wnext)&&(ue=M),c.arraySet(R.window,J,m-M,ue,R.wnext),(M-=ue)?(c.arraySet(R.window,J,m-M,M,0),R.wnext=M,R.whave=R.wsize):(R.wnext+=ue,R.wnext===R.wsize&&(R.wnext=0),R.whave<R.wsize&&(R.whave+=ue))),0}n.inflateReset=H,n.inflateReset2=K,n.inflateResetKeep=I,n.inflateInit=function(O){return ie(O,15)},n.inflateInit2=ie,n.inflate=function(O,J){var m,M,ue,R,Ie,Se,Oe,ee,Y,Ue,Ce,Ee,rt,_t,Ge,Ye,vt,at,Nt,Et,f,oe,se,P,x=0,C=new c.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&0!==O.avail_in)return _;12===(m=O.state).mode&&(m.mode=13),Ie=O.next_out,ue=O.output,R=O.next_in,M=O.input,ee=m.hold,Y=m.bits,Ue=Se=O.avail_in,Ce=Oe=O.avail_out,oe=k;e:for(;;)switch(m.mode){case o:if(0===m.wrap){m.mode=13;break}for(;Y<16;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(2&m.wrap&&35615===ee){C[m.check=0]=255&ee,C[1]=ee>>>8&255,m.check=g(m.check,C,2,0),Y=ee=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&ee)<<8)+(ee>>8))%31){O.msg="incorrect header check",m.mode=30;break}if(8!=(15&ee)){O.msg="unknown compression method",m.mode=30;break}if(Y-=4,f=8+(15&(ee>>>=4)),0===m.wbits)m.wbits=f;else if(f>m.wbits){O.msg="invalid window size",m.mode=30;break}m.dmax=1<<f,O.adler=m.check=1,m.mode=512&ee?10:12,Y=ee=0;break;case 2:for(;Y<16;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(m.flags=ee,8!=(255&m.flags)){O.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){O.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=ee>>8&1),512&m.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,m.check=g(m.check,C,2,0)),Y=ee=0,m.mode=3;case 3:for(;Y<32;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}m.head&&(m.head.time=ee),512&m.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,C[2]=ee>>>16&255,C[3]=ee>>>24&255,m.check=g(m.check,C,4,0)),Y=ee=0,m.mode=4;case 4:for(;Y<16;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}m.head&&(m.head.xflags=255&ee,m.head.os=ee>>8),512&m.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,m.check=g(m.check,C,2,0)),Y=ee=0,m.mode=5;case 5:if(1024&m.flags){for(;Y<16;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}m.length=ee,m.head&&(m.head.extra_len=ee),512&m.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,m.check=g(m.check,C,2,0)),Y=ee=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(Se<(Ee=m.length)&&(Ee=Se),Ee&&(m.head&&(f=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),c.arraySet(m.head.extra,M,R,Ee,f)),512&m.flags&&(m.check=g(m.check,M,Ee,R)),Se-=Ee,R+=Ee,m.length-=Ee),m.length))break e;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(0===Se)break e;for(Ee=0;f=M[R+Ee++],m.head&&f&&m.length<65536&&(m.head.name+=String.fromCharCode(f)),f&&Ee<Se;);if(512&m.flags&&(m.check=g(m.check,M,Ee,R)),Se-=Ee,R+=Ee,f)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(0===Se)break e;for(Ee=0;f=M[R+Ee++],m.head&&f&&m.length<65536&&(m.head.comment+=String.fromCharCode(f)),f&&Ee<Se;);if(512&m.flags&&(m.check=g(m.check,M,Ee,R)),Se-=Ee,R+=Ee,f)break e}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;Y<16;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(ee!==(65535&m.check)){O.msg="header crc mismatch",m.mode=30;break}Y=ee=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),O.adler=m.check=0,m.mode=12;break;case 10:for(;Y<32;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}O.adler=m.check=v(ee),Y=ee=0,m.mode=11;case 11:if(0===m.havedict)return O.next_out=Ie,O.avail_out=Oe,O.next_in=R,O.avail_in=Se,m.hold=ee,m.bits=Y,2;O.adler=m.check=1,m.mode=12;case 12:if(5===J||6===J)break e;case 13:if(m.last){ee>>>=7&Y,Y-=7&Y,m.mode=27;break}for(;Y<3;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}switch(m.last=1&ee,Y-=1,3&(ee>>>=1)){case 0:m.mode=14;break;case 1:if(_e(m),m.mode=20,6!==J)break;ee>>>=2,Y-=2;break e;case 2:m.mode=17;break;case 3:O.msg="invalid block type",m.mode=30}ee>>>=2,Y-=2;break;case 14:for(ee>>>=7&Y,Y-=7&Y;Y<32;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if((65535&ee)!=(ee>>>16^65535)){O.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&ee,Y=ee=0,m.mode=15,6===J)break e;case 15:m.mode=16;case 16:if(Ee=m.length){if(Se<Ee&&(Ee=Se),Oe<Ee&&(Ee=Oe),0===Ee)break e;c.arraySet(ue,M,R,Ee,Ie),Se-=Ee,R+=Ee,Oe-=Ee,Ie+=Ee,m.length-=Ee;break}m.mode=12;break;case 17:for(;Y<14;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(m.nlen=257+(31&ee),Y-=5,m.ndist=1+(31&(ee>>>=5)),Y-=5,m.ncode=4+(15&(ee>>>=5)),ee>>>=4,Y-=4,286<m.nlen||30<m.ndist){O.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;Y<3;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}m.lens[W[m.have++]]=7&ee,ee>>>=3,Y-=3}for(;m.have<19;)m.lens[W[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,oe=u(0,m.lens,0,19,m.lencode,0,m.work,se={bits:m.lenbits}),m.lenbits=se.bits,oe){O.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;Ye=(x=m.lencode[ee&(1<<m.lenbits)-1])>>>16&255,vt=65535&x,!((Ge=x>>>24)<=Y);){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(vt<16)ee>>>=Ge,Y-=Ge,m.lens[m.have++]=vt;else{if(16===vt){for(P=Ge+2;Y<P;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(ee>>>=Ge,Y-=Ge,0===m.have){O.msg="invalid bit length repeat",m.mode=30;break}f=m.lens[m.have-1],Ee=3+(3&ee),ee>>>=2,Y-=2}else if(17===vt){for(P=Ge+3;Y<P;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}Y-=Ge,f=0,Ee=3+(7&(ee>>>=Ge)),ee>>>=3,Y-=3}else{for(P=Ge+7;Y<P;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}Y-=Ge,f=0,Ee=11+(127&(ee>>>=Ge)),ee>>>=7,Y-=7}if(m.have+Ee>m.nlen+m.ndist){O.msg="invalid bit length repeat",m.mode=30;break}for(;Ee--;)m.lens[m.have++]=f}}if(30===m.mode)break;if(0===m.lens[256]){O.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,oe=u(1,m.lens,0,m.nlen,m.lencode,0,m.work,se={bits:m.lenbits}),m.lenbits=se.bits,oe){O.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,oe=u(2,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,se={bits:m.distbits}),m.distbits=se.bits,oe){O.msg="invalid distances set",m.mode=30;break}if(m.mode=20,6===J)break e;case 20:m.mode=21;case 21:if(6<=Se&&258<=Oe){O.next_out=Ie,O.avail_out=Oe,O.next_in=R,O.avail_in=Se,m.hold=ee,m.bits=Y,N(O,Ce),Ie=O.next_out,ue=O.output,Oe=O.avail_out,R=O.next_in,M=O.input,Se=O.avail_in,ee=m.hold,Y=m.bits,12===m.mode&&(m.back=-1);break}for(m.back=0;Ye=(x=m.lencode[ee&(1<<m.lenbits)-1])>>>16&255,vt=65535&x,!((Ge=x>>>24)<=Y);){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(Ye&&!(240&Ye)){for(at=Ge,Nt=Ye,Et=vt;Ye=(x=m.lencode[Et+((ee&(1<<at+Nt)-1)>>at)])>>>16&255,vt=65535&x,!(at+(Ge=x>>>24)<=Y);){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}ee>>>=at,Y-=at,m.back+=at}if(ee>>>=Ge,Y-=Ge,m.back+=Ge,m.length=vt,0===Ye){m.mode=26;break}if(32&Ye){m.back=-1,m.mode=12;break}if(64&Ye){O.msg="invalid literal/length code",m.mode=30;break}m.extra=15&Ye,m.mode=22;case 22:if(m.extra){for(P=m.extra;Y<P;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}m.length+=ee&(1<<m.extra)-1,ee>>>=m.extra,Y-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;Ye=(x=m.distcode[ee&(1<<m.distbits)-1])>>>16&255,vt=65535&x,!((Ge=x>>>24)<=Y);){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(!(240&Ye)){for(at=Ge,Nt=Ye,Et=vt;Ye=(x=m.distcode[Et+((ee&(1<<at+Nt)-1)>>at)])>>>16&255,vt=65535&x,!(at+(Ge=x>>>24)<=Y);){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}ee>>>=at,Y-=at,m.back+=at}if(ee>>>=Ge,Y-=Ge,m.back+=Ge,64&Ye){O.msg="invalid distance code",m.mode=30;break}m.offset=vt,m.extra=15&Ye,m.mode=24;case 24:if(m.extra){for(P=m.extra;Y<P;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}m.offset+=ee&(1<<m.extra)-1,ee>>>=m.extra,Y-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){O.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(0===Oe)break e;if(m.offset>(Ee=Ce-Oe)){if((Ee=m.offset-Ee)>m.whave&&m.sane){O.msg="invalid distance too far back",m.mode=30;break}rt=Ee>m.wnext?m.wsize-(Ee-=m.wnext):m.wnext-Ee,Ee>m.length&&(Ee=m.length),_t=m.window}else _t=ue,rt=Ie-m.offset,Ee=m.length;for(Oe<Ee&&(Ee=Oe),Oe-=Ee,m.length-=Ee;ue[Ie++]=_t[rt++],--Ee;);0===m.length&&(m.mode=21);break;case 26:if(0===Oe)break e;ue[Ie++]=m.length,Oe--,m.mode=21;break;case 27:if(m.wrap){for(;Y<32;){if(0===Se)break e;Se--,ee|=M[R++]<<Y,Y+=8}if(O.total_out+=Ce-=Oe,m.total+=Ce,Ce&&(O.adler=m.check=m.flags?g(m.check,ue,Ce,Ie-Ce):w(m.check,ue,Ce,Ie-Ce)),Ce=Oe,(m.flags?ee:v(ee))!==m.check){O.msg="incorrect data check",m.mode=30;break}Y=ee=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;Y<32;){if(0===Se)break e;Se--,ee+=M[R++]<<Y,Y+=8}if(ee!==(4294967295&m.total)){O.msg="incorrect length check",m.mode=30;break}Y=ee=0}m.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;default:return _}return O.next_out=Ie,O.avail_out=Oe,O.next_in=R,O.avail_in=Se,m.hold=ee,m.bits=Y,(m.wsize||Ce!==O.avail_out&&m.mode<30&&(m.mode<27||4!==J))&&Ve(O,O.output,O.next_out,Ce-O.avail_out)?(m.mode=31,-4):(Ce-=O.avail_out,O.total_in+=Ue-=O.avail_in,O.total_out+=Ce,m.total+=Ce,m.wrap&&Ce&&(O.adler=m.check=m.flags?g(m.check,ue,Ce,O.next_out-Ce):w(m.check,ue,Ce,O.next_out-Ce)),O.data_type=m.bits+(m.last?64:0)+(12===m.mode?128:0)+(20===m.mode||15===m.mode?256:0),(0==Ue&&0===Ce||4===J)&&oe===k&&(oe=-5),oe)},n.inflateEnd=function(O){if(!O||!O.state)return _;var J=O.state;return J.window&&(J.window=null),O.state=null,k},n.inflateGetHeader=function(O,J){var m;return O&&O.state&&2&(m=O.state).wrap?((m.head=J).done=!1,k):_},n.inflateSetDictionary=function(O,J){var m,M=J.length;return O&&O.state?0!==(m=O.state).wrap&&11!==m.mode?_:11===m.mode&&w(1,J,M,0)!==m.check?-3:Ve(O,J,M,M)?(m.mode=31,-4):(m.havedict=1,k):_},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(U,L,n){"use strict";var c=U("../utils/common"),w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];L.exports=function(V,A,k,_,o,b,E,v){var S,I,H,K,ie,Z,me,ne,_e,Ve=v.bits,O=0,J=0,m=0,M=0,ue=0,R=0,Ie=0,Se=0,Oe=0,ee=0,Y=null,Ue=0,Ce=new c.Buf16(16),Ee=new c.Buf16(16),rt=null,_t=0;for(O=0;O<=15;O++)Ce[O]=0;for(J=0;J<_;J++)Ce[A[k+J]]++;for(ue=Ve,M=15;1<=M&&0===Ce[M];M--);if(M<ue&&(ue=M),0===M)return o[b++]=20971520,o[b++]=20971520,v.bits=1,0;for(m=1;m<M&&0===Ce[m];m++);for(ue<m&&(ue=m),O=Se=1;O<=15;O++)if(Se<<=1,(Se-=Ce[O])<0)return-1;if(0<Se&&(0===V||1!==M))return-1;for(Ee[1]=0,O=1;O<15;O++)Ee[O+1]=Ee[O]+Ce[O];for(J=0;J<_;J++)0!==A[k+J]&&(E[Ee[A[k+J]]++]=J);if(Z=0===V?(Y=rt=E,19):1===V?(Y=w,Ue-=257,rt=g,_t-=257,256):(Y=N,rt=u,-1),O=m,ie=b,Ie=J=ee=0,H=-1,K=(Oe=1<<(R=ue))-1,1===V&&852<Oe||2===V&&592<Oe)return 1;for(;;){for(me=O-Ie,_e=E[J]<Z?(ne=0,E[J]):E[J]>Z?(ne=rt[_t+E[J]],Y[Ue+E[J]]):(ne=96,0),S=1<<O-Ie,m=I=1<<R;o[ie+(ee>>Ie)+(I-=S)]=me<<24|ne<<16|_e,0!==I;);for(S=1<<O-1;ee&S;)S>>=1;if(0!==S?(ee&=S-1,ee+=S):ee=0,J++,0==--Ce[O]){if(O===M)break;O=A[k+E[J]]}if(ue<O&&(ee&K)!==H){for(0===Ie&&(Ie=ue),ie+=m,Se=1<<(R=O-Ie);R+Ie<M&&!((Se-=Ce[R+Ie])<=0);)R++,Se<<=1;if(Oe+=1<<R,1===V&&852<Oe||2===V&&592<Oe)return 1;o[H=ee&K]=ue<<24|R<<16|ie-b}}return 0!==ee&&(o[ie+ee]=O-Ie<<24|64<<16),v.bits=ue,0}},{"../utils/common":41}],51:[function(U,L,n){"use strict";L.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(U,L,n){"use strict";var c=U("../utils/common");function N(x){for(var C=x.length;0<=--C;)x[C]=0}var A=256,k=286,_=30,E=15,v=16,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],me=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ve=new Array(576);N(Ve);var O=new Array(60);N(O);var J=new Array(512);N(J);var m=new Array(256);N(m);var M=new Array(29);N(M);var ue,R,Ie,Se=new Array(_);function Oe(x,C,W,F,T){this.static_tree=x,this.extra_bits=C,this.extra_base=W,this.elems=F,this.max_length=T,this.has_stree=x&&x.length}function ee(x,C){this.dyn_tree=x,this.max_code=0,this.stat_desc=C}function Y(x){return x<256?J[x]:J[256+(x>>>7)]}function Ue(x,C){x.pending_buf[x.pending++]=255&C,x.pending_buf[x.pending++]=C>>>8&255}function Ce(x,C,W){x.bi_valid>v-W?(x.bi_buf|=C<<x.bi_valid&65535,Ue(x,x.bi_buf),x.bi_buf=C>>v-x.bi_valid,x.bi_valid+=W-v):(x.bi_buf|=C<<x.bi_valid&65535,x.bi_valid+=W)}function Ee(x,C,W){Ce(x,W[2*C],W[2*C+1])}function rt(x,C){for(var W=0;W|=1&x,x>>>=1,W<<=1,0<--C;);return W>>>1}function _t(x,C,W){var F,T,re=new Array(E+1),z=0;for(F=1;F<=E;F++)re[F]=z=z+W[F-1]<<1;for(T=0;T<=C;T++){var $=x[2*T+1];0!==$&&(x[2*T]=rt(re[$]++,$))}}function Ge(x){var C;for(C=0;C<k;C++)x.dyn_ltree[2*C]=0;for(C=0;C<_;C++)x.dyn_dtree[2*C]=0;for(C=0;C<19;C++)x.bl_tree[2*C]=0;x.dyn_ltree[512]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Ye(x){8<x.bi_valid?Ue(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function vt(x,C,W,F){var T=2*C,re=2*W;return x[T]<x[re]||x[T]===x[re]&&F[C]<=F[W]}function at(x,C,W){for(var F=x.heap[W],T=W<<1;T<=x.heap_len&&(T<x.heap_len&&vt(C,x.heap[T+1],x.heap[T],x.depth)&&T++,!vt(C,F,x.heap[T],x.depth));)x.heap[W]=x.heap[T],W=T,T<<=1;x.heap[W]=F}function Nt(x,C,W){var F,T,re,z,$=0;if(0!==x.last_lit)for(;F=x.pending_buf[x.d_buf+2*$]<<8|x.pending_buf[x.d_buf+2*$+1],T=x.pending_buf[x.l_buf+$],$++,0===F?Ee(x,T,C):(Ee(x,(re=m[T])+A+1,C),0!==(z=Z[re])&&Ce(x,T-=M[re],z),Ee(x,re=Y(--F),W),0!==(z=me[re])&&Ce(x,F-=Se[re],z)),$<x.last_lit;);Ee(x,256,C)}function Et(x,C){var W,F,T,re=C.dyn_tree,z=C.stat_desc.static_tree,$=C.stat_desc.has_stree,ce=C.stat_desc.elems,Pe=-1;for(x.heap_len=0,x.heap_max=573,W=0;W<ce;W++)0!==re[2*W]?(x.heap[++x.heap_len]=Pe=W,x.depth[W]=0):re[2*W+1]=0;for(;x.heap_len<2;)re[2*(T=x.heap[++x.heap_len]=Pe<2?++Pe:0)]=1,x.depth[T]=0,x.opt_len--,$&&(x.static_len-=z[2*T+1]);for(C.max_code=Pe,W=x.heap_len>>1;1<=W;W--)at(x,re,W);for(T=ce;W=x.heap[1],x.heap[1]=x.heap[x.heap_len--],at(x,re,1),F=x.heap[1],x.heap[--x.heap_max]=W,x.heap[--x.heap_max]=F,re[2*T]=re[2*W]+re[2*F],x.depth[T]=(x.depth[W]>=x.depth[F]?x.depth[W]:x.depth[F])+1,re[2*W+1]=re[2*F+1]=T,x.heap[1]=T++,at(x,re,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(Ke,Mt){var vs,Be,gi,it,ut,na,Ct=Mt.dyn_tree,ra=Mt.max_code,X=Mt.stat_desc.static_tree,Xc=Mt.stat_desc.has_stree,Tl=Mt.stat_desc.extra_bits,aa=Mt.stat_desc.extra_base,ws=Mt.stat_desc.max_length,ot=0;for(it=0;it<=E;it++)Ke.bl_count[it]=0;for(Ct[2*Ke.heap[Ke.heap_max]+1]=0,vs=Ke.heap_max+1;vs<573;vs++)ws<(it=Ct[2*Ct[2*(Be=Ke.heap[vs])+1]+1]+1)&&(it=ws,ot++),Ct[2*Be+1]=it,ra<Be||(Ke.bl_count[it]++,ut=0,aa<=Be&&(ut=Tl[Be-aa]),Ke.opt_len+=(na=Ct[2*Be])*(it+ut),Xc&&(Ke.static_len+=na*(X[2*Be+1]+ut)));if(0!==ot){do{for(it=ws-1;0===Ke.bl_count[it];)it--;Ke.bl_count[it]--,Ke.bl_count[it+1]+=2,Ke.bl_count[ws]--,ot-=2}while(0<ot);for(it=ws;0!==it;it--)for(Be=Ke.bl_count[it];0!==Be;)ra<(gi=Ke.heap[--vs])||(Ct[2*gi+1]!==it&&(Ke.opt_len+=(it-Ct[2*gi+1])*Ct[2*gi],Ct[2*gi+1]=it),Be--)}}(x,C),_t(re,Pe,x.bl_count)}function f(x,C,W){var F,T,re=-1,z=C[1],$=0,ce=7,Pe=4;for(0===z&&(ce=138,Pe=3),C[2*(W+1)+1]=65535,F=0;F<=W;F++)T=z,z=C[2*(F+1)+1],++$<ce&&T===z||($<Pe?x.bl_tree[2*T]+=$:0!==T?(T!==re&&x.bl_tree[2*T]++,x.bl_tree[32]++):$<=10?x.bl_tree[34]++:x.bl_tree[36]++,re=T,Pe=($=0)===z?(ce=138,3):T===z?(ce=6,3):(ce=7,4))}function oe(x,C,W){var F,T,re=-1,z=C[1],$=0,ce=7,Pe=4;for(0===z&&(ce=138,Pe=3),F=0;F<=W;F++)if(T=z,z=C[2*(F+1)+1],!(++$<ce&&T===z)){if($<Pe)for(;Ee(x,T,x.bl_tree),0!=--$;);else 0!==T?(T!==re&&(Ee(x,T,x.bl_tree),$--),Ee(x,16,x.bl_tree),Ce(x,$-3,2)):$<=10?(Ee(x,17,x.bl_tree),Ce(x,$-3,3)):(Ee(x,18,x.bl_tree),Ce(x,$-11,7));re=T,Pe=($=0)===z?(ce=138,3):T===z?(ce=6,3):(ce=7,4)}}N(Se);var se=!1;function P(x,C,W,F){var T,re,z;Ce(x,0+(F?1:0),3),re=C,z=W,Ye(T=x),Ue(T,z),Ue(T,~z),c.arraySet(T.pending_buf,T.window,re,z,T.pending),T.pending+=z}n._tr_init=function(x){se||(function(){var C,W,F,T,re,z=new Array(E+1);for(T=F=0;T<28;T++)for(M[T]=F,C=0;C<1<<Z[T];C++)m[F++]=T;for(m[F-1]=T,T=re=0;T<16;T++)for(Se[T]=re,C=0;C<1<<me[T];C++)J[re++]=T;for(re>>=7;T<_;T++)for(Se[T]=re<<7,C=0;C<1<<me[T]-7;C++)J[256+re++]=T;for(W=0;W<=E;W++)z[W]=0;for(C=0;C<=143;)Ve[2*C+1]=8,C++,z[8]++;for(;C<=255;)Ve[2*C+1]=9,C++,z[9]++;for(;C<=279;)Ve[2*C+1]=7,C++,z[7]++;for(;C<=287;)Ve[2*C+1]=8,C++,z[8]++;for(_t(Ve,287,z),C=0;C<_;C++)O[2*C+1]=5,O[2*C]=rt(C,5);ue=new Oe(Ve,Z,257,k,E),R=new Oe(O,me,0,_,E),Ie=new Oe(new Array(0),ne,0,19,7)}(),se=!0),x.l_desc=new ee(x.dyn_ltree,ue),x.d_desc=new ee(x.dyn_dtree,R),x.bl_desc=new ee(x.bl_tree,Ie),x.bi_buf=0,x.bi_valid=0,Ge(x)},n._tr_stored_block=P,n._tr_flush_block=function(x,C,W,F){var T,re,z=0;0<x.level?(2===x.strm.data_type&&(x.strm.data_type=function($){var ce,Pe=4093624447;for(ce=0;ce<=31;ce++,Pe>>>=1)if(1&Pe&&0!==$.dyn_ltree[2*ce])return 0;if(0!==$.dyn_ltree[18]||0!==$.dyn_ltree[20]||0!==$.dyn_ltree[26])return 1;for(ce=32;ce<A;ce++)if(0!==$.dyn_ltree[2*ce])return 1;return 0}(x)),Et(x,x.l_desc),Et(x,x.d_desc),z=function($){var ce;for(f($,$.dyn_ltree,$.l_desc.max_code),f($,$.dyn_dtree,$.d_desc.max_code),Et($,$.bl_desc),ce=18;3<=ce&&0===$.bl_tree[2*_e[ce]+1];ce--);return $.opt_len+=3*(ce+1)+5+5+4,ce}(x),(re=x.static_len+3+7>>>3)<=(T=x.opt_len+3+7>>>3)&&(T=re)):T=re=W+5,W+4<=T&&-1!==C?P(x,C,W,F):4===x.strategy||re===T?(Ce(x,2+(F?1:0),3),Nt(x,Ve,O)):(Ce(x,4+(F?1:0),3),function($,ce,Pe,Ke){var Mt;for(Ce($,ce-257,5),Ce($,Pe-1,5),Ce($,Ke-4,4),Mt=0;Mt<Ke;Mt++)Ce($,$.bl_tree[2*_e[Mt]+1],3);oe($,$.dyn_ltree,ce-1),oe($,$.dyn_dtree,Pe-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,z+1),Nt(x,x.dyn_ltree,x.dyn_dtree)),Ge(x),F&&Ye(x)},n._tr_tally=function(x,C,W){return x.pending_buf[x.d_buf+2*x.last_lit]=C>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&C,x.pending_buf[x.l_buf+x.last_lit]=255&W,x.last_lit++,0===C?x.dyn_ltree[2*W]++:(x.matches++,C--,x.dyn_ltree[2*(m[W]+A+1)]++,x.dyn_dtree[2*Y(C)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){var C;Ce(x,2,3),Ee(x,256,Ve),16===(C=x).bi_valid?(Ue(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}},{"../utils/common":41}],53:[function(U,L,n){"use strict";L.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(U,L,n){(function(c){!function(w,g){"use strict";if(!w.setImmediate){var N,u,V,A,k=1,_={},o=!1,b=w.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(w);E=E&&E.setTimeout?E:w,N="[object process]"==={}.toString.call(w.process)?function(H){process.nextTick(function(){S(H)})}:function(){if(w.postMessage&&!w.importScripts){var H=!0,K=w.onmessage;return w.onmessage=function(){H=!1},w.postMessage("","*"),w.onmessage=K,H}}()?(A="setImmediate$"+Math.random()+"$",w.addEventListener?w.addEventListener("message",I,!1):w.attachEvent("onmessage",I),function(H){w.postMessage(A+H,"*")}):w.MessageChannel?((V=new MessageChannel).port1.onmessage=function(H){S(H.data)},function(H){V.port2.postMessage(H)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(H){var K=b.createElement("script");K.onreadystatechange=function(){S(H),K.onreadystatechange=null,u.removeChild(K),K=null},u.appendChild(K)}):function(H){setTimeout(S,0,H)},E.setImmediate=function(H){"function"!=typeof H&&(H=new Function(""+H));for(var K=new Array(arguments.length-1),ie=0;ie<K.length;ie++)K[ie]=arguments[ie+1];return _[k]={callback:H,args:K},N(k),k++},E.clearImmediate=v}function v(H){delete _[H]}function S(H){if(o)setTimeout(S,0,H);else{var K=_[H];if(K){o=!0;try{!function(ie){var Z=ie.callback,me=ie.args;switch(me.length){case 0:Z();break;case 1:Z(me[0]);break;case 2:Z(me[0],me[1]);break;case 3:Z(me[0],me[1],me[2]);break;default:Z.apply(g,me)}}(K)}finally{v(H),o=!1}}}}function I(H){H.source===w&&"string"==typeof H.data&&0===H.data.indexOf(A)&&S(+H.data.slice(A.length))}}(typeof self>"u"?void 0===c?this:c:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)},153:(nt,U)=>{"use strict";class c{static isArrayBuffer(v){return"[object ArrayBuffer]"===Object.prototype.toString.call(v)}static toArrayBuffer(v){return this.isArrayBuffer(v)?v:v.byteLength===v.buffer.byteLength||0===v.byteOffset&&v.byteLength===v.buffer.byteLength?v.buffer:this.toUint8Array(v.buffer).slice(v.byteOffset,v.byteOffset+v.byteLength).buffer}static toUint8Array(v){return this.toView(v,Uint8Array)}static toView(v,S){if(v.constructor===S)return v;if(this.isArrayBuffer(v))return new S(v);if(this.isArrayBufferView(v))return new S(v.buffer,v.byteOffset,v.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(v){return this.isArrayBufferView(v)||this.isArrayBuffer(v)}static isArrayBufferView(v){return ArrayBuffer.isView(v)||v&&this.isArrayBuffer(v.buffer)}static isEqual(v,S){const I=c.toUint8Array(v),H=c.toUint8Array(S);if(I.length!==H.byteLength)return!1;for(let K=0;K<I.length;K++)if(I[K]!==H[K])return!1;return!0}static concat(...v){let S;S=Array.isArray(v[0])&&!(v[1]instanceof Function)||Array.isArray(v[0])&&v[1]instanceof Function?v[0]:v[v.length-1]instanceof Function?v.slice(0,v.length-1):v;let I=0;for(const ie of S)I+=ie.byteLength;const H=new Uint8Array(I);let K=0;for(const ie of S){const Z=this.toUint8Array(ie);H.set(Z,K),K+=Z.length}return v[v.length-1]instanceof Function?this.toView(H,v[v.length-1]):H.buffer}}const w="string",g=/^[0-9a-f]+$/i,N=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,u=/^[a-zA-Z0-9-_]+$/;class V{static fromString(v){const S=unescape(encodeURIComponent(v)),I=new Uint8Array(S.length);for(let H=0;H<S.length;H++)I[H]=S.charCodeAt(H);return I.buffer}static toString(v){const S=c.toUint8Array(v);let I="";for(let K=0;K<S.length;K++)I+=String.fromCharCode(S[K]);return decodeURIComponent(escape(I))}}class A{static toString(v,S=!1){const I=c.toArrayBuffer(v),H=new DataView(I);let K="";for(let ie=0;ie<I.byteLength;ie+=2){const Z=H.getUint16(ie,S);K+=String.fromCharCode(Z)}return K}static fromString(v,S=!1){const I=new ArrayBuffer(2*v.length),H=new DataView(I);for(let K=0;K<v.length;K++)H.setUint16(2*K,v.charCodeAt(K),S);return I}}let k=(()=>{class E{static isHex(S){return typeof S===w&&g.test(S)}static isBase64(S){return typeof S===w&&N.test(S)}static isBase64Url(S){return typeof S===w&&u.test(S)}static ToString(S,I="utf8"){const H=c.toUint8Array(S);switch(I.toLowerCase()){case"utf8":return this.ToUtf8String(H);case"binary":return this.ToBinary(H);case"hex":return this.ToHex(H);case"base64":return this.ToBase64(H);case"base64url":return this.ToBase64Url(H);case"utf16le":return A.toString(H,!0);case"utf16":case"utf16be":return A.toString(H);default:throw new Error(`Unknown type of encoding '${I}'`)}}static FromString(S,I="utf8"){if(!S)return new ArrayBuffer(0);switch(I.toLowerCase()){case"utf8":return this.FromUtf8String(S);case"binary":return this.FromBinary(S);case"hex":return this.FromHex(S);case"base64":return this.FromBase64(S);case"base64url":return this.FromBase64Url(S);case"utf16le":return A.fromString(S,!0);case"utf16":case"utf16be":return A.fromString(S);default:throw new Error(`Unknown type of encoding '${I}'`)}}static ToBase64(S){const I=c.toUint8Array(S);if(typeof btoa<"u"){const H=this.ToString(I,"binary");return btoa(H)}return Buffer.from(I).toString("base64")}static FromBase64(S){const I=this.formatString(S);if(!I)return new ArrayBuffer(0);if(!E.isBase64(I))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(I)):new Uint8Array(Buffer.from(I,"base64")).buffer}static FromBase64Url(S){const I=this.formatString(S);if(!I)return new ArrayBuffer(0);if(!E.isBase64Url(I))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(I.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(S){return this.ToBase64(S).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(S,I=E.DEFAULT_UTF8_ENCODING){switch(I){case"ascii":return this.FromBinary(S);case"utf8":return V.fromString(S);case"utf16":case"utf16be":return A.fromString(S);case"utf16le":case"usc2":return A.fromString(S,!0);default:throw new Error(`Unknown type of encoding '${I}'`)}}static ToUtf8String(S,I=E.DEFAULT_UTF8_ENCODING){switch(I){case"ascii":return this.ToBinary(S);case"utf8":return V.toString(S);case"utf16":case"utf16be":return A.toString(S);case"utf16le":case"usc2":return A.toString(S,!0);default:throw new Error(`Unknown type of encoding '${I}'`)}}static FromBinary(S){const I=S.length,H=new Uint8Array(I);for(let K=0;K<I;K++)H[K]=S.charCodeAt(K);return H.buffer}static ToBinary(S){const I=c.toUint8Array(S);let H="";for(let K=0;K<I.length;K++)H+=String.fromCharCode(I[K]);return H}static ToHex(S){const I=c.toUint8Array(S);let H="";const K=I.length;for(let ie=0;ie<K;ie++){const Z=I[ie];Z<16&&(H+="0"),H+=Z.toString(16)}return H}static FromHex(S){let I=this.formatString(S);if(!I)return new ArrayBuffer(0);if(!E.isHex(I))throw new TypeError("Argument 'hexString' is not HEX encoded");I.length%2&&(I=`0${I}`);const H=new Uint8Array(I.length/2);for(let K=0;K<I.length;K+=2){const ie=I.slice(K,K+2);H[K/2]=parseInt(ie,16)}return H.buffer}static ToUtf16String(S,I=!1){return A.toString(S,I)}static FromUtf16String(S,I=!1){return A.fromString(S,I)}static Base64Padding(S){const I=4-S.length%4;if(I<4)for(let H=0;H<I;H++)S+="=";return S}static formatString(S){return S?.replace(/[\n\r\t ]/g,"")||""}}return E.DEFAULT_UTF8_ENCODING="utf8",E})();U._H=c,U.U$=k},4623:(nt,U,L)=>{"use strict";L.d(U,{o:()=>w});const w=["check",(0,L(5930).s)({outline:'<path d="M13.72,27.69,3.29,17.27a1,1,0,0,1,1.41-1.41l9,9L31.29,7.29a1,1,0,0,1,1.41,1.41Z"/>'})]},357:(nt,U,L)=>{"use strict";L.d(U,{V:()=>w});const w=["help-info",(0,L(5930).s)({outline:'<path d="M25.39,25.45a1,1,0,0,0-1.38.29c-1.41,2.16-4,4.81-6.31,5.7s-4.12.57-4.84,0c-.31-.27-1.12-1-.43-3.49.46-1.66,3.32-9.48,4-11.38l-2.18.28c-.69,1.86-3.29,8.84-3.76,10.58-.68,2.49-.34,4.3,1.09,5.56A5.59,5.59,0,0,0,15,34a9.53,9.53,0,0,0,3.45-.7c2.79-1.09,5.72-4.12,7.26-6.47A1,1,0,0,0,25.39,25.45Z"/><path d="M19.3,11a4.5,4.5,0,1,0-4.5-4.5A4.5,4.5,0,0,0,19.3,11Zm0-7a2.5,2.5,0,1,1-2.5,2.5A2.5,2.5,0,0,1,19.3,4Z"/><path d="M11.81,15c.06,0,6.27-.82,7.73-1,.65-.1,1.14,0,1.3.15s.21.8-.07,1.68c-.61,1.86-3.69,11-4.59,13.71a8,8,0,0,0,1.29-.38,7.32,7.32,0,0,0,1.15-.6C19.85,25,22.15,18.1,22.67,16.52s.39-2.78-.3-3.6a3.16,3.16,0,0,0-3.08-.83c-1.43.15-7.47.94-7.73,1a1,1,0,0,0,.26,2Z"/>',solid:'<circle cx="20.75" cy="6" r="4"/><path d="M24.84,26.23a1,1,0,0,0-1.4.29,16.6,16.6,0,0,1-3.51,3.77c-.33.25-1.56,1.2-2.08,1-.36-.11-.15-.82-.08-1.12l.53-1.57c.22-.64,4.05-12,4.47-13.3.62-1.9.35-3.77-2.48-3.32-.77.08-8.58,1.09-8.72,1.1a1,1,0,0,0,.13,2s3-.39,3.33-.42a.88.88,0,0,1,.85.44,2.47,2.47,0,0,1-.07,1.71c-.26,1-4.37,12.58-4.5,13.25a2.78,2.78,0,0,0,1.18,3,5,5,0,0,0,3.08.83h0a8.53,8.53,0,0,0,3.09-.62c2.49-1,5.09-3.66,6.46-5.75A1,1,0,0,0,24.84,26.23Z"/>'})]},7949:(nt,U,L)=>{"use strict";L.d(U,{Q:()=>w});const w=["layers",(0,L(5930).s)({outline:'<path d="M18,20.25a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,0-1.81l15-7.09a1,1,0,0,1,.85,0l15,7.09a1,1,0,0,1,0,1.81l-15,7.09A1,1,0,0,1,18,20.25ZM5.34,12.16l12.66,6,12.66-6L18,6.18Z"/><path d="M18,26.16a1,1,0,0,1-.43-.1L2.57,19a1,1,0,1,1,.85-1.81L18,24.06l14.57-6.89A1,1,0,1,1,33.43,19l-15,7.09A1,1,0,0,1,18,26.16Z"/><path d="M18,32.07a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,.85-1.81L18,30l14.57-6.89a1,1,0,1,1,.85,1.81L18.43,32A1,1,0,0,1,18,32.07Z"/>',solid:'<path d="M18,20.25a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,0-1.81l15-7.09a1,1,0,0,1,.85,0l15,7.09a1,1,0,0,1,0,1.81l-15,7.09A1,1,0,0,1,18,20.25Z"/><path d="M18,26.16a1,1,0,0,1-.43-.1L2.57,19a1,1,0,1,1,.85-1.81L18,24.06l14.57-6.89A1,1,0,1,1,33.43,19l-15,7.09A1,1,0,0,1,18,26.16Z"/><path d="M18,32.07a1,1,0,0,1-.43-.1l-15-7.09a1,1,0,0,1,.85-1.81L18,30l14.57-6.89a1,1,0,1,1,.85,1.81L18.43,32A1,1,0,0,1,18,32.07Z"/>'})]},6156:(nt,U,L)=>{"use strict";L.d(U,{h:()=>w});const w=["lock",(0,L(5930).s)({outline:'<path d="M18.09,20.59A2.41,2.41,0,0,0,17,25.14V28h2V25.23a2.41,2.41,0,0,0-.91-4.64Z"/><path d="M26,15V10.72a8.2,8.2,0,0,0-8-8.36,8.2,8.2,0,0,0-8,8.36V15H7V32a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V15ZM12,10.72a6.2,6.2,0,0,1,6-6.36,6.2,6.2,0,0,1,6,6.36V15H12ZM9,32V17H27V32Z"/>',solid:'<path d="M26,15V10.72a8.2,8.2,0,0,0-8-8.36,8.2,8.2,0,0,0-8,8.36V15H7V32a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V15ZM19,25.23V28H17V25.14a2.4,2.4,0,1,1,2,.09ZM24,15H12V10.72a6.2,6.2,0,0,1,6-6.36,6.2,6.2,0,0,1,6,6.36Z"/>'})]},7537:(nt,U,L)=>{"use strict";L.d(U,{t:()=>w});const w=["network-globe",(0,L(5930).s)({outline:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M17.75,2a14,14,0,0,0-14,14c0,.45,0,.89.07,1.33l0,0h0A14,14,0,1,0,17.75,2Zm0,2a12,12,0,0,1,8.44,3.48c0,.33,0,.66,0,1A18.51,18.51,0,0,0,14,8.53a2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92,11.92,0,0,1,17.75,4Zm-3,5.87A17,17,0,0,1,25.92,10a16.9,16.9,0,0,1-3.11,7,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77Zm-4-3.6c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Zm6.51-8.9a2.33,2.33,0,0,0-.33-1.19,18.4,18.4,0,0,0,3.39-7.37q.75.35,1.48.78a12,12,0,0,1,.42,8.2A16,16,0,0,1,24.27,19.11Z"/>',outlineAlerted:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.73,15.4h-2c0,.2,0,.4,0,.61a12,12,0,0,1-.53,3.52,16,16,0,0,1-5-.41,2.33,2.33,0,0,0-.33-1.19,18.87,18.87,0,0,0,1.62-2.52H23.83a17.29,17.29,0,0,1-1,1.54,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77A17.08,17.08,0,0,1,19.56,9l.87-1.51a18.59,18.59,0,0,0-6.39,1,2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.88,11.88,0,0,1,22,4.79L23,3A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0A14,14,0,0,0,31.76,16C31.76,15.8,31.74,15.6,31.73,15.4Zm-21-9.13c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Z"/>',outlineBadged:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.5,13.35a7.54,7.54,0,0,1-1.5.15l-.51,0a11.91,11.91,0,0,1-.25,6,16,16,0,0,1-5-.41,2.33,2.33,0,0,0-.33-1.19,18.59,18.59,0,0,0,2.78-5.18,7.49,7.49,0,0,1-1.31-.82,17,17,0,0,1-2.61,5,2.28,2.28,0,0,0-2.58.57c-.35-.2-.7-.4-1-.63a16,16,0,0,1-4.93-5.23,2.25,2.25,0,0,0,.47-1.77,17,17,0,0,1,8.53-.62,7.43,7.43,0,0,1-.56-1.59A18.56,18.56,0,0,0,14,8.53a2.33,2.33,0,0,0-1.14-.61l-.25,0c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92,11.92,0,0,1,22.57,5a7.45,7.45,0,0,1,.53-2A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0a14,14,0,1,0,27.68-4ZM10.76,6.27c0,.21.06.43.1.64.09.44.21.87.33,1.3a2.28,2.28,0,0,0-1.1,2.25A18.32,18.32,0,0,0,5.9,14.22,12,12,0,0,1,10.76,6.27Zm0,15.71A2.34,2.34,0,0,0,9.2,23.74l-.64,0A11.94,11.94,0,0,1,5.8,16.92l.11-.19a16.9,16.9,0,0,1,4.81-4.89,2.31,2.31,0,0,0,2.28.63,17.53,17.53,0,0,0,5.35,5.65c.41.27.83.52,1.25.76A2.32,2.32,0,0,0,19.78,20a16.94,16.94,0,0,1-6.2,3.11A2.34,2.34,0,0,0,10.76,22Zm7,6a11.92,11.92,0,0,1-5.81-1.51l.28-.06a2.34,2.34,0,0,0,1.57-1.79,18.43,18.43,0,0,0,7-3.5,2.29,2.29,0,0,0,3-.62,17.41,17.41,0,0,0,4.32.56l.53,0A12,12,0,0,1,17.75,28Z"/>',solid:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M14.72,9.87a2.25,2.25,0,0,1-.47,1.77,16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,16.9,16.9,0,0,0,3.11-7A17,17,0,0,0,14.72,9.87Z"/><path d="M17.75,2a14,14,0,0,0-14,14c0,.45,0,.89.07,1.33l0,0h0A14,14,0,1,0,17.75,2ZM28.1,21.09a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.51,18.51,0,0,1,12.11-.07c0-.32,0-.65,0-1h0a12,12,0,0,1,2.62,3.85h0q-.73-.43-1.48-.78a18.4,18.4,0,0,1-3.39,7.37,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53Z"/>',solidAlerted:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.73,15.4H25.56a18.87,18.87,0,0,1-1.62,2.52,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53H28.1a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.59,18.59,0,0,1,6.39-1L23,3A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0A14,14,0,0,0,31.76,16C31.76,15.8,31.74,15.6,31.73,15.4Z"/><path d="M14.26,11.64a16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,17.29,17.29,0,0,0,1-1.54h-1.6A3.68,3.68,0,0,1,19,9.89L19.56,9a17.08,17.08,0,0,0-4.84.88,2.25,2.25,0,0,1-.47,1.77Z"/>',solidBadged:'<path d="M26.58,32h-18a1,1,0,1,0,0,2h18a1,1,0,0,0,0-2Z"/><path d="M31.5,13.35a7.54,7.54,0,0,1-1.5.15,7.46,7.46,0,0,1-3.28-.76,18.59,18.59,0,0,1-2.78,5.18,2.33,2.33,0,0,1,.33,1.19,22,22,0,0,0,5,.45,11.88,11.88,0,0,1-.61,1.53H28.1a17.41,17.41,0,0,1-4.32-.56,2.29,2.29,0,0,1-3,.62,18.43,18.43,0,0,1-7,3.5,2.34,2.34,0,0,1-1.57,1.79l-.29.06a11.93,11.93,0,0,1-3.39-2.8l.66,0a2.33,2.33,0,0,1,4.37-.58A16.94,16.94,0,0,0,19.78,20a2.32,2.32,0,0,1-.18-1.17c-.42-.24-.84-.49-1.25-.76A17.53,17.53,0,0,1,13,12.47a2.31,2.31,0,0,1-2.28-.63,27.31,27.31,0,0,0-5,4.74c0-.2,0-.39,0-.57a12,12,0,0,1,.14-1.73,18.75,18.75,0,0,1,4.2-3.8,2.28,2.28,0,0,1,1.1-2.25c-.12-.43-.24-.86-.33-1.3,0-.14,0-.29-.11-.64a12,12,0,0,1,1.37-.87c.1.59.14.9.21,1.21s.2.85.32,1.27l.25,0A2.33,2.33,0,0,1,14,8.53a18.56,18.56,0,0,1,8.65-.87,7.45,7.45,0,0,1,.41-4.59A14,14,0,0,0,3.75,16c0,.45,0,.89.07,1.33l0,0h0a14,14,0,1,0,27.68-4Z"/><path d="M14.72,9.87a2.25,2.25,0,0,1-.47,1.77,16,16,0,0,0,4.93,5.23c.34.23.69.43,1,.63a2.28,2.28,0,0,1,2.58-.57,17,17,0,0,0,2.61-5,7.52,7.52,0,0,1-2.16-2.67A17,17,0,0,0,14.72,9.87Z"/>'})]}}]);